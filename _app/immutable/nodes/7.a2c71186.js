import{a7 as yi,a8 as ti,S as si,i as ni,s as ui,k as o,q as n,a as d,l,m as r,r as u,h as t,c as f,n as y,b as s,G as a,U as ai,N as vi,u as xl,g as ye,v as oi,d as ze,f as li,I as bi,o as wi,W as Al,a9 as Ze,H as _i,y as hi,z as di,A as fi,B as pi}from"../chunks/index.ebd1f5b7.js";import{_ as Ti}from"../chunks/preload-helper.41c905a7.js";import{w as Ei}from"../chunks/index.b06dc8da.js";import{S as gi}from"../chunks/Showcase.f4f8cb93.js";function ki(T){const h=T-1;return h*h*h+1}function Oa(T,{delay:h=0,duration:m=400,easing:v=yi}={}){const b=+getComputedStyle(T).opacity;return{delay:h,duration:m,easing:v,css:p=>`opacity: ${p*b}`}}function ri(T,{delay:h=0,duration:m=400,easing:v=ki,x:b=0,y:p=0,opacity:c=0}={}){const w=getComputedStyle(T),g=+w.opacity,P=w.transform==="none"?"":w.transform,S=g*(1-c),[M,_]=ti(b),[L,x]=ti(p);return{delay:h,duration:m,easing:v,css:(B,j)=>`
			transform: ${P} translate(${(1-B)*M}${_}, ${(1-B)*L}${x});
			opacity: ${g-S*j}`}}function ii(T){let h,m,v=T[4].toLocaleDateString("en",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"})+"",b,p,c;return{c(){h=o("div"),m=o("span"),b=n(v),this.h()},l(w){h=l(w,"DIV",{class:!0});var g=r(h);m=l(g,"SPAN",{class:!0});var P=r(m);b=u(P,v),P.forEach(t),g.forEach(t),this.h()},h(){y(m,"class","align-middle text-xs"),y(h,"class","pointer-events-none absolute top-1/2 -translate-y-1/2 h-6 right-3 px-4 sm:flex items-center shadow-sm bg-indigo-600 rounded-full hidden text-white")},m(w,g){s(w,h,g),a(h,m),a(m,b),c=!0},p(w,g){(!c||g&16)&&v!==(v=w[4].toLocaleDateString("en",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"})+"")&&xl(b,v)},i(w){c||(Al(()=>{c&&(p||(p=Ze(h,ri,{x:10,duration:100},!0)),p.run(1))}),c=!0)},o(w){p||(p=Ze(h,ri,{x:10,duration:100},!1)),p.run(0),c=!1},d(w){w&&t(h),w&&p&&p.end()}}}function Ii(T){let h,m,v,b;return{c(){h=o("span"),m=n("Please enter a time and date"),this.h()},l(p){h=l(p,"SPAN",{class:!0});var c=r(h);m=u(c,"Please enter a time and date"),c.forEach(t),this.h()},h(){y(h,"class","text-xs opacity-75 absolute left-0 top-2")},m(p,c){s(p,h,c),a(h,m),b=!0},p:_i,i(p){b||(Al(()=>{b&&(v||(v=Ze(h,Oa,{duration:100},!0)),v.run(1))}),b=!0)},o(p){v||(v=Ze(h,Oa,{duration:100},!1)),v.run(0),b=!1},d(p){p&&t(h),p&&v&&v.end()}}}function Li(T){let h,m=T[4].toLocaleDateString("en",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"})+"",v,b,p;return{c(){h=o("span"),v=n(m),this.h()},l(c){h=l(c,"SPAN",{class:!0});var w=r(h);v=u(w,m),w.forEach(t),this.h()},h(){y(h,"class","text-xs opacity-75 absolute left-0 top-2")},m(c,w){s(c,h,w),a(h,v),p=!0},p(c,w){(!p||w&16)&&m!==(m=c[4].toLocaleDateString("en",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"})+"")&&xl(v,m)},i(c){p||(Al(()=>{p&&(b||(b=Ze(h,Oa,{duration:100},!0)),b.run(1))}),p=!0)},o(c){b||(b=Ze(h,Oa,{duration:100},!1)),b.run(0),p=!1},d(c){c&&t(h),c&&b&&b.end()}}}function xi(T){let h,m,v,b,p,c,w,g,P,S,M,_,L,x,B,j,I=T[4]&&ii(T);const z=[Li,Ii],A=[];function ve(E,k){return E[4]?0:1}return _=ve(T),L=A[_]=z[_](T),{c(){h=o("div"),m=o("label"),v=n(T[2]),b=d(),p=o("div"),c=o("input"),P=d(),I&&I.c(),S=d(),M=o("div"),L.c(),this.h()},l(E){h=l(E,"DIV",{});var k=r(h);m=l(k,"LABEL",{for:!0,class:!0});var F=r(m);v=u(F,T[2]),F.forEach(t),b=f(k),p=l(k,"DIV",{class:!0});var R=r(p);c=l(R,"INPUT",{type:!0,name:!0,id:!0,placeholder:!0,class:!0}),P=f(R),I&&I.l(R),R.forEach(t),S=f(k),M=l(k,"DIV",{class:!0});var U=r(M);L.l(U),U.forEach(t),k.forEach(t),this.h()},h(){y(m,"for",T[0]),y(m,"class","block text-sm font-medium leading-6 text-gray-900 dark:text-white pointer-events-none"),y(c,"type","text"),y(c,"name",T[1]),y(c,"id",T[0]),y(c,"placeholder",w=T[5]?T[3]:"Loading Parser..."),c.disabled=g=!T[5],y(c,"class","block w-full rounded-md border-0 py-1.5 sm:pe-48 disabled:opacity-40 disabled:cursor-not-allowed dark:bg-white/5 pr-10 text-gray-900 dark:text-white ring-1 ring-inset ring-gray-300 dark:ring-white/10 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 dark:focus-within:ring-indigo-500 sm:text-sm sm:leading-6"),y(p,"class","relative mt-2 rounded-md shadow-sm"),y(M,"class","sm:hidden h-6 relative")},m(E,k){s(E,h,k),a(h,m),a(m,v),a(h,b),a(h,p),a(p,c),ai(c,T[6]),a(p,P),I&&I.m(p,null),a(h,S),a(h,M),A[_].m(M,null),x=!0,B||(j=vi(c,"input",T[8]),B=!0)},p(E,[k]){(!x||k&4)&&xl(v,E[2]),(!x||k&1)&&y(m,"for",E[0]),(!x||k&2)&&y(c,"name",E[1]),(!x||k&1)&&y(c,"id",E[0]),(!x||k&40&&w!==(w=E[5]?E[3]:"Loading Parser..."))&&y(c,"placeholder",w),(!x||k&32&&g!==(g=!E[5]))&&(c.disabled=g),k&64&&c.value!==E[6]&&ai(c,E[6]),E[4]?I?(I.p(E,k),k&16&&ye(I,1)):(I=ii(E),I.c(),ye(I,1),I.m(p,null)):I&&(oi(),ze(I,1,1,()=>{I=null}),li());let F=_;_=ve(E),_===F?A[_].p(E,k):(oi(),ze(A[F],1,1,()=>{A[F]=null}),li(),L=A[_],L?L.p(E,k):(L=A[_]=z[_](E),L.c()),ye(L,1),L.m(M,null))},i(E){x||(ye(I),ye(L),x=!0)},o(E){ze(I),ze(L),x=!1},d(E){E&&t(h),I&&I.d(),A[_].d(),B=!1,j()}}}function Ai(T,h,m){let v,{id:b="appointment-date"}=h,{name:p="appointment-date"}=h,{label:c="When would you like to meet?"}=h,{placeholder:w="In 2 days at 10am"}=h;const g=Ei("");bi(T,g,_=>m(6,v=_));let P=null,S=!1;wi(async()=>{const _=await Ti(()=>import("../chunks/index.486486e4.js"),["../chunks/index.486486e4.js","../chunks/_commonjsHelpers.725317a4.js"],import.meta.url);return m(5,S=!0),g.subscribe(x=>{m(4,P=_.parseDate(x))})});function M(){v=this.value,g.set(v)}return T.$$set=_=>{"id"in _&&m(0,b=_.id),"name"in _&&m(1,p=_.name),"label"in _&&m(2,c=_.label),"placeholder"in _&&m(3,w=_.placeholder)},[b,p,c,w,P,S,v,g,M]}class Di extends si{constructor(h){super(),ni(this,h,Ai,xi,ui,{id:0,name:1,label:2,placeholder:3})}}function Mi(T){let h,m;return h=new Di({}),{c(){hi(h.$$.fragment)},l(v){di(h.$$.fragment,v)},m(v,b){fi(h,v,b),m=!0},i(v){m||(ye(h.$$.fragment,v),m=!0)},o(v){ze(h.$$.fragment,v),m=!1},d(v){pi(h,v)}}}function Pi(T){let h,m,v,b,p,c,w,g,P,S,M,_,L,x,B,j,I,z,A,ve,E,k,F,R,U,Ht,be,Sa,Ct,W,$e,Ha,Ca,et,Ba,ja,tt,Ua,Fa,at,qa,Ra,ot,Na,Bt,we,Ja,jt,H,lt,Va,Qa,Z,Ya,rt,Ga,Ka,Xa,it,za,Za,st,$a,Ut,N,eo,J,to,ao,$,oo,V,lo,ro,Ft,ee,_e,io,qt,Te,so,Rt,te,Ee,no,Nt,ge,nt,uo,Jt,ae,ke,ho,Vt,Ie,fo,Qt,Le,po,Yt,xe,ut,mo,Gt,oe,Ae,co,Kt,De,yo,Xt,Q,vo,Me,bo,wo,zt,Pe,ht,_o,Zt,le,We,To,$t,Oe,Eo,ea,Se,go,ta,C,dt,ko,Io,ft,Lo,xo,pt,Ao,Do,mt,Mo,aa,He,Po,oa,Ce,Wo,la,Be,Oo,ra,je,So,ia,re,mi=`<code class="language-txt">The following text includes information about a calendar event.

"""
Meeting with John, Conference room 103 tomorrow 12:30 until five past two, bring the report &amp; wish Janine a happy birthday
"""

Fill in the following fields.
| Question | Answer |
| --- | --- |
| What is the title of the event? |  |
| What day  does it start? |  |
| What time does it start? |  |
| What day  does it end? |  |
| What time does it end? |  |
| Where is it? |  |
| Additional details (if applicable)? |  |


You do not need to format your answers in any particular way. 
The answers can be natural language.
If the information for one of the questions is not available leave it blank.</code>`,sa,Ue,Ho,na,Y,ct,ie,yt,Co,Bo,vt,jo,Uo,D,se,bt,Fo,qo,wt,Ro,No,ne,_t,Jo,Vo,Tt,Qo,Yo,ue,Et,Go,Ko,gt,Xo,zo,he,kt,Zo,$o,It,el,tl,de,Lt,al,ol,xt,ll,rl,fe,At,il,sl,Dt,nl,ul,pe,Mt,hl,dl,Pt,fl,ua,Fe,pl,ha,qe,ml,da,Re,Wt,cl,fa,Ne,yl,pa,me,Je,vl,ma,Ve,bl,ca,ce,Qe,wl,ya,G,Ye,Ge,_l,Tl,El,Ke,Xe,gl,kl,va;return U=new gi({props:{$$slots:{default:[Mi]},$$scope:{ctx:T}}}),{c(){h=o("h1"),m=o("a"),v=n("Fluent Inputs"),b=d(),p=o("p"),c=n("A few months ago, I stumbled accross Adam Silver’s article "),w=o("em"),g=o("a"),P=n("Designing A Time Input"),S=n(". In it he very persuasively argued that the ideal time input should be a single text input that accepts a wide range of formats. I followed his advice in a few projects and was very pleased with the results."),M=d(),_=o("h2"),L=o("a"),x=n("Down the Rabbit Hole and to the Prototype"),B=d(),j=o("p"),I=n("When I at some point needed a datetime input I decided to reuse the idea. A text field that allow all kinds of formats. But why just “12. July 2023”, why not “Tomorrow” or “Next Monday”. So I also added some special cases. But the slippery slope only started there. What about “Thursday in two weeks at noon”? My ambition soon exceeded my ability and patience, so I started looking for libraries."),z=d(),A=o("p"),ve=n("I found "),E=o("code"),k=n("chrono-node"),F=n(" which promised to do what I wanted. I used it to build the following prototype. Try it!"),R=d(),hi(U.$$.fragment),Ht=d(),be=o("p"),Sa=n("It’s functional, but there are some issues I observed while testing it on a few people."),Ct=d(),W=o("ol"),$e=o("li"),Ha=n("Users don’t trust that the input will understand them. They wait for feedback before moving on."),Ca=d(),et=o("li"),Ba=n("Result are often lost while typing. Typing “Mon”, will be recognised as monday, but “Mond” won’t be recognised anymore, even though the user is likely to continue typing “Monday”."),ja=d(),tt=o("li"),Ua=n("It fills in the blanks too liberally. If you say “In two days” it will fill in a time. This caused several users to enter incorrect values."),Fa=d(),at=o("li"),qa=n("Confusingly inconsistent. Some basic instructions are not recognised. “On the 12th” is not recognised, but “On the 12th of July” is."),Ra=d(),ot=o("li"),Na=n("Typing on mobile is annoying."),Bt=d(),we=o("p"),Ja=n("These problems are a mix of UX and implementation problems. They will all need to be fixed. But the idea did show some promise. There are some obvious advantages."),jt=d(),H=o("ol"),lt=o("li"),Va=n("Very expressive. The gap between what the user is thinking and what they need to type is much smaller."),Qa=d(),Z=o("li"),Ya=n("Works without JavaScript - Parsing can be done on the server as fallback "),rt=o("small"),Ga=n("(intentionally disabled in this demo)"),Ka=n("."),Xa=d(),it=o("li"),za=n("Dictation is easy. Dictation is becoming more and more popular, especially among former iPad babies that learned to browser YouTube before they learned to write."),Za=d(),st=o("li"),$a=n("Accessible. The input is read in a very natural way by screen readers."),Ut=d(),N=o("p"),eo=n("While I wouldn’t use the above input anywhere it’s a fine starting point to explore the idea of inputs that accept plain english. These are sometimes called “Natural Language Inputs”, but that could also refer to "),J=o("a"),to=n("this kind of input"),ao=n(". To avoid confusion, I’ll coin and use the term “Fluent Inputs”. "),$=o("small"),oo=n("("),V=o("a"),lo=n("obligatory xkcd 927"),ro=n(")"),Ft=d(),ee=o("h2"),_e=o("a"),io=n("Doing some Experiments"),qt=d(),Te=o("p"),so=n(`For now, I’m going to handwave away the parsing problem and focus on the UX.
I have a few ideas that I want to test.`),Rt=d(),te=o("h3"),Ee=o("a"),no=n("User Feedback Testing"),Nt=d(),ge=o("blockquote"),nt=o("p"),uo=n("TODO"),Jt=d(),ae=o("h3"),ke=o("a"),ho=n("Fluent Inputs as Infodumps"),Vt=d(),Ie=o("p"),fo=n("One idea I had is that a Text-Area could be used as an infodump, substituting a whole form. If the user knew what information was expected they could just type it in in a stream of consciousness style. This might be usefull for things like calendars, where the expected information is known, and the details might be copy-pasted from an email or website."),Qt=d(),Le=o("p"),po=n("Let’s test that."),Yt=d(),xe=o("blockquote"),ut=o("p"),mo=n("TODO"),Gt=d(),oe=o("h2"),Ae=o("a"),co=n("The Implementation Problem"),Kt=d(),De=o("p"),yo=n("I’ve side-stepped the actual implementation of the parser until now. That’s because I don’t have a good solution yet."),Xt=d(),Q=o("p"),vo=n("We have all the usuall "),Me=o("abbr"),bo=n("i18n"),wo=n(" problems. Different languages, different cultural expectations. These are always hard problem, but they are even harder to get right here."),zt=d(),Pe=o("blockquote"),ht=o("p"),_o=n("TODO"),Zt=d(),le=o("h3"),We=o("a"),To=n("What about LLMs?"),$t=d(),Oe=o("p"),Eo=n("Language Models are all the rage right now. They are very good at parsing natural language, so why not use them here?"),ea=d(),Se=o("p"),go=n("Well, they do have some limitations that (currently) hold them back from reliably parsing user inputs."),ta=d(),C=o("ol"),dt=o("li"),ko=n("They are slow. Ideally we would want to parse the input on every keystroke. Current LLMs aren’t fast enough for that."),Io=d(),ft=o("li"),Lo=n("Can’t run in the browser. Any parsing would need to happen on an external LLM server. This causes latency issues and privacy concerns (since the state is sent on each keystroke, not just at the end)."),xo=d(),pt=o("li"),Ao=n("Not repeatable. The same input may be parsed differently on the client and on the server."),Do=d(),mt=o("li"),Mo=n("They are (currently) bad at dates. If you tell it “in four days”, it would need to both know the current date and be able to calculate the date four days from now. LLMs currently suck at math. Clockface math is even more confusing. This does not stop them from confidently giving you a wrong answer though."),aa=d(),He=o("p"),Po=n("However, as LLMs get better and more widely available, they might become the best solution eventually. Alternative parsers get increasingly hard to write as the complexity of the input increases. LLMs handle that better."),oa=d(),Ce=o("p"),Wo=n("In the meantime, there is a halfway solution. Instead of using the LLM itself as the parser, you could use it as a preprocessor to extract easier to digest strings from the input. This would allow you to use simpler parsers to get the actual data. The LLM doesn’t have to do any logic, just language-manipulation. This is an easier job, so faster and cheaper models can be used."),la=d(),Be=o("p"),Oo=n("Here is an example of what that might look like. The input is first passed through a LLM to extract the relevant strings. Then a simple parser is used to parse the extracted strings."),ra=d(),je=o("p"),So=n("Here is an example prompt and the extracted strings."),ia=d(),re=o("pre"),sa=d(),Ue=o("p"),Ho=n("This results in the following output (markdown table)"),na=d(),Y=o("table"),ct=o("thead"),ie=o("tr"),yt=o("th"),Co=n("Question"),Bo=d(),vt=o("th"),jo=n("Answer"),Uo=d(),D=o("tbody"),se=o("tr"),bt=o("td"),Fo=n("What is the title of the event?"),qo=d(),wt=o("td"),Ro=n("Meeting with John"),No=d(),ne=o("tr"),_t=o("td"),Jo=n("What day does it start?"),Vo=d(),Tt=o("td"),Qo=n("Tomorrow"),Yo=d(),ue=o("tr"),Et=o("td"),Go=n("What time does it start?"),Ko=d(),gt=o("td"),Xo=n("12:30"),zo=d(),he=o("tr"),kt=o("td"),Zo=n("What day does it end?"),$o=d(),It=o("td"),el=n("Tomorrow"),tl=d(),de=o("tr"),Lt=o("td"),al=n("What time does it end?"),ol=d(),xt=o("td"),ll=n("Five past two (2:05)"),rl=d(),fe=o("tr"),At=o("td"),il=n("Where is it?"),sl=d(),Dt=o("td"),nl=n("Conference room 103"),ul=d(),pe=o("tr"),Mt=o("td"),hl=n("Additional details (if applicable)?"),dl=d(),Pt=o("td"),fl=n("Bring the report & wish Janine a happy birthday"),ua=d(),Fe=o("p"),pl=n("This is already pretty good. We’ve broken down a fairly complex input, which does the job previously done by a whole form, into a few simple strings. We now only have to parse these individual strings, not the whole input."),ha=d(),qe=o("p"),ml=n("You could also use the LLM to translate the prompt, making it easier to adapt to different languages."),da=d(),Re=o("blockquote"),Wt=o("p"),cl=n("We needn’t worry about prompt-injection attacks here, since the user is entering data for themselves. Tricking the LLM does not achieve anything here. However, from a security perspective, you should consider the output of the LLM as untrusted, as if it were user input itself."),fa=d(),Ne=o("p"),yl=n("This still doesn’t solve the latency and privacy problems, but the others are gone. The LLM doesn’t have to do logic, and it’s consistent enough that repeated parsing will (usually) give the same result."),pa=d(),me=o("h2"),Je=o("a"),vl=n("Getting Started Today"),ma=d(),Ve=o("p"),bl=n("There are some great libraries out there that can get you started with Fluent Inputs today. I’ve provided a few examples by category below."),ca=d(),ce=o("h3"),Qe=o("a"),wl=n("Date/Time"),ya=d(),G=o("ul"),Ye=o("li"),Ge=o("a"),_l=n("Timeliness"),Tl=n(" - A library for parsing dates and times in a variety of formats."),El=d(),Ke=o("li"),Xe=o("a"),gl=n("Chrono-Node"),kl=n(" - Similar to Timeliness, but with more features and a larger footprint. Great for appointments."),this.h()},l(e){h=l(e,"H1",{id:!0});var i=r(h);m=l(i,"A",{href:!0});var Ot=r(m);v=u(Ot,"Fluent Inputs"),Ot.forEach(t),i.forEach(t),b=f(e),p=l(e,"P",{});var ba=r(p);c=u(ba,"A few months ago, I stumbled accross Adam Silver’s article "),w=l(ba,"EM",{});var Dl=r(w);g=l(Dl,"A",{href:!0,rel:!0,target:!0});var Ml=r(g);P=u(Ml,"Designing A Time Input"),Ml.forEach(t),Dl.forEach(t),S=u(ba,". In it he very persuasively argued that the ideal time input should be a single text input that accepts a wide range of formats. I followed his advice in a few projects and was very pleased with the results."),ba.forEach(t),M=f(e),_=l(e,"H2",{id:!0});var Pl=r(_);L=l(Pl,"A",{href:!0});var Wl=r(L);x=u(Wl,"Down the Rabbit Hole and to the Prototype"),Wl.forEach(t),Pl.forEach(t),B=f(e),j=l(e,"P",{});var Ol=r(j);I=u(Ol,"When I at some point needed a datetime input I decided to reuse the idea. A text field that allow all kinds of formats. But why just “12. July 2023”, why not “Tomorrow” or “Next Monday”. So I also added some special cases. But the slippery slope only started there. What about “Thursday in two weeks at noon”? My ambition soon exceeded my ability and patience, so I started looking for libraries."),Ol.forEach(t),z=f(e),A=l(e,"P",{});var wa=r(A);ve=u(wa,"I found "),E=l(wa,"CODE",{});var Sl=r(E);k=u(Sl,"chrono-node"),Sl.forEach(t),F=u(wa," which promised to do what I wanted. I used it to build the following prototype. Try it!"),wa.forEach(t),R=f(e),di(U.$$.fragment,e),Ht=f(e),be=l(e,"P",{});var Hl=r(be);Sa=u(Hl,"It’s functional, but there are some issues I observed while testing it on a few people."),Hl.forEach(t),Ct=f(e),W=l(e,"OL",{});var q=r(W);$e=l(q,"LI",{});var Cl=r($e);Ha=u(Cl,"Users don’t trust that the input will understand them. They wait for feedback before moving on."),Cl.forEach(t),Ca=f(q),et=l(q,"LI",{});var Bl=r(et);Ba=u(Bl,"Result are often lost while typing. Typing “Mon”, will be recognised as monday, but “Mond” won’t be recognised anymore, even though the user is likely to continue typing “Monday”."),Bl.forEach(t),ja=f(q),tt=l(q,"LI",{});var jl=r(tt);Ua=u(jl,"It fills in the blanks too liberally. If you say “In two days” it will fill in a time. This caused several users to enter incorrect values."),jl.forEach(t),Fa=f(q),at=l(q,"LI",{});var Ul=r(at);qa=u(Ul,"Confusingly inconsistent. Some basic instructions are not recognised. “On the 12th” is not recognised, but “On the 12th of July” is."),Ul.forEach(t),Ra=f(q),ot=l(q,"LI",{});var Fl=r(ot);Na=u(Fl,"Typing on mobile is annoying."),Fl.forEach(t),q.forEach(t),Bt=f(e),we=l(e,"P",{});var ql=r(we);Ja=u(ql,"These problems are a mix of UX and implementation problems. They will all need to be fixed. But the idea did show some promise. There are some obvious advantages."),ql.forEach(t),jt=f(e),H=l(e,"OL",{});var K=r(H);lt=l(K,"LI",{});var Rl=r(lt);Va=u(Rl,"Very expressive. The gap between what the user is thinking and what they need to type is much smaller."),Rl.forEach(t),Qa=f(K),Z=l(K,"LI",{});var _a=r(Z);Ya=u(_a,"Works without JavaScript - Parsing can be done on the server as fallback "),rt=l(_a,"SMALL",{});var Nl=r(rt);Ga=u(Nl,"(intentionally disabled in this demo)"),Nl.forEach(t),Ka=u(_a,"."),_a.forEach(t),Xa=f(K),it=l(K,"LI",{});var Jl=r(it);za=u(Jl,"Dictation is easy. Dictation is becoming more and more popular, especially among former iPad babies that learned to browser YouTube before they learned to write."),Jl.forEach(t),Za=f(K),st=l(K,"LI",{});var Vl=r(st);$a=u(Vl,"Accessible. The input is read in a very natural way by screen readers."),Vl.forEach(t),K.forEach(t),Ut=f(e),N=l(e,"P",{});var St=r(N);eo=u(St,"While I wouldn’t use the above input anywhere it’s a fine starting point to explore the idea of inputs that accept plain english. These are sometimes called “Natural Language Inputs”, but that could also refer to "),J=l(St,"A",{href:!0,rel:!0,target:!0});var Ql=r(J);to=u(Ql,"this kind of input"),Ql.forEach(t),ao=u(St,". To avoid confusion, I’ll coin and use the term “Fluent Inputs”. "),$=l(St,"SMALL",{});var Ta=r($);oo=u(Ta,"("),V=l(Ta,"A",{href:!0,rel:!0,target:!0});var Yl=r(V);lo=u(Yl,"obligatory xkcd 927"),Yl.forEach(t),ro=u(Ta,")"),Ta.forEach(t),St.forEach(t),Ft=f(e),ee=l(e,"H2",{id:!0});var Gl=r(ee);_e=l(Gl,"A",{href:!0});var Kl=r(_e);io=u(Kl,"Doing some Experiments"),Kl.forEach(t),Gl.forEach(t),qt=f(e),Te=l(e,"P",{});var Xl=r(Te);so=u(Xl,`For now, I’m going to handwave away the parsing problem and focus on the UX.
I have a few ideas that I want to test.`),Xl.forEach(t),Rt=f(e),te=l(e,"H3",{id:!0});var zl=r(te);Ee=l(zl,"A",{href:!0});var Zl=r(Ee);no=u(Zl,"User Feedback Testing"),Zl.forEach(t),zl.forEach(t),Nt=f(e),ge=l(e,"BLOCKQUOTE",{});var $l=r(ge);nt=l($l,"P",{});var er=r(nt);uo=u(er,"TODO"),er.forEach(t),$l.forEach(t),Jt=f(e),ae=l(e,"H3",{id:!0});var tr=r(ae);ke=l(tr,"A",{href:!0});var ar=r(ke);ho=u(ar,"Fluent Inputs as Infodumps"),ar.forEach(t),tr.forEach(t),Vt=f(e),Ie=l(e,"P",{});var or=r(Ie);fo=u(or,"One idea I had is that a Text-Area could be used as an infodump, substituting a whole form. If the user knew what information was expected they could just type it in in a stream of consciousness style. This might be usefull for things like calendars, where the expected information is known, and the details might be copy-pasted from an email or website."),or.forEach(t),Qt=f(e),Le=l(e,"P",{});var lr=r(Le);po=u(lr,"Let’s test that."),lr.forEach(t),Yt=f(e),xe=l(e,"BLOCKQUOTE",{});var rr=r(xe);ut=l(rr,"P",{});var ir=r(ut);mo=u(ir,"TODO"),ir.forEach(t),rr.forEach(t),Gt=f(e),oe=l(e,"H2",{id:!0});var sr=r(oe);Ae=l(sr,"A",{href:!0});var nr=r(Ae);co=u(nr,"The Implementation Problem"),nr.forEach(t),sr.forEach(t),Kt=f(e),De=l(e,"P",{});var ur=r(De);yo=u(ur,"I’ve side-stepped the actual implementation of the parser until now. That’s because I don’t have a good solution yet."),ur.forEach(t),Xt=f(e),Q=l(e,"P",{});var Ea=r(Q);vo=u(Ea,"We have all the usuall "),Me=l(Ea,"ABBR",{title:!0});var hr=r(Me);bo=u(hr,"i18n"),hr.forEach(t),wo=u(Ea," problems. Different languages, different cultural expectations. These are always hard problem, but they are even harder to get right here."),Ea.forEach(t),zt=f(e),Pe=l(e,"BLOCKQUOTE",{});var dr=r(Pe);ht=l(dr,"P",{});var fr=r(ht);_o=u(fr,"TODO"),fr.forEach(t),dr.forEach(t),Zt=f(e),le=l(e,"H3",{id:!0});var pr=r(le);We=l(pr,"A",{href:!0});var mr=r(We);To=u(mr,"What about LLMs?"),mr.forEach(t),pr.forEach(t),$t=f(e),Oe=l(e,"P",{});var cr=r(Oe);Eo=u(cr,"Language Models are all the rage right now. They are very good at parsing natural language, so why not use them here?"),cr.forEach(t),ea=f(e),Se=l(e,"P",{});var yr=r(Se);go=u(yr,"Well, they do have some limitations that (currently) hold them back from reliably parsing user inputs."),yr.forEach(t),ta=f(e),C=l(e,"OL",{});var X=r(C);dt=l(X,"LI",{});var vr=r(dt);ko=u(vr,"They are slow. Ideally we would want to parse the input on every keystroke. Current LLMs aren’t fast enough for that."),vr.forEach(t),Io=f(X),ft=l(X,"LI",{});var br=r(ft);Lo=u(br,"Can’t run in the browser. Any parsing would need to happen on an external LLM server. This causes latency issues and privacy concerns (since the state is sent on each keystroke, not just at the end)."),br.forEach(t),xo=f(X),pt=l(X,"LI",{});var wr=r(pt);Ao=u(wr,"Not repeatable. The same input may be parsed differently on the client and on the server."),wr.forEach(t),Do=f(X),mt=l(X,"LI",{});var _r=r(mt);Mo=u(_r,"They are (currently) bad at dates. If you tell it “in four days”, it would need to both know the current date and be able to calculate the date four days from now. LLMs currently suck at math. Clockface math is even more confusing. This does not stop them from confidently giving you a wrong answer though."),_r.forEach(t),X.forEach(t),aa=f(e),He=l(e,"P",{});var Tr=r(He);Po=u(Tr,"However, as LLMs get better and more widely available, they might become the best solution eventually. Alternative parsers get increasingly hard to write as the complexity of the input increases. LLMs handle that better."),Tr.forEach(t),oa=f(e),Ce=l(e,"P",{});var Er=r(Ce);Wo=u(Er,"In the meantime, there is a halfway solution. Instead of using the LLM itself as the parser, you could use it as a preprocessor to extract easier to digest strings from the input. This would allow you to use simpler parsers to get the actual data. The LLM doesn’t have to do any logic, just language-manipulation. This is an easier job, so faster and cheaper models can be used."),Er.forEach(t),la=f(e),Be=l(e,"P",{});var gr=r(Be);Oo=u(gr,"Here is an example of what that might look like. The input is first passed through a LLM to extract the relevant strings. Then a simple parser is used to parse the extracted strings."),gr.forEach(t),ra=f(e),je=l(e,"P",{});var kr=r(je);So=u(kr,"Here is an example prompt and the extracted strings."),kr.forEach(t),ia=f(e),re=l(e,"PRE",{class:!0});var ci=r(re);ci.forEach(t),sa=f(e),Ue=l(e,"P",{});var Ir=r(Ue);Ho=u(Ir,"This results in the following output (markdown table)"),Ir.forEach(t),na=f(e),Y=l(e,"TABLE",{});var ga=r(Y);ct=l(ga,"THEAD",{});var Lr=r(ct);ie=l(Lr,"TR",{});var ka=r(ie);yt=l(ka,"TH",{});var xr=r(yt);Co=u(xr,"Question"),xr.forEach(t),Bo=f(ka),vt=l(ka,"TH",{});var Ar=r(vt);jo=u(Ar,"Answer"),Ar.forEach(t),ka.forEach(t),Lr.forEach(t),Uo=f(ga),D=l(ga,"TBODY",{});var O=r(D);se=l(O,"TR",{});var Ia=r(se);bt=l(Ia,"TD",{});var Dr=r(bt);Fo=u(Dr,"What is the title of the event?"),Dr.forEach(t),qo=f(Ia),wt=l(Ia,"TD",{});var Mr=r(wt);Ro=u(Mr,"Meeting with John"),Mr.forEach(t),Ia.forEach(t),No=f(O),ne=l(O,"TR",{});var La=r(ne);_t=l(La,"TD",{});var Pr=r(_t);Jo=u(Pr,"What day does it start?"),Pr.forEach(t),Vo=f(La),Tt=l(La,"TD",{});var Wr=r(Tt);Qo=u(Wr,"Tomorrow"),Wr.forEach(t),La.forEach(t),Yo=f(O),ue=l(O,"TR",{});var xa=r(ue);Et=l(xa,"TD",{});var Or=r(Et);Go=u(Or,"What time does it start?"),Or.forEach(t),Ko=f(xa),gt=l(xa,"TD",{});var Sr=r(gt);Xo=u(Sr,"12:30"),Sr.forEach(t),xa.forEach(t),zo=f(O),he=l(O,"TR",{});var Aa=r(he);kt=l(Aa,"TD",{});var Hr=r(kt);Zo=u(Hr,"What day does it end?"),Hr.forEach(t),$o=f(Aa),It=l(Aa,"TD",{});var Cr=r(It);el=u(Cr,"Tomorrow"),Cr.forEach(t),Aa.forEach(t),tl=f(O),de=l(O,"TR",{});var Da=r(de);Lt=l(Da,"TD",{});var Br=r(Lt);al=u(Br,"What time does it end?"),Br.forEach(t),ol=f(Da),xt=l(Da,"TD",{});var jr=r(xt);ll=u(jr,"Five past two (2:05)"),jr.forEach(t),Da.forEach(t),rl=f(O),fe=l(O,"TR",{});var Ma=r(fe);At=l(Ma,"TD",{});var Ur=r(At);il=u(Ur,"Where is it?"),Ur.forEach(t),sl=f(Ma),Dt=l(Ma,"TD",{});var Fr=r(Dt);nl=u(Fr,"Conference room 103"),Fr.forEach(t),Ma.forEach(t),ul=f(O),pe=l(O,"TR",{});var Pa=r(pe);Mt=l(Pa,"TD",{});var qr=r(Mt);hl=u(qr,"Additional details (if applicable)?"),qr.forEach(t),dl=f(Pa),Pt=l(Pa,"TD",{});var Rr=r(Pt);fl=u(Rr,"Bring the report & wish Janine a happy birthday"),Rr.forEach(t),Pa.forEach(t),O.forEach(t),ga.forEach(t),ua=f(e),Fe=l(e,"P",{});var Nr=r(Fe);pl=u(Nr,"This is already pretty good. We’ve broken down a fairly complex input, which does the job previously done by a whole form, into a few simple strings. We now only have to parse these individual strings, not the whole input."),Nr.forEach(t),ha=f(e),qe=l(e,"P",{});var Jr=r(qe);ml=u(Jr,"You could also use the LLM to translate the prompt, making it easier to adapt to different languages."),Jr.forEach(t),da=f(e),Re=l(e,"BLOCKQUOTE",{});var Vr=r(Re);Wt=l(Vr,"P",{});var Qr=r(Wt);cl=u(Qr,"We needn’t worry about prompt-injection attacks here, since the user is entering data for themselves. Tricking the LLM does not achieve anything here. However, from a security perspective, you should consider the output of the LLM as untrusted, as if it were user input itself."),Qr.forEach(t),Vr.forEach(t),fa=f(e),Ne=l(e,"P",{});var Yr=r(Ne);yl=u(Yr,"This still doesn’t solve the latency and privacy problems, but the others are gone. The LLM doesn’t have to do logic, and it’s consistent enough that repeated parsing will (usually) give the same result."),Yr.forEach(t),pa=f(e),me=l(e,"H2",{id:!0});var Gr=r(me);Je=l(Gr,"A",{href:!0});var Kr=r(Je);vl=u(Kr,"Getting Started Today"),Kr.forEach(t),Gr.forEach(t),ma=f(e),Ve=l(e,"P",{});var Xr=r(Ve);bl=u(Xr,"There are some great libraries out there that can get you started with Fluent Inputs today. I’ve provided a few examples by category below."),Xr.forEach(t),ca=f(e),ce=l(e,"H3",{id:!0});var zr=r(ce);Qe=l(zr,"A",{href:!0});var Zr=r(Qe);wl=u(Zr,"Date/Time"),Zr.forEach(t),zr.forEach(t),ya=f(e),G=l(e,"UL",{});var Wa=r(G);Ye=l(Wa,"LI",{});var Il=r(Ye);Ge=l(Il,"A",{href:!0});var $r=r(Ge);_l=u($r,"Timeliness"),$r.forEach(t),Tl=u(Il," - A library for parsing dates and times in a variety of formats."),Il.forEach(t),El=f(Wa),Ke=l(Wa,"LI",{});var Ll=r(Ke);Xe=l(Ll,"A",{href:!0});var ei=r(Xe);gl=u(ei,"Chrono-Node"),ei.forEach(t),kl=u(Ll," - Similar to Timeliness, but with more features and a larger footprint. Great for appointments."),Ll.forEach(t),Wa.forEach(t),this.h()},h(){y(m,"href","#fluent-inputs"),y(h,"id","fluent-inputs"),y(g,"href","https://adamsilver.io/blog/designing-a-time-input/"),y(g,"rel","noopener noreferrer"),y(g,"target","_blank"),y(L,"href","#down-the-rabbit-hole-and-to-the-prototype"),y(_,"id","down-the-rabbit-hole-and-to-the-prototype"),y(J,"href","https://www.jroehm.com/2014/01/26/ui-pattern-natural-language-form/"),y(J,"rel","noopener noreferrer"),y(J,"target","_blank"),y(V,"href","https://xkcd.com/927/"),y(V,"rel","noopener noreferrer"),y(V,"target","_blank"),y(_e,"href","#doing-some-experiments"),y(ee,"id","doing-some-experiments"),y(Ee,"href","#user-feedback-testing"),y(te,"id","user-feedback-testing"),y(ke,"href","#fluent-inputs-as-infodumps"),y(ae,"id","fluent-inputs-as-infodumps"),y(Ae,"href","#the-implementation-problem"),y(oe,"id","the-implementation-problem"),y(Me,"title","Internationalization"),y(We,"href","#what-about-llms"),y(le,"id","what-about-llms"),y(re,"class","language-txt"),y(Je,"href","#getting-started-today"),y(me,"id","getting-started-today"),y(Qe,"href","#datetime"),y(ce,"id","datetime"),y(Ge,"href",""),y(Xe,"href","")},m(e,i){s(e,h,i),a(h,m),a(m,v),s(e,b,i),s(e,p,i),a(p,c),a(p,w),a(w,g),a(g,P),a(p,S),s(e,M,i),s(e,_,i),a(_,L),a(L,x),s(e,B,i),s(e,j,i),a(j,I),s(e,z,i),s(e,A,i),a(A,ve),a(A,E),a(E,k),a(A,F),s(e,R,i),fi(U,e,i),s(e,Ht,i),s(e,be,i),a(be,Sa),s(e,Ct,i),s(e,W,i),a(W,$e),a($e,Ha),a(W,Ca),a(W,et),a(et,Ba),a(W,ja),a(W,tt),a(tt,Ua),a(W,Fa),a(W,at),a(at,qa),a(W,Ra),a(W,ot),a(ot,Na),s(e,Bt,i),s(e,we,i),a(we,Ja),s(e,jt,i),s(e,H,i),a(H,lt),a(lt,Va),a(H,Qa),a(H,Z),a(Z,Ya),a(Z,rt),a(rt,Ga),a(Z,Ka),a(H,Xa),a(H,it),a(it,za),a(H,Za),a(H,st),a(st,$a),s(e,Ut,i),s(e,N,i),a(N,eo),a(N,J),a(J,to),a(N,ao),a(N,$),a($,oo),a($,V),a(V,lo),a($,ro),s(e,Ft,i),s(e,ee,i),a(ee,_e),a(_e,io),s(e,qt,i),s(e,Te,i),a(Te,so),s(e,Rt,i),s(e,te,i),a(te,Ee),a(Ee,no),s(e,Nt,i),s(e,ge,i),a(ge,nt),a(nt,uo),s(e,Jt,i),s(e,ae,i),a(ae,ke),a(ke,ho),s(e,Vt,i),s(e,Ie,i),a(Ie,fo),s(e,Qt,i),s(e,Le,i),a(Le,po),s(e,Yt,i),s(e,xe,i),a(xe,ut),a(ut,mo),s(e,Gt,i),s(e,oe,i),a(oe,Ae),a(Ae,co),s(e,Kt,i),s(e,De,i),a(De,yo),s(e,Xt,i),s(e,Q,i),a(Q,vo),a(Q,Me),a(Me,bo),a(Q,wo),s(e,zt,i),s(e,Pe,i),a(Pe,ht),a(ht,_o),s(e,Zt,i),s(e,le,i),a(le,We),a(We,To),s(e,$t,i),s(e,Oe,i),a(Oe,Eo),s(e,ea,i),s(e,Se,i),a(Se,go),s(e,ta,i),s(e,C,i),a(C,dt),a(dt,ko),a(C,Io),a(C,ft),a(ft,Lo),a(C,xo),a(C,pt),a(pt,Ao),a(C,Do),a(C,mt),a(mt,Mo),s(e,aa,i),s(e,He,i),a(He,Po),s(e,oa,i),s(e,Ce,i),a(Ce,Wo),s(e,la,i),s(e,Be,i),a(Be,Oo),s(e,ra,i),s(e,je,i),a(je,So),s(e,ia,i),s(e,re,i),re.innerHTML=mi,s(e,sa,i),s(e,Ue,i),a(Ue,Ho),s(e,na,i),s(e,Y,i),a(Y,ct),a(ct,ie),a(ie,yt),a(yt,Co),a(ie,Bo),a(ie,vt),a(vt,jo),a(Y,Uo),a(Y,D),a(D,se),a(se,bt),a(bt,Fo),a(se,qo),a(se,wt),a(wt,Ro),a(D,No),a(D,ne),a(ne,_t),a(_t,Jo),a(ne,Vo),a(ne,Tt),a(Tt,Qo),a(D,Yo),a(D,ue),a(ue,Et),a(Et,Go),a(ue,Ko),a(ue,gt),a(gt,Xo),a(D,zo),a(D,he),a(he,kt),a(kt,Zo),a(he,$o),a(he,It),a(It,el),a(D,tl),a(D,de),a(de,Lt),a(Lt,al),a(de,ol),a(de,xt),a(xt,ll),a(D,rl),a(D,fe),a(fe,At),a(At,il),a(fe,sl),a(fe,Dt),a(Dt,nl),a(D,ul),a(D,pe),a(pe,Mt),a(Mt,hl),a(pe,dl),a(pe,Pt),a(Pt,fl),s(e,ua,i),s(e,Fe,i),a(Fe,pl),s(e,ha,i),s(e,qe,i),a(qe,ml),s(e,da,i),s(e,Re,i),a(Re,Wt),a(Wt,cl),s(e,fa,i),s(e,Ne,i),a(Ne,yl),s(e,pa,i),s(e,me,i),a(me,Je),a(Je,vl),s(e,ma,i),s(e,Ve,i),a(Ve,bl),s(e,ca,i),s(e,ce,i),a(ce,Qe),a(Qe,wl),s(e,ya,i),s(e,G,i),a(G,Ye),a(Ye,Ge),a(Ge,_l),a(Ye,Tl),a(G,El),a(G,Ke),a(Ke,Xe),a(Xe,gl),a(Ke,kl),va=!0},p(e,[i]){const Ot={};i&1&&(Ot.$$scope={dirty:i,ctx:e}),U.$set(Ot)},i(e){va||(ye(U.$$.fragment,e),va=!0)},o(e){ze(U.$$.fragment,e),va=!1},d(e){e&&t(h),e&&t(b),e&&t(p),e&&t(M),e&&t(_),e&&t(B),e&&t(j),e&&t(z),e&&t(A),e&&t(R),pi(U,e),e&&t(Ht),e&&t(be),e&&t(Ct),e&&t(W),e&&t(Bt),e&&t(we),e&&t(jt),e&&t(H),e&&t(Ut),e&&t(N),e&&t(Ft),e&&t(ee),e&&t(qt),e&&t(Te),e&&t(Rt),e&&t(te),e&&t(Nt),e&&t(ge),e&&t(Jt),e&&t(ae),e&&t(Vt),e&&t(Ie),e&&t(Qt),e&&t(Le),e&&t(Yt),e&&t(xe),e&&t(Gt),e&&t(oe),e&&t(Kt),e&&t(De),e&&t(Xt),e&&t(Q),e&&t(zt),e&&t(Pe),e&&t(Zt),e&&t(le),e&&t($t),e&&t(Oe),e&&t(ea),e&&t(Se),e&&t(ta),e&&t(C),e&&t(aa),e&&t(He),e&&t(oa),e&&t(Ce),e&&t(la),e&&t(Be),e&&t(ra),e&&t(je),e&&t(ia),e&&t(re),e&&t(sa),e&&t(Ue),e&&t(na),e&&t(Y),e&&t(ua),e&&t(Fe),e&&t(ha),e&&t(qe),e&&t(da),e&&t(Re),e&&t(fa),e&&t(Ne),e&&t(pa),e&&t(me),e&&t(ma),e&&t(Ve),e&&t(ca),e&&t(ce),e&&t(ya),e&&t(G)}}}class Ci extends si{constructor(h){super(),ni(this,h,null,Pi,ui,{})}}export{Ci as component};
