var sn=Object.defineProperty;var an=(t,e,n)=>e in t?sn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ee=(t,e,n)=>(an(t,typeof e!="symbol"?e+"":e,n),n);import{S as le,i as ue,s as fe,k as I,q as x,a as B,y as Y,l as S,m as L,r as Z,h as E,c as X,z as j,n as v,b as O,G as k,A as G,M as Q,g as z,d as W,B as q,O as Re,C as Te,D as Ie,E as Se,F as Le,P as ln,Q as ve,p as rt,R as Ue,T as it,w as $,U as Ve,u as Ze,H as ae,V as un,W as fn,X as dt,Y as Oe,Z as cn,_ as te,$ as ne,a0 as dn,v as He,f as Ye,a1 as st,o as hn,L as Be,e as De}from"../chunks/index.22137adf.js";import{I as Ce,L as mn,A as gn,C as ht,b as mt,a as pn,P as _n,X as vn,c as bn}from"../chunks/Icon.a8be85da.js";function wn(){return{title:"Dithering",author:"Loris Sigrist",description:"Dither your Images right in the browser!"}}const ii=Object.freeze(Object.defineProperty({__proto__:null,load:wn},Symbol.toStringTag,{value:"Module"}));function An(t){let e,n,r,o,u,s,f,l,a,c,d,m,p,g,w,A,h,_,b,y,T,R,D,M,P,F;return p=new Ce({props:{src:mn,class:"w-4 h-4",solid:!0}}),{c(){e=I("fieldset"),n=I("div"),r=I("label"),o=x("Width"),u=B(),s=I("div"),f=I("input"),l=B(),a=I("div"),c=x("px"),d=B(),m=I("span"),Y(p.$$.fragment),g=B(),w=I("div"),A=I("label"),h=x("Height"),_=B(),b=I("div"),y=I("input"),T=B(),R=I("div"),D=x("px"),this.h()},l(U){e=S(U,"FIELDSET",{class:!0});var V=L(e);n=S(V,"DIV",{class:!0});var re=L(n);r=S(re,"LABEL",{for:!0,class:!0});var ee=L(r);o=Z(ee,"Width"),ee.forEach(E),u=X(re),s=S(re,"DIV",{class:!0});var oe=L(s);f=S(oe,"INPUT",{name:!0,id:!0,type:!0,min:!0,max:!0,step:!0,class:!0,placeholder:!0}),l=X(oe),a=S(oe,"DIV",{class:!0});var he=L(a);c=Z(he,"px"),he.forEach(E),oe.forEach(E),re.forEach(E),d=X(V),m=S(V,"SPAN",{class:!0});var me=L(m);j(p.$$.fragment,me),me.forEach(E),g=X(V),w=S(V,"DIV",{class:!0});var J=L(w);A=S(J,"LABEL",{for:!0,class:!0});var ge=L(A);h=Z(ge,"Height"),ge.forEach(E),_=X(J),b=S(J,"DIV",{class:!0});var ie=L(b);y=S(ie,"INPUT",{type:!0,id:!0,name:!0,min:!0,max:!0,step:!0,class:!0,placeholder:!0}),T=X(ie),R=S(ie,"DIV",{class:!0});var N=L(R);D=Z(N,"px"),N.forEach(E),ie.forEach(E),J.forEach(E),V.forEach(E),this.h()},h(){v(r,"for","width-"+t[8]),v(r,"class","block text-sm font-medium leading-6 text-gray-900"),v(f,"name","width"),v(f,"id","width-"+t[8]),v(f,"type","number"),v(f,"min",t[3]),v(f,"max",t[1]),v(f,"step","1"),f.value=t[0],v(f,"class","block w-full rounded-md border-0 py-1.5 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"),v(f,"placeholder","600"),v(a,"class","pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400"),v(s,"class","relative mt-2 rounded-md shadow-sm"),v(n,"class","w-full"),v(m,"class","text-gray-500 pb-2 cursor-not-allowed"),v(A,"for","height-"+t[9]),v(A,"class","block text-sm font-medium leading-6 text-gray-900"),v(y,"type","number"),v(y,"id","height-"+t[9]),v(y,"name","height"),v(y,"min",t[4]),v(y,"max",t[2]),v(y,"step","1"),y.value=t[5],v(y,"class","block w-full rounded-md border-0 py-1.5 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"),v(y,"placeholder","340"),v(R,"class","pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400"),v(b,"class","relative mt-2 rounded-md shadow-sm"),v(w,"class","w-full"),v(e,"class","flex gap-3 items-end justify-between")},m(U,V){O(U,e,V),k(e,n),k(n,r),k(r,o),k(n,u),k(n,s),k(s,f),k(s,l),k(s,a),k(a,c),k(e,d),k(e,m),G(p,m,null),k(e,g),k(e,w),k(w,A),k(A,h),k(w,_),k(w,b),k(b,y),k(b,T),k(b,R),k(R,D),M=!0,P||(F=[Q(f,"input",t[6]),Q(y,"input",t[7])],P=!0)},p(U,[V]){(!M||V&8)&&v(f,"min",U[3]),(!M||V&2)&&v(f,"max",U[1]),(!M||V&1&&f.value!==U[0])&&(f.value=U[0]),(!M||V&16)&&v(y,"min",U[4]),(!M||V&4)&&v(y,"max",U[2]),(!M||V&32&&y.value!==U[5])&&(y.value=U[5])},i(U){M||(z(p.$$.fragment,U),M=!0)},o(U){W(p.$$.fragment,U),M=!1},d(U){U&&E(e),q(p),P=!1,Re(F)}}}function gt(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}function En(t,e,n){let r,{width:o}=e,{aspectRatio:u}=e,{maxWidth:s=null}=e,{maxHeight:f=null}=e,{minWidth:l=null}=e,{minHeight:a=null}=e;function c(g){const w=g.target.value;w&&(l!==null&&w<l||s!==null&&w>s||n(0,o=w))}function d(g){const w=g.target.value;w&&(a!==null&&w<a||f!==null&&w>f||n(0,o=Math.round(u*w)))}let m=gt(),p=gt();return t.$$set=g=>{"width"in g&&n(0,o=g.width),"aspectRatio"in g&&n(10,u=g.aspectRatio),"maxWidth"in g&&n(1,s=g.maxWidth),"maxHeight"in g&&n(2,f=g.maxHeight),"minWidth"in g&&n(3,l=g.minWidth),"minHeight"in g&&n(4,a=g.minHeight)},t.$$.update=()=>{t.$$.dirty&1025&&n(5,r=Math.round(o/u))},[o,s,f,l,a,r,c,d,m,p,u]}class Vt extends le{constructor(e){super(),ue(this,e,En,An,fe,{width:0,aspectRatio:10,maxWidth:1,maxHeight:2,minWidth:3,minHeight:4})}}var yn="precision highp float;attribute vec2 position;varying vec2 fragCoord;void main(){fragCoord.x=position.x*0.5+0.5;fragCoord.y=position.y*0.5+0.5;gl_Position=vec4(position,0.0,1.0);}",kn="precision highp float;varying vec2 fragCoord;uniform sampler2D uSampler;uniform sampler2D uNoiseSampler;uniform sampler2D uPaletteSampler;uniform vec2 uNoiseSamplerSize;uniform float uNoise;uniform vec2 uSize;vec3 samplePalette(vec3 og_color){vec3 scaledColor=floor(og_color*255.0);vec3 quantized_color=floor(scaledColor/16.0)*16.0;float mappingI=floor((floor(quantized_color.r)+floor(quantized_color.g*16.0)+floor(quantized_color.b*16.0*16.0))/16.0);float mappedX=floor(mappingI/64.0);float mappedY=floor(mod(mappingI,64.0));float halfPixel=0.5/64.0;vec2 uv=vec2((mappedX/64.0)+halfPixel,1.0-(mappedY/64.0)-halfPixel);return texture2D(uPaletteSampler,uv).rgb;}void main(void){vec2 imgPixel=vec2(fragCoord.x*uSize.x,fragCoord.y*uSize.y);vec2 noisePixel=vec2(mod(imgPixel.x,uNoiseSamplerSize.x),mod(imgPixel.y,uNoiseSamplerSize.y));vec2 noiseUV=vec2(noisePixel.x/uNoiseSamplerSize.x,noisePixel.y/uNoiseSamplerSize.y);float noise=(texture2D(uNoiseSampler,noiseUV).r-0.5)*2.0*uNoise;vec4 color=texture2D(uSampler,fragCoord);color.r=clamp(color.r+noise,0.0,1.0);color.g=clamp(color.g+noise,0.0,1.0);color.b=clamp(color.b+noise,0.0,1.0);color.rgb=samplePalette(color.rgb);gl_FragColor=color;}";function pt(t){return(t&t-1)===0}function Tn(t,e,n){const r=_t(t,t.VERTEX_SHADER,e),o=_t(t,t.FRAGMENT_SHADER,n),u=t.createProgram();if(!u)throw new Error("Failed to create shader program");if(t.attachShader(u,r),t.attachShader(u,o),t.linkProgram(u),!t.getProgramParameter(u,t.LINK_STATUS))throw Error(`Unable to initialize the shader program: ${t.getProgramInfoLog(u)}`);return u}function _t(t,e,n){const r=t.createShader(e);if(!r)throw new Error("Failed to create shader");if(t.shaderSource(r,n),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))throw Error(`An error occurred compiling the shaders: ${t.getShaderInfoLog(r)}`);return r}function In(t){const e=t.createBuffer(),n=t.createBuffer(),r=[-1,1,-1,-1,1,-1,1,1],o=[3,2,1,3,1,0];return t.bindBuffer(t.ARRAY_BUFFER,e),t.bufferData(t.ARRAY_BUFFER,new Float32Array(r),t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(o),t.STATIC_DRAW),{vertex_buffer:e,index_buffer:n}}function Ke(t,e,n){const r=t.createTexture();if(!r)throw new Error("Failed to create texture");return t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),pt(e.width)&&pt(e.height)?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,n)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,n)),r}function Sn(t,e){let n=e;const r=t.getContext("webgl",{preserveDrawingBuffer:!0});if(!r){alert("WebGL not supported");return}r.clearColor(0,0,0,1),r.clear(r.COLOR_BUFFER_BIT);const o=Tn(r,yn,kn),{vertex_buffer:u,index_buffer:s}=In(r);r.useProgram(o);const f=r.getAttribLocation(o,"position");r.vertexAttribPointer(f,2,r.FLOAT,!1,0,0),r.enableVertexAttribArray(f);const l=r.getUniformLocation(o,"uSampler"),a=r.getUniformLocation(o,"uNoiseSampler"),c=r.getUniformLocation(o,"uNoise"),d=r.getUniformLocation(o,"uSize"),m=r.getUniformLocation(o,"uNoiseSamplerSize"),p=r.getUniformLocation(o,"uPaletteSampler");let g;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!0);const w=()=>{g&&r.deleteTexture(g),g=Ke(r,n.image,r.LINEAR)};w();let A,h,_=null;const b=()=>{A&&r.deleteTexture(A),A=Ke(r,n.thresholdMap,r.NEAREST),h={width:n.thresholdMap.width,height:n.thresholdMap.height}};b();let y;const T=()=>{y&&r.deleteTexture(y),y=Ke(r,n.palette,r.NEAREST)};T();const R=()=>{r.viewport(0,0,n.output_width,n.output_height),r.clearColor(0,0,0,1),r.clear(r.COLOR_BUFFER_BIT),r.bindBuffer(r.ARRAY_BUFFER,u),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,s),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,g),r.uniform1i(l,0),r.activeTexture(r.TEXTURE1),r.bindTexture(r.TEXTURE_2D,A),r.uniform1i(a,1),r.activeTexture(r.TEXTURE2),r.bindTexture(r.TEXTURE_2D,y),r.uniform1i(p,2),r.uniform2f(m,h.width,h.height),r.uniform1f(c,n.noiseIntensity),r.uniform2f(d,n.output_width,n.output_height),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT),r.drawElements(r.TRIANGLES,6,r.UNSIGNED_SHORT,0)};function D(){_=requestAnimationFrame(()=>{R(),_=null})}return D(),{update(M){const P=n.image!==M.image,F=n.thresholdMap!==M.thresholdMap,U=n.palette!==M.palette;n=M,P&&w(),F&&b(),U&&T(),D()},destroy(){_!==null&&cancelAnimationFrame(_)}}}function Ln(t){let e,n,r,o,u;const s=t[3].default,f=Te(s,t,t[2],null);return{c(){e=I("button"),f&&f.c(),this.h()},l(l){e=S(l,"BUTTON",{type:!0,class:!0});var a=L(e);f&&f.l(a),a.forEach(E),this.h()},h(){e.disabled=t[0],v(e,"type","button"),v(e,"class",n=t[1][t[0]?"disabled":"normal"]+" rounded-md px-2.5 py-1.5 text-sm font-semibold focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 flex items-center justify-center gap-2")},m(l,a){O(l,e,a),f&&f.m(e,null),r=!0,o||(u=Q(e,"click",t[4]),o=!0)},p(l,[a]){f&&f.p&&(!r||a&4)&&Ie(f,s,l,l[2],r?Le(s,l[2],a,null):Se(l[2]),null),(!r||a&1)&&(e.disabled=l[0]),(!r||a&1&&n!==(n=l[1][l[0]?"disabled":"normal"]+" rounded-md px-2.5 py-1.5 text-sm font-semibold focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 flex items-center justify-center gap-2"))&&v(e,"class",n)},i(l){r||(z(f,l),r=!0)},o(l){W(f,l),r=!1},d(l){l&&E(e),f&&f.d(l),o=!1,u()}}}function Dn(t,e,n){let{$$slots:r={},$$scope:o}=e,{disabled:u=!1}=e;const s={normal:"bg-indigo-600 text-white shadow-sm hover:bg-indigo-500",disabled:"bg-gray-200 text-gray-400 shadow-none cursor-not-allowed"};function f(l){ln.call(this,t,l)}return t.$$set=l=>{"disabled"in l&&n(0,u=l.disabled),"$$scope"in l&&n(2,o=l.$$scope)},[u,s,o,r,f]}class Rn extends le{constructor(e){super(),ue(this,e,Dn,Ln,fe,{disabled:0})}}async function Cn(t,e,n="png"){const r=new OffscreenCanvas(t.width,t.height),o=r.getContext("2d");if(!o)return;o.drawImage(t,0,0,t.width,t.height);const u=await r.convertToBlob({type:"image/"+n,quality:1}),s=URL.createObjectURL(u),f=document.createElement("a");f.download=`${e}.${n}`,f.href=s,f.click(),f.remove(),URL.revokeObjectURL(s)}function vt(t){return new Promise((e,n)=>{t.type.startsWith("image/")||n(new Error("Not an image file"));const r=new FileReader;r.onload=o=>{if(typeof r.result!="string")return;const u=new Image;u.onload=()=>{e(u)},u.onerror=s=>{n(s)},u.src=r.result},r.onerror=o=>{n(o)},r.readAsDataURL(t)})}function Mn(t){const n=new OffscreenCanvas(t.width,t.height).getContext("2d");if(!n)throw new Error("Could not get canvas context");return n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height)}function Pn(t){const e=parseInt(t.slice(1,3),16),n=parseInt(t.slice(3,5),16),r=parseInt(t.slice(5,7),16);return[e,n,r]}function Nn([t,e,n]){const r=o=>{const u=o.toString(16);return u.length==1?"0"+u:u};return"#"+r(t)+r(e)+r(n)}var Un=class extends EventTarget{dispatchTypedEvent(t,e){return super.dispatchEvent(e)}};class _e{constructor(e){this.id=-1,this.nativePointer=e,this.pageX=e.pageX,this.pageY=e.pageY,this.clientX=e.clientX,this.clientY=e.clientY,self.Touch&&e instanceof Touch?this.id=e.identifier:Pe(e)&&(this.id=e.pointerId)}getCoalesced(){if("getCoalescedEvents"in this.nativePointer){const e=this.nativePointer.getCoalescedEvents().map(n=>new _e(n));if(e.length>0)return e}return[this]}}const Pe=t=>"pointerId"in t,et=t=>"changedTouches"in t,bt=()=>{};class On{constructor(e,{start:n=()=>!0,move:r=bt,end:o=bt,rawUpdates:u=!1,avoidPointerEvents:s=!1}={}){this._element=e,this.startPointers=[],this.currentPointers=[],this._excludeFromButtonsCheck=new Set,this._pointerStart=f=>{if(Pe(f)&&f.buttons===0)this._excludeFromButtonsCheck.add(f.pointerId);else if(!(f.buttons&1))return;const l=new _e(f);this.currentPointers.some(a=>a.id===l.id)||this._triggerPointerStart(l,f)&&(Pe(f)?((f.target&&"setPointerCapture"in f.target?f.target:this._element).setPointerCapture(f.pointerId),this._element.addEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move),this._element.addEventListener("pointerup",this._pointerEnd),this._element.addEventListener("pointercancel",this._pointerEnd)):(window.addEventListener("mousemove",this._move),window.addEventListener("mouseup",this._pointerEnd)))},this._touchStart=f=>{for(const l of Array.from(f.changedTouches))this._triggerPointerStart(new _e(l),f)},this._move=f=>{if(!et(f)&&(!Pe(f)||!this._excludeFromButtonsCheck.has(f.pointerId))&&f.buttons===0){this._pointerEnd(f);return}const l=this.currentPointers.slice(),a=et(f)?Array.from(f.changedTouches).map(d=>new _e(d)):[new _e(f)],c=[];for(const d of a){const m=this.currentPointers.findIndex(p=>p.id===d.id);m!==-1&&(c.push(d),this.currentPointers[m]=d)}c.length!==0&&this._moveCallback(l,c,f)},this._triggerPointerEnd=(f,l)=>{if(!et(l)&&l.buttons&1)return!1;const a=this.currentPointers.findIndex(d=>d.id===f.id);if(a===-1)return!1;this.currentPointers.splice(a,1),this.startPointers.splice(a,1),this._excludeFromButtonsCheck.delete(f.id);const c=!(l.type==="mouseup"||l.type==="touchend"||l.type==="pointerup");return this._endCallback(f,l,c),!0},this._pointerEnd=f=>{if(this._triggerPointerEnd(new _e(f),f))if(Pe(f)){if(this.currentPointers.length)return;this._element.removeEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move),this._element.removeEventListener("pointerup",this._pointerEnd),this._element.removeEventListener("pointercancel",this._pointerEnd)}else window.removeEventListener("mousemove",this._move),window.removeEventListener("mouseup",this._pointerEnd)},this._touchEnd=f=>{for(const l of Array.from(f.changedTouches))this._triggerPointerEnd(new _e(l),f)},this._startCallback=n,this._moveCallback=r,this._endCallback=o,this._rawUpdates=u&&"onpointerrawupdate"in window,self.PointerEvent&&!s?this._element.addEventListener("pointerdown",this._pointerStart):(this._element.addEventListener("mousedown",this._pointerStart),this._element.addEventListener("touchstart",this._touchStart),this._element.addEventListener("touchmove",this._move),this._element.addEventListener("touchend",this._touchEnd),this._element.addEventListener("touchcancel",this._touchEnd))}stop(){this._element.removeEventListener("pointerdown",this._pointerStart),this._element.removeEventListener("mousedown",this._pointerStart),this._element.removeEventListener("touchstart",this._touchStart),this._element.removeEventListener("touchmove",this._move),this._element.removeEventListener("touchend",this._touchEnd),this._element.removeEventListener("touchcancel",this._touchEnd),this._element.removeEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move),this._element.removeEventListener("pointerup",this._pointerEnd),this._element.removeEventListener("pointercancel",this._pointerEnd),window.removeEventListener("mousemove",this._move),window.removeEventListener("mouseup",this._pointerEnd)}_triggerPointerStart(e,n){return this._startCallback(e,n)?(this.currentPointers.push(e),this.startPointers.push(e),!0):!1}}function Bn(t,e,n){return Math.min(Math.max(t,e),n)}function wt(t,e){return e?Math.sqrt((e.clientX-t.clientX)**2+(e.clientY-t.clientY)**2):0}function At(t,e){return e?{clientX:(t.clientX+e.clientX)/2,clientY:(t.clientY+e.clientY)/2}:t}const xe=class extends Un{constructor(n){super();Ee(this,"element");Ee(this,"transform",new DOMMatrix);Ee(this,"pointerTracker");this.element=n,this.element.addEventListener("wheel",this.onWheel.bind(this)),this.pointerTracker=new On(this.element,{start:(r,o)=>this.pointerTracker.currentPointers.length===2?!1:(o.preventDefault(),!0),move:r=>{this.onPointerMove(r,this.pointerTracker.currentPointers)},avoidPointerEvents:this.isSafari()}),this.element.addEventListener("wheel",this.onWheel.bind(this))}get x(){return this.transform.e}get y(){return this.transform.f}get scale(){return this.transform.a}set x(n){this.transform.e=n}set y(n){this.transform.f=n}set scale(n){this.transform.a=n,this.transform.d=n}onWheel(n){n.preventDefault();const r=this.element.getBoundingClientRect();let{deltaY:o}=n;const{ctrlKey:u,deltaMode:s}=n;s===1&&(o*=15);const f=o>0,l=u?100:300,a=1-(f?-o:o)/l,c=f?1/a:a,d=n.clientX-r.left,m=n.clientY-r.top;this.applyTransformation({scaleDiff:c,originX:d,originY:m})}applyTransformation(n={}){const{panX:r=0,panY:o=0,originX:u=0,originY:s=0,scaleDiff:f=1}=n,l=new DOMMatrix().translate(u,s).scale(f).translate(-u,-s),a=new DOMMatrix().translate(r,o);l.multiplySelf(a),l.multiplySelf(this.transform);const c=l.a,d=l.e,m=l.f;this.updateTransform(c,d,m)}onPointerMove(n,r){const o=this.element.getBoundingClientRect(),u=At(n[0],n[1]),s=At(r[0],r[1]),f=u.clientX-o.left,l=u.clientY-o.top,a=wt(n[0],n[1]),c=wt(r[0],r[1]),d=a?c/a:1;this.applyTransformation({originX:f,originY:l,scaleDiff:d,panX:s.clientX-u.clientX,panY:s.clientY-u.clientY})}updateTransform(n,r,o){if(n<xe.MIN_SCALE||n>xe.MAX_SCALE||n===this.scale&&r===this.x&&o===this.y)return;this.x=r,this.y=o,this.scale=n;const u=new CustomEvent("panzoom:change",{bubbles:!0,detail:{x:this.x,y:this.y,scale:this.scale,matrix:this.transform}});this.dispatchTypedEvent("panzoom:change",u)}isSafari(){return/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)}reset(){this.updateTransform(1,0,0)}destroy(){this.pointerTracker.stop()}};let Ne=xe;Ee(Ne,"MIN_SCALE",.01),Ee(Ne,"MAX_SCALE",1e5);const Xn=t=>({}),Et=t=>({}),zn=t=>({}),yt=t=>({});function Fn(t){let e,n,r,o,u,s,f,l,a,c,d,m,p,g;const w=t[7].left,A=Te(w,t,t[6],yt),h=t[7].right,_=Te(h,t,t[6],Et);return d=new Ce({props:{src:gn,class:"w-6 h-6 text-white"}}),{c(){e=I("div"),n=I("div"),r=I("div"),o=I("div"),A&&A.c(),u=B(),s=I("div"),f=I("div"),_&&_.c(),l=B(),a=I("div"),c=I("div"),Y(d.$$.fragment),this.h()},l(b){e=S(b,"DIV",{class:!0});var y=L(e);n=S(y,"DIV",{class:!0});var T=L(n);r=S(T,"DIV",{class:!0});var R=L(r);o=S(R,"DIV",{style:!0,class:!0});var D=L(o);A&&A.l(D),D.forEach(E),R.forEach(E),u=X(T),s=S(T,"DIV",{class:!0});var M=L(s);f=S(M,"DIV",{style:!0,class:!0});var P=L(f);_&&_.l(P),P.forEach(E),M.forEach(E),T.forEach(E),l=X(y),a=S(y,"DIV",{class:!0});var F=L(a);c=S(F,"DIV",{class:!0});var U=L(c);j(d.$$.fragment,U),U.forEach(E),F.forEach(E),y.forEach(E),this.h()},h(){v(o,"style",t[3]),v(o,"class","w-full h-full origin-top-left grid place-items-center"),v(r,"class","mask-left svelte-dzs820"),v(f,"style",t[3]),v(f,"class","w-full h-full origin-top-left grid place-items-center"),v(s,"class","mask-right svelte-dzs820"),v(n,"class","w-full h-full grid place-items-center"),v(c,"class","w-12 h-12 rounded-full bg-black grid place-items-center absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"),ve(c,"rotate-90",t[1]==="vertical"),v(a,"class","handle relative shadow-lg svelte-dzs820"),v(e,"class","pz-container svelte-dzs820"),ve(e,"vertical",t[1]==="vertical"),rt(e,"--split-point",t[0]+"%")},m(b,y){O(b,e,y),k(e,n),k(n,r),k(r,o),A&&A.m(o,null),k(n,u),k(n,s),k(s,f),_&&_.m(f,null),k(e,l),k(e,a),k(a,c),G(d,c,null),t[8](e),m=!0,p||(g=[Ue(t[5].call(null,n)),Ue(t[4].call(null,a)),Q(a,"pointercancel",it(Wn))],p=!0)},p(b,[y]){A&&A.p&&(!m||y&64)&&Ie(A,w,b,b[6],m?Le(w,b[6],y,zn):Se(b[6]),yt),(!m||y&8)&&v(o,"style",b[3]),_&&_.p&&(!m||y&64)&&Ie(_,h,b,b[6],m?Le(h,b[6],y,Xn):Se(b[6]),Et),(!m||y&8)&&v(f,"style",b[3]),(!m||y&2)&&ve(c,"rotate-90",b[1]==="vertical"),(!m||y&2)&&ve(e,"vertical",b[1]==="vertical"),y&1&&rt(e,"--split-point",b[0]+"%")},i(b){m||(z(A,b),z(_,b),z(d.$$.fragment,b),m=!0)},o(b){W(A,b),W(_,b),W(d.$$.fragment,b),m=!1},d(b){b&&E(e),A&&A.d(b),_&&_.d(b),q(d),t[8](null),p=!1,Re(g)}}}const Wn=()=>{};function Vn(t,e,n){let{$$slots:r={},$$scope:o}=e,{direction:u="horizontal"}=e,s=null,{split:f=50}=e;function l(m){return m.addEventListener("pointerdown",p=>{const g=u==="vertical"?p.clientY:p.clientX,w=f,A=document.body.style.cursor;document.body.style.cursor=u==="vertical"?"ns-resize":"ew-resize";const h=b=>{const y=s?s.clientWidth:window.innerWidth,T=s?s.clientHeight:window.innerHeight,R=u==="vertical"?T:y,M=(u==="vertical"?b.clientY:b.clientX)-g,P=w+M/R*100;n(0,f=Bn(P,0,100))},_=()=>{document.body.style.cursor=A,window.removeEventListener("pointermove",h),window.removeEventListener("pointerup",_),window.removeEventListener("pointercancel",_)};window.addEventListener("pointermove",h),window.addEventListener("pointerup",_),window.addEventListener("pointercancel",_)}),{destroy(){m.removeEventListener("pointerdown",()=>{})}}}let a="transform: none;";function c(m){const p=new Ne(m);function g(w){const{matrix:A}=w.detail;n(3,a=`transform: ${A.toString()};`)}return p.addEventListener("panzoom:change",g),{destroy(){p.removeEventListener("panzoom:change",g),p.destroy()}}}function d(m){$[m?"unshift":"push"](()=>{s=m,n(2,s)})}return t.$$set=m=>{"direction"in m&&n(1,u=m.direction),"split"in m&&n(0,f=m.split),"$$scope"in m&&n(6,o=m.$$scope)},[f,u,s,a,l,c,o,r,d]}class Hn extends le{constructor(e){super(),ue(this,e,Vn,Fn,fe,{direction:1,split:0})}}const Yn=""+new URL("../assets/cat.58b560b7.jpg",import.meta.url).href,jn="data:image/avif;base64,AAAAHGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZgAAAOptZXRhAAAAAAAAACFoZGxyAAAAAAAAAABwaWN0AAAAAAAAAAAAAAAAAAAAAA5waXRtAAAAAAABAAAAImlsb2MAAAAAREAAAQABAAAAAAEOAAEAAAAAAAAApwAAACNpaW5mAAAAAAABAAAAFWluZmUCAAAAAAEAAGF2MDEAAAAAamlwcnAAAABLaXBjbwAAABNjb2xybmNseAACAAIABoAAAAAMYXYxQ4EEDAAAAAAUaXNwZQAAAAAAAAJyAAACcgAAABBwaXhpAAAAAAMICAgAAAAXaXBtYQAAAAAAAAABAAEEgYIDhAAAAK9tZGF0EgAKChkmZxnHggQEDQgylgERQAEEEEEA9NBi7JFlrqXV1mwMry34uIYK7WRdWYJ/ZZ0EIyWW8aLm92oz5LY0W+l2FiKsHpp4BB3Vrk+iwHuzboac7wmSHHHRWklZdZ2hpEAi4E31lf1tjXnXie8fh4lzApbqjH5Pj7ZN6761WygYVdc2zvJOsflFZstng6rQU/oulDZSO6fQWKvzpO9pseyXBLfms64=",Gn=""+new URL("../assets/david.0e7e3b46.png",import.meta.url).href;/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ht=Symbol("Comlink.proxy"),qn=Symbol("Comlink.endpoint"),xn=Symbol("Comlink.releaseProxy"),tt=Symbol("Comlink.finalizer"),We=Symbol("Comlink.thrown"),Yt=t=>typeof t=="object"&&t!==null||typeof t=="function",Zn={canHandle:t=>Yt(t)&&t[Ht],serialize(t){const{port1:e,port2:n}=new MessageChannel;return Gt(t,e),[n,[n]]},deserialize(t){return t.start(),Qe(t)}},Qn={canHandle:t=>Yt(t)&&We in t,serialize({value:t}){let e;return t instanceof Error?e={isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:e={isError:!1,value:t},[e,[]]},deserialize(t){throw t.isError?Object.assign(new Error(t.value.message),t.value):t.value}},jt=new Map([["proxy",Zn],["throw",Qn]]);function $n(t,e){for(const n of t)if(e===n||n==="*"||n instanceof RegExp&&n.test(e))return!0;return!1}function Gt(t,e=globalThis,n=["*"]){e.addEventListener("message",function r(o){if(!o||!o.data)return;if(!$n(n,o.origin)){console.warn(`Invalid origin '${o.origin}' for comlink proxy`);return}const{id:u,type:s,path:f}=Object.assign({path:[]},o.data),l=(o.data.argumentList||[]).map(be);let a;try{const c=f.slice(0,-1).reduce((m,p)=>m[p],t),d=f.reduce((m,p)=>m[p],t);switch(s){case"GET":a=d;break;case"SET":c[f.slice(-1)[0]]=be(o.data.value),a=!0;break;case"APPLY":a=d.apply(c,l);break;case"CONSTRUCT":{const m=new d(...l);a=nr(m)}break;case"ENDPOINT":{const{port1:m,port2:p}=new MessageChannel;Gt(t,p),a=Qt(m,[m])}break;case"RELEASE":a=void 0;break;default:return}}catch(c){a={value:c,[We]:0}}Promise.resolve(a).catch(c=>({value:c,[We]:0})).then(c=>{const[d,m]=qe(c);e.postMessage(Object.assign(Object.assign({},d),{id:u}),m),s==="RELEASE"&&(e.removeEventListener("message",r),qt(e),tt in t&&typeof t[tt]=="function"&&t[tt]())}).catch(c=>{const[d,m]=qe({value:new TypeError("Unserializable return value"),[We]:0});e.postMessage(Object.assign(Object.assign({},d),{id:u}),m)})}),e.start&&e.start()}function Jn(t){return t.constructor.name==="MessagePort"}function qt(t){Jn(t)&&t.close()}function Qe(t,e){return ot(t,[],e)}function Fe(t){if(t)throw new Error("Proxy has been released and is not useable")}function xt(t){return ye(t,{type:"RELEASE"}).then(()=>{qt(t)})}const je=new WeakMap,Ge="FinalizationRegistry"in globalThis&&new FinalizationRegistry(t=>{const e=(je.get(t)||0)-1;je.set(t,e),e===0&&xt(t)});function Kn(t,e){const n=(je.get(e)||0)+1;je.set(e,n),Ge&&Ge.register(t,e,t)}function er(t){Ge&&Ge.unregister(t)}function ot(t,e=[],n=function(){}){let r=!1;const o=new Proxy(n,{get(u,s){if(Fe(r),s===xn)return()=>{er(o),xt(t),r=!0};if(s==="then"){if(e.length===0)return{then:()=>o};const f=ye(t,{type:"GET",path:e.map(l=>l.toString())}).then(be);return f.then.bind(f)}return ot(t,[...e,s])},set(u,s,f){Fe(r);const[l,a]=qe(f);return ye(t,{type:"SET",path:[...e,s].map(c=>c.toString()),value:l},a).then(be)},apply(u,s,f){Fe(r);const l=e[e.length-1];if(l===qn)return ye(t,{type:"ENDPOINT"}).then(be);if(l==="bind")return ot(t,e.slice(0,-1));const[a,c]=kt(f);return ye(t,{type:"APPLY",path:e.map(d=>d.toString()),argumentList:a},c).then(be)},construct(u,s){Fe(r);const[f,l]=kt(s);return ye(t,{type:"CONSTRUCT",path:e.map(a=>a.toString()),argumentList:f},l).then(be)}});return Kn(o,t),o}function tr(t){return Array.prototype.concat.apply([],t)}function kt(t){const e=t.map(qe);return[e.map(n=>n[0]),tr(e.map(n=>n[1]))]}const Zt=new WeakMap;function Qt(t,e){return Zt.set(t,e),t}function nr(t){return Object.assign(t,{[Ht]:!0})}function qe(t){for(const[e,n]of jt)if(n.canHandle(t)){const[r,o]=n.serialize(t);return[{type:"HANDLER",name:e,value:r},o]}return[{type:"RAW",value:t},Zt.get(t)||[]]}function be(t){switch(t.type){case"HANDLER":return jt.get(t.name).deserialize(t.value);case"RAW":return t.value}}function ye(t,e,n){return new Promise(r=>{const o=rr();t.addEventListener("message",function u(s){!s.data||!s.data.id||s.data.id!==o||(t.removeEventListener("message",u),r(s.data))}),t.start&&t.start(),t.postMessage(Object.assign({id:o},e),n)})}function rr(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}function ir(){return new Worker(""+new URL("../workers/renderingWorker-5dfdb634.js",import.meta.url).href)}function or(t,e){const n=t.transferControlToOffscreen(),r=new ir,o=Qe(r);let u=null,s=null,f=()=>{};return o.errorDiffusionDithering(Qt(n,[n]),e).then(l=>{s=l.update,f=l.destroy,s(u||e)}),{update:l=>{s?s(l):u=l},destroy:()=>{f(),r.terminate()}}}function sr(t){let e,n,r,o,u,s,f;return{c(){e=I("div"),n=I("label"),r=x(t[1]),o=B(),u=I("input"),this.h()},l(l){e=S(l,"DIV",{});var a=L(e);n=S(a,"LABEL",{for:!0,class:!0});var c=L(n);r=Z(c,t[1]),c.forEach(E),o=X(a),u=S(a,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0,name:!0,class:!0}),a.forEach(E),this.h()},h(){v(n,"for",t[6]),v(n,"class","block mb-2 text-sm font-medium text-gray-900 dark:text-white"),v(u,"id",t[6]),v(u,"type","range"),v(u,"min",t[3]),v(u,"max",t[4]),v(u,"step",t[5]),v(u,"name",t[2]),v(u,"class","w-full h-1.5 mb-6 bg-white ring-1 ring-gray-300 shadow-sm rounded-lg appearance-none cursor-pointer accent-indigo-600 dark:bg-gray-700")},m(l,a){O(l,e,a),k(e,n),k(n,r),k(e,o),k(e,u),Ve(u,t[0]),s||(f=[Q(u,"change",t[7]),Q(u,"input",t[7])],s=!0)},p(l,[a]){a&2&&Ze(r,l[1]),a&8&&v(u,"min",l[3]),a&16&&v(u,"max",l[4]),a&32&&v(u,"step",l[5]),a&4&&v(u,"name",l[2]),a&1&&Ve(u,l[0])},i:ae,o:ae,d(l){l&&E(e),s=!1,Re(f)}}}function ar(t,e,n){let{label:r}=e,{name:o=void 0}=e,{min:u=null}=e,{max:s=null}=e,{value:f=0}=e,{step:l=1}=e,a=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);function c(){f=un(this.value),n(0,f)}return t.$$set=d=>{"label"in d&&n(1,r=d.label),"name"in d&&n(2,o=d.name),"min"in d&&n(3,u=d.min),"max"in d&&n(4,s=d.max),"value"in d&&n(0,f=d.value),"step"in d&&n(5,l=d.step)},[f,r,o,u,s,l,a,c]}class at extends le{constructor(e){super(),ue(this,e,ar,sr,fe,{label:1,name:2,min:3,max:4,value:0,step:5})}}function Tt(t,e,n){const r=t.slice();return r[6]=e[n],r}function It(t){let e,n=t[6].name+"",r,o,u;return{c(){e=I("option"),r=x(n),this.h()},l(s){e=S(s,"OPTION",{});var f=L(e);r=Z(f,n),f.forEach(E),this.h()},h(){e.__value=o=t[6].value,e.value=e.__value,e.selected=u=t[6].value===t[0]},m(s,f){O(s,e,f),k(e,r)},p(s,f){f&2&&n!==(n=s[6].name+"")&&Ze(r,n),f&2&&o!==(o=s[6].value)&&(e.__value=o,e.value=e.__value),f&3&&u!==(u=s[6].value===s[0])&&(e.selected=u)},d(s){s&&E(e)}}}function lr(t){let e,n,r,o,u,s,f,l=t[1],a=[];for(let c=0;c<l.length;c+=1)a[c]=It(Tt(t,l,c));return{c(){e=I("div"),n=I("label"),r=x(t[2]),o=B(),u=I("select");for(let c=0;c<a.length;c+=1)a[c].c();this.h()},l(c){e=S(c,"DIV",{});var d=L(e);n=S(d,"LABEL",{for:!0,class:!0});var m=L(n);r=Z(m,t[2]),m.forEach(E),o=X(d),u=S(d,"SELECT",{id:!0,name:!0,class:!0});var p=L(u);for(let g=0;g<a.length;g+=1)a[g].l(p);p.forEach(E),d.forEach(E),this.h()},h(){v(n,"for",t[4]),v(n,"class","block text-sm font-medium leading-6 text-gray-900"),v(u,"id",t[4]),v(u,"name",t[3]),v(u,"class","mt-2 block w-full rounded-md border-0 py-1.5 pl-3 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-indigo-600 sm:text-sm sm:leading-6"),t[0]===void 0&&fn(()=>t[5].call(u))},m(c,d){O(c,e,d),k(e,n),k(n,r),k(e,o),k(e,u);for(let m=0;m<a.length;m+=1)a[m]&&a[m].m(u,null);dt(u,t[0],!0),s||(f=Q(u,"change",t[5]),s=!0)},p(c,[d]){if(d&4&&Ze(r,c[2]),d&3){l=c[1];let m;for(m=0;m<l.length;m+=1){const p=Tt(c,l,m);a[m]?a[m].p(p,d):(a[m]=It(p),a[m].c(),a[m].m(u,null))}for(;m<a.length;m+=1)a[m].d(1);a.length=l.length}d&8&&v(u,"name",c[3]),d&3&&dt(u,c[0])},i:ae,o:ae,d(c){c&&E(e),Oe(a,c),s=!1,f()}}}function ur(t,e,n){let{options:r}=e,{selected:o}=e,{label:u}=e,{name:s=void 0}=e,f=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);function l(){o=cn(this),n(0,o),n(1,r)}return t.$$set=a=>{"options"in a&&n(1,r=a.options),"selected"in a&&n(0,o=a.selected),"label"in a&&n(2,u=a.label),"name"in a&&n(3,s=a.name)},[o,r,u,s,f,l]}class $t extends le{constructor(e){super(),ue(this,e,ur,lr,fe,{options:1,selected:0,label:2,name:3})}}function fr(t){let e,n,r,o,u,s;function f(d){t[5](d)}let l={label:"Diffusion Mode",options:t[2]};t[1]!==void 0&&(l.selected=t[1]),e=new $t({props:l}),$.push(()=>te(e,"selected",f));function a(d){t[6](d)}let c={label:"Diffusion Strength ("+t[0]+")",min:0,max:2,step:.01};return t[0]!==void 0&&(c.value=t[0]),o=new at({props:c}),$.push(()=>te(o,"value",a)),{c(){Y(e.$$.fragment),r=B(),Y(o.$$.fragment)},l(d){j(e.$$.fragment,d),r=X(d),j(o.$$.fragment,d)},m(d,m){G(e,d,m),O(d,r,m),G(o,d,m),s=!0},p(d,[m]){const p={};!n&&m&2&&(n=!0,p.selected=d[1],ne(()=>n=!1)),e.$set(p);const g={};m&1&&(g.label="Diffusion Strength ("+d[0]+")"),!u&&m&1&&(u=!0,g.value=d[0],ne(()=>u=!1)),o.$set(g)},i(d){s||(z(e.$$.fragment,d),z(o.$$.fragment,d),s=!0)},o(d){W(e.$$.fragment,d),W(o.$$.fragment,d),s=!1},d(d){q(e,d),d&&E(r),q(o,d)}}}function cr(t,e,n){let{diffusionStrength:r}=e,{diffusionMatrix:o}=e,{diffusionOriginX:u}=e,s="floyd_steinberg";const f=[{name:"Basic",value:"basic"},{name:"Floyd-Steinberg",value:"floyd_steinberg"},{name:"Atkinson",value:"atkinson"},{name:"Jarvis-Judice-Ninke",value:"jarvis_judice_ninke"}],l={basic:{matrix:[[0,1/2],[1/2,0]],originX:0},floyd_steinberg:{matrix:[[0,0,7/16],[3/16,5/16,1/16]],originX:1},atkinson:{matrix:[[0,0,1/8,1/8],[1/8,1/8,1/8,0],[0,1/8,0,0]],originX:1},jarvis_judice_ninke:{matrix:[[0,0,0,7/48,5/48],[3/48,5/48,7/48,5/48,3/48],[1/48,3/48,5/48,3/48,1/48]],originX:2}};function a(d){s=d,n(1,s)}function c(d){r=d,n(0,r)}return t.$$set=d=>{"diffusionStrength"in d&&n(0,r=d.diffusionStrength),"diffusionMatrix"in d&&n(3,o=d.diffusionMatrix),"diffusionOriginX"in d&&n(4,u=d.diffusionOriginX)},t.$$.update=()=>{if(t.$$.dirty&2){const{matrix:d,originX:m}=l[s];n(3,o=d),n(4,u=m)}},[r,s,f,o,u,a,c]}class dr extends le{constructor(e){super(),ue(this,e,cr,fr,fe,{diffusionStrength:0,diffusionMatrix:3,diffusionOriginX:4})}}function St(t,e,n){const r=t.slice();return r[4]=e[n],r}function Lt(t){let e,n,r,o=!1,u,s,f=t[4].label+"",l,a,c,d,m,p;return d=dn(t[3][0]),{c(){e=I("label"),n=I("input"),u=B(),s=I("div"),l=x(f),c=B(),this.h()},l(g){e=S(g,"LABEL",{class:!0});var w=L(e);n=S(w,"INPUT",{type:!0,name:!0,class:!0}),u=X(w),s=S(w,"DIV",{class:!0});var A=L(s);l=Z(A,f),A.forEach(E),c=X(w),w.forEach(E),this.h()},h(){v(n,"type","radio"),v(n,"name","tabs"),n.__value=r=t[4].value,n.value=n.__value,v(n,"class","sr-only"),v(s,"class",a="flex items-center justify-center py-2 text-sm font-medium text-gray-700 border-b "+(t[4].value===t[0]?"border-indigo-500 border-b-2":"border-gray-300")+" cursor-pointer hover:bg-gray-900 hover:bg-opacity-5"),v(e,"class","flex-1"),d.p(n)},m(g,w){O(g,e,w),k(e,n),n.checked=n.__value===t[0],k(e,u),k(e,s),k(s,l),k(e,c),m||(p=Q(n,"change",t[2]),m=!0)},p(g,w){w&2&&r!==(r=g[4].value)&&(n.__value=r,n.value=n.__value,o=!0),(o||w&3)&&(n.checked=n.__value===g[0]),w&2&&f!==(f=g[4].label+"")&&Ze(l,f),w&3&&a!==(a="flex items-center justify-center py-2 text-sm font-medium text-gray-700 border-b "+(g[4].value===g[0]?"border-indigo-500 border-b-2":"border-gray-300")+" cursor-pointer hover:bg-gray-900 hover:bg-opacity-5")&&v(s,"class",a)},d(g){g&&E(e),d.r(),m=!1,p()}}}function hr(t){let e,n=t[1],r=[];for(let o=0;o<n.length;o+=1)r[o]=Lt(St(t,n,o));return{c(){e=I("nav");for(let o=0;o<r.length;o+=1)r[o].c();this.h()},l(o){e=S(o,"NAV",{class:!0});var u=L(e);for(let s=0;s<r.length;s+=1)r[s].l(u);u.forEach(E),this.h()},h(){v(e,"class","flex w-full")},m(o,u){O(o,e,u);for(let s=0;s<r.length;s+=1)r[s]&&r[s].m(e,null)},p(o,[u]){if(u&3){n=o[1];let s;for(s=0;s<n.length;s+=1){const f=St(o,n,s);r[s]?r[s].p(f,u):(r[s]=Lt(f),r[s].c(),r[s].m(e,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},i:ae,o:ae,d(o){o&&E(e),Oe(r,o)}}}function mr(t,e,n){let{tabs:r}=e,{selected:o}=e;const u=[[]];function s(){o=this.__value,n(0,o)}return t.$$set=f=>{"tabs"in f&&n(1,r=f.tabs),"selected"in f&&n(0,o=f.selected)},[o,r,s,u]}class gr extends le{constructor(e){super(),ue(this,e,mr,hr,fe,{tabs:1,selected:0})}}const pr=t=>({}),Dt=t=>({});function _r(t){let e;const n=t[2].placeholder,r=Te(n,t,t[1],Dt),o=r||br();return{c(){o&&o.c()},l(u){o&&o.l(u)},m(u,s){o&&o.m(u,s),e=!0},p(u,s){r&&r.p&&(!e||s&2)&&Ie(r,n,u,u[1],e?Le(n,u[1],s,pr):Se(u[1]),Dt)},i(u){e||(z(o,u),e=!0)},o(u){W(o,u),e=!1},d(u){o&&o.d(u)}}}function vr(t){let e,n,r,o;return{c(){e=I("canvas"),this.h()},l(u){e=S(u,"CANVAS",{class:!0,style:!0}),L(e).forEach(E),this.h()},h(){v(e,"class","w-full max-h-96 object-contain shadow-lg"),rt(e,"image-rendering","pixelated")},m(u,s){O(u,e,s),r||(o=Ue(n=Ar.call(null,e,t[0])),r=!0)},p(u,s){n&&st(n.update)&&s&1&&n.update.call(null,u[0])},i:ae,o:ae,d(u){u&&E(e),r=!1,o()}}}function br(t){let e,n;return{c(){e=I("span"),n=x("No Image")},l(r){e=S(r,"SPAN",{});var o=L(e);n=Z(o,"No Image"),o.forEach(E)},m(r,o){O(r,e,o),k(e,n)},p:ae,d(r){r&&E(e)}}}function wr(t){let e,n,r,o;const u=[vr,_r],s=[];function f(l,a){return l[0]?0:1}return n=f(t),r=s[n]=u[n](t),{c(){e=I("div"),r.c(),this.h()},l(l){e=S(l,"DIV",{class:!0});var a=L(e);r.l(a),a.forEach(E),this.h()},h(){v(e,"class","w-full aspect-square rounded-lg bg-gray-100 p-8 grid place-items-center")},m(l,a){O(l,e,a),s[n].m(e,null),o=!0},p(l,[a]){let c=n;n=f(l),n===c?s[n].p(l,a):(He(),W(s[c],1,1,()=>{s[c]=null}),Ye(),r=s[n],r?r.p(l,a):(r=s[n]=u[n](l),r.c()),z(r,1),r.m(e,null))},i(l){o||(z(r),o=!0)},o(l){W(r),o=!1},d(l){l&&E(e),s[n].d()}}}function Ar(t,e){const n=t.getContext("2d");if(!n)return;const r=()=>{t.width=e.width,t.height=e.height,n.putImageData(e,0,0)};let o=null;const u=()=>{o||(o=requestAnimationFrame(()=>{o=null,r()}))};return u(),{destroy(){o&&cancelAnimationFrame(o)},update:s=>{e=s,u()}}}function Er(t,e,n){let{$$slots:r={},$$scope:o}=e,{imageData:u}=e;return t.$$set=s=>{"imageData"in s&&n(0,u=s.imageData),"$$scope"in s&&n(1,o=s.$$scope)},[u,o,r]}class yr extends le{constructor(e){super(),ue(this,e,Er,wr,fe,{imageData:0})}}function kr(){return new Worker(""+new URL("../workers/worker-09b3192d.js",import.meta.url).href)}let nt=null;async function Tr(t){return nt||(nt=Qe(new kr)),await nt.generate(t)}function Rt(t){let e,n,r;function o(s){t[8](s)}let u={label:"Bayer Level ("+t[3]+")",min:0,max:5,step:1};return t[3]!==void 0&&(u.value=t[3]),e=new at({props:u}),$.push(()=>te(e,"value",o)),{c(){Y(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,f){G(e,s,f),r=!0},p(s,f){const l={};f&8&&(l.label="Bayer Level ("+s[3]+")"),!n&&f&8&&(n=!0,l.value=s[3],ne(()=>n=!1)),e.$set(l)},i(s){r||(z(e.$$.fragment,s),r=!0)},o(s){W(e.$$.fragment,s),r=!1},d(s){q(e,s)}}}function Ct(t){let e,n,r;function o(s){t[9](s)}let u={aspectRatio:1,minWidth:1,minHeight:1,maxHeight:3e3,maxWidth:3e3};return t[4]!==void 0&&(u.width=t[4]),e=new Vt({props:u}),$.push(()=>te(e,"width",o)),{c(){Y(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,f){G(e,s,f),r=!0},p(s,f){const l={};!n&&f&16&&(n=!0,l.width=s[4],ne(()=>n=!1)),e.$set(l)},i(s){r||(z(e.$$.fragment,s),r=!0)},o(s){W(e.$$.fragment,s),r=!1},d(s){q(e,s)}}}function Ir(t){let e,n;return{c(){e=I("span"),n=x("Loading Threshold Map"),this.h()},l(r){e=S(r,"SPAN",{slot:!0});var o=L(e);n=Z(o,"Loading Threshold Map"),o.forEach(E),this.h()},h(){v(e,"slot","placeholder")},m(r,o){O(r,e,o),k(e,n)},p:ae,d(r){r&&E(e)}}}function Sr(t){let e,n,r,o,u,s,f,l,a,c;function d(h){t[7](h)}let m={label:"Threshold Map",options:t[5]};t[2]!==void 0&&(m.selected=t[2]),e=new $t({props:m}),$.push(()=>te(e,"selected",d));let p=t[2]==="bayer"&&Rt(t),g=t[2]==="white_noise"&&Ct(t);s=new yr({props:{imageData:t[0],$$slots:{placeholder:[Ir]},$$scope:{ctx:t}}});function w(h){t[10](h)}let A={label:"Noise Intensity ("+t[1]+")",min:0,max:1.5,step:.01};return t[1]!==void 0&&(A.value=t[1]),l=new at({props:A}),$.push(()=>te(l,"value",w)),{c(){Y(e.$$.fragment),r=B(),p&&p.c(),o=B(),g&&g.c(),u=B(),Y(s.$$.fragment),f=B(),Y(l.$$.fragment)},l(h){j(e.$$.fragment,h),r=X(h),p&&p.l(h),o=X(h),g&&g.l(h),u=X(h),j(s.$$.fragment,h),f=X(h),j(l.$$.fragment,h)},m(h,_){G(e,h,_),O(h,r,_),p&&p.m(h,_),O(h,o,_),g&&g.m(h,_),O(h,u,_),G(s,h,_),O(h,f,_),G(l,h,_),c=!0},p(h,[_]){const b={};!n&&_&4&&(n=!0,b.selected=h[2],ne(()=>n=!1)),e.$set(b),h[2]==="bayer"?p?(p.p(h,_),_&4&&z(p,1)):(p=Rt(h),p.c(),z(p,1),p.m(o.parentNode,o)):p&&(He(),W(p,1,1,()=>{p=null}),Ye()),h[2]==="white_noise"?g?(g.p(h,_),_&4&&z(g,1)):(g=Ct(h),g.c(),z(g,1),g.m(u.parentNode,u)):g&&(He(),W(g,1,1,()=>{g=null}),Ye());const y={};_&1&&(y.imageData=h[0]),_&2048&&(y.$$scope={dirty:_,ctx:h}),s.$set(y);const T={};_&2&&(T.label="Noise Intensity ("+h[1]+")"),!a&&_&2&&(a=!0,T.value=h[1],ne(()=>a=!1)),l.$set(T)},i(h){c||(z(e.$$.fragment,h),z(p),z(g),z(s.$$.fragment,h),z(l.$$.fragment,h),c=!0)},o(h){W(e.$$.fragment,h),W(p),W(g),W(s.$$.fragment,h),W(l.$$.fragment,h),c=!1},d(h){q(e,h),h&&E(r),p&&p.d(h),h&&E(o),g&&g.d(h),h&&E(u),q(s,h),h&&E(f),q(l,h)}}}function Lr(t,e,n){let r,{thresholdMap:o}=e,{noiseIntensity:u}=e,s="bayer";const f=[{name:"Bayer",value:"bayer"},{name:"Blue Noise",value:"blue_noise"},{name:"White Noise",value:"white_noise"}];let l=3,a=256;function c(g){s=g,n(2,s)}function d(g){l=g,n(3,l)}function m(g){a=g,n(4,a)}function p(g){u=g,n(1,u)}return t.$$set=g=>{"thresholdMap"in g&&n(0,o=g.thresholdMap),"noiseIntensity"in g&&n(1,u=g.noiseIntensity)},t.$$.update=()=>{if(t.$$.dirty&16&&n(6,r=a),t.$$.dirty&92&&"ImageData"in globalThis){let g;switch(s){case"bayer":g={mode:"bayer",level:l};break;case"blue_noise":g={mode:"blue_noise"};break;case"white_noise":g={mode:"white_noise",width:a,height:r};break}Tr(g).then(w=>n(0,o=w))}},[o,u,s,l,a,f,r,c,d,m,p]}class Dr extends le{constructor(e){super(),ue(this,e,Lr,Sr,fe,{thresholdMap:0,noiseIntensity:1})}}const Rr=t=>({}),Mt=t=>({});function Cr(t){let e,n,r,o,u,s,f,l,a,c,d,m;o=new Ce({props:{src:t[0]?ht:mt,class:"w-6 h-6 text-gray-500"}});const p=t[2].header,g=Te(p,t,t[1],Mt),w=t[2].default,A=Te(w,t,t[1],null);return{c(){e=I("div"),n=I("header"),r=I("button"),Y(o.$$.fragment),u=B(),s=I("div"),g&&g.c(),f=B(),l=I("section"),A&&A.c(),this.h()},l(h){e=S(h,"DIV",{class:!0});var _=L(e);n=S(_,"HEADER",{class:!0});var b=L(n);r=S(b,"BUTTON",{class:!0});var y=L(r);j(o.$$.fragment,y),y.forEach(E),u=X(b),s=S(b,"DIV",{class:!0});var T=L(s);g&&g.l(T),T.forEach(E),b.forEach(E),f=X(_),l=S(_,"SECTION",{class:!0});var R=L(l);A&&A.l(R),R.forEach(E),_.forEach(E),this.h()},h(){v(r,"class","contents"),v(s,"class","flex flex-1 items-center justify-between"),v(n,"class","py-4 px-4 flex-shrink-0 shadow-sm z-10 flex gap-2 items-center justify-between bg-white"),v(l,"class","overflow-y-auto overflow-x-visible"),ve(l,"hidden",!t[0]),v(e,"class",a="w-full max-h-full "+(t[0]?"h-full divide-y divide-gray-200 mt-auto":"")+" bg-white bg-opacity-95 border border-gray-100 overflow-y-hidden flex-1 shadow-lg rounded-md flex flex-col justify-start pointer-events-auto touch-auto")},m(h,_){O(h,e,_),k(e,n),k(n,r),G(o,r,null),k(n,u),k(n,s),g&&g.m(s,null),k(e,f),k(e,l),A&&A.m(l,null),c=!0,d||(m=Q(r,"click",t[3]),d=!0)},p(h,[_]){const b={};_&1&&(b.src=h[0]?ht:mt),o.$set(b),g&&g.p&&(!c||_&2)&&Ie(g,p,h,h[1],c?Le(p,h[1],_,Rr):Se(h[1]),Mt),A&&A.p&&(!c||_&2)&&Ie(A,w,h,h[1],c?Le(w,h[1],_,null):Se(h[1]),null),(!c||_&1)&&ve(l,"hidden",!h[0]),(!c||_&1&&a!==(a="w-full max-h-full "+(h[0]?"h-full divide-y divide-gray-200 mt-auto":"")+" bg-white bg-opacity-95 border border-gray-100 overflow-y-hidden flex-1 shadow-lg rounded-md flex flex-col justify-start pointer-events-auto touch-auto"))&&v(e,"class",a)},i(h){c||(z(o.$$.fragment,h),z(g,h),z(A,h),c=!0)},o(h){W(o.$$.fragment,h),W(g,h),W(A,h),c=!1},d(h){h&&E(e),q(o),g&&g.d(h),A&&A.d(h),d=!1,m()}}}function Mr(t,e,n){let{$$slots:r={},$$scope:o}=e,{open:u=!1}=e;const s=()=>n(0,u=!u);return t.$$set=f=>{"open"in f&&n(0,u=f.open),"$$scope"in f&&n(1,o=f.$$scope)},[u,o,r,s]}class Pr extends le{constructor(e){super(),ue(this,e,Mr,Cr,fe,{open:0})}}const Nr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAAXNSR0IArs4c6QAAAyNJREFUaEPVWjFW3DAQ/dOyqSEvB6AiTUJITcEtSJ8azkFq+uQUUFADCQ2pOAHbL2l/noy9q9Va1owseZMt4O16JM+fP39Gliwo+zkGcElyX0RAEpH/TyLyFcBNqdvL2IlIfheR0wGnY2D8338A+DLGlzFAmOt853A3Pvie5ZN5EMmFiMxyQSjHvQB4Y2HIAuSQ5H0i9zVpNKSdtfEAPgH4qQGkAkLyF4APHYhu4olAPYjIxxQYDZAXkjslnU5oZOmzp6E/AGZDYFJAsgWt1II6zdr5ov4OAVmQnJVkIgVOwVS0CPQCIXkL4CimiVAjE2vmTkQ+h2nWB+SA5GNNJhSRb0wifcZdeg/gtw9mA4gTxZaqk6l0A1jzfe3LRM0uKnAjU2t6CRlpqlRKA6nrNdMyKBhL/30gzyT3pnBCG/lUEwQwB/DW2S2B+FRoq9UUoBUlu8HQ/CF5JiIXqUGlr2uZGahebopzAN86ICthDPCpZWrivuKqnSyB1EwTbeQVmoiZiJDcFZH5f1atwhL+zjFyRfKkJiOJHN/o4BnMXDtGVPrQTL7NFYFjpPpSPaYRTXC0NlmM/IvVaxJGQo1oo2yxy2LEcoOm675W+eZTuql281VjxG+KVuA59pMzom2O1pKdZCS1ZI9d96Pqp1ZOtDVjHCNXAE40xrk2Q0CskY9o7NoxsktyPrazDzEzASPNEuW1I1b85AAxMrW5+s3VRNgkJ9bIssCfkbyoRUoNjXjV71xEXh+sVr1qdcJUkpmc1DIEdfWo2+rkGcCeYQK1aQ0grYY2Nx9C0VsXhkOoagBp79e7HeSq1yK1fa+mwTO0ADFUq8ENuo1qbGWmr3pZgBgCFd8ybVEcAHg0TJg0rQAkvYndgrkVkaNSfbIwkDsAqmOFJsIl9TIGSKAZ20GP31isGunLszFAgvmyjt46ZlwUdpJCGDAoBGTwvDN1GNqBaY6nc8GMBPIAoMjxdAfmEMB9DpgRQMq+MBA435z2xtZihTRS9RWONR8tzzBGRlTpHgYsa5A/iXvNCcDpyLXWVl9z6vP9mOQlgH3/Yg8jTwCKvnj2F9CvAivl1accAAAAAElFTkSuQmCC";function Ur(){return new Worker(""+new URL("../workers/worker-29805521.js",import.meta.url).href)}let Pt=Qe(new Ur);async function Or(t){if(!Pt)throw new Error("Worker not initialized");return await Pt.generatePalette(t)}if(!de)var de={map:function(t,e){var n={};return e?t.map(function(r,o){return n.index=o,e.call(n,r)}):t.slice()},naturalOrder:function(t,e){return t<e?-1:t>e?1:0},sum:function(t,e){var n={};return t.reduce(e?function(r,o,u){return n.index=u,r+e.call(n,o)}:function(r,o){return r+o},0)},max:function(t,e){return Math.max.apply(null,e?de.map(t,e):t)}};var Br=function(){var t=5,e=8-t,n=1e3;function r(l,a,c){return(l<<2*t)+(a<<t)+c}function o(l){var a=[],c=!1;function d(){a.sort(l),c=!0}return{push:function(m){a.push(m),c=!1},peek:function(m){return c||d(),m===void 0&&(m=a.length-1),a[m]},pop:function(){return c||d(),a.pop()},size:function(){return a.length},map:function(m){return a.map(m)},debug:function(){return c||d(),a}}}function u(l,a,c,d,m,p,g){var w=this;w.r1=l,w.r2=a,w.g1=c,w.g2=d,w.b1=m,w.b2=p,w.histo=g}function s(){this.vboxes=new o(function(l,a){return de.naturalOrder(l.vbox.count()*l.vbox.volume(),a.vbox.count()*a.vbox.volume())})}function f(l,a){if(a.count()){var c=a.r2-a.r1+1,d=a.g2-a.g1+1,m=de.max([c,d,a.b2-a.b1+1]);if(a.count()==1)return[a.copy()];var p,g,w,A,h=0,_=[],b=[];if(m==c)for(p=a.r1;p<=a.r2;p++){for(A=0,g=a.g1;g<=a.g2;g++)for(w=a.b1;w<=a.b2;w++)A+=l[r(p,g,w)]||0;_[p]=h+=A}else if(m==d)for(p=a.g1;p<=a.g2;p++){for(A=0,g=a.r1;g<=a.r2;g++)for(w=a.b1;w<=a.b2;w++)A+=l[r(g,p,w)]||0;_[p]=h+=A}else for(p=a.b1;p<=a.b2;p++){for(A=0,g=a.r1;g<=a.r2;g++)for(w=a.g1;w<=a.g2;w++)A+=l[r(g,w,p)]||0;_[p]=h+=A}return _.forEach(function(y,T){b[T]=h-y}),function(y){var T,R,D,M,P,F=y+"1",U=y+"2",V=0;for(p=a[F];p<=a[U];p++)if(_[p]>h/2){for(D=a.copy(),M=a.copy(),P=(T=p-a[F])<=(R=a[U]-p)?Math.min(a[U]-1,~~(p+R/2)):Math.max(a[F],~~(p-1-T/2));!_[P];)P++;for(V=b[P];!V&&_[P-1];)V=b[--P];return D[U]=P,M[F]=D[U]+1,[D,M]}}(m==c?"r":m==d?"g":"b")}}return u.prototype={volume:function(l){var a=this;return a._volume&&!l||(a._volume=(a.r2-a.r1+1)*(a.g2-a.g1+1)*(a.b2-a.b1+1)),a._volume},count:function(l){var a=this,c=a.histo;if(!a._count_set||l){var d,m,p,g=0;for(d=a.r1;d<=a.r2;d++)for(m=a.g1;m<=a.g2;m++)for(p=a.b1;p<=a.b2;p++)g+=c[r(d,m,p)]||0;a._count=g,a._count_set=!0}return a._count},copy:function(){var l=this;return new u(l.r1,l.r2,l.g1,l.g2,l.b1,l.b2,l.histo)},avg:function(l){var a=this,c=a.histo;if(!a._avg||l){var d,m,p,g,w=0,A=1<<8-t,h=0,_=0,b=0;for(m=a.r1;m<=a.r2;m++)for(p=a.g1;p<=a.g2;p++)for(g=a.b1;g<=a.b2;g++)w+=d=c[r(m,p,g)]||0,h+=d*(m+.5)*A,_+=d*(p+.5)*A,b+=d*(g+.5)*A;a._avg=w?[~~(h/w),~~(_/w),~~(b/w)]:[~~(A*(a.r1+a.r2+1)/2),~~(A*(a.g1+a.g2+1)/2),~~(A*(a.b1+a.b2+1)/2)]}return a._avg},contains:function(l){var a=this,c=l[0]>>e;return gval=l[1]>>e,bval=l[2]>>e,c>=a.r1&&c<=a.r2&&gval>=a.g1&&gval<=a.g2&&bval>=a.b1&&bval<=a.b2}},s.prototype={push:function(l){this.vboxes.push({vbox:l,color:l.avg()})},palette:function(){return this.vboxes.map(function(l){return l.color})},size:function(){return this.vboxes.size()},map:function(l){for(var a=this.vboxes,c=0;c<a.size();c++)if(a.peek(c).vbox.contains(l))return a.peek(c).color;return this.nearest(l)},nearest:function(l){for(var a,c,d,m=this.vboxes,p=0;p<m.size();p++)((c=Math.sqrt(Math.pow(l[0]-m.peek(p).color[0],2)+Math.pow(l[1]-m.peek(p).color[1],2)+Math.pow(l[2]-m.peek(p).color[2],2)))<a||a===void 0)&&(a=c,d=m.peek(p).color);return d},forcebw:function(){var l=this.vboxes;l.sort(function(m,p){return de.naturalOrder(de.sum(m.color),de.sum(p.color))});var a=l[0].color;a[0]<5&&a[1]<5&&a[2]<5&&(l[0].color=[0,0,0]);var c=l.length-1,d=l[c].color;d[0]>251&&d[1]>251&&d[2]>251&&(l[c].color=[255,255,255])}},{quantize:function(l,a){if(!l.length||a<2||a>256)return!1;var c=function(A){var h,_=new Array(1<<3*t);return A.forEach(function(b){h=r(b[0]>>e,b[1]>>e,b[2]>>e),_[h]=(_[h]||0)+1}),_}(l);c.forEach(function(){});var d=function(A,h){var _,b,y,T=1e6,R=0,D=1e6,M=0,P=1e6,F=0;return A.forEach(function(U){(_=U[0]>>e)<T?T=_:_>R&&(R=_),(b=U[1]>>e)<D?D=b:b>M&&(M=b),(y=U[2]>>e)<P?P=y:y>F&&(F=y)}),new u(T,R,D,M,P,F,h)}(l,c),m=new o(function(A,h){return de.naturalOrder(A.count(),h.count())});function p(A,h){for(var _,b=A.size(),y=0;y<n;){if(b>=h||y++>n)return;if((_=A.pop()).count()){var T=f(c,_),R=T[0],D=T[1];if(!R)return;A.push(R),D&&(A.push(D),b++)}else A.push(_),y++}}m.push(d),p(m,.75*a);for(var g=new o(function(A,h){return de.naturalOrder(A.count()*A.volume(),h.count()*h.volume())});m.size();)g.push(m.pop());p(g,a);for(var w=new s;g.size();)w.push(g.pop());return w}}}().quantize,Jt=function(t){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.width=this.canvas.width=t.naturalWidth,this.height=this.canvas.height=t.naturalHeight,this.context.drawImage(t,0,0,this.width,this.height)};Jt.prototype.getImageData=function(){return this.context.getImageData(0,0,this.width,this.height)};var ke=function(){};ke.prototype.getColor=function(t,e){return e===void 0&&(e=10),this.getPalette(t,5,e)[0]},ke.prototype.getPalette=function(t,e,n){var r=function(f){var l=f.colorCount,a=f.quality;if(l!==void 0&&Number.isInteger(l)){if(l===1)throw new Error("colorCount should be between 2 and 20. To get one color, call getColor() instead of getPalette()");l=Math.max(l,2),l=Math.min(l,20)}else l=10;return(a===void 0||!Number.isInteger(a)||a<1)&&(a=10),{colorCount:l,quality:a}}({colorCount:e,quality:n}),o=new Jt(t),u=function(f,l,a){for(var c,d,m,p,g,w=f,A=[],h=0;h<l;h+=a)d=w[0+(c=4*h)],m=w[c+1],p=w[c+2],((g=w[c+3])===void 0||g>=125)&&(d>250&&m>250&&p>250||A.push([d,m,p]));return A}(o.getImageData().data,o.width*o.height,r.quality),s=Br(u,r.colorCount);return s?s.palette():null},ke.prototype.getColorFromUrl=function(t,e,n){var r=this,o=document.createElement("img");o.addEventListener("load",function(){var u=r.getPalette(o,5,n);e(u[0],t)}),o.src=t},ke.prototype.getImageData=function(t,e){var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer",n.onload=function(){if(this.status==200){var r=new Uint8Array(this.response);i=r.length;for(var o=new Array(i),u=0;u<r.length;u++)o[u]=String.fromCharCode(r[u]);var s=o.join(""),f=window.btoa(s);e("data:image/png;base64,"+f)}},n.send()},ke.prototype.getColorAsync=function(t,e,n){var r=this;this.getImageData(t,function(o){var u=document.createElement("img");u.addEventListener("load",function(){var s=r.getPalette(u,5,n);e(s[0],this)}),u.src=o})};function Nt(t,e,n){const r=t.slice();return r[10]=e[n],r[11]=e,r[12]=n,r}function Ut(t,e,n){const r=t.slice();return r[13]=e[n].name,r[14]=e[n].palette,r}function Ot(t){let e,n,r=t[13]+"",o,u,s;function f(){return t[6](t[14])}return{c(){e=I("li"),n=I("button"),o=x(r)},l(l){e=S(l,"LI",{});var a=L(e);n=S(a,"BUTTON",{});var c=L(n);o=Z(c,r),c.forEach(E),a.forEach(E)},m(l,a){O(l,e,a),k(e,n),k(n,o),u||(s=Q(n,"click",f),u=!0)},p(l,a){t=l},d(l){l&&E(e),u=!1,s()}}}function Bt(t){let e,n,r,o,u,s,f;function l(){t[8].call(n,t[11],t[12])}function a(){return t[9](t[12])}return{c(){e=I("li"),n=I("input"),r=B(),o=I("button"),u=x("Remove"),this.h()},l(c){e=S(c,"LI",{});var d=L(e);n=S(d,"INPUT",{type:!0}),r=X(d),o=S(d,"BUTTON",{});var m=L(o);u=Z(m,"Remove"),m.forEach(E),d.forEach(E),this.h()},h(){v(n,"type","color")},m(c,d){O(c,e,d),k(e,n),Ve(n,t[10]),k(e,r),k(e,o),k(o,u),s||(f=[Q(n,"input",l),Q(o,"click",a)],s=!0)},p(c,d){t=c,d&1&&Ve(n,t[10])},d(c){c&&E(e),s=!1,Re(f)}}}function Xr(t){let e,n,r,o,u,s,f,l,a,c,d,m,p,g,w=t[4],A=[];for(let b=0;b<w.length;b+=1)A[b]=Ot(Ut(t,w,b));let h=t[0],_=[];for(let b=0;b<h.length;b+=1)_[b]=Bt(Nt(t,h,b));return{c(){e=I("ul");for(let b=0;b<A.length;b+=1)A[b].c();n=B(),r=I("li"),o=I("button"),u=x("Generate"),f=B(),l=I("ul");for(let b=0;b<_.length;b+=1)_[b].c();a=B(),c=I("li"),d=I("button"),m=x("Add"),this.h()},l(b){e=S(b,"UL",{});var y=L(e);for(let F=0;F<A.length;F+=1)A[F].l(y);n=X(y),r=S(y,"LI",{});var T=L(r);o=S(T,"BUTTON",{});var R=L(o);u=Z(R,"Generate"),R.forEach(E),T.forEach(E),y.forEach(E),f=X(b),l=S(b,"UL",{});var D=L(l);for(let F=0;F<_.length;F+=1)_[F].l(D);a=X(D),c=S(D,"LI",{});var M=L(c);d=S(M,"BUTTON",{});var P=L(d);m=Z(P,"Add"),P.forEach(E),M.forEach(E),D.forEach(E),this.h()},h(){o.disabled=s=!t[1]},m(b,y){O(b,e,y);for(let T=0;T<A.length;T+=1)A[T]&&A[T].m(e,null);k(e,n),k(e,r),k(r,o),k(o,u),O(b,f,y),O(b,l,y);for(let T=0;T<_.length;T+=1)_[T]&&_[T].m(l,null);k(l,a),k(l,c),k(c,d),k(d,m),p||(g=[Q(o,"click",t[7]),Q(d,"click",t[2])],p=!0)},p(b,[y]){if(y&17){w=b[4];let T;for(T=0;T<w.length;T+=1){const R=Ut(b,w,T);A[T]?A[T].p(R,y):(A[T]=Ot(R),A[T].c(),A[T].m(e,n))}for(;T<A.length;T+=1)A[T].d(1);A.length=w.length}if(y&2&&s!==(s=!b[1])&&(o.disabled=s),y&9){h=b[0];let T;for(T=0;T<h.length;T+=1){const R=Nt(b,h,T);_[T]?_[T].p(R,y):(_[T]=Bt(R),_[T].c(),_[T].m(l,a))}for(;T<_.length;T+=1)_[T].d(1);_.length=h.length}},i:ae,o:ae,d(b){b&&E(e),Oe(A,b),b&&E(f),b&&E(l),Oe(_,b),p=!1,Re(g)}}}function zr(t,e,n){let{palette:r=[]}=e,{image:o=null}=e;function u(){n(0,r=[...r,"#000000"])}function s(p){n(0,r=r.filter((g,w)=>w!==p))}const f=[{name:"Black and White",palette:["#000000","#ffffff"]},{name:"3Bit",palette:["#000000","#ffffff","#ff0000","#00ff00","#0000ff","#ffff00","#00ffff","#ff00ff"]},{name:"Grayscale",palette:["#000000","#333333","#666666","#999999","#cccccc","#ffffff"]}];async function l(p){const g=new ke,w=new OffscreenCanvas(p.width,p.height);w.getContext("2d").putImageData(p,0,0);const h=await w.convertToBlob(),_=URL.createObjectURL(h),b=new Image,y=new Promise((R,D)=>{b.onload=()=>{R()}});return b.src=_,await y,g.getPalette(b,20,2).map(Nn)}const a=p=>n(0,r=p),c=async()=>{o&&n(0,r=await l(o))};function d(p,g){p[g]=this.value,n(0,r)}const m=p=>s(p);return t.$$set=p=>{"palette"in p&&n(0,r=p.palette),"image"in p&&n(1,o=p.image)},[r,o,u,s,f,l,a,c,d,m]}class Fr extends le{constructor(e){super(),ue(this,e,zr,Xr,fe,{palette:0,image:1})}}function Xt(t,e,n){const r=t.slice();return r[34]=e[n],r}function Wr(t){let e,n,r,o,u,s,f,l,a,c,d,m,p,g,w,A,h,_,b=t[16],y=[];for(let T=0;T<b.length;T+=1)y[T]=zt(Xt(t,b,T));return c=new Ce({props:{src:_n,class:"w-12 h-12 text-gray-400"}}),{c(){e=I("div"),n=I("div"),r=I("p"),o=x("Select or Drop an Image to Start"),u=B(),s=I("div");for(let T=0;T<y.length;T+=1)y[T].c();f=B(),l=I("label"),a=I("div"),Y(c.$$.fragment),d=B(),m=I("span"),p=x("Choose an Image"),g=B(),w=I("input"),this.h()},l(T){e=S(T,"DIV",{class:!0});var R=L(e);n=S(R,"DIV",{class:!0});var D=L(n);r=S(D,"P",{class:!0});var M=L(r);o=Z(M,"Select or Drop an Image to Start"),M.forEach(E),u=X(D),s=S(D,"DIV",{class:!0});var P=L(s);for(let re=0;re<y.length;re+=1)y[re].l(P);f=X(P),l=S(P,"LABEL",{for:!0,class:!0});var F=L(l);a=S(F,"DIV",{class:!0});var U=L(a);j(c.$$.fragment,U),U.forEach(E),d=X(F),m=S(F,"SPAN",{class:!0});var V=L(m);p=Z(V,"Choose an Image"),V.forEach(E),g=X(F),w=S(F,"INPUT",{type:!0,class:!0,id:!0,accept:!0}),F.forEach(E),P.forEach(E),D.forEach(E),R.forEach(E),this.h()},h(){v(r,"class","text-2xl text-gray-500 text-center"),v(a,"class","grid place-items-center h-full w-full"),v(m,"class","sr-only"),v(w,"type","file"),v(w,"class","sr-only"),v(w,"id","image-input"),v(w,"accept","image/*"),v(l,"for","image-input"),v(l,"class","block spect-square h-24 w-24 object-cover rounded-md shadow-md border-2 border-white bg-white hover:bg-gray-100"),v(s,"class","flex gap-3 justify-center flex-wrap"),v(n,"class","grid gap-4"),v(e,"class","w-full h-full grid place-items-center px-8")},m(T,R){O(T,e,R),k(e,n),k(n,r),k(r,o),k(n,u),k(n,s);for(let D=0;D<y.length;D+=1)y[D]&&y[D].m(s,null);k(s,f),k(s,l),k(l,a),G(c,a,null),k(l,d),k(l,m),k(m,p),k(l,g),k(l,w),A=!0,h||(_=Q(w,"input",t[19]),h=!0)},p(T,R){if(R[0]&1114112){b=T[16];let D;for(D=0;D<b.length;D+=1){const M=Xt(T,b,D);y[D]?y[D].p(M,R):(y[D]=zt(M),y[D].c(),y[D].m(s,f))}for(;D<y.length;D+=1)y[D].d(1);y.length=b.length}},i(T){A||(z(c.$$.fragment,T),A=!0)},o(T){W(c.$$.fragment,T),A=!1},d(T){T&&E(e),Oe(y,T),q(c),h=!1,_()}}}function Vr(t){let e,n,r,o,u,s,f,l;return n=new Hn({props:{direction:t[12],$$slots:{right:[qr],left:[Hr]},$$scope:{ctx:t}}}),u=new Ce({props:{src:vn,class:"w-5 h-5 text-white"}}),{c(){e=I("div"),Y(n.$$.fragment),r=B(),o=I("button"),Y(u.$$.fragment),this.h()},l(a){e=S(a,"DIV",{class:!0});var c=L(e);j(n.$$.fragment,c),r=X(c),o=S(c,"BUTTON",{class:!0,title:!0});var d=L(o);j(u.$$.fragment,d),d.forEach(E),c.forEach(E),this.h()},h(){v(o,"class","absolute top-0 left-0 m-4 p-2 bg-black bg-opacity-40 rounded-full"),v(o,"title","Close Image & Reset"),v(e,"class","w-full h-full relative")},m(a,c){O(a,e,c),G(n,e,null),k(e,r),k(e,o),G(u,o,null),s=!0,f||(l=Q(o,"click",t[23]),f=!0)},p(a,c){const d={};c[0]&4096&&(d.direction=a[12]),c[0]&53235|c[1]&64&&(d.$$scope={dirty:c,ctx:a}),n.$set(d)},i(a){s||(z(n.$$.fragment,a),z(u.$$.fragment,a),s=!0)},o(a){W(n.$$.fragment,a),W(u.$$.fragment,a),s=!1},d(a){a&&E(e),q(n),q(u),f=!1,l()}}}function zt(t){let e,n,r,o,u;function s(){return t[24](t[34])}return{c(){e=I("button"),n=I("img"),this.h()},l(f){e=S(f,"BUTTON",{class:!0});var l=L(e);n=S(l,"IMG",{class:!0,src:!0,alt:!0}),l.forEach(E),this.h()},h(){v(n,"class","aspect-square h-24 w-24 object-cover rounded-md shadow-md border-2 border-white"),Be(n.src,r=t[34])||v(n,"src",r),v(n,"alt",""),v(e,"class","hover:opacity-75 transition-opacity")},m(f,l){O(f,e,l),k(e,n),o||(u=Q(e,"click",s),o=!0)},p(f,l){t=f},d(f){f&&E(e),o=!1,u()}}}function Hr(t){let e,n,r;return{c(){e=I("img"),this.h()},l(o){e=S(o,"IMG",{slot:!0,src:!0,alt:!0,style:!0,class:!0}),this.h()},h(){v(e,"slot","left"),Be(e.src,n=t[1].src)||v(e,"src",n),v(e,"alt",""),v(e,"style",r=`width: ${t[0]}px; height: ${t[15]}px`),v(e,"class","pixelated max-w-none shadow-lg bg-gray-200 svelte-1b7r98h")},m(o,u){O(o,e,u)},p(o,u){u[0]&2&&!Be(e.src,n=o[1].src)&&v(e,"src",n),u[0]&32769&&r!==(r=`width: ${o[0]}px; height: ${o[15]}px`)&&v(e,"style",r)},d(o){o&&E(e)}}}function Yr(t){let e,n,r;return{c(){e=I("img"),this.h()},l(o){e=S(o,"IMG",{src:!0,alt:!0,style:!0,class:!0}),this.h()},h(){Be(e.src,n=t[1].src)||v(e,"src",n),v(e,"alt",""),v(e,"style",r=`width: ${t[0]}px; height: ${t[15]}px`),v(e,"class","pixelated max-w-none shadow-lg svelte-1b7r98h")},m(o,u){O(o,e,u)},p(o,u){u[0]&2&&!Be(e.src,n=o[1].src)&&v(e,"src",n),u[0]&32769&&r!==(r=`width: ${o[0]}px; height: ${o[15]}px`)&&v(e,"style",r)},d(o){o&&E(e)}}}function jr(t){let e,n=t[7]&&t[14]&&Ft(t);return{c(){n&&n.c(),e=De()},l(r){n&&n.l(r),e=De()},m(r,o){n&&n.m(r,o),O(r,e,o)},p(r,o){r[7]&&r[14]?n?n.p(r,o):(n=Ft(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(r){n&&n.d(r),r&&E(e)}}}function Gr(t){let e,n=t[14]&&Wt(t);return{c(){n&&n.c(),e=De()},l(r){n&&n.l(r),e=De()},m(r,o){n&&n.m(r,o),O(r,e,o)},p(r,o){r[14]?n?n.p(r,o):(n=Wt(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(r){n&&n.d(r),r&&E(e)}}}function Ft(t){let e,n,r,o,u;return{c(){e=I("canvas"),this.h()},l(s){e=S(s,"CANVAS",{class:!0,style:!0,width:!0,height:!0,"aria-label":!0}),L(e).forEach(E),this.h()},h(){v(e,"class","pixelated shadow-lg bg-gray-200 svelte-1b7r98h"),v(e,"style",n=`width: ${t[0]}px; height: ${t[15]}px`),v(e,"width",t[0]),v(e,"height",t[15]),v(e,"aria-label","Dithered Image")},m(s,f){O(s,e,f),t[22](e),o||(u=Ue(r=Sn.call(null,e,{image:t[5],noiseIntensity:t[8],palette:t[14],output_width:t[0],output_height:t[15],thresholdMap:t[7]})),o=!0)},p(s,f){f[0]&32769&&n!==(n=`width: ${s[0]}px; height: ${s[15]}px`)&&v(e,"style",n),f[0]&1&&v(e,"width",s[0]),f[0]&32768&&v(e,"height",s[15]),r&&st(r.update)&&f[0]&49569&&r.update.call(null,{image:s[5],noiseIntensity:s[8],palette:s[14],output_width:s[0],output_height:s[15],thresholdMap:s[7]})},d(s){s&&E(e),t[22](null),o=!1,u()}}}function Wt(t){let e,n,r,o,u;return{c(){e=I("canvas"),this.h()},l(s){e=S(s,"CANVAS",{class:!0,style:!0,width:!0,height:!0}),L(e).forEach(E),this.h()},h(){v(e,"class","pixelated shadow-lg bg-gray-200 svelte-1b7r98h"),v(e,"style",n=`width: ${t[0]}px; height: ${t[15]}px`),v(e,"width",t[0]),v(e,"height",t[15])},m(s,f){O(s,e,f),t[21](e),o||(u=Ue(r=or.call(null,e,{image:t[5],output_width:t[0],output_height:t[15],palette:t[14],diffusionStrength:t[9],diffusionMatrix:t[10],diffusionMatrixOriginX:t[11]})),o=!0)},p(s,f){f[0]&32769&&n!==(n=`width: ${s[0]}px; height: ${s[15]}px`)&&v(e,"style",n),f[0]&1&&v(e,"width",s[0]),f[0]&32768&&v(e,"height",s[15]),r&&st(r.update)&&f[0]&52769&&r.update.call(null,{image:s[5],output_width:s[0],output_height:s[15],palette:s[14],diffusionStrength:s[9],diffusionMatrix:s[10],diffusionMatrixOriginX:s[11]})},d(s){s&&E(e),t[21](null),o=!1,u()}}}function qr(t){let e;function n(u,s){if(u[6]==="error_diffusion")return Gr;if(u[6]==="ordered")return jr;if(u[6]==="none")return Yr}let r=n(t),o=r&&r(t);return{c(){o&&o.c(),e=De()},l(u){o&&o.l(u),e=De()},m(u,s){o&&o.m(u,s),O(u,e,s)},p(u,s){r===(r=n(u))&&o?o.p(u,s):(o&&o.d(1),o=r&&r(u),o&&(o.c(),o.m(e.parentNode,e)))},d(u){o&&o.d(u),u&&E(e)}}}function xr(t){let e,n,r,o,u,s,f,l,a,c,d,m,p,g,w,A,h,_,b,y,T,R,D,M,P,F,U,V,re,ee,oe,he,me,J,ge,ie;function N(C){t[25](C)}function K(C){t[26](C)}let ce={minWidth:12,minHeight:12,maxHeight:5e3,maxWidth:5e3};t[0]!==void 0&&(ce.width=t[0]),t[3]!==void 0&&(ce.aspectRatio=t[3]),s=new Vt({props:ce}),$.push(()=>te(s,"width",N)),$.push(()=>te(s,"aspectRatio",K));function $e(C){t[27](C)}let lt={tabs:[{label:"None",value:"none"},{label:"Ordered",value:"ordered"},{label:"Error Diffusion",value:"error_diffusion"}]};t[6]!==void 0&&(lt.selected=t[6]),g=new gr({props:lt}),$.push(()=>te(g,"selected",$e));function Kt(C){t[28](C)}function en(C){t[29](C)}function tn(C){t[30](C)}let Xe={};t[9]!==void 0&&(Xe.diffusionStrength=t[9]),t[10]!==void 0&&(Xe.diffusionMatrix=t[10]),t[11]!==void 0&&(Xe.diffusionOriginX=t[11]),_=new dr({props:Xe}),$.push(()=>te(_,"diffusionStrength",Kt)),$.push(()=>te(_,"diffusionMatrix",en)),$.push(()=>te(_,"diffusionOriginX",tn));function nn(C){t[31](C)}function rn(C){t[32](C)}let Je={};t[7]!==void 0&&(Je.thresholdMap=t[7]),t[8]!==void 0&&(Je.noiseIntensity=t[8]),P=new Dr({props:Je}),$.push(()=>te(P,"thresholdMap",nn)),$.push(()=>te(P,"noiseIntensity",rn));function on(C){t[33](C)}let ut={image:t[5]};return t[2]!==void 0&&(ut.palette=t[2]),J=new Fr({props:ut}),$.push(()=>te(J,"palette",on)),{c(){e=I("section"),n=I("div"),r=I("h2"),o=x("Output Options"),u=B(),Y(s.$$.fragment),a=B(),c=I("div"),d=I("h2"),m=x("Dithering Options"),p=B(),Y(g.$$.fragment),A=B(),h=I("div"),Y(_.$$.fragment),D=B(),M=I("div"),Y(P.$$.fragment),re=B(),ee=I("div"),oe=I("h2"),he=x("Palette"),me=B(),Y(J.$$.fragment),this.h()},l(C){e=S(C,"SECTION",{class:!0});var H=L(e);n=S(H,"DIV",{});var pe=L(n);r=S(pe,"H2",{class:!0});var Me=L(r);o=Z(Me,"Output Options"),Me.forEach(E),u=X(pe),j(s.$$.fragment,pe),pe.forEach(E),a=X(H),c=S(H,"DIV",{class:!0});var se=L(c);d=S(se,"H2",{class:!0});var we=L(d);m=Z(we,"Dithering Options"),we.forEach(E),p=X(se),j(g.$$.fragment,se),A=X(se),h=S(se,"DIV",{class:!0});var Ae=L(h);j(_.$$.fragment,Ae),Ae.forEach(E),D=X(se),M=S(se,"DIV",{class:!0});var ft=L(M);j(P.$$.fragment,ft),ft.forEach(E),se.forEach(E),re=X(H),ee=S(H,"DIV",{class:!0});var ze=L(ee);oe=S(ze,"H2",{class:!0});var ct=L(oe);he=Z(ct,"Palette"),ct.forEach(E),me=X(ze),j(J.$$.fragment,ze),ze.forEach(E),H.forEach(E),this.h()},h(){v(r,"class","text-base font-semibold leading-7 text-black mb-4"),v(d,"class","text-base font-semibold leading-7 text-black mb-2"),v(h,"class",R=t[6]==="error_diffusion"?"contents":"hidden"),v(M,"class",V=t[6]==="ordered"?"contents":"hidden"),v(c,"class","grid gap-4"),v(oe,"class","text-base font-semibold leading-7 text-black mb-2"),v(ee,"class","grid gap-3"),ve(ee,"hidden",t[6]==="none"),v(e,"class","grid gap-8 pt-8 px-4 safe-padding-bottom svelte-1b7r98h")},m(C,H){O(C,e,H),k(e,n),k(n,r),k(r,o),k(n,u),G(s,n,null),k(e,a),k(e,c),k(c,d),k(d,m),k(c,p),G(g,c,null),k(c,A),k(c,h),G(_,h,null),k(c,D),k(c,M),G(P,M,null),k(e,re),k(e,ee),k(ee,oe),k(oe,he),k(ee,me),G(J,ee,null),ie=!0},p(C,H){const pe={};!f&&H[0]&1&&(f=!0,pe.width=C[0],ne(()=>f=!1)),!l&&H[0]&8&&(l=!0,pe.aspectRatio=C[3],ne(()=>l=!1)),s.$set(pe);const Me={};!w&&H[0]&64&&(w=!0,Me.selected=C[6],ne(()=>w=!1)),g.$set(Me);const se={};!b&&H[0]&512&&(b=!0,se.diffusionStrength=C[9],ne(()=>b=!1)),!y&&H[0]&1024&&(y=!0,se.diffusionMatrix=C[10],ne(()=>y=!1)),!T&&H[0]&2048&&(T=!0,se.diffusionOriginX=C[11],ne(()=>T=!1)),_.$set(se),(!ie||H[0]&64&&R!==(R=C[6]==="error_diffusion"?"contents":"hidden"))&&v(h,"class",R);const we={};!F&&H[0]&128&&(F=!0,we.thresholdMap=C[7],ne(()=>F=!1)),!U&&H[0]&256&&(U=!0,we.noiseIntensity=C[8],ne(()=>U=!1)),P.$set(we),(!ie||H[0]&64&&V!==(V=C[6]==="ordered"?"contents":"hidden"))&&v(M,"class",V);const Ae={};H[0]&32&&(Ae.image=C[5]),!ge&&H[0]&4&&(ge=!0,Ae.palette=C[2],ne(()=>ge=!1)),J.$set(Ae),(!ie||H[0]&64)&&ve(ee,"hidden",C[6]==="none")},i(C){ie||(z(s.$$.fragment,C),z(g.$$.fragment,C),z(_.$$.fragment,C),z(P.$$.fragment,C),z(J.$$.fragment,C),ie=!0)},o(C){W(s.$$.fragment,C),W(g.$$.fragment,C),W(_.$$.fragment,C),W(P.$$.fragment,C),W(J.$$.fragment,C),ie=!1},d(C){C&&E(e),q(s),q(g),q(_),q(P),q(J)}}}function Zr(t){let e,n,r;return e=new Ce({props:{src:bn,class:"w-4 h-4"}}),{c(){Y(e.$$.fragment),n=x(`
					Save`)},l(o){j(e.$$.fragment,o),n=Z(o,`
					Save`)},m(o,u){G(e,o,u),O(o,n,u),r=!0},p:ae,i(o){r||(z(e.$$.fragment,o),r=!0)},o(o){W(e.$$.fragment,o),r=!1},d(o){q(e,o),o&&E(n)}}}function Qr(t){let e,n,r,o,u;return o=new Rn({props:{disabled:!t[1],$$slots:{default:[Zr]},$$scope:{ctx:t}}}),o.$on("click",t[17]),{c(){e=I("h1"),n=x("Options"),r=B(),Y(o.$$.fragment),this.h()},l(s){e=S(s,"H1",{class:!0});var f=L(e);n=Z(f,"Options"),f.forEach(E),r=X(s),j(o.$$.fragment,s),this.h()},h(){v(e,"class","font-bold")},m(s,f){O(s,e,f),k(e,n),O(s,r,f),G(o,s,f),u=!0},p(s,f){const l={};f[0]&2&&(l.disabled=!s[1]),f[1]&64&&(l.$$scope={dirty:f,ctx:s}),o.$set(l)},i(s){u||(z(o.$$.fragment,s),u=!0)},o(s){W(o.$$.fragment,s),u=!1},d(s){s&&E(e),s&&E(r),q(o,s)}}}function $r(t){let e,n,r,o,u,s,f,l,a,c,d,m,p;e=new pn({props:{icon:Nr,og_image:Jr}});const g=[Vr,Wr],w=[];function A(h,_){return h[5]&&h[1]?0:1}return s=A(t),f=w[s]=g[s](t),c=new Pr({props:{open:t[13],$$slots:{header:[Qr],default:[xr]},$$scope:{ctx:t}}}),{c(){Y(e.$$.fragment),n=B(),r=B(),o=I("main"),u=I("section"),f.c(),l=B(),a=I("aside"),Y(c.$$.fragment),this.h()},l(h){j(e.$$.fragment,h),n=X(h),r=X(h),o=S(h,"MAIN",{class:!0});var _=L(o);u=S(_,"SECTION",{class:!0});var b=L(u);f.l(b),b.forEach(E),l=X(_),a=S(_,"ASIDE",{class:!0});var y=L(a);j(c.$$.fragment,y),y.forEach(E),_.forEach(E),this.h()},h(){v(u,"class","overflow-hidden select-none fixed inset-0"),v(a,"class","md:w-96 w-full max-h-full absolute bottom-0 left-0 right-0 top-0 md:left-auto z-50 p-2 grid place-items-end touch-none pointer-events-none"),v(o,"class","w-screen max-w-screen h-screen max-h-screen relative bg-gray-300")},m(h,_){G(e,h,_),O(h,n,_),O(h,r,_),O(h,o,_),k(o,u),w[s].m(u,null),k(o,l),k(o,a),G(c,a,null),d=!0,m||(p=[Q(document.body,"drop",it(t[18])),Q(document.body,"dragover",it(Kr))],m=!0)},p(h,_){let b=s;s=A(h),s===b?w[s].p(h,_):(He(),W(w[b],1,1,()=>{w[b]=null}),Ye(),f=w[s],f?f.p(h,_):(f=w[s]=g[s](h),f.c()),z(f,1),f.m(u,null));const y={};_[0]&8192&&(y.open=h[13]),_[0]&4079|_[1]&64&&(y.$$scope={dirty:_,ctx:h}),c.$set(y)},i(h){d||(z(e.$$.fragment,h),z(f),z(c.$$.fragment,h),d=!0)},o(h){W(e.$$.fragment,h),W(f),W(c.$$.fragment,h),d=!1},d(h){q(e,h),h&&E(n),h&&E(r),h&&E(o),w[s].d(),q(c),m=!1,Re(p)}}}const Jr="/og/dither-studio.webp",Kr=()=>{};function ei(t,e,n){let r,o;const u=[Yn,jn,Gn];let s=null,f=300,l=null,a=null;async function c(){s&&await Cn(s,"dithered","png")}async function d(N){var ce;const K=(ce=N.dataTransfer)==null?void 0:ce.files[0];if(K){if(!K.type.startsWith("image/")){alert("Please drop an image file");return}try{n(1,l=await vt(K))}catch($e){alert("Failed to load image"),console.error($e)}}}async function m(N){const K=N.target.files[0];if(K)try{n(1,l=await vt(K))}catch(ce){alert("Failed to load image"),console.error(ce)}}async function p(N){const K=new Image;K.onload=()=>{n(1,l=K)},K.src=N}let g="ordered",w=null,A=.3,h=1,_=[[1]],b=0,y="horizontal",T=!1,R=["#000000","#ffffff","#ff0000","#00ff00","#0000ff","#ffff00","#00ffff","#ff00ff"],D;hn(async()=>{const N=window.matchMedia("(min-width: 768px)");function K(ce){n(12,y=ce.matches?"horizontal":"vertical"),n(13,T=N.matches)}return N.addEventListener("change",K),K(N),()=>N.removeEventListener("change",K)});function M(N){$[N?"unshift":"push"](()=>{s=N,n(4,s)})}function P(N){$[N?"unshift":"push"](()=>{s=N,n(4,s)})}const F=()=>n(1,l=null),U=N=>p(N);function V(N){f=N,n(0,f)}function re(N){o=N,n(3,o),n(1,l)}function ee(N){g=N,n(6,g)}function oe(N){h=N,n(9,h)}function he(N){_=N,n(10,_)}function me(N){b=N,n(11,b)}function J(N){w=N,n(7,w)}function ge(N){A=N,n(8,A)}function ie(N){R=N,n(2,R)}return t.$$.update=()=>{t.$$.dirty[0]&2&&n(3,o=l!=null&&l.width&&(l!=null&&l.height)?l.width/l.height:1),t.$$.dirty[0]&9&&n(15,r=Math.round(f/o)),t.$$.dirty[0]&2&&n(5,a=l?Mn(l):null),t.$$.dirty[0]&4&&Or(R.map(Pn)).then(N=>n(14,D=N))},[f,l,R,o,s,a,g,w,A,h,_,b,y,T,D,r,u,c,d,m,p,M,P,F,U,V,re,ee,oe,he,me,J,ge,ie]}class oi extends le{constructor(e){super(),ue(this,e,ei,$r,fe,{},null,[-1,-1])}}export{oi as component,ii as universal};
