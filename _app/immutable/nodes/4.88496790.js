var gn=Object.defineProperty;var pn=(t,e,n)=>e in t?gn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Te=(t,e,n)=>(pn(t,typeof e!="symbol"?e+"":e,n),n);import{S as ue,i as fe,s as ce,k as y,q as Q,a as C,y as H,l as k,m as S,r as q,h as _,c as P,z as Y,n as f,b as B,G as p,A as j,M as $,g as O,d as F,B as G,O as ze,C as Le,D as De,E as Me,F as Re,P as _n,Q as we,p as at,R as We,T as ut,w as J,U as Se,u as tt,H as ae,V as vn,W as bn,X as At,Y as ct,Z as An,_ as ee,$ as te,a0 as wn,v as Qe,f as qe,a1 as dt,o as En,L as Ve,e as Ce}from"../chunks/index.22137adf.js";import{I as Pe,L as yn,A as kn,C as wt,b as Et,a as Tn,P as In,X as Sn,c as Ln}from"../chunks/Icon.8bf779de.js";function Dn(){return{title:"Dithering",author:"Loris Sigrist",description:"Dither your Images right in the browser!"}}const or=Object.freeze(Object.defineProperty({__proto__:null,load:Dn},Symbol.toStringTag,{value:"Module"}));function Mn(t){let e,n,i,s,o,r,l,a,u,d,c,h,I,b,A,g,m,E,w,T,D,v,L,N,X,W;return I=new Pe({props:{src:yn,class:"w-4 h-4",solid:!0}}),{c(){e=y("fieldset"),n=y("div"),i=y("label"),s=Q("Width"),o=C(),r=y("div"),l=y("input"),a=C(),u=y("div"),d=Q("px"),c=C(),h=y("span"),H(I.$$.fragment),b=C(),A=y("div"),g=y("label"),m=Q("Height"),E=C(),w=y("div"),T=y("input"),D=C(),v=y("div"),L=Q("px"),this.h()},l(U){e=k(U,"FIELDSET",{class:!0});var V=S(e);n=k(V,"DIV",{class:!0});var ne=S(n);i=k(ne,"LABEL",{for:!0,class:!0});var ge=S(i);s=q(ge,"Width"),ge.forEach(_),o=P(ne),r=k(ne,"DIV",{class:!0});var Z=S(r);l=k(Z,"INPUT",{name:!0,id:!0,type:!0,min:!0,max:!0,step:!0,class:!0,placeholder:!0}),a=P(Z),u=k(Z,"DIV",{class:!0});var le=S(u);d=q(le,"px"),le.forEach(_),Z.forEach(_),ne.forEach(_),c=P(V),h=k(V,"SPAN",{class:!0});var pe=S(h);Y(I.$$.fragment,pe),pe.forEach(_),b=P(V),A=k(V,"DIV",{class:!0});var de=S(A);g=k(de,"LABEL",{for:!0,class:!0});var re=S(g);m=q(re,"Height"),re.forEach(_),E=P(de),w=k(de,"DIV",{class:!0});var se=S(w);T=k(se,"INPUT",{type:!0,id:!0,name:!0,min:!0,max:!0,step:!0,class:!0,placeholder:!0}),D=P(se),v=k(se,"DIV",{class:!0});var ie=S(v);L=q(ie,"px"),ie.forEach(_),se.forEach(_),de.forEach(_),V.forEach(_),this.h()},h(){f(i,"for","width-"+t[8]),f(i,"class","block text-sm font-medium leading-6 text-gray-900"),f(l,"name","width"),f(l,"id","width-"+t[8]),f(l,"type","number"),f(l,"min",t[3]),f(l,"max",t[1]),f(l,"step","1"),l.value=t[0],f(l,"class","block w-full rounded-md border-0 py-1.5 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"),f(l,"placeholder","600"),f(u,"class","pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400"),f(r,"class","relative mt-2 rounded-md shadow-sm"),f(n,"class","w-full"),f(h,"class","text-gray-500 pb-2 cursor-not-allowed"),f(g,"for","height-"+t[9]),f(g,"class","block text-sm font-medium leading-6 text-gray-900"),f(T,"type","number"),f(T,"id","height-"+t[9]),f(T,"name","height"),f(T,"min",t[4]),f(T,"max",t[2]),f(T,"step","1"),T.value=t[5],f(T,"class","block w-full rounded-md border-0 py-1.5 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"),f(T,"placeholder","340"),f(v,"class","pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400"),f(w,"class","relative mt-2 rounded-md shadow-sm"),f(A,"class","w-full"),f(e,"class","flex gap-3 items-end justify-between")},m(U,V){B(U,e,V),p(e,n),p(n,i),p(i,s),p(n,o),p(n,r),p(r,l),p(r,a),p(r,u),p(u,d),p(e,c),p(e,h),j(I,h,null),p(e,b),p(e,A),p(A,g),p(g,m),p(A,E),p(A,w),p(w,T),p(w,D),p(w,v),p(v,L),N=!0,X||(W=[$(l,"input",t[6]),$(T,"input",t[7])],X=!0)},p(U,[V]){(!N||V&8)&&f(l,"min",U[3]),(!N||V&2)&&f(l,"max",U[1]),(!N||V&1&&l.value!==U[0])&&(l.value=U[0]),(!N||V&16)&&f(T,"min",U[4]),(!N||V&4)&&f(T,"max",U[2]),(!N||V&32&&T.value!==U[5])&&(T.value=U[5])},i(U){N||(O(I.$$.fragment,U),N=!0)},o(U){F(I.$$.fragment,U),N=!1},d(U){U&&_(e),G(I),X=!1,ze(W)}}}function yt(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}function Rn(t,e,n){let i,{width:s}=e,{aspectRatio:o}=e,{maxWidth:r=null}=e,{maxHeight:l=null}=e,{minWidth:a=null}=e,{minHeight:u=null}=e;function d(b){const A=b.target.value;A&&(a!==null&&A<a||r!==null&&A>r||n(0,s=A))}function c(b){const A=b.target.value;A&&(u!==null&&A<u||l!==null&&A>l||n(0,s=Math.round(o*A)))}let h=yt(),I=yt();return t.$$set=b=>{"width"in b&&n(0,s=b.width),"aspectRatio"in b&&n(10,o=b.aspectRatio),"maxWidth"in b&&n(1,r=b.maxWidth),"maxHeight"in b&&n(2,l=b.maxHeight),"minWidth"in b&&n(3,a=b.minWidth),"minHeight"in b&&n(4,u=b.minHeight)},t.$$.update=()=>{t.$$.dirty&1025&&n(5,i=Math.round(s/o))},[s,r,l,a,u,i,d,c,h,I,o]}class Kt extends ue{constructor(e){super(),fe(this,e,Rn,Mn,ce,{width:0,aspectRatio:10,maxWidth:1,maxHeight:2,minWidth:3,minHeight:4})}}var Cn="precision highp float;attribute vec2 position;varying vec2 fragCoord;void main(){fragCoord.x=position.x*0.5+0.5;fragCoord.y=position.y*0.5+0.5;gl_Position=vec4(position,0.0,1.0);}",Pn="precision highp float;varying vec2 fragCoord;uniform sampler2D uSampler;uniform float uThreshold;uniform sampler2D uNoiseSampler;uniform vec2 uNoiseSamplerSize;uniform float uNoise;uniform float uMonochrome;uniform vec2 uSize;uniform vec3 uDarkColor;uniform vec3 uLightColor;void main(void){vec2 imgPixel=vec2(fragCoord.x*uSize.x,fragCoord.y*uSize.y);vec2 noisePixel=vec2(mod(imgPixel.x,uNoiseSamplerSize.x),mod(imgPixel.y,uNoiseSamplerSize.y));vec2 noiseUV=vec2(noisePixel.x/uNoiseSamplerSize.x,noisePixel.y/uNoiseSamplerSize.y);float noise=(texture2D(uNoiseSampler,noiseUV).r-0.5)*2.0*uNoise;vec4 color=texture2D(uSampler,fragCoord);float gray=dot(color.rgb,vec3(0.299,0.587,0.114));color.r=color.r*(1.0-uMonochrome)+gray*uMonochrome;color.g=color.g*(1.0-uMonochrome)+gray*uMonochrome;color.b=color.b*(1.0-uMonochrome)+gray*uMonochrome;vec3 thresholds=vec3(step(uThreshold,color.r+noise),step(uThreshold,color.g+noise),step(uThreshold,color.b+noise));if(uMonochrome>0.0){color.rgb=vec3(mix(uDarkColor.r,uLightColor.r,thresholds.r),mix(uDarkColor.g,uLightColor.g,thresholds.g),mix(uDarkColor.b,uLightColor.b,thresholds.b));}else{color.rgb=thresholds;}gl_FragColor=color;}";function kt(t){return(t&t-1)===0}function Nn(t,e,n){const i=Tt(t,t.VERTEX_SHADER,e),s=Tt(t,t.FRAGMENT_SHADER,n),o=t.createProgram();if(!o)throw new Error("Failed to create shader program");if(t.attachShader(o,i),t.attachShader(o,s),t.linkProgram(o),!t.getProgramParameter(o,t.LINK_STATUS))throw Error(`Unable to initialize the shader program: ${t.getProgramInfoLog(o)}`);return o}function Tt(t,e,n){const i=t.createShader(e);if(!i)throw new Error("Failed to create shader");if(t.shaderSource(i,n),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS))throw Error(`An error occurred compiling the shaders: ${t.getShaderInfoLog(i)}`);return i}function Un(t){const e=t.createBuffer(),n=t.createBuffer(),i=[-1,1,-1,-1,1,-1,1,1],s=[3,2,1,3,1,0];return t.bindBuffer(t.ARRAY_BUFFER,e),t.bufferData(t.ARRAY_BUFFER,new Float32Array(i),t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(s),t.STATIC_DRAW),{vertex_buffer:e,index_buffer:n}}function It(t,e,n){const i=t.createTexture();if(!i)throw new Error("Failed to create texture");return t.bindTexture(t.TEXTURE_2D,i),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),kt(e.width)&&kt(e.height)?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,n)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,n)),i}function On(t,e){let n=e;const i=t.getContext("webgl",{preserveDrawingBuffer:!0});if(!i){alert("WebGL not supported");return}i.clearColor(0,0,0,1),i.clear(i.COLOR_BUFFER_BIT);const s=Nn(i,Cn,Pn),{vertex_buffer:o,index_buffer:r}=Un(i),l=i.getAttribLocation(s,"position");i.vertexAttribPointer(l,2,i.FLOAT,!1,0,0),i.enableVertexAttribArray(l);const a=i.getUniformLocation(s,"uSampler"),u=i.getUniformLocation(s,"uThreshold"),d=i.getUniformLocation(s,"uNoiseSampler"),c=i.getUniformLocation(s,"uNoise"),h=i.getUniformLocation(s,"uSize"),I=i.getUniformLocation(s,"uNoiseSamplerSize"),b=i.getUniformLocation(s,"uMonochrome"),A=i.getUniformLocation(s,"uDarkColor"),g=i.getUniformLocation(s,"uLightColor");let m;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!0);const E=()=>{m&&i.deleteTexture(m),m=It(i,n.image,i.LINEAR)};E();let w,T;i.useProgram(s);let D=null;const v=()=>{w&&i.deleteTexture(w),w=It(i,n.thresholdMap,i.NEAREST),T={width:n.thresholdMap.width,height:n.thresholdMap.height}};v();const L=()=>{i.viewport(0,0,n.output_width,n.output_height),i.clearColor(0,0,0,1),i.clear(i.COLOR_BUFFER_BIT),i.bindBuffer(i.ARRAY_BUFFER,o),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,r),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,m),i.uniform1i(a,0),i.activeTexture(i.TEXTURE1),i.bindTexture(i.TEXTURE_2D,w),i.uniform1i(d,1),i.uniform2f(I,T.width,T.height),i.uniform1f(u,n.threshold),i.uniform1f(c,n.noiseIntensity),i.uniform2f(h,n.output_width,n.output_height),i.uniform1f(b,n.monochrome?1:0),i.uniform3f(A,...St(n.colorDark)),i.uniform3f(g,...St(n.colorLight)),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT),i.drawElements(i.TRIANGLES,6,i.UNSIGNED_SHORT,0)};function N(){D=requestAnimationFrame(()=>{L(),D=null})}return N(),{update(X){const W=n.image!==X.image,U=n.thresholdMap!==X.thresholdMap;n=X,W&&E(),U&&v(),N()},destroy(){D!==null&&cancelAnimationFrame(D)}}}function St(t){const e=parseInt(t.slice(1,3),16)/255,n=parseInt(t.slice(3,5),16)/255,i=parseInt(t.slice(5,7),16)/255;return[e,n,i]}function Bn(t){let e,n,i,s,o;const r=t[3].default,l=Le(r,t,t[2],null);return{c(){e=y("button"),l&&l.c(),this.h()},l(a){e=k(a,"BUTTON",{type:!0,class:!0});var u=S(e);l&&l.l(u),u.forEach(_),this.h()},h(){e.disabled=t[0],f(e,"type","button"),f(e,"class",n=t[1][t[0]?"disabled":"normal"]+" rounded-md px-2.5 py-1.5 text-sm font-semibold focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 flex items-center justify-center gap-2")},m(a,u){B(a,e,u),l&&l.m(e,null),i=!0,s||(o=$(e,"click",t[4]),s=!0)},p(a,[u]){l&&l.p&&(!i||u&4)&&De(l,r,a,a[2],i?Re(r,a[2],u,null):Me(a[2]),null),(!i||u&1)&&(e.disabled=a[0]),(!i||u&1&&n!==(n=a[1][a[0]?"disabled":"normal"]+" rounded-md px-2.5 py-1.5 text-sm font-semibold focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 flex items-center justify-center gap-2"))&&f(e,"class",n)},i(a){i||(O(l,a),i=!0)},o(a){F(l,a),i=!1},d(a){a&&_(e),l&&l.d(a),s=!1,o()}}}function Xn(t,e,n){let{$$slots:i={},$$scope:s}=e,{disabled:o=!1}=e;const r={normal:"bg-indigo-600 text-white shadow-sm hover:bg-indigo-500",disabled:"bg-gray-200 text-gray-400 shadow-none cursor-not-allowed"};function l(a){_n.call(this,t,a)}return t.$$set=a=>{"disabled"in a&&n(0,o=a.disabled),"$$scope"in a&&n(2,s=a.$$scope)},[o,r,s,i,l]}class Fn extends ue{constructor(e){super(),fe(this,e,Xn,Bn,ce,{disabled:0})}}async function Wn(t,e,n="png"){const i=new OffscreenCanvas(t.width,t.height),s=i.getContext("2d");if(!s)return;s.drawImage(t,0,0,t.width,t.height);const o=await i.convertToBlob({type:"image/"+n,quality:1}),r=URL.createObjectURL(o),l=document.createElement("a");l.download=`${e}.${n}`,l.href=r,l.click(),l.remove(),URL.revokeObjectURL(r)}function Lt(t){return new Promise((e,n)=>{t.type.startsWith("image/")||n(new Error("Not an image file"));const i=new FileReader;i.onload=s=>{if(typeof i.result!="string")return;const o=new Image;o.onload=()=>{e(o)},o.onerror=r=>{n(r)},o.src=i.result},i.onerror=s=>{n(s)},i.readAsDataURL(t)})}function Vn(t){const n=new OffscreenCanvas(t.width,t.height).getContext("2d");if(!n)throw new Error("Could not get canvas context");return n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height)}function Dt(t){const e=parseInt(t.slice(1,3),16),n=parseInt(t.slice(3,5),16),i=parseInt(t.slice(5,7),16);return[e,n,i]}var zn=class extends EventTarget{dispatchTypedEvent(t,e){return super.dispatchEvent(e)}};class Ae{constructor(e){this.id=-1,this.nativePointer=e,this.pageX=e.pageX,this.pageY=e.pageY,this.clientX=e.clientX,this.clientY=e.clientY,self.Touch&&e instanceof Touch?this.id=e.identifier:Xe(e)&&(this.id=e.pointerId)}getCoalesced(){if("getCoalescedEvents"in this.nativePointer){const e=this.nativePointer.getCoalescedEvents().map(n=>new Ae(n));if(e.length>0)return e}return[this]}}const Xe=t=>"pointerId"in t,st=t=>"changedTouches"in t,Mt=()=>{};class Hn{constructor(e,{start:n=()=>!0,move:i=Mt,end:s=Mt,rawUpdates:o=!1,avoidPointerEvents:r=!1}={}){this._element=e,this.startPointers=[],this.currentPointers=[],this._excludeFromButtonsCheck=new Set,this._pointerStart=l=>{if(Xe(l)&&l.buttons===0)this._excludeFromButtonsCheck.add(l.pointerId);else if(!(l.buttons&1))return;const a=new Ae(l);this.currentPointers.some(u=>u.id===a.id)||this._triggerPointerStart(a,l)&&(Xe(l)?((l.target&&"setPointerCapture"in l.target?l.target:this._element).setPointerCapture(l.pointerId),this._element.addEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move),this._element.addEventListener("pointerup",this._pointerEnd),this._element.addEventListener("pointercancel",this._pointerEnd)):(window.addEventListener("mousemove",this._move),window.addEventListener("mouseup",this._pointerEnd)))},this._touchStart=l=>{for(const a of Array.from(l.changedTouches))this._triggerPointerStart(new Ae(a),l)},this._move=l=>{if(!st(l)&&(!Xe(l)||!this._excludeFromButtonsCheck.has(l.pointerId))&&l.buttons===0){this._pointerEnd(l);return}const a=this.currentPointers.slice(),u=st(l)?Array.from(l.changedTouches).map(c=>new Ae(c)):[new Ae(l)],d=[];for(const c of u){const h=this.currentPointers.findIndex(I=>I.id===c.id);h!==-1&&(d.push(c),this.currentPointers[h]=c)}d.length!==0&&this._moveCallback(a,d,l)},this._triggerPointerEnd=(l,a)=>{if(!st(a)&&a.buttons&1)return!1;const u=this.currentPointers.findIndex(c=>c.id===l.id);if(u===-1)return!1;this.currentPointers.splice(u,1),this.startPointers.splice(u,1),this._excludeFromButtonsCheck.delete(l.id);const d=!(a.type==="mouseup"||a.type==="touchend"||a.type==="pointerup");return this._endCallback(l,a,d),!0},this._pointerEnd=l=>{if(this._triggerPointerEnd(new Ae(l),l))if(Xe(l)){if(this.currentPointers.length)return;this._element.removeEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move),this._element.removeEventListener("pointerup",this._pointerEnd),this._element.removeEventListener("pointercancel",this._pointerEnd)}else window.removeEventListener("mousemove",this._move),window.removeEventListener("mouseup",this._pointerEnd)},this._touchEnd=l=>{for(const a of Array.from(l.changedTouches))this._triggerPointerEnd(new Ae(a),l)},this._startCallback=n,this._moveCallback=i,this._endCallback=s,this._rawUpdates=o&&"onpointerrawupdate"in window,self.PointerEvent&&!r?this._element.addEventListener("pointerdown",this._pointerStart):(this._element.addEventListener("mousedown",this._pointerStart),this._element.addEventListener("touchstart",this._touchStart),this._element.addEventListener("touchmove",this._move),this._element.addEventListener("touchend",this._touchEnd),this._element.addEventListener("touchcancel",this._touchEnd))}stop(){this._element.removeEventListener("pointerdown",this._pointerStart),this._element.removeEventListener("mousedown",this._pointerStart),this._element.removeEventListener("touchstart",this._touchStart),this._element.removeEventListener("touchmove",this._move),this._element.removeEventListener("touchend",this._touchEnd),this._element.removeEventListener("touchcancel",this._touchEnd),this._element.removeEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move),this._element.removeEventListener("pointerup",this._pointerEnd),this._element.removeEventListener("pointercancel",this._pointerEnd),window.removeEventListener("mousemove",this._move),window.removeEventListener("mouseup",this._pointerEnd)}_triggerPointerStart(e,n){return this._startCallback(e,n)?(this.currentPointers.push(e),this.startPointers.push(e),!0):!1}}function Yn(t,e,n){return Math.min(Math.max(t,e),n)}function Rt(t,e){return e?Math.sqrt((e.clientX-t.clientX)**2+(e.clientY-t.clientY)**2):0}function Ct(t,e){return e?{clientX:(t.clientX+e.clientX)/2,clientY:(t.clientY+e.clientY)/2}:t}const et=class extends zn{constructor(n){super();Te(this,"element");Te(this,"transform",new DOMMatrix);Te(this,"pointerTracker");this.element=n,this.element.addEventListener("wheel",this.onWheel.bind(this)),this.pointerTracker=new Hn(this.element,{start:(i,s)=>this.pointerTracker.currentPointers.length===2?!1:(s.preventDefault(),!0),move:i=>{this.onPointerMove(i,this.pointerTracker.currentPointers)},avoidPointerEvents:this.isSafari()}),this.element.addEventListener("wheel",this.onWheel.bind(this))}get x(){return this.transform.e}get y(){return this.transform.f}get scale(){return this.transform.a}set x(n){this.transform.e=n}set y(n){this.transform.f=n}set scale(n){this.transform.a=n,this.transform.d=n}onWheel(n){n.preventDefault();const i=this.element.getBoundingClientRect();let{deltaY:s}=n;const{ctrlKey:o,deltaMode:r}=n;r===1&&(s*=15);const l=s>0,a=o?100:300,u=1-(l?-s:s)/a,d=l?1/u:u,c=n.clientX-i.left,h=n.clientY-i.top;this.applyTransformation({scaleDiff:d,originX:c,originY:h})}applyTransformation(n={}){const{panX:i=0,panY:s=0,originX:o=0,originY:r=0,scaleDiff:l=1}=n,a=new DOMMatrix().translate(o,r).scale(l).translate(-o,-r),u=new DOMMatrix().translate(i,s);a.multiplySelf(u),a.multiplySelf(this.transform);const d=a.a,c=a.e,h=a.f;this.updateTransform(d,c,h)}onPointerMove(n,i){const s=this.element.getBoundingClientRect(),o=Ct(n[0],n[1]),r=Ct(i[0],i[1]),l=o.clientX-s.left,a=o.clientY-s.top,u=Rt(n[0],n[1]),d=Rt(i[0],i[1]),c=u?d/u:1;this.applyTransformation({originX:l,originY:a,scaleDiff:c,panX:r.clientX-o.clientX,panY:r.clientY-o.clientY})}updateTransform(n,i,s){if(n<et.MIN_SCALE||n>et.MAX_SCALE||n===this.scale&&i===this.x&&s===this.y)return;this.x=i,this.y=s,this.scale=n;const o=new CustomEvent("panzoom:change",{bubbles:!0,detail:{x:this.x,y:this.y,scale:this.scale,matrix:this.transform}});this.dispatchTypedEvent("panzoom:change",o)}isSafari(){return/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)}reset(){this.updateTransform(1,0,0)}destroy(){this.pointerTracker.stop()}};let Fe=et;Te(Fe,"MIN_SCALE",.01),Te(Fe,"MAX_SCALE",1e5);const jn=t=>({}),Pt=t=>({}),Gn=t=>({}),Nt=t=>({});function Zn(t){let e,n,i,s,o,r,l,a,u,d,c,h,I,b;const A=t[7].left,g=Le(A,t,t[6],Nt),m=t[7].right,E=Le(m,t,t[6],Pt);return c=new Pe({props:{src:kn,class:"w-6 h-6 text-white"}}),{c(){e=y("div"),n=y("div"),i=y("div"),s=y("div"),g&&g.c(),o=C(),r=y("div"),l=y("div"),E&&E.c(),a=C(),u=y("div"),d=y("div"),H(c.$$.fragment),this.h()},l(w){e=k(w,"DIV",{class:!0});var T=S(e);n=k(T,"DIV",{class:!0});var D=S(n);i=k(D,"DIV",{class:!0});var v=S(i);s=k(v,"DIV",{style:!0,class:!0});var L=S(s);g&&g.l(L),L.forEach(_),v.forEach(_),o=P(D),r=k(D,"DIV",{class:!0});var N=S(r);l=k(N,"DIV",{style:!0,class:!0});var X=S(l);E&&E.l(X),X.forEach(_),N.forEach(_),D.forEach(_),a=P(T),u=k(T,"DIV",{class:!0});var W=S(u);d=k(W,"DIV",{class:!0});var U=S(d);Y(c.$$.fragment,U),U.forEach(_),W.forEach(_),T.forEach(_),this.h()},h(){f(s,"style",t[3]),f(s,"class","w-full h-full origin-top-left grid place-items-center"),f(i,"class","mask-left svelte-u41rvx"),f(l,"style",t[3]),f(l,"class","w-full h-full origin-top-left grid place-items-center"),f(r,"class","mask-right svelte-u41rvx"),f(n,"class","w-full h-full grid place-items-center"),f(d,"class","w-12 h-12 rounded-full bg-black grid place-items-center absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"),we(d,"rotate-90",t[1]==="vertical"),f(u,"class","handle relative shadow-lg svelte-u41rvx"),f(e,"class","pz-container svelte-u41rvx"),we(e,"vertical",t[1]==="vertical"),at(e,"--split-point",t[0]+"%")},m(w,T){B(w,e,T),p(e,n),p(n,i),p(i,s),g&&g.m(s,null),p(n,o),p(n,r),p(r,l),E&&E.m(l,null),p(e,a),p(e,u),p(u,d),j(c,d,null),t[8](e),h=!0,I||(b=[We(t[5].call(null,n)),We(t[4].call(null,u)),$(u,"pointercancel",ut(Qn))],I=!0)},p(w,[T]){g&&g.p&&(!h||T&64)&&De(g,A,w,w[6],h?Re(A,w[6],T,Gn):Me(w[6]),Nt),(!h||T&8)&&f(s,"style",w[3]),E&&E.p&&(!h||T&64)&&De(E,m,w,w[6],h?Re(m,w[6],T,jn):Me(w[6]),Pt),(!h||T&8)&&f(l,"style",w[3]),(!h||T&2)&&we(d,"rotate-90",w[1]==="vertical"),(!h||T&2)&&we(e,"vertical",w[1]==="vertical"),T&1&&at(e,"--split-point",w[0]+"%")},i(w){h||(O(g,w),O(E,w),O(c.$$.fragment,w),h=!0)},o(w){F(g,w),F(E,w),F(c.$$.fragment,w),h=!1},d(w){w&&_(e),g&&g.d(w),E&&E.d(w),G(c),t[8](null),I=!1,ze(b)}}}const Qn=()=>{};function qn(t,e,n){let{$$slots:i={},$$scope:s}=e,{direction:o="horizontal"}=e,r=null,{split:l=50}=e;function a(h){return h.addEventListener("pointerdown",I=>{const b=o==="vertical"?I.clientY:I.clientX,A=l,g=document.body.style.cursor;document.body.style.cursor=o==="vertical"?"row-resize":"col-resize";const m=w=>{const T=r?r.clientWidth:window.innerWidth,D=r?r.clientHeight:window.innerHeight,v=o==="vertical"?D:T,N=(o==="vertical"?w.clientY:w.clientX)-b,X=A+N/v*100;n(0,l=Yn(X,0,100))},E=()=>{document.body.style.cursor=g,window.removeEventListener("pointermove",m),window.removeEventListener("pointerup",E),window.removeEventListener("pointercancel",E)};window.addEventListener("pointermove",m),window.addEventListener("pointerup",E),window.addEventListener("pointercancel",E)}),{destroy(){h.removeEventListener("pointerdown",()=>{})}}}let u="transform: none;";function d(h){const I=new Fe(h);function b(A){const{matrix:g}=A.detail;n(3,u=`transform: ${g.toString()};`)}return I.addEventListener("panzoom:change",b),{destroy(){I.removeEventListener("panzoom:change",b),I.destroy()}}}function c(h){J[h?"unshift":"push"](()=>{r=h,n(2,r)})}return t.$$set=h=>{"direction"in h&&n(1,o=h.direction),"split"in h&&n(0,l=h.split),"$$scope"in h&&n(6,s=h.$$scope)},[l,o,r,u,a,d,s,i,c]}class Jn extends ue{constructor(e){super(),fe(this,e,qn,Zn,ce,{direction:1,split:0})}}const Kn=""+new URL("../assets/cat.58b560b7.jpg",import.meta.url).href,$n="data:image/avif;base64,AAAAHGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZgAAAOptZXRhAAAAAAAAACFoZGxyAAAAAAAAAABwaWN0AAAAAAAAAAAAAAAAAAAAAA5waXRtAAAAAAABAAAAImlsb2MAAAAAREAAAQABAAAAAAEOAAEAAAAAAAAApwAAACNpaW5mAAAAAAABAAAAFWluZmUCAAAAAAEAAGF2MDEAAAAAamlwcnAAAABLaXBjbwAAABNjb2xybmNseAACAAIABoAAAAAMYXYxQ4EEDAAAAAAUaXNwZQAAAAAAAAJyAAACcgAAABBwaXhpAAAAAAMICAgAAAAXaXBtYQAAAAAAAAABAAEEgYIDhAAAAK9tZGF0EgAKChkmZxnHggQEDQgylgERQAEEEEEA9NBi7JFlrqXV1mwMry34uIYK7WRdWYJ/ZZ0EIyWW8aLm92oz5LY0W+l2FiKsHpp4BB3Vrk+iwHuzboac7wmSHHHRWklZdZ2hpEAi4E31lf1tjXnXie8fh4lzApbqjH5Pj7ZN6761WygYVdc2zvJOsflFZstng6rQU/oulDZSO6fQWKvzpO9pseyXBLfms64=",xn=""+new URL("../assets/david.0e7e3b46.png",import.meta.url).href;/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $t=Symbol("Comlink.proxy"),ei=Symbol("Comlink.endpoint"),ti=Symbol("Comlink.releaseProxy"),ot=Symbol("Comlink.finalizer"),Ze=Symbol("Comlink.thrown"),xt=t=>typeof t=="object"&&t!==null||typeof t=="function",ni={canHandle:t=>xt(t)&&t[$t],serialize(t){const{port1:e,port2:n}=new MessageChannel;return tn(t,e),[n,[n]]},deserialize(t){return t.start(),nt(t)}},ii={canHandle:t=>xt(t)&&Ze in t,serialize({value:t}){let e;return t instanceof Error?e={isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:e={isError:!1,value:t},[e,[]]},deserialize(t){throw t.isError?Object.assign(new Error(t.value.message),t.value):t.value}},en=new Map([["proxy",ni],["throw",ii]]);function ri(t,e){for(const n of t)if(e===n||n==="*"||n instanceof RegExp&&n.test(e))return!0;return!1}function tn(t,e=globalThis,n=["*"]){e.addEventListener("message",function i(s){if(!s||!s.data)return;if(!ri(n,s.origin)){console.warn(`Invalid origin '${s.origin}' for comlink proxy`);return}const{id:o,type:r,path:l}=Object.assign({path:[]},s.data),a=(s.data.argumentList||[]).map(ye);let u;try{const d=l.slice(0,-1).reduce((h,I)=>h[I],t),c=l.reduce((h,I)=>h[I],t);switch(r){case"GET":u=c;break;case"SET":d[l.slice(-1)[0]]=ye(s.data.value),u=!0;break;case"APPLY":u=c.apply(d,a);break;case"CONSTRUCT":{const h=new c(...a);u=ui(h)}break;case"ENDPOINT":{const{port1:h,port2:I}=new MessageChannel;tn(t,I),u=on(h,[h])}break;case"RELEASE":u=void 0;break;default:return}}catch(d){u={value:d,[Ze]:0}}Promise.resolve(u).catch(d=>({value:d,[Ze]:0})).then(d=>{const[c,h]=$e(d);e.postMessage(Object.assign(Object.assign({},c),{id:o}),h),r==="RELEASE"&&(e.removeEventListener("message",i),nn(e),ot in t&&typeof t[ot]=="function"&&t[ot]())}).catch(d=>{const[c,h]=$e({value:new TypeError("Unserializable return value"),[Ze]:0});e.postMessage(Object.assign(Object.assign({},c),{id:o}),h)})}),e.start&&e.start()}function si(t){return t.constructor.name==="MessagePort"}function nn(t){si(t)&&t.close()}function nt(t,e){return ft(t,[],e)}function Ge(t){if(t)throw new Error("Proxy has been released and is not useable")}function rn(t){return Ie(t,{type:"RELEASE"}).then(()=>{nn(t)})}const Je=new WeakMap,Ke="FinalizationRegistry"in globalThis&&new FinalizationRegistry(t=>{const e=(Je.get(t)||0)-1;Je.set(t,e),e===0&&rn(t)});function oi(t,e){const n=(Je.get(e)||0)+1;Je.set(e,n),Ke&&Ke.register(t,e,t)}function li(t){Ke&&Ke.unregister(t)}function ft(t,e=[],n=function(){}){let i=!1;const s=new Proxy(n,{get(o,r){if(Ge(i),r===ti)return()=>{li(s),rn(t),i=!0};if(r==="then"){if(e.length===0)return{then:()=>s};const l=Ie(t,{type:"GET",path:e.map(a=>a.toString())}).then(ye);return l.then.bind(l)}return ft(t,[...e,r])},set(o,r,l){Ge(i);const[a,u]=$e(l);return Ie(t,{type:"SET",path:[...e,r].map(d=>d.toString()),value:a},u).then(ye)},apply(o,r,l){Ge(i);const a=e[e.length-1];if(a===ei)return Ie(t,{type:"ENDPOINT"}).then(ye);if(a==="bind")return ft(t,e.slice(0,-1));const[u,d]=Ut(l);return Ie(t,{type:"APPLY",path:e.map(c=>c.toString()),argumentList:u},d).then(ye)},construct(o,r){Ge(i);const[l,a]=Ut(r);return Ie(t,{type:"CONSTRUCT",path:e.map(u=>u.toString()),argumentList:l},a).then(ye)}});return oi(s,t),s}function ai(t){return Array.prototype.concat.apply([],t)}function Ut(t){const e=t.map($e);return[e.map(n=>n[0]),ai(e.map(n=>n[1]))]}const sn=new WeakMap;function on(t,e){return sn.set(t,e),t}function ui(t){return Object.assign(t,{[$t]:!0})}function $e(t){for(const[e,n]of en)if(n.canHandle(t)){const[i,s]=n.serialize(t);return[{type:"HANDLER",name:e,value:i},s]}return[{type:"RAW",value:t},sn.get(t)||[]]}function ye(t){switch(t.type){case"HANDLER":return en.get(t.name).deserialize(t.value);case"RAW":return t.value}}function Ie(t,e,n){return new Promise(i=>{const s=fi();t.addEventListener("message",function o(r){!r.data||!r.data.id||r.data.id!==s||(t.removeEventListener("message",o),i(r.data))}),t.start&&t.start(),t.postMessage(Object.assign({id:s},e),n)})}function fi(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}function ci(){return new Worker(""+new URL("../workers/renderingWorker-5dfdb634.js",import.meta.url).href)}function di(t,e){const n=t.transferControlToOffscreen(),i=new ci,s=nt(i);let o=null,r=null,l=()=>{};return s.errorDiffusionDithering(on(n,[n]),e).then(a=>{r=a.update,l=a.destroy,r(o||e)}),{update:a=>{r?r(a):o=a},destroy:()=>{l(),i.terminate()}}}function hi(t){let e,n,i,s,o,r,l;return{c(){e=y("div"),n=y("label"),i=Q(t[1]),s=C(),o=y("input"),this.h()},l(a){e=k(a,"DIV",{});var u=S(e);n=k(u,"LABEL",{for:!0,class:!0});var d=S(n);i=q(d,t[1]),d.forEach(_),s=P(u),o=k(u,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0,name:!0,class:!0}),u.forEach(_),this.h()},h(){f(n,"for",t[6]),f(n,"class","block mb-2 text-sm font-medium text-gray-900 dark:text-white"),f(o,"id",t[6]),f(o,"type","range"),f(o,"min",t[3]),f(o,"max",t[4]),f(o,"step",t[5]),f(o,"name",t[2]),f(o,"class","w-full h-1.5 mb-6 bg-white ring-1 ring-gray-300 shadow-sm rounded-lg appearance-none cursor-pointer accent-indigo-600 dark:bg-gray-700")},m(a,u){B(a,e,u),p(e,n),p(n,i),p(e,s),p(e,o),Se(o,t[0]),r||(l=[$(o,"change",t[7]),$(o,"input",t[7])],r=!0)},p(a,[u]){u&2&&tt(i,a[1]),u&8&&f(o,"min",a[3]),u&16&&f(o,"max",a[4]),u&32&&f(o,"step",a[5]),u&4&&f(o,"name",a[2]),u&1&&Se(o,a[0])},i:ae,o:ae,d(a){a&&_(e),r=!1,ze(l)}}}function mi(t,e,n){let{label:i}=e,{name:s=void 0}=e,{min:o=null}=e,{max:r=null}=e,{value:l=0}=e,{step:a=1}=e,u=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);function d(){l=vn(this.value),n(0,l)}return t.$$set=c=>{"label"in c&&n(1,i=c.label),"name"in c&&n(2,s=c.name),"min"in c&&n(3,o=c.min),"max"in c&&n(4,r=c.max),"value"in c&&n(0,l=c.value),"step"in c&&n(5,a=c.step)},[l,i,s,o,r,a,u,d]}class xe extends ue{constructor(e){super(),fe(this,e,mi,hi,ce,{label:1,name:2,min:3,max:4,value:0,step:5})}}function Ot(t,e,n){const i=t.slice();return i[6]=e[n],i}function Bt(t){let e,n=t[6].name+"",i,s,o;return{c(){e=y("option"),i=Q(n),this.h()},l(r){e=k(r,"OPTION",{});var l=S(e);i=q(l,n),l.forEach(_),this.h()},h(){e.__value=s=t[6].value,e.value=e.__value,e.selected=o=t[6].value===t[0]},m(r,l){B(r,e,l),p(e,i)},p(r,l){l&2&&n!==(n=r[6].name+"")&&tt(i,n),l&2&&s!==(s=r[6].value)&&(e.__value=s,e.value=e.__value),l&3&&o!==(o=r[6].value===r[0])&&(e.selected=o)},d(r){r&&_(e)}}}function gi(t){let e,n,i,s,o,r,l,a=t[1],u=[];for(let d=0;d<a.length;d+=1)u[d]=Bt(Ot(t,a,d));return{c(){e=y("div"),n=y("label"),i=Q(t[2]),s=C(),o=y("select");for(let d=0;d<u.length;d+=1)u[d].c();this.h()},l(d){e=k(d,"DIV",{});var c=S(e);n=k(c,"LABEL",{for:!0,class:!0});var h=S(n);i=q(h,t[2]),h.forEach(_),s=P(c),o=k(c,"SELECT",{id:!0,name:!0,class:!0});var I=S(o);for(let b=0;b<u.length;b+=1)u[b].l(I);I.forEach(_),c.forEach(_),this.h()},h(){f(n,"for",t[4]),f(n,"class","block text-sm font-medium leading-6 text-gray-900"),f(o,"id",t[4]),f(o,"name",t[3]),f(o,"class","mt-2 block w-full rounded-md border-0 py-1.5 pl-3 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-indigo-600 sm:text-sm sm:leading-6"),t[0]===void 0&&bn(()=>t[5].call(o))},m(d,c){B(d,e,c),p(e,n),p(n,i),p(e,s),p(e,o);for(let h=0;h<u.length;h+=1)u[h]&&u[h].m(o,null);At(o,t[0],!0),r||(l=$(o,"change",t[5]),r=!0)},p(d,[c]){if(c&4&&tt(i,d[2]),c&3){a=d[1];let h;for(h=0;h<a.length;h+=1){const I=Ot(d,a,h);u[h]?u[h].p(I,c):(u[h]=Bt(I),u[h].c(),u[h].m(o,null))}for(;h<u.length;h+=1)u[h].d(1);u.length=a.length}c&8&&f(o,"name",d[3]),c&3&&At(o,d[0])},i:ae,o:ae,d(d){d&&_(e),ct(u,d),r=!1,l()}}}function pi(t,e,n){let{options:i}=e,{selected:s}=e,{label:o}=e,{name:r=void 0}=e,l=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);function a(){s=An(this),n(0,s),n(1,i)}return t.$$set=u=>{"options"in u&&n(1,i=u.options),"selected"in u&&n(0,s=u.selected),"label"in u&&n(2,o=u.label),"name"in u&&n(3,r=u.name)},[s,i,o,r,l,a]}class ln extends ue{constructor(e){super(),fe(this,e,pi,gi,ce,{options:1,selected:0,label:2,name:3})}}function _i(t){let e,n,i,s,o,r;function l(c){t[5](c)}let a={label:"Diffusion Mode",options:t[2]};t[1]!==void 0&&(a.selected=t[1]),e=new ln({props:a}),J.push(()=>ee(e,"selected",l));function u(c){t[6](c)}let d={label:"Diffusion Strength ("+t[0]+")",min:0,max:2,step:.01};return t[0]!==void 0&&(d.value=t[0]),s=new xe({props:d}),J.push(()=>ee(s,"value",u)),{c(){H(e.$$.fragment),i=C(),H(s.$$.fragment)},l(c){Y(e.$$.fragment,c),i=P(c),Y(s.$$.fragment,c)},m(c,h){j(e,c,h),B(c,i,h),j(s,c,h),r=!0},p(c,[h]){const I={};!n&&h&2&&(n=!0,I.selected=c[1],te(()=>n=!1)),e.$set(I);const b={};h&1&&(b.label="Diffusion Strength ("+c[0]+")"),!o&&h&1&&(o=!0,b.value=c[0],te(()=>o=!1)),s.$set(b)},i(c){r||(O(e.$$.fragment,c),O(s.$$.fragment,c),r=!0)},o(c){F(e.$$.fragment,c),F(s.$$.fragment,c),r=!1},d(c){G(e,c),c&&_(i),G(s,c)}}}function vi(t,e,n){let{diffusionStrength:i}=e,{diffusionMatrix:s}=e,{diffusionOriginX:o}=e,r="floyd_steinberg";const l=[{name:"Basic",value:"basic"},{name:"Floyd-Steinberg",value:"floyd_steinberg"},{name:"Atkinson",value:"atkinson"},{name:"Jarvis-Judice-Ninke",value:"jarvis_judice_ninke"}],a={basic:{matrix:[[0,1/2],[1/2,0]],originX:0},floyd_steinberg:{matrix:[[0,0,7/16],[3/16,5/16,1/16]],originX:1},atkinson:{matrix:[[0,0,1/8,1/8],[1/8,1/8,1/8,0],[0,1/8,0,0]],originX:1},jarvis_judice_ninke:{matrix:[[0,0,0,7/48,5/48],[3/48,5/48,7/48,5/48,3/48],[1/48,3/48,5/48,3/48,1/48]],originX:2}};function u(c){r=c,n(1,r)}function d(c){i=c,n(0,i)}return t.$$set=c=>{"diffusionStrength"in c&&n(0,i=c.diffusionStrength),"diffusionMatrix"in c&&n(3,s=c.diffusionMatrix),"diffusionOriginX"in c&&n(4,o=c.diffusionOriginX)},t.$$.update=()=>{if(t.$$.dirty&2){const{matrix:c,originX:h}=a[r];n(3,s=c),n(4,o=h)}},[i,r,l,s,o,u,d]}class bi extends ue{constructor(e){super(),fe(this,e,vi,_i,ce,{diffusionStrength:0,diffusionMatrix:3,diffusionOriginX:4})}}function Xt(t,e,n){const i=t.slice();return i[4]=e[n],i}function Ft(t){let e,n,i,s=!1,o,r,l=t[4].label+"",a,u,d,c,h,I;return c=wn(t[3][0]),{c(){e=y("label"),n=y("input"),o=C(),r=y("div"),a=Q(l),d=C(),this.h()},l(b){e=k(b,"LABEL",{class:!0});var A=S(e);n=k(A,"INPUT",{type:!0,name:!0,class:!0}),o=P(A),r=k(A,"DIV",{class:!0});var g=S(r);a=q(g,l),g.forEach(_),d=P(A),A.forEach(_),this.h()},h(){f(n,"type","radio"),f(n,"name","tabs"),n.__value=i=t[4].value,n.value=n.__value,f(n,"class","sr-only"),f(r,"class",u="flex items-center justify-center py-2 text-sm font-medium text-gray-700 border-b "+(t[4].value===t[0]?"border-indigo-500 border-b-2":"border-gray-300")+" cursor-pointer hover:bg-gray-900 hover:bg-opacity-5"),f(e,"class","flex-1"),c.p(n)},m(b,A){B(b,e,A),p(e,n),n.checked=n.__value===t[0],p(e,o),p(e,r),p(r,a),p(e,d),h||(I=$(n,"change",t[2]),h=!0)},p(b,A){A&2&&i!==(i=b[4].value)&&(n.__value=i,n.value=n.__value,s=!0),(s||A&3)&&(n.checked=n.__value===b[0]),A&2&&l!==(l=b[4].label+"")&&tt(a,l),A&3&&u!==(u="flex items-center justify-center py-2 text-sm font-medium text-gray-700 border-b "+(b[4].value===b[0]?"border-indigo-500 border-b-2":"border-gray-300")+" cursor-pointer hover:bg-gray-900 hover:bg-opacity-5")&&f(r,"class",u)},d(b){b&&_(e),c.r(),h=!1,I()}}}function Ai(t){let e,n=t[1],i=[];for(let s=0;s<n.length;s+=1)i[s]=Ft(Xt(t,n,s));return{c(){e=y("nav");for(let s=0;s<i.length;s+=1)i[s].c();this.h()},l(s){e=k(s,"NAV",{class:!0});var o=S(e);for(let r=0;r<i.length;r+=1)i[r].l(o);o.forEach(_),this.h()},h(){f(e,"class","flex w-full")},m(s,o){B(s,e,o);for(let r=0;r<i.length;r+=1)i[r]&&i[r].m(e,null)},p(s,[o]){if(o&3){n=s[1];let r;for(r=0;r<n.length;r+=1){const l=Xt(s,n,r);i[r]?i[r].p(l,o):(i[r]=Ft(l),i[r].c(),i[r].m(e,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=n.length}},i:ae,o:ae,d(s){s&&_(e),ct(i,s)}}}function wi(t,e,n){let{tabs:i}=e,{selected:s}=e;const o=[[]];function r(){s=this.__value,n(0,s)}return t.$$set=l=>{"tabs"in l&&n(1,i=l.tabs),"selected"in l&&n(0,s=l.selected)},[s,i,r,o]}class Ei extends ue{constructor(e){super(),fe(this,e,wi,Ai,ce,{tabs:1,selected:0})}}const yi=t=>({}),Wt=t=>({});function ki(t){let e;const n=t[2].placeholder,i=Le(n,t,t[1],Wt),s=i||Ii();return{c(){s&&s.c()},l(o){s&&s.l(o)},m(o,r){s&&s.m(o,r),e=!0},p(o,r){i&&i.p&&(!e||r&2)&&De(i,n,o,o[1],e?Re(n,o[1],r,yi):Me(o[1]),Wt)},i(o){e||(O(s,o),e=!0)},o(o){F(s,o),e=!1},d(o){s&&s.d(o)}}}function Ti(t){let e,n,i,s;return{c(){e=y("canvas"),this.h()},l(o){e=k(o,"CANVAS",{class:!0,style:!0}),S(e).forEach(_),this.h()},h(){f(e,"class","w-full max-h-96 object-contain shadow-lg"),at(e,"image-rendering","pixelated")},m(o,r){B(o,e,r),i||(s=We(n=Li.call(null,e,t[0])),i=!0)},p(o,r){n&&dt(n.update)&&r&1&&n.update.call(null,o[0])},i:ae,o:ae,d(o){o&&_(e),i=!1,s()}}}function Ii(t){let e,n;return{c(){e=y("span"),n=Q("No Image")},l(i){e=k(i,"SPAN",{});var s=S(e);n=q(s,"No Image"),s.forEach(_)},m(i,s){B(i,e,s),p(e,n)},p:ae,d(i){i&&_(e)}}}function Si(t){let e,n,i,s;const o=[Ti,ki],r=[];function l(a,u){return a[0]?0:1}return n=l(t),i=r[n]=o[n](t),{c(){e=y("div"),i.c(),this.h()},l(a){e=k(a,"DIV",{class:!0});var u=S(e);i.l(u),u.forEach(_),this.h()},h(){f(e,"class","w-full aspect-square rounded-lg bg-gray-100 p-8 grid place-items-center")},m(a,u){B(a,e,u),r[n].m(e,null),s=!0},p(a,[u]){let d=n;n=l(a),n===d?r[n].p(a,u):(Qe(),F(r[d],1,1,()=>{r[d]=null}),qe(),i=r[n],i?i.p(a,u):(i=r[n]=o[n](a),i.c()),O(i,1),i.m(e,null))},i(a){s||(O(i),s=!0)},o(a){F(i),s=!1},d(a){a&&_(e),r[n].d()}}}function Li(t,e){const n=t.getContext("2d");if(!n)return;const i=()=>{t.width=e.width,t.height=e.height,n.putImageData(e,0,0)};let s=null;const o=()=>{s||(s=requestAnimationFrame(()=>{s=null,i()}))};return o(),{destroy(){s&&cancelAnimationFrame(s)},update:r=>{e=r,o()}}}function Di(t,e,n){let{$$slots:i={},$$scope:s}=e,{imageData:o}=e;return t.$$set=r=>{"imageData"in r&&n(0,o=r.imageData),"$$scope"in r&&n(1,s=r.$$scope)},[o,s,i]}class Mi extends ue{constructor(e){super(),fe(this,e,Di,Si,ce,{imageData:0})}}function Ri(){return new Worker(""+new URL("../workers/worker-09b3192d.js",import.meta.url).href)}let lt=null;async function Ci(t){return lt||(lt=nt(new Ri)),await lt.generate(t)}function Vt(t){let e,n,i;function s(r){t[9](r)}let o={label:"Bayer Level ("+t[4]+")",min:0,max:5,step:1};return t[4]!==void 0&&(o.value=t[4]),e=new xe({props:o}),J.push(()=>ee(e,"value",s)),{c(){H(e.$$.fragment)},l(r){Y(e.$$.fragment,r)},m(r,l){j(e,r,l),i=!0},p(r,l){const a={};l&16&&(a.label="Bayer Level ("+r[4]+")"),!n&&l&16&&(n=!0,a.value=r[4],te(()=>n=!1)),e.$set(a)},i(r){i||(O(e.$$.fragment,r),i=!0)},o(r){F(e.$$.fragment,r),i=!1},d(r){G(e,r)}}}function zt(t){let e,n,i;function s(r){t[10](r)}let o={aspectRatio:1,minWidth:1,minHeight:1,maxHeight:3e3,maxWidth:3e3};return t[5]!==void 0&&(o.width=t[5]),e=new Kt({props:o}),J.push(()=>ee(e,"width",s)),{c(){H(e.$$.fragment)},l(r){Y(e.$$.fragment,r)},m(r,l){j(e,r,l),i=!0},p(r,l){const a={};!n&&l&32&&(n=!0,a.width=r[5],te(()=>n=!1)),e.$set(a)},i(r){i||(O(e.$$.fragment,r),i=!0)},o(r){F(e.$$.fragment,r),i=!1},d(r){G(e,r)}}}function Pi(t){let e,n;return{c(){e=y("span"),n=Q("Loading Threshold Map"),this.h()},l(i){e=k(i,"SPAN",{slot:!0});var s=S(e);n=q(s,"Loading Threshold Map"),s.forEach(_),this.h()},h(){f(e,"slot","placeholder")},m(i,s){B(i,e,s),p(e,n)},p:ae,d(i){i&&_(e)}}}function Ni(t){let e,n,i,s,o,r,l,a,u,d,c,h,I;function b(v){t[8](v)}let A={label:"Threshold Map",options:t[6]};t[3]!==void 0&&(A.selected=t[3]),e=new ln({props:A}),J.push(()=>ee(e,"selected",b));let g=t[3]==="bayer"&&Vt(t),m=t[3]==="white_noise"&&zt(t);r=new Mi({props:{imageData:t[0],$$slots:{placeholder:[Pi]},$$scope:{ctx:t}}});function E(v){t[11](v)}let w={label:"Threshold ("+t[1]+")",min:0,max:1,step:.01};t[1]!==void 0&&(w.value=t[1]),a=new xe({props:w}),J.push(()=>ee(a,"value",E));function T(v){t[12](v)}let D={label:"Noise Intensity ("+t[2]+")",min:0,max:1.5,step:.01};return t[2]!==void 0&&(D.value=t[2]),c=new xe({props:D}),J.push(()=>ee(c,"value",T)),{c(){H(e.$$.fragment),i=C(),g&&g.c(),s=C(),m&&m.c(),o=C(),H(r.$$.fragment),l=C(),H(a.$$.fragment),d=C(),H(c.$$.fragment)},l(v){Y(e.$$.fragment,v),i=P(v),g&&g.l(v),s=P(v),m&&m.l(v),o=P(v),Y(r.$$.fragment,v),l=P(v),Y(a.$$.fragment,v),d=P(v),Y(c.$$.fragment,v)},m(v,L){j(e,v,L),B(v,i,L),g&&g.m(v,L),B(v,s,L),m&&m.m(v,L),B(v,o,L),j(r,v,L),B(v,l,L),j(a,v,L),B(v,d,L),j(c,v,L),I=!0},p(v,[L]){const N={};!n&&L&8&&(n=!0,N.selected=v[3],te(()=>n=!1)),e.$set(N),v[3]==="bayer"?g?(g.p(v,L),L&8&&O(g,1)):(g=Vt(v),g.c(),O(g,1),g.m(s.parentNode,s)):g&&(Qe(),F(g,1,1,()=>{g=null}),qe()),v[3]==="white_noise"?m?(m.p(v,L),L&8&&O(m,1)):(m=zt(v),m.c(),O(m,1),m.m(o.parentNode,o)):m&&(Qe(),F(m,1,1,()=>{m=null}),qe());const X={};L&1&&(X.imageData=v[0]),L&8192&&(X.$$scope={dirty:L,ctx:v}),r.$set(X);const W={};L&2&&(W.label="Threshold ("+v[1]+")"),!u&&L&2&&(u=!0,W.value=v[1],te(()=>u=!1)),a.$set(W);const U={};L&4&&(U.label="Noise Intensity ("+v[2]+")"),!h&&L&4&&(h=!0,U.value=v[2],te(()=>h=!1)),c.$set(U)},i(v){I||(O(e.$$.fragment,v),O(g),O(m),O(r.$$.fragment,v),O(a.$$.fragment,v),O(c.$$.fragment,v),I=!0)},o(v){F(e.$$.fragment,v),F(g),F(m),F(r.$$.fragment,v),F(a.$$.fragment,v),F(c.$$.fragment,v),I=!1},d(v){G(e,v),v&&_(i),g&&g.d(v),v&&_(s),m&&m.d(v),v&&_(o),G(r,v),v&&_(l),G(a,v),v&&_(d),G(c,v)}}}function Ui(t,e,n){let i,{thresholdMap:s}=e,{threshold:o}=e,{noiseIntensity:r}=e,l="bayer";const a=[{name:"Bayer",value:"bayer"},{name:"Blue Noise",value:"blue_noise"},{name:"White Noise",value:"white_noise"}];let u=3,d=256;function c(g){l=g,n(3,l)}function h(g){u=g,n(4,u)}function I(g){d=g,n(5,d)}function b(g){o=g,n(1,o)}function A(g){r=g,n(2,r)}return t.$$set=g=>{"thresholdMap"in g&&n(0,s=g.thresholdMap),"threshold"in g&&n(1,o=g.threshold),"noiseIntensity"in g&&n(2,r=g.noiseIntensity)},t.$$.update=()=>{if(t.$$.dirty&32&&n(7,i=d),t.$$.dirty&184&&"ImageData"in globalThis){let g;switch(l){case"bayer":g={mode:"bayer",level:u};break;case"blue_noise":g={mode:"blue_noise"};break;case"white_noise":g={mode:"white_noise",width:d,height:i};break}Ci(g).then(m=>n(0,s=m))}},[s,o,r,l,u,d,a,i,c,h,I,b,A]}class Oi extends ue{constructor(e){super(),fe(this,e,Ui,Ni,ce,{thresholdMap:0,threshold:1,noiseIntensity:2})}}const Bi=t=>({}),Ht=t=>({});function Xi(t){let e,n,i,s,o,r,l,a,u,d,c,h;s=new Pe({props:{src:t[0]?wt:Et,class:"w-6 h-6 text-gray-500"}});const I=t[2].header,b=Le(I,t,t[1],Ht),A=t[2].default,g=Le(A,t,t[1],null);return{c(){e=y("div"),n=y("header"),i=y("button"),H(s.$$.fragment),o=C(),r=y("div"),b&&b.c(),l=C(),a=y("section"),g&&g.c(),this.h()},l(m){e=k(m,"DIV",{class:!0});var E=S(e);n=k(E,"HEADER",{class:!0});var w=S(n);i=k(w,"BUTTON",{class:!0});var T=S(i);Y(s.$$.fragment,T),T.forEach(_),o=P(w),r=k(w,"DIV",{class:!0});var D=S(r);b&&b.l(D),D.forEach(_),w.forEach(_),l=P(E),a=k(E,"SECTION",{class:!0});var v=S(a);g&&g.l(v),v.forEach(_),E.forEach(_),this.h()},h(){f(i,"class","contents"),f(r,"class","flex flex-1 items-center justify-between"),f(n,"class","py-4 px-4 flex-shrink-0 shadow-sm z-10 flex gap-2 items-center justify-between bg-white"),f(a,"class","overflow-y-auto overflow-x-visible"),we(a,"hidden",!t[0]),f(e,"class",u="w-full max-h-full "+(t[0]?"h-full divide-y divide-gray-200 mt-auto":"")+" bg-white bg-opacity-95 border border-gray-100 overflow-y-hidden flex-1 shadow-lg rounded-md flex flex-col justify-start pointer-events-auto touch-auto")},m(m,E){B(m,e,E),p(e,n),p(n,i),j(s,i,null),p(n,o),p(n,r),b&&b.m(r,null),p(e,l),p(e,a),g&&g.m(a,null),d=!0,c||(h=$(i,"click",t[3]),c=!0)},p(m,[E]){const w={};E&1&&(w.src=m[0]?wt:Et),s.$set(w),b&&b.p&&(!d||E&2)&&De(b,I,m,m[1],d?Re(I,m[1],E,Bi):Me(m[1]),Ht),g&&g.p&&(!d||E&2)&&De(g,A,m,m[1],d?Re(A,m[1],E,null):Me(m[1]),null),(!d||E&1)&&we(a,"hidden",!m[0]),(!d||E&1&&u!==(u="w-full max-h-full "+(m[0]?"h-full divide-y divide-gray-200 mt-auto":"")+" bg-white bg-opacity-95 border border-gray-100 overflow-y-hidden flex-1 shadow-lg rounded-md flex flex-col justify-start pointer-events-auto touch-auto"))&&f(e,"class",u)},i(m){d||(O(s.$$.fragment,m),O(b,m),O(g,m),d=!0)},o(m){F(s.$$.fragment,m),F(b,m),F(g,m),d=!1},d(m){m&&_(e),G(s),b&&b.d(m),g&&g.d(m),c=!1,h()}}}function Fi(t,e,n){let{$$slots:i={},$$scope:s}=e,{open:o=!1}=e;const r=()=>n(0,o=!o);return t.$$set=l=>{"open"in l&&n(0,o=l.open),"$$scope"in l&&n(1,s=l.$$scope)},[o,s,i,r]}class Wi extends ue{constructor(e){super(),fe(this,e,Fi,Xi,ce,{open:0})}}const Vi="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAAXNSR0IArs4c6QAAAyNJREFUaEPVWjFW3DAQ/dOyqSEvB6AiTUJITcEtSJ8azkFq+uQUUFADCQ2pOAHbL2l/noy9q9Va1owseZMt4O16JM+fP39Gliwo+zkGcElyX0RAEpH/TyLyFcBNqdvL2IlIfheR0wGnY2D8338A+DLGlzFAmOt853A3Pvie5ZN5EMmFiMxyQSjHvQB4Y2HIAuSQ5H0i9zVpNKSdtfEAPgH4qQGkAkLyF4APHYhu4olAPYjIxxQYDZAXkjslnU5oZOmzp6E/AGZDYFJAsgWt1II6zdr5ov4OAVmQnJVkIgVOwVS0CPQCIXkL4CimiVAjE2vmTkQ+h2nWB+SA5GNNJhSRb0wifcZdeg/gtw9mA4gTxZaqk6l0A1jzfe3LRM0uKnAjU2t6CRlpqlRKA6nrNdMyKBhL/30gzyT3pnBCG/lUEwQwB/DW2S2B+FRoq9UUoBUlu8HQ/CF5JiIXqUGlr2uZGahebopzAN86ICthDPCpZWrivuKqnSyB1EwTbeQVmoiZiJDcFZH5f1atwhL+zjFyRfKkJiOJHN/o4BnMXDtGVPrQTL7NFYFjpPpSPaYRTXC0NlmM/IvVaxJGQo1oo2yxy2LEcoOm675W+eZTuql281VjxG+KVuA59pMzom2O1pKdZCS1ZI9d96Pqp1ZOtDVjHCNXAE40xrk2Q0CskY9o7NoxsktyPrazDzEzASPNEuW1I1b85AAxMrW5+s3VRNgkJ9bIssCfkbyoRUoNjXjV71xEXh+sVr1qdcJUkpmc1DIEdfWo2+rkGcCeYQK1aQ0grYY2Nx9C0VsXhkOoagBp79e7HeSq1yK1fa+mwTO0ADFUq8ENuo1qbGWmr3pZgBgCFd8ybVEcAHg0TJg0rQAkvYndgrkVkaNSfbIwkDsAqmOFJsIl9TIGSKAZ20GP31isGunLszFAgvmyjt46ZlwUdpJCGDAoBGTwvDN1GNqBaY6nc8GMBPIAoMjxdAfmEMB9DpgRQMq+MBA435z2xtZihTRS9RWONR8tzzBGRlTpHgYsa5A/iXvNCcDpyLXWVl9z6vP9mOQlgH3/Yg8jTwCKvnj2F9CvAivl1accAAAAAElFTkSuQmCC";function zi(){return new Worker(""+new URL("../workers/worker-c5d6c441.js",import.meta.url).href)}let Yt=nt(new zi);async function jt(t){if(!Yt)throw new Error("Worker not initialized");return await Yt.generatePalette(t)}function Gt(t,e,n){const i=t.slice();return i[41]=e[n],i}function Hi(t){let e,n,i,s,o,r,l,a,u,d,c,h,I,b,A,g,m,E,w=t[19],T=[];for(let D=0;D<w.length;D+=1)T[D]=Zt(Gt(t,w,D));return d=new Pe({props:{src:In,class:"w-12 h-12 text-gray-400"}}),{c(){e=y("div"),n=y("div"),i=y("p"),s=Q("Select or Drop an Image to Start"),o=C(),r=y("div");for(let D=0;D<T.length;D+=1)T[D].c();l=C(),a=y("label"),u=y("div"),H(d.$$.fragment),c=C(),h=y("span"),I=Q("Choose an Image"),b=C(),A=y("input"),this.h()},l(D){e=k(D,"DIV",{class:!0});var v=S(e);n=k(v,"DIV",{class:!0});var L=S(n);i=k(L,"P",{class:!0});var N=S(i);s=q(N,"Select or Drop an Image to Start"),N.forEach(_),o=P(L),r=k(L,"DIV",{class:!0});var X=S(r);for(let ne=0;ne<T.length;ne+=1)T[ne].l(X);l=P(X),a=k(X,"LABEL",{for:!0,class:!0});var W=S(a);u=k(W,"DIV",{class:!0});var U=S(u);Y(d.$$.fragment,U),U.forEach(_),c=P(W),h=k(W,"SPAN",{class:!0});var V=S(h);I=q(V,"Choose an Image"),V.forEach(_),b=P(W),A=k(W,"INPUT",{type:!0,class:!0,id:!0,accept:!0}),W.forEach(_),X.forEach(_),L.forEach(_),v.forEach(_),this.h()},h(){f(i,"class","text-2xl text-gray-500 text-center"),f(u,"class","grid place-items-center h-full w-full"),f(h,"class","sr-only"),f(A,"type","file"),f(A,"class","sr-only"),f(A,"id","image-input"),f(A,"accept","image/*"),f(a,"for","image-input"),f(a,"class","block spect-square h-24 w-24 object-cover rounded-md shadow-md border-2 border-white bg-white hover:bg-gray-100"),f(r,"class","flex gap-3 justify-center flex-wrap"),f(n,"class","grid gap-4"),f(e,"class","w-full h-full grid place-items-center px-8")},m(D,v){B(D,e,v),p(e,n),p(n,i),p(i,s),p(n,o),p(n,r);for(let L=0;L<T.length;L+=1)T[L]&&T[L].m(r,null);p(r,l),p(r,a),p(a,u),j(d,u,null),p(a,c),p(a,h),p(h,I),p(a,b),p(a,A),g=!0,m||(E=$(A,"input",t[22]),m=!0)},p(D,v){if(v[0]&8912896){w=D[19];let L;for(L=0;L<w.length;L+=1){const N=Gt(D,w,L);T[L]?T[L].p(N,v):(T[L]=Zt(N),T[L].c(),T[L].m(r,l))}for(;L<T.length;L+=1)T[L].d(1);T.length=w.length}},i(D){g||(O(d.$$.fragment,D),g=!0)},o(D){F(d.$$.fragment,D),g=!1},d(D){D&&_(e),ct(T,D),G(d),m=!1,E()}}}function Yi(t){let e,n,i,s,o,r,l,a;return n=new Jn({props:{direction:t[15],$$slots:{right:[qi],left:[ji]},$$scope:{ctx:t}}}),o=new Pe({props:{src:Sn,class:"w-5 h-5 text-white"}}),{c(){e=y("div"),H(n.$$.fragment),i=C(),s=y("button"),H(o.$$.fragment),this.h()},l(u){e=k(u,"DIV",{class:!0});var d=S(e);Y(n.$$.fragment,d),i=P(d),s=k(d,"BUTTON",{class:!0,title:!0});var c=S(s);Y(o.$$.fragment,c),c.forEach(_),d.forEach(_),this.h()},h(){f(s,"class","absolute top-0 left-0 m-4 p-2 bg-black bg-opacity-40 rounded-full"),f(s,"title","Close Image & Reset"),f(e,"class","w-full h-full relative")},m(u,d){B(u,e,d),j(n,e,null),p(e,i),p(e,s),j(o,s,null),r=!0,l||(a=$(s,"click",t[27]),l=!0)},p(u,d){const c={};d[0]&32768&&(c.direction=u[15]),d[0]&425951|d[1]&8192&&(c.$$scope={dirty:d,ctx:u}),n.$set(c)},i(u){r||(O(n.$$.fragment,u),O(o.$$.fragment,u),r=!0)},o(u){F(n.$$.fragment,u),F(o.$$.fragment,u),r=!1},d(u){u&&_(e),G(n),G(o),l=!1,a()}}}function Zt(t){let e,n,i,s,o;function r(){return t[28](t[41])}return{c(){e=y("button"),n=y("img"),this.h()},l(l){e=k(l,"BUTTON",{class:!0});var a=S(e);n=k(a,"IMG",{class:!0,src:!0,alt:!0}),a.forEach(_),this.h()},h(){f(n,"class","aspect-square h-24 w-24 object-cover rounded-md shadow-md border-2 border-white"),Ve(n.src,i=t[41])||f(n,"src",i),f(n,"alt",""),f(e,"class","hover:opacity-75 transition-opacity")},m(l,a){B(l,e,a),p(e,n),s||(o=$(e,"click",r),s=!0)},p(l,a){t=l},d(l){l&&_(e),s=!1,o()}}}function ji(t){let e,n,i;return{c(){e=y("img"),this.h()},l(s){e=k(s,"IMG",{slot:!0,src:!0,alt:!0,style:!0,class:!0}),this.h()},h(){f(e,"slot","left"),Ve(e.src,n=t[1].src)||f(e,"src",n),f(e,"alt",""),f(e,"style",i=`width: ${t[0]}px; height: ${t[18]}px`),f(e,"class","pixelated max-w-none shadow-lg bg-gray-200 svelte-1b7r98h")},m(s,o){B(s,e,o)},p(s,o){o[0]&2&&!Ve(e.src,n=s[1].src)&&f(e,"src",n),o[0]&262145&&i!==(i=`width: ${s[0]}px; height: ${s[18]}px`)&&f(e,"style",i)},d(s){s&&_(e)}}}function Gi(t){let e,n,i;return{c(){e=y("img"),this.h()},l(s){e=k(s,"IMG",{src:!0,alt:!0,style:!0,class:!0}),this.h()},h(){Ve(e.src,n=t[1].src)||f(e,"src",n),f(e,"alt",""),f(e,"style",i=`width: ${t[0]}px; height: ${t[18]}px`),f(e,"class","pixelated max-w-none shadow-lg svelte-1b7r98h")},m(s,o){B(s,e,o)},p(s,o){o[0]&2&&!Ve(e.src,n=s[1].src)&&f(e,"src",n),o[0]&262145&&i!==(i=`width: ${s[0]}px; height: ${s[18]}px`)&&f(e,"style",i)},d(s){s&&_(e)}}}function Zi(t){let e,n=t[9]&&Qt(t);return{c(){n&&n.c(),e=Ce()},l(i){n&&n.l(i),e=Ce()},m(i,s){n&&n.m(i,s),B(i,e,s)},p(i,s){i[9]?n?n.p(i,s):(n=Qt(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(i){n&&n.d(i),i&&_(e)}}}function Qi(t){let e,n=t[17]&&qt(t);return{c(){n&&n.c(),e=Ce()},l(i){n&&n.l(i),e=Ce()},m(i,s){n&&n.m(i,s),B(i,e,s)},p(i,s){i[17]?n?n.p(i,s):(n=qt(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(i){n&&n.d(i),i&&_(e)}}}function Qt(t){let e,n,i,s,o;return{c(){e=y("canvas"),this.h()},l(r){e=k(r,"CANVAS",{class:!0,style:!0,width:!0,height:!0,"aria-label":!0}),S(e).forEach(_),this.h()},h(){f(e,"class","pixelated shadow-lg bg-gray-200 svelte-1b7r98h"),f(e,"style",n=`width: ${t[0]}px; height: ${t[18]}px`),f(e,"width",t[0]),f(e,"height",t[18]),f(e,"aria-label","Dithered Image")},m(r,l){B(r,e,l),t[26](e),s||(o=We(i=On.call(null,e,{image:t[7],threshold:t[10],noiseIntensity:t[11],monochrome:t[2],colorLight:t[3],colorDark:t[4],output_width:t[0],output_height:t[18],thresholdMap:t[9]})),s=!0)},p(r,l){l[0]&262145&&n!==(n=`width: ${r[0]}px; height: ${r[18]}px`)&&f(e,"style",n),l[0]&1&&f(e,"width",r[0]),l[0]&262144&&f(e,"height",r[18]),i&&dt(i.update)&&l[0]&265885&&i.update.call(null,{image:r[7],threshold:r[10],noiseIntensity:r[11],monochrome:r[2],colorLight:r[3],colorDark:r[4],output_width:r[0],output_height:r[18],thresholdMap:r[9]})},d(r){r&&_(e),t[26](null),s=!1,o()}}}function qt(t){let e,n,i,s,o;return{c(){e=y("canvas"),this.h()},l(r){e=k(r,"CANVAS",{class:!0,style:!0,width:!0,height:!0}),S(e).forEach(_),this.h()},h(){f(e,"class","pixelated shadow-lg bg-gray-200 svelte-1b7r98h"),f(e,"style",n=`width: ${t[0]}px; height: ${t[18]}px`),f(e,"width",t[0]),f(e,"height",t[18])},m(r,l){B(r,e,l),t[25](e),s||(o=We(i=di.call(null,e,{image:t[7],output_width:t[0],output_height:t[18],palette:t[17],diffusionStrength:t[12],diffusionMatrix:t[13],diffusionMatrixOriginX:t[14]})),s=!0)},p(r,l){l[0]&262145&&n!==(n=`width: ${r[0]}px; height: ${r[18]}px`)&&f(e,"style",n),l[0]&1&&f(e,"width",r[0]),l[0]&262144&&f(e,"height",r[18]),i&&dt(i.update)&&l[0]&422017&&i.update.call(null,{image:r[7],output_width:r[0],output_height:r[18],palette:r[17],diffusionStrength:r[12],diffusionMatrix:r[13],diffusionMatrixOriginX:r[14]})},d(r){r&&_(e),t[25](null),s=!1,o()}}}function qi(t){let e;function n(o,r){if(o[8]==="error_diffusion")return Qi;if(o[8]==="ordered")return Zi;if(o[8]==="none")return Gi}let i=n(t),s=i&&i(t);return{c(){s&&s.c(),e=Ce()},l(o){s&&s.l(o),e=Ce()},m(o,r){s&&s.m(o,r),B(o,e,r)},p(o,r){i===(i=n(o))&&s?s.p(o,r):(s&&s.d(1),s=i&&i(o),s&&(s.c(),s.m(e.parentNode,e)))},d(o){s&&s.d(o),o&&_(e)}}}function Jt(t){let e,n,i,s,o,r,l,a,u,d,c,h,I,b;return{c(){e=y("fieldset"),n=y("div"),i=y("input"),s=C(),o=y("label"),r=Q("Light"),l=C(),a=y("div"),u=y("input"),d=C(),c=y("label"),h=Q("Dark"),this.h()},l(A){e=k(A,"FIELDSET",{});var g=S(e);n=k(g,"DIV",{class:!0});var m=S(n);i=k(m,"INPUT",{type:!0,name:!0,id:!0}),s=P(m),o=k(m,"LABEL",{for:!0,class:!0});var E=S(o);r=q(E,"Light"),E.forEach(_),m.forEach(_),l=P(g),a=k(g,"DIV",{class:!0});var w=S(a);u=k(w,"INPUT",{type:!0,name:!0,id:!0}),d=P(w),c=k(w,"LABEL",{for:!0,class:!0});var T=S(c);h=q(T,"Dark"),T.forEach(_),w.forEach(_),g.forEach(_),this.h()},h(){f(i,"type","color"),f(i,"name","color-light"),f(i,"id","color-light"),f(o,"for","color-light"),f(o,"class","font-medium text-gray-900"),f(n,"class","flex gap-3"),f(u,"type","color"),f(u,"name","color-dark"),f(u,"id","color-dark"),f(c,"for","color-dark"),f(c,"class","font-medium text-gray-900"),f(a,"class","flex gap-3")},m(A,g){B(A,e,g),p(e,n),p(n,i),Se(i,t[3]),p(n,s),p(n,o),p(o,r),p(e,l),p(e,a),p(a,u),Se(u,t[4]),p(a,d),p(a,c),p(c,h),I||(b=[$(i,"input",t[39]),$(u,"input",t[40])],I=!0)},p(A,g){g[0]&8&&Se(i,A[3]),g[0]&16&&Se(u,A[4])},d(A){A&&_(e),I=!1,ze(b)}}}function Ji(t){let e,n,i,s,o,r,l,a,u,d,c,h,I,b,A,g,m,E,w,T,D,v,L,N,X,W,U,V,ne,ge,Z,le,pe,de,re,se,ie,Ne,_e,he,Ue,Oe,me,R,K;function ve(M){t[29](M)}function it(M){t[30](M)}let rt={minWidth:12,minHeight:12,maxHeight:5e3,maxWidth:5e3};t[0]!==void 0&&(rt.width=t[0]),t[5]!==void 0&&(rt.aspectRatio=t[5]),r=new Kt({props:rt}),J.push(()=>ee(r,"width",ve)),J.push(()=>ee(r,"aspectRatio",it));function an(M){t[31](M)}let ht={tabs:[{label:"None",value:"none"},{label:"Ordered",value:"ordered"},{label:"Error Diffusion",value:"error_diffusion"}]};t[8]!==void 0&&(ht.selected=t[8]),b=new Ei({props:ht}),J.push(()=>ee(b,"selected",an));function un(M){t[32](M)}function fn(M){t[33](M)}function cn(M){t[34](M)}let He={};t[12]!==void 0&&(He.diffusionStrength=t[12]),t[13]!==void 0&&(He.diffusionMatrix=t[13]),t[14]!==void 0&&(He.diffusionOriginX=t[14]),E=new bi({props:He}),J.push(()=>ee(E,"diffusionStrength",un)),J.push(()=>ee(E,"diffusionMatrix",fn)),J.push(()=>ee(E,"diffusionOriginX",cn));function dn(M){t[35](M)}function hn(M){t[36](M)}function mn(M){t[37](M)}let Ye={};t[9]!==void 0&&(Ye.thresholdMap=t[9]),t[11]!==void 0&&(Ye.noiseIntensity=t[11]),t[10]!==void 0&&(Ye.threshold=t[10]),X=new Oi({props:Ye}),J.push(()=>ee(X,"thresholdMap",dn)),J.push(()=>ee(X,"noiseIntensity",hn)),J.push(()=>ee(X,"threshold",mn));let x=t[2]&&Jt(t);return{c(){e=y("section"),n=y("div"),i=y("h2"),s=Q("Output Options"),o=C(),H(r.$$.fragment),u=C(),d=y("div"),c=y("h2"),h=Q("Dithering Options"),I=C(),H(b.$$.fragment),g=C(),m=y("div"),H(E.$$.fragment),L=C(),N=y("div"),H(X.$$.fragment),ge=C(),Z=y("div"),le=y("h2"),pe=Q("Palette"),de=C(),re=y("div"),se=y("div"),ie=y("input"),Ne=C(),_e=y("div"),he=y("label"),Ue=Q("Monochrome"),Oe=C(),x&&x.c(),this.h()},l(M){e=k(M,"SECTION",{class:!0});var z=S(e);n=k(z,"DIV",{});var be=S(n);i=k(be,"H2",{class:!0});var Be=S(i);s=q(Be,"Output Options"),Be.forEach(_),o=P(be),Y(r.$$.fragment,be),be.forEach(_),u=P(z),d=k(z,"DIV",{class:!0});var oe=S(d);c=k(oe,"H2",{class:!0});var Ee=S(c);h=q(Ee,"Dithering Options"),Ee.forEach(_),I=P(oe),Y(b.$$.fragment,oe),g=P(oe),m=k(oe,"DIV",{class:!0});var mt=S(m);Y(E.$$.fragment,mt),mt.forEach(_),L=P(oe),N=k(oe,"DIV",{class:!0});var gt=S(N);Y(X.$$.fragment,gt),gt.forEach(_),oe.forEach(_),ge=P(z),Z=k(z,"DIV",{class:!0});var ke=S(Z);le=k(ke,"H2",{class:!0});var pt=S(le);pe=q(pt,"Palette"),pt.forEach(_),de=P(ke),re=k(ke,"DIV",{class:!0});var je=S(re);se=k(je,"DIV",{class:!0});var _t=S(se);ie=k(_t,"INPUT",{type:!0,id:!0,class:!0}),_t.forEach(_),Ne=P(je),_e=k(je,"DIV",{class:!0});var vt=S(_e);he=k(vt,"LABEL",{for:!0,class:!0});var bt=S(he);Ue=q(bt,"Monochrome"),bt.forEach(_),vt.forEach(_),je.forEach(_),Oe=P(ke),x&&x.l(ke),ke.forEach(_),z.forEach(_),this.h()},h(){f(i,"class","text-base font-semibold leading-7 text-black mb-4"),f(c,"class","text-base font-semibold leading-7 text-black mb-2"),f(m,"class",v=t[8]==="error_diffusion"?"contents":"hidden"),f(N,"class",ne=t[8]==="ordered"?"contents":"hidden"),f(d,"class","grid gap-4"),f(le,"class","text-base font-semibold leading-7 text-black mb-2"),f(ie,"type","checkbox"),f(ie,"id","monochrome"),f(ie,"class","h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600"),f(se,"class","flex h-6 items-center"),f(he,"for","monochrome"),f(he,"class","font-medium text-gray-900"),f(_e,"class","ml-3 text-sm leading-6"),f(re,"class","relative flex items-start"),f(Z,"class","grid gap-3"),we(Z,"hidden",t[8]==="none"),f(e,"class","grid gap-8 pt-8 px-4 safe-padding-bottom svelte-1b7r98h")},m(M,z){B(M,e,z),p(e,n),p(n,i),p(i,s),p(n,o),j(r,n,null),p(e,u),p(e,d),p(d,c),p(c,h),p(d,I),j(b,d,null),p(d,g),p(d,m),j(E,m,null),p(d,L),p(d,N),j(X,N,null),p(e,ge),p(e,Z),p(Z,le),p(le,pe),p(Z,de),p(Z,re),p(re,se),p(se,ie),ie.checked=t[2],p(re,Ne),p(re,_e),p(_e,he),p(he,Ue),p(Z,Oe),x&&x.m(Z,null),me=!0,R||(K=$(ie,"change",t[38]),R=!0)},p(M,z){const be={};!l&&z[0]&1&&(l=!0,be.width=M[0],te(()=>l=!1)),!a&&z[0]&32&&(a=!0,be.aspectRatio=M[5],te(()=>a=!1)),r.$set(be);const Be={};!A&&z[0]&256&&(A=!0,Be.selected=M[8],te(()=>A=!1)),b.$set(Be);const oe={};!w&&z[0]&4096&&(w=!0,oe.diffusionStrength=M[12],te(()=>w=!1)),!T&&z[0]&8192&&(T=!0,oe.diffusionMatrix=M[13],te(()=>T=!1)),!D&&z[0]&16384&&(D=!0,oe.diffusionOriginX=M[14],te(()=>D=!1)),E.$set(oe),(!me||z[0]&256&&v!==(v=M[8]==="error_diffusion"?"contents":"hidden"))&&f(m,"class",v);const Ee={};!W&&z[0]&512&&(W=!0,Ee.thresholdMap=M[9],te(()=>W=!1)),!U&&z[0]&2048&&(U=!0,Ee.noiseIntensity=M[11],te(()=>U=!1)),!V&&z[0]&1024&&(V=!0,Ee.threshold=M[10],te(()=>V=!1)),X.$set(Ee),(!me||z[0]&256&&ne!==(ne=M[8]==="ordered"?"contents":"hidden"))&&f(N,"class",ne),z[0]&4&&(ie.checked=M[2]),M[2]?x?x.p(M,z):(x=Jt(M),x.c(),x.m(Z,null)):x&&(x.d(1),x=null),(!me||z[0]&256)&&we(Z,"hidden",M[8]==="none")},i(M){me||(O(r.$$.fragment,M),O(b.$$.fragment,M),O(E.$$.fragment,M),O(X.$$.fragment,M),me=!0)},o(M){F(r.$$.fragment,M),F(b.$$.fragment,M),F(E.$$.fragment,M),F(X.$$.fragment,M),me=!1},d(M){M&&_(e),G(r),G(b),G(E),G(X),x&&x.d(),R=!1,K()}}}function Ki(t){let e,n,i;return e=new Pe({props:{src:Ln,class:"w-4 h-4"}}),{c(){H(e.$$.fragment),n=Q(`
					Save`)},l(s){Y(e.$$.fragment,s),n=q(s,`
					Save`)},m(s,o){j(e,s,o),B(s,n,o),i=!0},p:ae,i(s){i||(O(e.$$.fragment,s),i=!0)},o(s){F(e.$$.fragment,s),i=!1},d(s){G(e,s),s&&_(n)}}}function $i(t){let e,n,i,s,o;return s=new Fn({props:{disabled:!t[1],$$slots:{default:[Ki]},$$scope:{ctx:t}}}),s.$on("click",t[20]),{c(){e=y("h1"),n=Q("Options"),i=C(),H(s.$$.fragment),this.h()},l(r){e=k(r,"H1",{class:!0});var l=S(e);n=q(l,"Options"),l.forEach(_),i=P(r),Y(s.$$.fragment,r),this.h()},h(){f(e,"class","font-bold")},m(r,l){B(r,e,l),p(e,n),B(r,i,l),j(s,r,l),o=!0},p(r,l){const a={};l[0]&2&&(a.disabled=!r[1]),l[1]&8192&&(a.$$scope={dirty:l,ctx:r}),s.$set(a)},i(r){o||(O(s.$$.fragment,r),o=!0)},o(r){F(s.$$.fragment,r),o=!1},d(r){r&&_(e),r&&_(i),G(s,r)}}}function xi(t){let e,n,i,s,o,r,l,a,u,d,c,h,I;e=new Tn({props:{icon:Vi,og_image:er}});const b=[Yi,Hi],A=[];function g(m,E){return m[7]&&m[1]?0:1}return r=g(t),l=A[r]=b[r](t),d=new Wi({props:{open:t[16],$$slots:{header:[$i],default:[Ji]},$$scope:{ctx:t}}}),{c(){H(e.$$.fragment),n=C(),i=C(),s=y("main"),o=y("section"),l.c(),a=C(),u=y("aside"),H(d.$$.fragment),this.h()},l(m){Y(e.$$.fragment,m),n=P(m),i=P(m),s=k(m,"MAIN",{class:!0});var E=S(s);o=k(E,"SECTION",{class:!0});var w=S(o);l.l(w),w.forEach(_),a=P(E),u=k(E,"ASIDE",{class:!0});var T=S(u);Y(d.$$.fragment,T),T.forEach(_),E.forEach(_),this.h()},h(){f(o,"class","overflow-hidden select-none fixed inset-0"),f(u,"class","md:w-96 w-full max-h-full absolute bottom-0 left-0 right-0 top-0 md:left-auto z-50 p-2 grid place-items-end touch-none pointer-events-none"),f(s,"class","w-screen max-w-screen h-screen max-h-screen relative bg-gray-300")},m(m,E){j(e,m,E),B(m,n,E),B(m,i,E),B(m,s,E),p(s,o),A[r].m(o,null),p(s,a),p(s,u),j(d,u,null),c=!0,h||(I=[$(document.body,"drop",ut(t[21])),$(document.body,"dragover",ut(tr))],h=!0)},p(m,E){let w=r;r=g(m),r===w?A[r].p(m,E):(Qe(),F(A[w],1,1,()=>{A[w]=null}),qe(),l=A[r],l?l.p(m,E):(l=A[r]=b[r](m),l.c()),O(l,1),l.m(o,null));const T={};E[0]&65536&&(T.open=m[16]),E[0]&32575|E[1]&8192&&(T.$$scope={dirty:E,ctx:m}),d.$set(T)},i(m){c||(O(e.$$.fragment,m),O(l),O(d.$$.fragment,m),c=!0)},o(m){F(e.$$.fragment,m),F(l),F(d.$$.fragment,m),c=!1},d(m){G(e,m),m&&_(n),m&&_(i),m&&_(s),A[r].d(),G(d),h=!1,ze(I)}}}const er="/og/dither-studio.webp",tr=()=>{};function nr(t,e,n){let i,s;const o=[Kn,$n,xn];let r=null,l=300,a=null,u=null;async function d(){r&&await Wn(r,"dithered","png")}async function c(R){var ve;const K=(ve=R.dataTransfer)==null?void 0:ve.files[0];if(K){if(!K.type.startsWith("image/")){alert("Please drop an image file");return}try{n(1,a=await Lt(K))}catch(it){alert("Failed to load image"),console.error(it)}}}async function h(R){const K=R.target.files[0];if(K)try{n(1,a=await Lt(K))}catch(ve){alert("Failed to load image"),console.error(ve)}}async function I(R){const K=new Image;K.onload=()=>{n(1,a=K)},K.src=R}let b="ordered",A=null,g=.5,m=.3,E=1,w=[[1]],T=0,D=!1,v="#ede6cc",L="#21263f",N="horizontal",X=!1,W="3bit",U;En(async()=>{const R=window.matchMedia("(min-width: 768px)");function K(ve){n(15,N=ve.matches?"horizontal":"vertical"),n(16,X=R.matches)}return R.addEventListener("change",K),K(R),()=>R.removeEventListener("change",K)});function V(R){J[R?"unshift":"push"](()=>{r=R,n(6,r)})}function ne(R){J[R?"unshift":"push"](()=>{r=R,n(6,r)})}const ge=()=>n(1,a=null),Z=R=>I(R);function le(R){l=R,n(0,l)}function pe(R){s=R,n(5,s),n(1,a)}function de(R){b=R,n(8,b)}function re(R){E=R,n(12,E)}function se(R){w=R,n(13,w)}function ie(R){T=R,n(14,T)}function Ne(R){A=R,n(9,A)}function _e(R){m=R,n(11,m)}function he(R){g=R,n(10,g)}function Ue(){D=this.checked,n(2,D)}function Oe(){v=this.value,n(3,v)}function me(){L=this.value,n(4,L)}return t.$$.update=()=>{if(t.$$.dirty[0]&2&&n(5,s=a!=null&&a.width&&(a!=null&&a.height)?a.width/a.height:1),t.$$.dirty[0]&33&&n(18,i=Math.round(l/s)),t.$$.dirty[0]&2&&n(7,u=a?Vn(a):null),t.$$.dirty[0]&4&&n(24,W=D?"black_white":"3bit"),t.$$.dirty[0]&16777240)switch(W){case"3bit":{jt([[0,0,0],[255,0,0],[0,255,0],[0,0,255],[255,255,0],[255,0,255],[0,255,255],[255,255,255]]).then(R=>n(17,U=R));break}case"black_white":jt([Dt(L),Dt(v)]).then(R=>n(17,U=R))}},[l,a,D,v,L,s,r,u,b,A,g,m,E,w,T,N,X,U,i,o,d,c,h,I,W,V,ne,ge,Z,le,pe,de,re,se,ie,Ne,_e,he,Ue,Oe,me]}class lr extends ue{constructor(e){super(),fe(this,e,nr,xi,ce,{},null,[-1,-1])}}export{lr as component,or as universal};
