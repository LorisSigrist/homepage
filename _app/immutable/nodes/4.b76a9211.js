var cn=Object.defineProperty;var dn=(t,e,n)=>e in t?cn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ke=(t,e,n)=>(dn(t,typeof e!="symbol"?e+"":e,n),n);import{S as ue,i as fe,s as ce,k as y,q,a as R,y as j,l as k,m as S,r as J,h as _,c as C,z as Y,n as c,b as B,G as p,A as G,M as x,g as O,d as W,B as Q,O as Be,C as Le,D as Ie,E as De,F as Me,P as hn,Q as Ae,p as st,R as Xe,T as ot,w as K,U as Se,u as et,H as ae,V as mn,W as gn,X as vt,Y as at,Z as pn,_ as ee,$ as te,a0 as _n,v as Ge,f as Qe,a1 as ut,o as vn,L as We,e as Ze}from"../chunks/index.22137adf.js";import{I as Re,L as bn,A as An,C as bt,b as At,a as En,P as wn,X as yn,c as kn}from"../chunks/Icon.867a8182.js";function Tn(){return{title:"Dithering",author:"Loris Sigrist",description:"Dither your Images right in the browser!"}}const tr=Object.freeze(Object.defineProperty({__proto__:null,load:Tn},Symbol.toStringTag,{value:"Module"}));function Sn(t){let e,n,i,s,o,r,l,a,u,d,f,h,L,b,E,g,m,w,A,T,D,v,I,N,U,F;return L=new Re({props:{src:bn,class:"w-4 h-4",solid:!0}}),{c(){e=y("fieldset"),n=y("div"),i=y("label"),s=q("Width"),o=R(),r=y("div"),l=y("input"),a=R(),u=y("div"),d=q("px"),f=R(),h=y("span"),j(L.$$.fragment),b=R(),E=y("div"),g=y("label"),m=q("Height"),w=R(),A=y("div"),T=y("input"),D=R(),v=y("div"),I=q("px"),this.h()},l(X){e=k(X,"FIELDSET",{class:!0});var z=S(e);n=k(z,"DIV",{class:!0});var ne=S(n);i=k(ne,"LABEL",{for:!0,class:!0});var ge=S(i);s=J(ge,"Width"),ge.forEach(_),o=C(ne),r=k(ne,"DIV",{class:!0});var Z=S(r);l=k(Z,"INPUT",{name:!0,id:!0,type:!0,min:!0,max:!0,step:!0,class:!0,placeholder:!0}),a=C(Z),u=k(Z,"DIV",{class:!0});var le=S(u);d=J(le,"px"),le.forEach(_),Z.forEach(_),ne.forEach(_),f=C(z),h=k(z,"SPAN",{class:!0});var pe=S(h);Y(L.$$.fragment,pe),pe.forEach(_),b=C(z),E=k(z,"DIV",{class:!0});var de=S(E);g=k(de,"LABEL",{for:!0,class:!0});var re=S(g);m=J(re,"Height"),re.forEach(_),w=C(de),A=k(de,"DIV",{class:!0});var se=S(A);T=k(se,"INPUT",{type:!0,id:!0,name:!0,min:!0,max:!0,step:!0,class:!0,placeholder:!0}),D=C(se),v=k(se,"DIV",{class:!0});var ie=S(v);I=J(ie,"px"),ie.forEach(_),se.forEach(_),de.forEach(_),z.forEach(_),this.h()},h(){c(i,"for","width-"+t[8]),c(i,"class","block text-sm font-medium leading-6 text-gray-900"),c(l,"name","width"),c(l,"id","width-"+t[8]),c(l,"type","number"),c(l,"min",t[3]),c(l,"max",t[1]),c(l,"step","1"),l.value=t[0],c(l,"class","block w-full rounded-md border-0 py-1.5 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"),c(l,"placeholder","600"),c(u,"class","pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400"),c(r,"class","relative mt-2 rounded-md shadow-sm"),c(n,"class","w-full"),c(h,"class","text-gray-500 pb-2 cursor-not-allowed"),c(g,"for","height-"+t[9]),c(g,"class","block text-sm font-medium leading-6 text-gray-900"),c(T,"type","number"),c(T,"id","height-"+t[9]),c(T,"name","height"),c(T,"min",t[4]),c(T,"max",t[2]),c(T,"step","1"),T.value=t[5],c(T,"class","block w-full rounded-md border-0 py-1.5 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"),c(T,"placeholder","340"),c(v,"class","pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400"),c(A,"class","relative mt-2 rounded-md shadow-sm"),c(E,"class","w-full"),c(e,"class","flex gap-3 items-end justify-between")},m(X,z){B(X,e,z),p(e,n),p(n,i),p(i,s),p(n,o),p(n,r),p(r,l),p(r,a),p(r,u),p(u,d),p(e,f),p(e,h),G(L,h,null),p(e,b),p(e,E),p(E,g),p(g,m),p(E,w),p(E,A),p(A,T),p(A,D),p(A,v),p(v,I),N=!0,U||(F=[x(l,"input",t[6]),x(T,"input",t[7])],U=!0)},p(X,[z]){(!N||z&8)&&c(l,"min",X[3]),(!N||z&2)&&c(l,"max",X[1]),(!N||z&1&&l.value!==X[0])&&(l.value=X[0]),(!N||z&16)&&c(T,"min",X[4]),(!N||z&4)&&c(T,"max",X[2]),(!N||z&32&&T.value!==X[5])&&(T.value=X[5])},i(X){N||(O(L.$$.fragment,X),N=!0)},o(X){W(L.$$.fragment,X),N=!1},d(X){X&&_(e),Q(L),U=!1,Be(F)}}}function Et(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}function Ln(t,e,n){let i,{width:s}=e,{aspectRatio:o}=e,{maxWidth:r=null}=e,{maxHeight:l=null}=e,{minWidth:a=null}=e,{minHeight:u=null}=e;function d(b){const E=b.target.value;E&&(a!==null&&E<a||r!==null&&E>r||n(0,s=E))}function f(b){const E=b.target.value;E&&(u!==null&&E<u||l!==null&&E>l||n(0,s=Math.round(o*E)))}let h=Et(),L=Et();return t.$$set=b=>{"width"in b&&n(0,s=b.width),"aspectRatio"in b&&n(10,o=b.aspectRatio),"maxWidth"in b&&n(1,r=b.maxWidth),"maxHeight"in b&&n(2,l=b.maxHeight),"minWidth"in b&&n(3,a=b.minWidth),"minHeight"in b&&n(4,u=b.minHeight)},t.$$.update=()=>{t.$$.dirty&1025&&n(5,i=Math.round(s/o))},[s,r,l,a,u,i,d,f,h,L,o]}class Yt extends ue{constructor(e){super(),fe(this,e,Ln,Sn,ce,{width:0,aspectRatio:10,maxWidth:1,maxHeight:2,minWidth:3,minHeight:4})}}var In="precision highp float;attribute vec2 position;varying vec2 fragCoord;void main(){fragCoord.x=position.x*0.5+0.5;fragCoord.y=position.y*0.5+0.5;gl_Position=vec4(position,0.0,1.0);}",Dn="precision highp float;varying vec2 fragCoord;uniform sampler2D uSampler;uniform float uThreshold;uniform sampler2D uNoiseSampler;uniform vec2 uNoiseSamplerSize;uniform float uNoise;uniform float uMonochrome;uniform vec2 uSize;uniform vec3 uDarkColor;uniform vec3 uLightColor;void main(void){vec2 imgPixel=vec2(fragCoord.x*uSize.x,fragCoord.y*uSize.y);vec2 noisePixel=vec2(mod(imgPixel.x,uNoiseSamplerSize.x),mod(imgPixel.y,uNoiseSamplerSize.y));vec2 noiseUV=vec2(noisePixel.x/uNoiseSamplerSize.x,noisePixel.y/uNoiseSamplerSize.y);float noise=(texture2D(uNoiseSampler,noiseUV).r-0.5)*2.0*uNoise;vec4 color=texture2D(uSampler,fragCoord);float gray=dot(color.rgb,vec3(0.299,0.587,0.114));color.r=color.r*(1.0-uMonochrome)+gray*uMonochrome;color.g=color.g*(1.0-uMonochrome)+gray*uMonochrome;color.b=color.b*(1.0-uMonochrome)+gray*uMonochrome;vec3 thresholds=vec3(step(uThreshold,color.r+noise),step(uThreshold,color.g+noise),step(uThreshold,color.b+noise));if(uMonochrome>0.0){color.rgb=vec3(mix(uDarkColor.r,uLightColor.r,thresholds.r),mix(uDarkColor.g,uLightColor.g,thresholds.g),mix(uDarkColor.b,uLightColor.b,thresholds.b));}else{color.rgb=thresholds;}gl_FragColor=color;}";function wt(t){return(t&t-1)===0}function Mn(t,e,n){const i=yt(t,t.VERTEX_SHADER,e),s=yt(t,t.FRAGMENT_SHADER,n),o=t.createProgram();if(!o)throw new Error("Failed to create shader program");if(t.attachShader(o,i),t.attachShader(o,s),t.linkProgram(o),!t.getProgramParameter(o,t.LINK_STATUS))throw Error(`Unable to initialize the shader program: ${t.getProgramInfoLog(o)}`);return o}function yt(t,e,n){const i=t.createShader(e);if(!i)throw new Error("Failed to create shader");if(t.shaderSource(i,n),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS))throw Error(`An error occurred compiling the shaders: ${t.getShaderInfoLog(i)}`);return i}function Rn(t){const e=t.createBuffer(),n=t.createBuffer(),i=[-1,1,-1,-1,1,-1,1,1],s=[3,2,1,3,1,0];return t.bindBuffer(t.ARRAY_BUFFER,e),t.bufferData(t.ARRAY_BUFFER,new Float32Array(i),t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(s),t.STATIC_DRAW),{vertex_buffer:e,index_buffer:n}}function kt(t,e,n){const i=t.createTexture();if(!i)throw new Error("Failed to create texture");return t.bindTexture(t.TEXTURE_2D,i),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),wt(e.width)&&wt(e.height)?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,n)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,n)),i}function Cn(t,e){let n=e;const i=t.getContext("webgl",{preserveDrawingBuffer:!0});if(!i){alert("WebGL not supported");return}i.clearColor(0,0,0,1),i.clear(i.COLOR_BUFFER_BIT);const s=Mn(i,In,Dn),{vertex_buffer:o,index_buffer:r}=Rn(i),l=i.getAttribLocation(s,"position");i.vertexAttribPointer(l,2,i.FLOAT,!1,0,0),i.enableVertexAttribArray(l);const a=i.getUniformLocation(s,"uSampler"),u=i.getUniformLocation(s,"uThreshold"),d=i.getUniformLocation(s,"uNoiseSampler"),f=i.getUniformLocation(s,"uNoise"),h=i.getUniformLocation(s,"uSize"),L=i.getUniformLocation(s,"uNoiseSamplerSize"),b=i.getUniformLocation(s,"uMonochrome"),E=i.getUniformLocation(s,"uDarkColor"),g=i.getUniformLocation(s,"uLightColor");let m;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!0);const w=()=>{m&&i.deleteTexture(m),m=kt(i,n.image,i.LINEAR)};w();let A,T;i.useProgram(s);let D=null;const v=()=>{A&&i.deleteTexture(A),A=kt(i,n.thresholdMap,i.NEAREST),T={width:n.thresholdMap.width,height:n.thresholdMap.height}};v();const I=()=>{i.viewport(0,0,n.output_width,n.output_height),i.clearColor(0,0,0,1),i.clear(i.COLOR_BUFFER_BIT),i.bindBuffer(i.ARRAY_BUFFER,o),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,r),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,m),i.uniform1i(a,0),i.activeTexture(i.TEXTURE1),i.bindTexture(i.TEXTURE_2D,A),i.uniform1i(d,1),i.uniform2f(L,T.width,T.height),i.uniform1f(u,n.threshold),i.uniform1f(f,n.noiseIntensity),i.uniform2f(h,n.output_width,n.output_height),i.uniform1f(b,n.monochrome?1:0),i.uniform3f(E,...Tt(n.colorDark)),i.uniform3f(g,...Tt(n.colorLight)),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT),i.drawElements(i.TRIANGLES,6,i.UNSIGNED_SHORT,0)};function N(){D=requestAnimationFrame(()=>{I(),D=null})}return N(),{update(U){const F=n.image!==U.image,X=n.thresholdMap!==U.thresholdMap;n=U,F&&w(),X&&v(),N()},destroy(){D!==null&&cancelAnimationFrame(D)}}}function Tt(t){const e=parseInt(t.slice(1,3),16)/255,n=parseInt(t.slice(3,5),16)/255,i=parseInt(t.slice(5,7),16)/255;return[e,n,i]}function Pn(t){let e,n,i,s,o;const r=t[3].default,l=Le(r,t,t[2],null);return{c(){e=y("button"),l&&l.c(),this.h()},l(a){e=k(a,"BUTTON",{type:!0,class:!0});var u=S(e);l&&l.l(u),u.forEach(_),this.h()},h(){e.disabled=t[0],c(e,"type","button"),c(e,"class",n=t[1][t[0]?"disabled":"normal"]+" rounded-md px-2.5 py-1.5 text-sm font-semibold focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 flex items-center justify-center gap-2")},m(a,u){B(a,e,u),l&&l.m(e,null),i=!0,s||(o=x(e,"click",t[4]),s=!0)},p(a,[u]){l&&l.p&&(!i||u&4)&&Ie(l,r,a,a[2],i?Me(r,a[2],u,null):De(a[2]),null),(!i||u&1)&&(e.disabled=a[0]),(!i||u&1&&n!==(n=a[1][a[0]?"disabled":"normal"]+" rounded-md px-2.5 py-1.5 text-sm font-semibold focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 flex items-center justify-center gap-2"))&&c(e,"class",n)},i(a){i||(O(l,a),i=!0)},o(a){W(l,a),i=!1},d(a){a&&_(e),l&&l.d(a),s=!1,o()}}}function Nn(t,e,n){let{$$slots:i={},$$scope:s}=e,{disabled:o=!1}=e;const r={normal:"bg-indigo-600 text-white shadow-sm hover:bg-indigo-500",disabled:"bg-gray-200 text-gray-400 shadow-none cursor-not-allowed"};function l(a){hn.call(this,t,a)}return t.$$set=a=>{"disabled"in a&&n(0,o=a.disabled),"$$scope"in a&&n(2,s=a.$$scope)},[o,r,s,i,l]}class On extends ue{constructor(e){super(),fe(this,e,Nn,Pn,ce,{disabled:0})}}async function Un(t,e,n="png"){const i=new OffscreenCanvas(t.width,t.height),s=i.getContext("2d");if(!s)return;s.drawImage(t,0,0,t.width,t.height);const o=await i.convertToBlob({type:"image/"+n,quality:1}),r=URL.createObjectURL(o),l=document.createElement("a");l.download=`${e}.${n}`,l.href=r,l.click(),l.remove(),URL.revokeObjectURL(r)}function St(t){return new Promise((e,n)=>{t.type.startsWith("image/")||n(new Error("Not an image file"));const i=new FileReader;i.onload=s=>{if(typeof i.result!="string")return;const o=new Image;o.onload=()=>{e(o)},o.onerror=r=>{n(r)},o.src=i.result},i.onerror=s=>{n(s)},i.readAsDataURL(t)})}function Xn(t){const n=new OffscreenCanvas(t.width,t.height).getContext("2d");if(!n)throw new Error("Could not get canvas context");return n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height)}var Wn=class extends EventTarget{dispatchTypedEvent(t,e){return super.dispatchEvent(e)}};class be{constructor(e){this.id=-1,this.nativePointer=e,this.pageX=e.pageX,this.pageY=e.pageY,this.clientX=e.clientX,this.clientY=e.clientY,self.Touch&&e instanceof Touch?this.id=e.identifier:Oe(e)&&(this.id=e.pointerId)}getCoalesced(){if("getCoalescedEvents"in this.nativePointer){const e=this.nativePointer.getCoalescedEvents().map(n=>new be(n));if(e.length>0)return e}return[this]}}const Oe=t=>"pointerId"in t,nt=t=>"changedTouches"in t,Lt=()=>{};class Bn{constructor(e,{start:n=()=>!0,move:i=Lt,end:s=Lt,rawUpdates:o=!1,avoidPointerEvents:r=!1}={}){this._element=e,this.startPointers=[],this.currentPointers=[],this._excludeFromButtonsCheck=new Set,this._pointerStart=l=>{if(Oe(l)&&l.buttons===0)this._excludeFromButtonsCheck.add(l.pointerId);else if(!(l.buttons&1))return;const a=new be(l);this.currentPointers.some(u=>u.id===a.id)||this._triggerPointerStart(a,l)&&(Oe(l)?((l.target&&"setPointerCapture"in l.target?l.target:this._element).setPointerCapture(l.pointerId),this._element.addEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move),this._element.addEventListener("pointerup",this._pointerEnd),this._element.addEventListener("pointercancel",this._pointerEnd)):(window.addEventListener("mousemove",this._move),window.addEventListener("mouseup",this._pointerEnd)))},this._touchStart=l=>{for(const a of Array.from(l.changedTouches))this._triggerPointerStart(new be(a),l)},this._move=l=>{if(!nt(l)&&(!Oe(l)||!this._excludeFromButtonsCheck.has(l.pointerId))&&l.buttons===0){this._pointerEnd(l);return}const a=this.currentPointers.slice(),u=nt(l)?Array.from(l.changedTouches).map(f=>new be(f)):[new be(l)],d=[];for(const f of u){const h=this.currentPointers.findIndex(L=>L.id===f.id);h!==-1&&(d.push(f),this.currentPointers[h]=f)}d.length!==0&&this._moveCallback(a,d,l)},this._triggerPointerEnd=(l,a)=>{if(!nt(a)&&a.buttons&1)return!1;const u=this.currentPointers.findIndex(f=>f.id===l.id);if(u===-1)return!1;this.currentPointers.splice(u,1),this.startPointers.splice(u,1),this._excludeFromButtonsCheck.delete(l.id);const d=!(a.type==="mouseup"||a.type==="touchend"||a.type==="pointerup");return this._endCallback(l,a,d),!0},this._pointerEnd=l=>{if(this._triggerPointerEnd(new be(l),l))if(Oe(l)){if(this.currentPointers.length)return;this._element.removeEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move),this._element.removeEventListener("pointerup",this._pointerEnd),this._element.removeEventListener("pointercancel",this._pointerEnd)}else window.removeEventListener("mousemove",this._move),window.removeEventListener("mouseup",this._pointerEnd)},this._touchEnd=l=>{for(const a of Array.from(l.changedTouches))this._triggerPointerEnd(new be(a),l)},this._startCallback=n,this._moveCallback=i,this._endCallback=s,this._rawUpdates=o&&"onpointerrawupdate"in window,self.PointerEvent&&!r?this._element.addEventListener("pointerdown",this._pointerStart):(this._element.addEventListener("mousedown",this._pointerStart),this._element.addEventListener("touchstart",this._touchStart),this._element.addEventListener("touchmove",this._move),this._element.addEventListener("touchend",this._touchEnd),this._element.addEventListener("touchcancel",this._touchEnd))}stop(){this._element.removeEventListener("pointerdown",this._pointerStart),this._element.removeEventListener("mousedown",this._pointerStart),this._element.removeEventListener("touchstart",this._touchStart),this._element.removeEventListener("touchmove",this._move),this._element.removeEventListener("touchend",this._touchEnd),this._element.removeEventListener("touchcancel",this._touchEnd),this._element.removeEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move),this._element.removeEventListener("pointerup",this._pointerEnd),this._element.removeEventListener("pointercancel",this._pointerEnd),window.removeEventListener("mousemove",this._move),window.removeEventListener("mouseup",this._pointerEnd)}_triggerPointerStart(e,n){return this._startCallback(e,n)?(this.currentPointers.push(e),this.startPointers.push(e),!0):!1}}function Fn(t,e,n){return Math.min(Math.max(t,e),n)}function It(t,e){return e?Math.sqrt((e.clientX-t.clientX)**2+(e.clientY-t.clientY)**2):0}function Dt(t,e){return e?{clientX:(t.clientX+e.clientX)/2,clientY:(t.clientY+e.clientY)/2}:t}const $e=class extends Wn{constructor(n){super();ke(this,"element");ke(this,"transform",new DOMMatrix);ke(this,"pointerTracker");this.element=n,this.element.addEventListener("wheel",this.onWheel.bind(this)),this.pointerTracker=new Bn(this.element,{start:(i,s)=>this.pointerTracker.currentPointers.length===2?!1:(s.preventDefault(),!0),move:i=>{this.onPointerMove(i,this.pointerTracker.currentPointers)},avoidPointerEvents:this.isSafari()}),this.element.addEventListener("wheel",this.onWheel.bind(this))}get x(){return this.transform.e}get y(){return this.transform.f}get scale(){return this.transform.a}set x(n){this.transform.e=n}set y(n){this.transform.f=n}set scale(n){this.transform.a=n,this.transform.d=n}onWheel(n){n.preventDefault();const i=this.element.getBoundingClientRect();let{deltaY:s}=n;const{ctrlKey:o,deltaMode:r}=n;r===1&&(s*=15);const l=s>0,a=o?100:300,u=1-(l?-s:s)/a,d=l?1/u:u,f=n.clientX-i.left,h=n.clientY-i.top;this.applyTransformation({scaleDiff:d,originX:f,originY:h})}applyTransformation(n={}){const{panX:i=0,panY:s=0,originX:o=0,originY:r=0,scaleDiff:l=1}=n,a=new DOMMatrix().translate(o,r).scale(l).translate(-o,-r),u=new DOMMatrix().translate(i,s);a.multiplySelf(u),a.multiplySelf(this.transform);const d=a.a,f=a.e,h=a.f;this.updateTransform(d,f,h)}onPointerMove(n,i){const s=this.element.getBoundingClientRect(),o=Dt(n[0],n[1]),r=Dt(i[0],i[1]),l=o.clientX-s.left,a=o.clientY-s.top,u=It(n[0],n[1]),d=It(i[0],i[1]),f=u?d/u:1;this.applyTransformation({originX:l,originY:a,scaleDiff:f,panX:r.clientX-o.clientX,panY:r.clientY-o.clientY})}updateTransform(n,i,s){if(n<$e.MIN_SCALE||n>$e.MAX_SCALE||n===this.scale&&i===this.x&&s===this.y)return;this.x=i,this.y=s,this.scale=n;const o=new CustomEvent("panzoom:change",{bubbles:!0,detail:{x:this.x,y:this.y,scale:this.scale,matrix:this.transform}});this.dispatchTypedEvent("panzoom:change",o)}isSafari(){return/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)}reset(){this.updateTransform(1,0,0)}destroy(){this.pointerTracker.stop()}};let Ue=$e;ke(Ue,"MIN_SCALE",.01),ke(Ue,"MAX_SCALE",1e5);const zn=t=>({}),Mt=t=>({}),Vn=t=>({}),Rt=t=>({});function Hn(t){let e,n,i,s,o,r,l,a,u,d,f,h,L,b;const E=t[7].left,g=Le(E,t,t[6],Rt),m=t[7].right,w=Le(m,t,t[6],Mt);return f=new Re({props:{src:An,class:"w-6 h-6 text-white"}}),{c(){e=y("div"),n=y("div"),i=y("div"),s=y("div"),g&&g.c(),o=R(),r=y("div"),l=y("div"),w&&w.c(),a=R(),u=y("div"),d=y("div"),j(f.$$.fragment),this.h()},l(A){e=k(A,"DIV",{class:!0});var T=S(e);n=k(T,"DIV",{class:!0});var D=S(n);i=k(D,"DIV",{class:!0});var v=S(i);s=k(v,"DIV",{style:!0,class:!0});var I=S(s);g&&g.l(I),I.forEach(_),v.forEach(_),o=C(D),r=k(D,"DIV",{class:!0});var N=S(r);l=k(N,"DIV",{style:!0,class:!0});var U=S(l);w&&w.l(U),U.forEach(_),N.forEach(_),D.forEach(_),a=C(T),u=k(T,"DIV",{class:!0});var F=S(u);d=k(F,"DIV",{class:!0});var X=S(d);Y(f.$$.fragment,X),X.forEach(_),F.forEach(_),T.forEach(_),this.h()},h(){c(s,"style",t[3]),c(s,"class","w-full h-full origin-top-left grid place-items-center"),c(i,"class","mask-left svelte-u41rvx"),c(l,"style",t[3]),c(l,"class","w-full h-full origin-top-left grid place-items-center"),c(r,"class","mask-right svelte-u41rvx"),c(n,"class","w-full h-full grid place-items-center"),c(d,"class","w-12 h-12 rounded-full bg-black grid place-items-center absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"),Ae(d,"rotate-90",t[1]==="vertical"),c(u,"class","handle relative shadow-lg svelte-u41rvx"),c(e,"class","pz-container svelte-u41rvx"),Ae(e,"vertical",t[1]==="vertical"),st(e,"--split-point",t[0]+"%")},m(A,T){B(A,e,T),p(e,n),p(n,i),p(i,s),g&&g.m(s,null),p(n,o),p(n,r),p(r,l),w&&w.m(l,null),p(e,a),p(e,u),p(u,d),G(f,d,null),t[8](e),h=!0,L||(b=[Xe(t[5].call(null,n)),Xe(t[4].call(null,u)),x(u,"pointercancel",ot(jn))],L=!0)},p(A,[T]){g&&g.p&&(!h||T&64)&&Ie(g,E,A,A[6],h?Me(E,A[6],T,Vn):De(A[6]),Rt),(!h||T&8)&&c(s,"style",A[3]),w&&w.p&&(!h||T&64)&&Ie(w,m,A,A[6],h?Me(m,A[6],T,zn):De(A[6]),Mt),(!h||T&8)&&c(l,"style",A[3]),(!h||T&2)&&Ae(d,"rotate-90",A[1]==="vertical"),(!h||T&2)&&Ae(e,"vertical",A[1]==="vertical"),T&1&&st(e,"--split-point",A[0]+"%")},i(A){h||(O(g,A),O(w,A),O(f.$$.fragment,A),h=!0)},o(A){W(g,A),W(w,A),W(f.$$.fragment,A),h=!1},d(A){A&&_(e),g&&g.d(A),w&&w.d(A),Q(f),t[8](null),L=!1,Be(b)}}}const jn=()=>{};function Yn(t,e,n){let{$$slots:i={},$$scope:s}=e,{direction:o="horizontal"}=e,r=null,{split:l=50}=e;function a(h){return h.addEventListener("pointerdown",L=>{const b=o==="vertical"?L.clientY:L.clientX,E=l,g=document.body.style.cursor;document.body.style.cursor=o==="vertical"?"row-resize":"col-resize";const m=A=>{const T=r?r.clientWidth:window.innerWidth,D=r?r.clientHeight:window.innerHeight,v=o==="vertical"?D:T,N=(o==="vertical"?A.clientY:A.clientX)-b,U=E+N/v*100;n(0,l=Fn(U,0,100))},w=()=>{document.body.style.cursor=g,window.removeEventListener("pointermove",m),window.removeEventListener("pointerup",w),window.removeEventListener("pointercancel",w)};window.addEventListener("pointermove",m),window.addEventListener("pointerup",w),window.addEventListener("pointercancel",w)}),{destroy(){h.removeEventListener("pointerdown",()=>{})}}}let u="transform: none;";function d(h){const L=new Ue(h);function b(E){const{matrix:g}=E.detail;n(3,u=`transform: ${g.toString()};`)}return L.addEventListener("panzoom:change",b),{destroy(){L.removeEventListener("panzoom:change",b),L.destroy()}}}function f(h){K[h?"unshift":"push"](()=>{r=h,n(2,r)})}return t.$$set=h=>{"direction"in h&&n(1,o=h.direction),"split"in h&&n(0,l=h.split),"$$scope"in h&&n(6,s=h.$$scope)},[l,o,r,u,a,d,s,i,f]}class Gn extends ue{constructor(e){super(),fe(this,e,Yn,Hn,ce,{direction:1,split:0})}}const Qn=""+new URL("../assets/cat.58b560b7.jpg",import.meta.url).href,Zn="data:image/avif;base64,AAAAHGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZgAAAOptZXRhAAAAAAAAACFoZGxyAAAAAAAAAABwaWN0AAAAAAAAAAAAAAAAAAAAAA5waXRtAAAAAAABAAAAImlsb2MAAAAAREAAAQABAAAAAAEOAAEAAAAAAAAApwAAACNpaW5mAAAAAAABAAAAFWluZmUCAAAAAAEAAGF2MDEAAAAAamlwcnAAAABLaXBjbwAAABNjb2xybmNseAACAAIABoAAAAAMYXYxQ4EEDAAAAAAUaXNwZQAAAAAAAAJyAAACcgAAABBwaXhpAAAAAAMICAgAAAAXaXBtYQAAAAAAAAABAAEEgYIDhAAAAK9tZGF0EgAKChkmZxnHggQEDQgylgERQAEEEEEA9NBi7JFlrqXV1mwMry34uIYK7WRdWYJ/ZZ0EIyWW8aLm92oz5LY0W+l2FiKsHpp4BB3Vrk+iwHuzboac7wmSHHHRWklZdZ2hpEAi4E31lf1tjXnXie8fh4lzApbqjH5Pj7ZN6761WygYVdc2zvJOsflFZstng6rQU/oulDZSO6fQWKvzpO9pseyXBLfms64=",qn=""+new URL("../assets/david.0e7e3b46.png",import.meta.url).href;/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Gt=Symbol("Comlink.proxy"),Jn=Symbol("Comlink.endpoint"),Kn=Symbol("Comlink.releaseProxy"),it=Symbol("Comlink.finalizer"),Ye=Symbol("Comlink.thrown"),Qt=t=>typeof t=="object"&&t!==null||typeof t=="function",xn={canHandle:t=>Qt(t)&&t[Gt],serialize(t){const{port1:e,port2:n}=new MessageChannel;return qt(t,e),[n,[n]]},deserialize(t){return t.start(),ft(t)}},$n={canHandle:t=>Qt(t)&&Ye in t,serialize({value:t}){let e;return t instanceof Error?e={isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:e={isError:!1,value:t},[e,[]]},deserialize(t){throw t.isError?Object.assign(new Error(t.value.message),t.value):t.value}},Zt=new Map([["proxy",xn],["throw",$n]]);function ei(t,e){for(const n of t)if(e===n||n==="*"||n instanceof RegExp&&n.test(e))return!0;return!1}function qt(t,e=globalThis,n=["*"]){e.addEventListener("message",function i(s){if(!s||!s.data)return;if(!ei(n,s.origin)){console.warn(`Invalid origin '${s.origin}' for comlink proxy`);return}const{id:o,type:r,path:l}=Object.assign({path:[]},s.data),a=(s.data.argumentList||[]).map(we);let u;try{const d=l.slice(0,-1).reduce((h,L)=>h[L],t),f=l.reduce((h,L)=>h[L],t);switch(r){case"GET":u=f;break;case"SET":d[l.slice(-1)[0]]=we(s.data.value),u=!0;break;case"APPLY":u=f.apply(d,a);break;case"CONSTRUCT":{const h=new f(...a);u=si(h)}break;case"ENDPOINT":{const{port1:h,port2:L}=new MessageChannel;qt(t,L),u=$t(h,[h])}break;case"RELEASE":u=void 0;break;default:return}}catch(d){u={value:d,[Ye]:0}}Promise.resolve(u).catch(d=>({value:d,[Ye]:0})).then(d=>{const[f,h]=Ke(d);e.postMessage(Object.assign(Object.assign({},f),{id:o}),h),r==="RELEASE"&&(e.removeEventListener("message",i),Jt(e),it in t&&typeof t[it]=="function"&&t[it]())}).catch(d=>{const[f,h]=Ke({value:new TypeError("Unserializable return value"),[Ye]:0});e.postMessage(Object.assign(Object.assign({},f),{id:o}),h)})}),e.start&&e.start()}function ti(t){return t.constructor.name==="MessagePort"}function Jt(t){ti(t)&&t.close()}function ft(t,e){return lt(t,[],e)}function je(t){if(t)throw new Error("Proxy has been released and is not useable")}function Kt(t){return Te(t,{type:"RELEASE"}).then(()=>{Jt(t)})}const qe=new WeakMap,Je="FinalizationRegistry"in globalThis&&new FinalizationRegistry(t=>{const e=(qe.get(t)||0)-1;qe.set(t,e),e===0&&Kt(t)});function ni(t,e){const n=(qe.get(e)||0)+1;qe.set(e,n),Je&&Je.register(t,e,t)}function ii(t){Je&&Je.unregister(t)}function lt(t,e=[],n=function(){}){let i=!1;const s=new Proxy(n,{get(o,r){if(je(i),r===Kn)return()=>{ii(s),Kt(t),i=!0};if(r==="then"){if(e.length===0)return{then:()=>s};const l=Te(t,{type:"GET",path:e.map(a=>a.toString())}).then(we);return l.then.bind(l)}return lt(t,[...e,r])},set(o,r,l){je(i);const[a,u]=Ke(l);return Te(t,{type:"SET",path:[...e,r].map(d=>d.toString()),value:a},u).then(we)},apply(o,r,l){je(i);const a=e[e.length-1];if(a===Jn)return Te(t,{type:"ENDPOINT"}).then(we);if(a==="bind")return lt(t,e.slice(0,-1));const[u,d]=Ct(l);return Te(t,{type:"APPLY",path:e.map(f=>f.toString()),argumentList:u},d).then(we)},construct(o,r){je(i);const[l,a]=Ct(r);return Te(t,{type:"CONSTRUCT",path:e.map(u=>u.toString()),argumentList:l},a).then(we)}});return ni(s,t),s}function ri(t){return Array.prototype.concat.apply([],t)}function Ct(t){const e=t.map(Ke);return[e.map(n=>n[0]),ri(e.map(n=>n[1]))]}const xt=new WeakMap;function $t(t,e){return xt.set(t,e),t}function si(t){return Object.assign(t,{[Gt]:!0})}function Ke(t){for(const[e,n]of Zt)if(n.canHandle(t)){const[i,s]=n.serialize(t);return[{type:"HANDLER",name:e,value:i},s]}return[{type:"RAW",value:t},xt.get(t)||[]]}function we(t){switch(t.type){case"HANDLER":return Zt.get(t.name).deserialize(t.value);case"RAW":return t.value}}function Te(t,e,n){return new Promise(i=>{const s=oi();t.addEventListener("message",function o(r){!r.data||!r.data.id||r.data.id!==s||(t.removeEventListener("message",o),i(r.data))}),t.start&&t.start(),t.postMessage(Object.assign({id:s},e),n)})}function oi(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}function li(){return new Worker(""+new URL("../workers/renderingWorker-507c4fff.js",import.meta.url).href)}function ai(t,e){const n=t.transferControlToOffscreen(),i=new li,s=ft(i);let o=null,r=null,l=()=>{};return s.errorDiffusionDithering($t(n,[n]),e).then(a=>{r=a.update,l=a.destroy,r(o||e)}),{update:a=>{r?r(a):o=a},destroy:()=>{l(),i.terminate()}}}function ui(t){let e,n,i,s,o,r,l;return{c(){e=y("div"),n=y("label"),i=q(t[1]),s=R(),o=y("input"),this.h()},l(a){e=k(a,"DIV",{});var u=S(e);n=k(u,"LABEL",{for:!0,class:!0});var d=S(n);i=J(d,t[1]),d.forEach(_),s=C(u),o=k(u,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0,name:!0,class:!0}),u.forEach(_),this.h()},h(){c(n,"for",t[6]),c(n,"class","block mb-2 text-sm font-medium text-gray-900 dark:text-white"),c(o,"id",t[6]),c(o,"type","range"),c(o,"min",t[3]),c(o,"max",t[4]),c(o,"step",t[5]),c(o,"name",t[2]),c(o,"class","w-full h-1.5 mb-6 bg-white ring-1 ring-gray-300 shadow-sm rounded-lg appearance-none cursor-pointer accent-indigo-600 dark:bg-gray-700")},m(a,u){B(a,e,u),p(e,n),p(n,i),p(e,s),p(e,o),Se(o,t[0]),r||(l=[x(o,"change",t[7]),x(o,"input",t[7])],r=!0)},p(a,[u]){u&2&&et(i,a[1]),u&8&&c(o,"min",a[3]),u&16&&c(o,"max",a[4]),u&32&&c(o,"step",a[5]),u&4&&c(o,"name",a[2]),u&1&&Se(o,a[0])},i:ae,o:ae,d(a){a&&_(e),r=!1,Be(l)}}}function fi(t,e,n){let{label:i}=e,{name:s=void 0}=e,{min:o=null}=e,{max:r=null}=e,{value:l=0}=e,{step:a=1}=e,u=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);function d(){l=mn(this.value),n(0,l)}return t.$$set=f=>{"label"in f&&n(1,i=f.label),"name"in f&&n(2,s=f.name),"min"in f&&n(3,o=f.min),"max"in f&&n(4,r=f.max),"value"in f&&n(0,l=f.value),"step"in f&&n(5,a=f.step)},[l,i,s,o,r,a,u,d]}class xe extends ue{constructor(e){super(),fe(this,e,fi,ui,ce,{label:1,name:2,min:3,max:4,value:0,step:5})}}function Pt(t,e,n){const i=t.slice();return i[6]=e[n],i}function Nt(t){let e,n=t[6].name+"",i,s,o;return{c(){e=y("option"),i=q(n),this.h()},l(r){e=k(r,"OPTION",{});var l=S(e);i=J(l,n),l.forEach(_),this.h()},h(){e.__value=s=t[6].value,e.value=e.__value,e.selected=o=t[6].value===t[0]},m(r,l){B(r,e,l),p(e,i)},p(r,l){l&2&&n!==(n=r[6].name+"")&&et(i,n),l&2&&s!==(s=r[6].value)&&(e.__value=s,e.value=e.__value),l&3&&o!==(o=r[6].value===r[0])&&(e.selected=o)},d(r){r&&_(e)}}}function ci(t){let e,n,i,s,o,r,l,a=t[1],u=[];for(let d=0;d<a.length;d+=1)u[d]=Nt(Pt(t,a,d));return{c(){e=y("div"),n=y("label"),i=q(t[2]),s=R(),o=y("select");for(let d=0;d<u.length;d+=1)u[d].c();this.h()},l(d){e=k(d,"DIV",{});var f=S(e);n=k(f,"LABEL",{for:!0,class:!0});var h=S(n);i=J(h,t[2]),h.forEach(_),s=C(f),o=k(f,"SELECT",{id:!0,name:!0,class:!0});var L=S(o);for(let b=0;b<u.length;b+=1)u[b].l(L);L.forEach(_),f.forEach(_),this.h()},h(){c(n,"for",t[4]),c(n,"class","block text-sm font-medium leading-6 text-gray-900"),c(o,"id",t[4]),c(o,"name",t[3]),c(o,"class","mt-2 block w-full rounded-md border-0 py-1.5 pl-3 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-indigo-600 sm:text-sm sm:leading-6"),t[0]===void 0&&gn(()=>t[5].call(o))},m(d,f){B(d,e,f),p(e,n),p(n,i),p(e,s),p(e,o);for(let h=0;h<u.length;h+=1)u[h]&&u[h].m(o,null);vt(o,t[0],!0),r||(l=x(o,"change",t[5]),r=!0)},p(d,[f]){if(f&4&&et(i,d[2]),f&3){a=d[1];let h;for(h=0;h<a.length;h+=1){const L=Pt(d,a,h);u[h]?u[h].p(L,f):(u[h]=Nt(L),u[h].c(),u[h].m(o,null))}for(;h<u.length;h+=1)u[h].d(1);u.length=a.length}f&8&&c(o,"name",d[3]),f&3&&vt(o,d[0])},i:ae,o:ae,d(d){d&&_(e),at(u,d),r=!1,l()}}}function di(t,e,n){let{options:i}=e,{selected:s}=e,{label:o}=e,{name:r=void 0}=e,l=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);function a(){s=pn(this),n(0,s),n(1,i)}return t.$$set=u=>{"options"in u&&n(1,i=u.options),"selected"in u&&n(0,s=u.selected),"label"in u&&n(2,o=u.label),"name"in u&&n(3,r=u.name)},[s,i,o,r,l,a]}class en extends ue{constructor(e){super(),fe(this,e,di,ci,ce,{options:1,selected:0,label:2,name:3})}}function hi(t){let e,n,i,s,o,r;function l(f){t[5](f)}let a={label:"Diffusion Mode",options:t[2]};t[1]!==void 0&&(a.selected=t[1]),e=new en({props:a}),K.push(()=>ee(e,"selected",l));function u(f){t[6](f)}let d={label:"Diffusion Strength ("+t[0]+")",min:0,max:2,step:.01};return t[0]!==void 0&&(d.value=t[0]),s=new xe({props:d}),K.push(()=>ee(s,"value",u)),{c(){j(e.$$.fragment),i=R(),j(s.$$.fragment)},l(f){Y(e.$$.fragment,f),i=C(f),Y(s.$$.fragment,f)},m(f,h){G(e,f,h),B(f,i,h),G(s,f,h),r=!0},p(f,[h]){const L={};!n&&h&2&&(n=!0,L.selected=f[1],te(()=>n=!1)),e.$set(L);const b={};h&1&&(b.label="Diffusion Strength ("+f[0]+")"),!o&&h&1&&(o=!0,b.value=f[0],te(()=>o=!1)),s.$set(b)},i(f){r||(O(e.$$.fragment,f),O(s.$$.fragment,f),r=!0)},o(f){W(e.$$.fragment,f),W(s.$$.fragment,f),r=!1},d(f){Q(e,f),f&&_(i),Q(s,f)}}}function mi(t,e,n){let{diffusionStrength:i}=e,{diffusionMatrix:s}=e,{diffusionOriginX:o}=e,r="floyd_steinberg";const l=[{name:"Basic",value:"basic"},{name:"Floyd-Steinberg",value:"floyd_steinberg"},{name:"Atkinson",value:"atkinson"},{name:"Jarvis-Judice-Ninke",value:"jarvis_judice_ninke"}],a={basic:{matrix:[[0,1/2],[1/2,0]],originX:0},floyd_steinberg:{matrix:[[0,0,7/16],[3/16,5/16,1/16]],originX:1},atkinson:{matrix:[[0,0,1/8,1/8],[1/8,1/8,1/8,0],[0,1/8,0,0]],originX:1},jarvis_judice_ninke:{matrix:[[0,0,0,7/48,5/48],[3/48,5/48,7/48,5/48,3/48],[1/48,3/48,5/48,3/48,1/48]],originX:2}};function u(f){r=f,n(1,r)}function d(f){i=f,n(0,i)}return t.$$set=f=>{"diffusionStrength"in f&&n(0,i=f.diffusionStrength),"diffusionMatrix"in f&&n(3,s=f.diffusionMatrix),"diffusionOriginX"in f&&n(4,o=f.diffusionOriginX)},t.$$.update=()=>{if(t.$$.dirty&2){const{matrix:f,originX:h}=a[r];n(3,s=f),n(4,o=h)}},[i,r,l,s,o,u,d]}class gi extends ue{constructor(e){super(),fe(this,e,mi,hi,ce,{diffusionStrength:0,diffusionMatrix:3,diffusionOriginX:4})}}function Ot(t,e,n){const i=t.slice();return i[4]=e[n],i}function Ut(t){let e,n,i,s=!1,o,r,l=t[4].label+"",a,u,d,f,h,L;return f=_n(t[3][0]),{c(){e=y("label"),n=y("input"),o=R(),r=y("div"),a=q(l),d=R(),this.h()},l(b){e=k(b,"LABEL",{class:!0});var E=S(e);n=k(E,"INPUT",{type:!0,name:!0,class:!0}),o=C(E),r=k(E,"DIV",{class:!0});var g=S(r);a=J(g,l),g.forEach(_),d=C(E),E.forEach(_),this.h()},h(){c(n,"type","radio"),c(n,"name","tabs"),n.__value=i=t[4].value,n.value=n.__value,c(n,"class","sr-only"),c(r,"class",u="flex items-center justify-center py-2 text-sm font-medium text-gray-700 border-b "+(t[4].value===t[0]?"border-indigo-500 border-b-2":"border-gray-300")+" cursor-pointer hover:bg-gray-900 hover:bg-opacity-5"),c(e,"class","flex-1"),f.p(n)},m(b,E){B(b,e,E),p(e,n),n.checked=n.__value===t[0],p(e,o),p(e,r),p(r,a),p(e,d),h||(L=x(n,"change",t[2]),h=!0)},p(b,E){E&2&&i!==(i=b[4].value)&&(n.__value=i,n.value=n.__value,s=!0),(s||E&3)&&(n.checked=n.__value===b[0]),E&2&&l!==(l=b[4].label+"")&&et(a,l),E&3&&u!==(u="flex items-center justify-center py-2 text-sm font-medium text-gray-700 border-b "+(b[4].value===b[0]?"border-indigo-500 border-b-2":"border-gray-300")+" cursor-pointer hover:bg-gray-900 hover:bg-opacity-5")&&c(r,"class",u)},d(b){b&&_(e),f.r(),h=!1,L()}}}function pi(t){let e,n=t[1],i=[];for(let s=0;s<n.length;s+=1)i[s]=Ut(Ot(t,n,s));return{c(){e=y("nav");for(let s=0;s<i.length;s+=1)i[s].c();this.h()},l(s){e=k(s,"NAV",{class:!0});var o=S(e);for(let r=0;r<i.length;r+=1)i[r].l(o);o.forEach(_),this.h()},h(){c(e,"class","flex w-full")},m(s,o){B(s,e,o);for(let r=0;r<i.length;r+=1)i[r]&&i[r].m(e,null)},p(s,[o]){if(o&3){n=s[1];let r;for(r=0;r<n.length;r+=1){const l=Ot(s,n,r);i[r]?i[r].p(l,o):(i[r]=Ut(l),i[r].c(),i[r].m(e,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=n.length}},i:ae,o:ae,d(s){s&&_(e),at(i,s)}}}function _i(t,e,n){let{tabs:i}=e,{selected:s}=e;const o=[[]];function r(){s=this.__value,n(0,s)}return t.$$set=l=>{"tabs"in l&&n(1,i=l.tabs),"selected"in l&&n(0,s=l.selected)},[s,i,r,o]}class vi extends ue{constructor(e){super(),fe(this,e,_i,pi,ce,{tabs:1,selected:0})}}const bi=t=>({}),Xt=t=>({});function Ai(t){let e;const n=t[2].placeholder,i=Le(n,t,t[1],Xt),s=i||wi();return{c(){s&&s.c()},l(o){s&&s.l(o)},m(o,r){s&&s.m(o,r),e=!0},p(o,r){i&&i.p&&(!e||r&2)&&Ie(i,n,o,o[1],e?Me(n,o[1],r,bi):De(o[1]),Xt)},i(o){e||(O(s,o),e=!0)},o(o){W(s,o),e=!1},d(o){s&&s.d(o)}}}function Ei(t){let e,n,i,s;return{c(){e=y("canvas"),this.h()},l(o){e=k(o,"CANVAS",{class:!0,style:!0}),S(e).forEach(_),this.h()},h(){c(e,"class","w-full max-h-96 object-contain shadow-lg"),st(e,"image-rendering","pixelated")},m(o,r){B(o,e,r),i||(s=Xe(n=ki.call(null,e,t[0])),i=!0)},p(o,r){n&&ut(n.update)&&r&1&&n.update.call(null,o[0])},i:ae,o:ae,d(o){o&&_(e),i=!1,s()}}}function wi(t){let e,n;return{c(){e=y("span"),n=q("No Image")},l(i){e=k(i,"SPAN",{});var s=S(e);n=J(s,"No Image"),s.forEach(_)},m(i,s){B(i,e,s),p(e,n)},p:ae,d(i){i&&_(e)}}}function yi(t){let e,n,i,s;const o=[Ei,Ai],r=[];function l(a,u){return a[0]?0:1}return n=l(t),i=r[n]=o[n](t),{c(){e=y("div"),i.c(),this.h()},l(a){e=k(a,"DIV",{class:!0});var u=S(e);i.l(u),u.forEach(_),this.h()},h(){c(e,"class","w-full aspect-square rounded-lg bg-gray-100 p-8 grid place-items-center")},m(a,u){B(a,e,u),r[n].m(e,null),s=!0},p(a,[u]){let d=n;n=l(a),n===d?r[n].p(a,u):(Ge(),W(r[d],1,1,()=>{r[d]=null}),Qe(),i=r[n],i?i.p(a,u):(i=r[n]=o[n](a),i.c()),O(i,1),i.m(e,null))},i(a){s||(O(i),s=!0)},o(a){W(i),s=!1},d(a){a&&_(e),r[n].d()}}}function ki(t,e){const n=t.getContext("2d");if(!n)return;const i=()=>{t.width=e.width,t.height=e.height,n.putImageData(e,0,0)};let s=null;const o=()=>{s||(s=requestAnimationFrame(()=>{s=null,i()}))};return o(),{destroy(){s&&cancelAnimationFrame(s)},update:r=>{e=r,o()}}}function Ti(t,e,n){let{$$slots:i={},$$scope:s}=e,{imageData:o}=e;return t.$$set=r=>{"imageData"in r&&n(0,o=r.imageData),"$$scope"in r&&n(1,s=r.$$scope)},[o,s,i]}class Si extends ue{constructor(e){super(),fe(this,e,Ti,yi,ce,{imageData:0})}}function Li(){return new Worker(""+new URL("../workers/worker-09b3192d.js",import.meta.url).href)}let rt=null;async function Ii(t){return rt||(rt=ft(new Li)),await rt.generate(t)}function Wt(t){let e,n,i;function s(r){t[9](r)}let o={label:"Bayer Level ("+t[4]+")",min:0,max:5,step:1};return t[4]!==void 0&&(o.value=t[4]),e=new xe({props:o}),K.push(()=>ee(e,"value",s)),{c(){j(e.$$.fragment)},l(r){Y(e.$$.fragment,r)},m(r,l){G(e,r,l),i=!0},p(r,l){const a={};l&16&&(a.label="Bayer Level ("+r[4]+")"),!n&&l&16&&(n=!0,a.value=r[4],te(()=>n=!1)),e.$set(a)},i(r){i||(O(e.$$.fragment,r),i=!0)},o(r){W(e.$$.fragment,r),i=!1},d(r){Q(e,r)}}}function Bt(t){let e,n,i;function s(r){t[10](r)}let o={aspectRatio:1,minWidth:1,minHeight:1,maxHeight:3e3,maxWidth:3e3};return t[5]!==void 0&&(o.width=t[5]),e=new Yt({props:o}),K.push(()=>ee(e,"width",s)),{c(){j(e.$$.fragment)},l(r){Y(e.$$.fragment,r)},m(r,l){G(e,r,l),i=!0},p(r,l){const a={};!n&&l&32&&(n=!0,a.width=r[5],te(()=>n=!1)),e.$set(a)},i(r){i||(O(e.$$.fragment,r),i=!0)},o(r){W(e.$$.fragment,r),i=!1},d(r){Q(e,r)}}}function Di(t){let e,n;return{c(){e=y("span"),n=q("Loading Threshold Map"),this.h()},l(i){e=k(i,"SPAN",{slot:!0});var s=S(e);n=J(s,"Loading Threshold Map"),s.forEach(_),this.h()},h(){c(e,"slot","placeholder")},m(i,s){B(i,e,s),p(e,n)},p:ae,d(i){i&&_(e)}}}function Mi(t){let e,n,i,s,o,r,l,a,u,d,f,h,L;function b(v){t[8](v)}let E={label:"Threshold Map",options:t[6]};t[3]!==void 0&&(E.selected=t[3]),e=new en({props:E}),K.push(()=>ee(e,"selected",b));let g=t[3]==="bayer"&&Wt(t),m=t[3]==="white_noise"&&Bt(t);r=new Si({props:{imageData:t[0],$$slots:{placeholder:[Di]},$$scope:{ctx:t}}});function w(v){t[11](v)}let A={label:"Threshold ("+t[1]+")",min:0,max:1,step:.01};t[1]!==void 0&&(A.value=t[1]),a=new xe({props:A}),K.push(()=>ee(a,"value",w));function T(v){t[12](v)}let D={label:"Noise Intensity ("+t[2]+")",min:0,max:1.5,step:.01};return t[2]!==void 0&&(D.value=t[2]),f=new xe({props:D}),K.push(()=>ee(f,"value",T)),{c(){j(e.$$.fragment),i=R(),g&&g.c(),s=R(),m&&m.c(),o=R(),j(r.$$.fragment),l=R(),j(a.$$.fragment),d=R(),j(f.$$.fragment)},l(v){Y(e.$$.fragment,v),i=C(v),g&&g.l(v),s=C(v),m&&m.l(v),o=C(v),Y(r.$$.fragment,v),l=C(v),Y(a.$$.fragment,v),d=C(v),Y(f.$$.fragment,v)},m(v,I){G(e,v,I),B(v,i,I),g&&g.m(v,I),B(v,s,I),m&&m.m(v,I),B(v,o,I),G(r,v,I),B(v,l,I),G(a,v,I),B(v,d,I),G(f,v,I),L=!0},p(v,[I]){const N={};!n&&I&8&&(n=!0,N.selected=v[3],te(()=>n=!1)),e.$set(N),v[3]==="bayer"?g?(g.p(v,I),I&8&&O(g,1)):(g=Wt(v),g.c(),O(g,1),g.m(s.parentNode,s)):g&&(Ge(),W(g,1,1,()=>{g=null}),Qe()),v[3]==="white_noise"?m?(m.p(v,I),I&8&&O(m,1)):(m=Bt(v),m.c(),O(m,1),m.m(o.parentNode,o)):m&&(Ge(),W(m,1,1,()=>{m=null}),Qe());const U={};I&1&&(U.imageData=v[0]),I&8192&&(U.$$scope={dirty:I,ctx:v}),r.$set(U);const F={};I&2&&(F.label="Threshold ("+v[1]+")"),!u&&I&2&&(u=!0,F.value=v[1],te(()=>u=!1)),a.$set(F);const X={};I&4&&(X.label="Noise Intensity ("+v[2]+")"),!h&&I&4&&(h=!0,X.value=v[2],te(()=>h=!1)),f.$set(X)},i(v){L||(O(e.$$.fragment,v),O(g),O(m),O(r.$$.fragment,v),O(a.$$.fragment,v),O(f.$$.fragment,v),L=!0)},o(v){W(e.$$.fragment,v),W(g),W(m),W(r.$$.fragment,v),W(a.$$.fragment,v),W(f.$$.fragment,v),L=!1},d(v){Q(e,v),v&&_(i),g&&g.d(v),v&&_(s),m&&m.d(v),v&&_(o),Q(r,v),v&&_(l),Q(a,v),v&&_(d),Q(f,v)}}}function Ri(t,e,n){let i,{thresholdMap:s}=e,{threshold:o}=e,{noiseIntensity:r}=e,l="bayer";const a=[{name:"Bayer",value:"bayer"},{name:"Blue Noise",value:"blue_noise"},{name:"White Noise",value:"white_noise"}];let u=3,d=256;function f(g){l=g,n(3,l)}function h(g){u=g,n(4,u)}function L(g){d=g,n(5,d)}function b(g){o=g,n(1,o)}function E(g){r=g,n(2,r)}return t.$$set=g=>{"thresholdMap"in g&&n(0,s=g.thresholdMap),"threshold"in g&&n(1,o=g.threshold),"noiseIntensity"in g&&n(2,r=g.noiseIntensity)},t.$$.update=()=>{if(t.$$.dirty&32&&n(7,i=d),t.$$.dirty&184&&"ImageData"in globalThis){let g;switch(l){case"bayer":g={mode:"bayer",level:u};break;case"blue_noise":g={mode:"blue_noise"};break;case"white_noise":g={mode:"white_noise",width:d,height:i};break}Ii(g).then(m=>n(0,s=m))}},[s,o,r,l,u,d,a,i,f,h,L,b,E]}class Ci extends ue{constructor(e){super(),fe(this,e,Ri,Mi,ce,{thresholdMap:0,threshold:1,noiseIntensity:2})}}const Pi=t=>({}),Ft=t=>({});function Ni(t){let e,n,i,s,o,r,l,a,u,d,f,h;s=new Re({props:{src:t[0]?bt:At,class:"w-6 h-6 text-gray-500"}});const L=t[2].header,b=Le(L,t,t[1],Ft),E=t[2].default,g=Le(E,t,t[1],null);return{c(){e=y("div"),n=y("header"),i=y("button"),j(s.$$.fragment),o=R(),r=y("div"),b&&b.c(),l=R(),a=y("section"),g&&g.c(),this.h()},l(m){e=k(m,"DIV",{class:!0});var w=S(e);n=k(w,"HEADER",{class:!0});var A=S(n);i=k(A,"BUTTON",{class:!0});var T=S(i);Y(s.$$.fragment,T),T.forEach(_),o=C(A),r=k(A,"DIV",{class:!0});var D=S(r);b&&b.l(D),D.forEach(_),A.forEach(_),l=C(w),a=k(w,"SECTION",{class:!0});var v=S(a);g&&g.l(v),v.forEach(_),w.forEach(_),this.h()},h(){c(i,"class","contents"),c(r,"class","flex flex-1 items-center justify-between"),c(n,"class","py-4 px-4 flex-shrink-0 shadow-sm z-10 flex gap-2 items-center justify-between bg-white"),c(a,"class","overflow-y-auto overflow-x-visible"),Ae(a,"hidden",!t[0]),c(e,"class",u="w-full max-h-full "+(t[0]?"h-full divide-y divide-gray-200 mt-auto":"")+" bg-white bg-opacity-95 border border-gray-100 overflow-y-hidden flex-1 shadow-lg rounded-md flex flex-col justify-start pointer-events-auto touch-auto")},m(m,w){B(m,e,w),p(e,n),p(n,i),G(s,i,null),p(n,o),p(n,r),b&&b.m(r,null),p(e,l),p(e,a),g&&g.m(a,null),d=!0,f||(h=x(i,"click",t[3]),f=!0)},p(m,[w]){const A={};w&1&&(A.src=m[0]?bt:At),s.$set(A),b&&b.p&&(!d||w&2)&&Ie(b,L,m,m[1],d?Me(L,m[1],w,Pi):De(m[1]),Ft),g&&g.p&&(!d||w&2)&&Ie(g,E,m,m[1],d?Me(E,m[1],w,null):De(m[1]),null),(!d||w&1)&&Ae(a,"hidden",!m[0]),(!d||w&1&&u!==(u="w-full max-h-full "+(m[0]?"h-full divide-y divide-gray-200 mt-auto":"")+" bg-white bg-opacity-95 border border-gray-100 overflow-y-hidden flex-1 shadow-lg rounded-md flex flex-col justify-start pointer-events-auto touch-auto"))&&c(e,"class",u)},i(m){d||(O(s.$$.fragment,m),O(b,m),O(g,m),d=!0)},o(m){W(s.$$.fragment,m),W(b,m),W(g,m),d=!1},d(m){m&&_(e),Q(s),b&&b.d(m),g&&g.d(m),f=!1,h()}}}function Oi(t,e,n){let{$$slots:i={},$$scope:s}=e,{open:o=!1}=e;const r=()=>n(0,o=!o);return t.$$set=l=>{"open"in l&&n(0,o=l.open),"$$scope"in l&&n(1,s=l.$$scope)},[o,s,i,r]}class Ui extends ue{constructor(e){super(),fe(this,e,Oi,Ni,ce,{open:0})}}const Xi="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAAXNSR0IArs4c6QAAAyNJREFUaEPVWjFW3DAQ/dOyqSEvB6AiTUJITcEtSJ8azkFq+uQUUFADCQ2pOAHbL2l/noy9q9Va1owseZMt4O16JM+fP39Gliwo+zkGcElyX0RAEpH/TyLyFcBNqdvL2IlIfheR0wGnY2D8338A+DLGlzFAmOt853A3Pvie5ZN5EMmFiMxyQSjHvQB4Y2HIAuSQ5H0i9zVpNKSdtfEAPgH4qQGkAkLyF4APHYhu4olAPYjIxxQYDZAXkjslnU5oZOmzp6E/AGZDYFJAsgWt1II6zdr5ov4OAVmQnJVkIgVOwVS0CPQCIXkL4CimiVAjE2vmTkQ+h2nWB+SA5GNNJhSRb0wifcZdeg/gtw9mA4gTxZaqk6l0A1jzfe3LRM0uKnAjU2t6CRlpqlRKA6nrNdMyKBhL/30gzyT3pnBCG/lUEwQwB/DW2S2B+FRoq9UUoBUlu8HQ/CF5JiIXqUGlr2uZGahebopzAN86ICthDPCpZWrivuKqnSyB1EwTbeQVmoiZiJDcFZH5f1atwhL+zjFyRfKkJiOJHN/o4BnMXDtGVPrQTL7NFYFjpPpSPaYRTXC0NlmM/IvVaxJGQo1oo2yxy2LEcoOm675W+eZTuql281VjxG+KVuA59pMzom2O1pKdZCS1ZI9d96Pqp1ZOtDVjHCNXAE40xrk2Q0CskY9o7NoxsktyPrazDzEzASPNEuW1I1b85AAxMrW5+s3VRNgkJ9bIssCfkbyoRUoNjXjV71xEXh+sVr1qdcJUkpmc1DIEdfWo2+rkGcCeYQK1aQ0grYY2Nx9C0VsXhkOoagBp79e7HeSq1yK1fa+mwTO0ADFUq8ENuo1qbGWmr3pZgBgCFd8ybVEcAHg0TJg0rQAkvYndgrkVkaNSfbIwkDsAqmOFJsIl9TIGSKAZ20GP31isGunLszFAgvmyjt46ZlwUdpJCGDAoBGTwvDN1GNqBaY6nc8GMBPIAoMjxdAfmEMB9DpgRQMq+MBA435z2xtZihTRS9RWONR8tzzBGRlTpHgYsa5A/iXvNCcDpyLXWVl9z6vP9mOQlgH3/Yg8jTwCKvnj2F9CvAivl1accAAAAAElFTkSuQmCC",Wi="data:image/webp;base64,UklGRsoDAABXRUJQVlA4TL0DAAAvr0SpAA8w//M///MfeJCYSJIkSQktQIs0qrdILcBA7j1dnZUR1Qu+DxH9h8O2kSRJjiop3FsnY3fvLn6dm/OUKZtoJzrybpuO3Wiinb+LFpyyYaKdYw/d9HaeaOeRtDxzo51oyYp9gXaWawptE+0cezySnDPJ94AeGsv1Bdp5qLKQDPNNoIdmaqeknWjMWn2BQH4D6KHX0E70ZqG+QDsPVRaSduKSp5FzLPn0euhdaCfas0pfoJ2HKgtJO3GT5+gLtGN5gtqdvBbaCUWW6Au081BlIWknqllezsnk8+mhM6GdEKVm416WTjsPVRaSdmIuGic30XXakR6cgWMX36oZIW8J7YQyleNmJOe081BlIWknmlLV8vIUDnJOO7qDM5bt+ttWcPLG0E7ocuyzZh4RysW0o1rUZvXCvkA7vVeoT8sd5Bxa1uyhvXLeHtrx0fJjH2j5+MrJ+gK2LNpD07Yv0I5i87SZm8g57agWZTaauSj04txD5337Xsu1D9bQjmRRs9ur+gLt6BbVpxhOyjtJO6pF/6fHzF+npi/QjpmZF++bpi+Qy7o9NA37Au1YmflVyC3uJLks10Nv/dyrLxDK8j106rj59AXakSxqN/zsnAbni3ZUi8qT0Z2kHcmiuuRb9QVE+XLuoXFuiql6RqpvpGgR7fgsSrM7iSrrPi45cUZeESaPH8GO0/NzMq3uJO0Ymfl/+PQF2pEvysFkdidpx87Mh5O2L9COi5ln1sxc+Tpr2nEz84qcH6npC7QjXJS3k9mdpB2RmW9TZ+R1N6l+/yTtWPzm/0zDvkA7bWbe4dtDxg6vWkQ7skV3Wj7zLlzftvY7STvNTj58FKbLzHWLaEf/b6JkTpr5+9g1E+6cm2iaPiPah2kyE3d0qZj5zNsm8HPa6XPywkMwPWaeutCO+D9FyRybeU3LZRPunJuLnFc4U7gIWvx//k49CjNg6tGcfkWnnU4nr8v5mKGcv1Ma2gltzhszr7xJQjOnHZWWD8SgfkZSHdxR56ia+dDJRX5OO1NC3jWVSIPQThikYObvsa6rzJx2hFp+7+FX0iO445S8ZqjlMkWnnYqQd09jnEI7VovGQi6Xc9rRm7nrItpxM/NbORcqOu3cOvlj9AXacTNzHzmnHYmWL9EXaMfZzLUT7Wid/GW8iHbczNxHzmmnX8tX6Qsc8qXeQyMeqS/QjpuZ+8g57TRr+UJ9gXbczNxHzonlu0EP9ZFz2ul08rX6AoF8p+ih3otox22Rj5yTzNdyDxUi7AvQ8rXbQxMA";function zt(t,e,n){const i=t.slice();return i[39]=e[n],i}function Bi(t){let e,n,i,s,o,r,l,a,u,d,f,h,L,b,E,g,m,w,A=t[18],T=[];for(let D=0;D<A.length;D+=1)T[D]=Vt(zt(t,A,D));return d=new Re({props:{src:wn,class:"w-12 h-12 text-gray-400"}}),{c(){e=y("div"),n=y("div"),i=y("p"),s=q("Select or Drop an Image to Start"),o=R(),r=y("div");for(let D=0;D<T.length;D+=1)T[D].c();l=R(),a=y("label"),u=y("div"),j(d.$$.fragment),f=R(),h=y("span"),L=q("Choose an Image"),b=R(),E=y("input"),this.h()},l(D){e=k(D,"DIV",{class:!0});var v=S(e);n=k(v,"DIV",{class:!0});var I=S(n);i=k(I,"P",{class:!0});var N=S(i);s=J(N,"Select or Drop an Image to Start"),N.forEach(_),o=C(I),r=k(I,"DIV",{class:!0});var U=S(r);for(let ne=0;ne<T.length;ne+=1)T[ne].l(U);l=C(U),a=k(U,"LABEL",{for:!0,class:!0});var F=S(a);u=k(F,"DIV",{class:!0});var X=S(u);Y(d.$$.fragment,X),X.forEach(_),f=C(F),h=k(F,"SPAN",{class:!0});var z=S(h);L=J(z,"Choose an Image"),z.forEach(_),b=C(F),E=k(F,"INPUT",{type:!0,class:!0,id:!0,accept:!0}),F.forEach(_),U.forEach(_),I.forEach(_),v.forEach(_),this.h()},h(){c(i,"class","text-2xl text-gray-500 text-center"),c(u,"class","grid place-items-center h-full w-full"),c(h,"class","sr-only"),c(E,"type","file"),c(E,"class","sr-only"),c(E,"id","image-input"),c(E,"accept","image/*"),c(a,"for","image-input"),c(a,"class","block spect-square h-24 w-24 object-cover rounded-md shadow-md border-2 border-white bg-white hover:bg-gray-100"),c(r,"class","flex gap-3 justify-center flex-wrap"),c(n,"class","grid gap-4"),c(e,"class","w-full h-full grid place-items-center px-8")},m(D,v){B(D,e,v),p(e,n),p(n,i),p(i,s),p(n,o),p(n,r);for(let I=0;I<T.length;I+=1)T[I]&&T[I].m(r,null);p(r,l),p(r,a),p(a,u),G(d,u,null),p(a,f),p(a,h),p(h,L),p(a,b),p(a,E),g=!0,m||(w=x(E,"input",t[21]),m=!0)},p(D,v){if(v[0]&4456448){A=D[18];let I;for(I=0;I<A.length;I+=1){const N=zt(D,A,I);T[I]?T[I].p(N,v):(T[I]=Vt(N),T[I].c(),T[I].m(r,l))}for(;I<T.length;I+=1)T[I].d(1);T.length=A.length}},i(D){g||(O(d.$$.fragment,D),g=!0)},o(D){W(d.$$.fragment,D),g=!1},d(D){D&&_(e),at(T,D),Q(d),m=!1,w()}}}function Fi(t){let e,n,i,s,o,r,l,a;return n=new Gn({props:{direction:t[15],$$slots:{right:[Yi],left:[zi]},$$scope:{ctx:t}}}),o=new Re({props:{src:yn,class:"w-5 h-5 text-white"}}),{c(){e=y("div"),j(n.$$.fragment),i=R(),s=y("button"),j(o.$$.fragment),this.h()},l(u){e=k(u,"DIV",{class:!0});var d=S(e);Y(n.$$.fragment,d),i=C(d),s=k(d,"BUTTON",{class:!0,title:!0});var f=S(s);Y(o.$$.fragment,f),f.forEach(_),d.forEach(_),this.h()},h(){c(s,"class","absolute top-0 left-0 m-4 p-2 bg-black bg-opacity-40 rounded-full"),c(s,"title","Close Image & Reset"),c(e,"class","w-full h-full relative")},m(u,d){B(u,e,d),G(n,e,null),p(e,i),p(e,s),G(o,s,null),r=!0,l||(a=x(s,"click",t[25]),l=!0)},p(u,d){const f={};d[0]&32768&&(f.direction=u[15]),d[0]&163835|d[1]&2048&&(f.$$scope={dirty:d,ctx:u}),n.$set(f)},i(u){r||(O(n.$$.fragment,u),O(o.$$.fragment,u),r=!0)},o(u){W(n.$$.fragment,u),W(o.$$.fragment,u),r=!1},d(u){u&&_(e),Q(n),Q(o),l=!1,a()}}}function Vt(t){let e,n,i,s,o;function r(){return t[26](t[39])}return{c(){e=y("button"),n=y("img"),this.h()},l(l){e=k(l,"BUTTON",{class:!0});var a=S(e);n=k(a,"IMG",{class:!0,src:!0,alt:!0}),a.forEach(_),this.h()},h(){c(n,"class","aspect-square h-24 w-24 object-cover rounded-md shadow-md border-2 border-white"),We(n.src,i=t[39])||c(n,"src",i),c(n,"alt",""),c(e,"class","hover:opacity-75 transition-opacity")},m(l,a){B(l,e,a),p(e,n),s||(o=x(e,"click",r),s=!0)},p(l,a){t=l},d(l){l&&_(e),s=!1,o()}}}function zi(t){let e,n,i;return{c(){e=y("img"),this.h()},l(s){e=k(s,"IMG",{slot:!0,src:!0,alt:!0,style:!0,class:!0}),this.h()},h(){c(e,"slot","left"),We(e.src,n=t[1].src)||c(e,"src",n),c(e,"alt",""),c(e,"style",i=`width: ${t[0]}px; height: ${t[17]}px`),c(e,"class","pixelated max-w-none shadow-lg svelte-1b7r98h")},m(s,o){B(s,e,o)},p(s,o){o[0]&2&&!We(e.src,n=s[1].src)&&c(e,"src",n),o[0]&131073&&i!==(i=`width: ${s[0]}px; height: ${s[17]}px`)&&c(e,"style",i)},d(s){s&&_(e)}}}function Vi(t){let e,n,i;return{c(){e=y("img"),this.h()},l(s){e=k(s,"IMG",{src:!0,alt:!0,style:!0,class:!0}),this.h()},h(){We(e.src,n=t[1].src)||c(e,"src",n),c(e,"alt",""),c(e,"style",i=`width: ${t[0]}px; height: ${t[17]}px`),c(e,"class","pixelated max-w-none shadow-lg svelte-1b7r98h")},m(s,o){B(s,e,o)},p(s,o){o[0]&2&&!We(e.src,n=s[1].src)&&c(e,"src",n),o[0]&131073&&i!==(i=`width: ${s[0]}px; height: ${s[17]}px`)&&c(e,"style",i)},d(s){s&&_(e)}}}function Hi(t){let e,n=t[9]&&Ht(t);return{c(){n&&n.c(),e=Ze()},l(i){n&&n.l(i),e=Ze()},m(i,s){n&&n.m(i,s),B(i,e,s)},p(i,s){i[9]?n?n.p(i,s):(n=Ht(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(i){n&&n.d(i),i&&_(e)}}}function ji(t){let e,n,i,s,o;return{c(){e=y("canvas"),this.h()},l(r){e=k(r,"CANVAS",{class:!0,style:!0,width:!0,height:!0}),S(e).forEach(_),this.h()},h(){c(e,"class","pixelated shadow-lg bg-gray-200 svelte-1b7r98h"),c(e,"style",n=`width: ${t[0]}px; height: ${t[17]}px`),c(e,"width",t[0]),c(e,"height",t[17])},m(r,l){B(r,e,l),t[23](e),s||(o=Xe(i=ai.call(null,e,{image:t[7],output_width:t[0],output_height:t[17],monochrome:t[3],colorLight:t[4],colorDark:t[5],diffusionStrength:t[12],diffusionMatrix:t[13],diffusionMatrixOriginX:t[14]})),s=!0)},p(r,l){l[0]&131073&&n!==(n=`width: ${r[0]}px; height: ${r[17]}px`)&&c(e,"style",n),l[0]&1&&c(e,"width",r[0]),l[0]&131072&&c(e,"height",r[17]),i&&ut(i.update)&&l[0]&159929&&i.update.call(null,{image:r[7],output_width:r[0],output_height:r[17],monochrome:r[3],colorLight:r[4],colorDark:r[5],diffusionStrength:r[12],diffusionMatrix:r[13],diffusionMatrixOriginX:r[14]})},d(r){r&&_(e),t[23](null),s=!1,o()}}}function Ht(t){let e,n,i,s,o;return{c(){e=y("canvas"),this.h()},l(r){e=k(r,"CANVAS",{class:!0,style:!0,width:!0,height:!0,"aria-label":!0}),S(e).forEach(_),this.h()},h(){c(e,"class","pixelated shadow-lg svelte-1b7r98h"),c(e,"style",n=`width: ${t[0]}px; height: ${t[17]}px`),c(e,"width",t[0]),c(e,"height",t[17]),c(e,"aria-label","Dithered Image")},m(r,l){B(r,e,l),t[24](e),s||(o=Xe(i=Cn.call(null,e,{image:t[7],threshold:t[10],noiseIntensity:t[11],monochrome:t[3],colorLight:t[4],colorDark:t[5],output_width:t[0],output_height:t[17],thresholdMap:t[9]})),s=!0)},p(r,l){l[0]&131073&&n!==(n=`width: ${r[0]}px; height: ${r[17]}px`)&&c(e,"style",n),l[0]&1&&c(e,"width",r[0]),l[0]&131072&&c(e,"height",r[17]),i&&ut(i.update)&&l[0]&134841&&i.update.call(null,{image:r[7],threshold:r[10],noiseIntensity:r[11],monochrome:r[3],colorLight:r[4],colorDark:r[5],output_width:r[0],output_height:r[17],thresholdMap:r[9]})},d(r){r&&_(e),t[24](null),s=!1,o()}}}function Yi(t){let e;function n(o,r){if(o[8]==="error_diffusion")return ji;if(o[8]==="ordered")return Hi;if(o[8]==="none")return Vi}let i=n(t),s=i&&i(t);return{c(){s&&s.c(),e=Ze()},l(o){s&&s.l(o),e=Ze()},m(o,r){s&&s.m(o,r),B(o,e,r)},p(o,r){i===(i=n(o))&&s?s.p(o,r):(s&&s.d(1),s=i&&i(o),s&&(s.c(),s.m(e.parentNode,e)))},d(o){s&&s.d(o),o&&_(e)}}}function jt(t){let e,n,i,s,o,r,l,a,u,d,f,h,L,b;return{c(){e=y("fieldset"),n=y("div"),i=y("input"),s=R(),o=y("label"),r=q("Light"),l=R(),a=y("div"),u=y("input"),d=R(),f=y("label"),h=q("Dark"),this.h()},l(E){e=k(E,"FIELDSET",{});var g=S(e);n=k(g,"DIV",{class:!0});var m=S(n);i=k(m,"INPUT",{type:!0,name:!0,id:!0}),s=C(m),o=k(m,"LABEL",{for:!0,class:!0});var w=S(o);r=J(w,"Light"),w.forEach(_),m.forEach(_),l=C(g),a=k(g,"DIV",{class:!0});var A=S(a);u=k(A,"INPUT",{type:!0,name:!0,id:!0}),d=C(A),f=k(A,"LABEL",{for:!0,class:!0});var T=S(f);h=J(T,"Dark"),T.forEach(_),A.forEach(_),g.forEach(_),this.h()},h(){c(i,"type","color"),c(i,"name","color-light"),c(i,"id","color-light"),c(o,"for","color-light"),c(o,"class","font-medium text-gray-900"),c(n,"class","flex gap-3"),c(u,"type","color"),c(u,"name","color-dark"),c(u,"id","color-dark"),c(f,"for","color-dark"),c(f,"class","font-medium text-gray-900"),c(a,"class","flex gap-3")},m(E,g){B(E,e,g),p(e,n),p(n,i),Se(i,t[4]),p(n,s),p(n,o),p(o,r),p(e,l),p(e,a),p(a,u),Se(u,t[5]),p(a,d),p(a,f),p(f,h),L||(b=[x(i,"input",t[37]),x(u,"input",t[38])],L=!0)},p(E,g){g[0]&16&&Se(i,E[4]),g[0]&32&&Se(u,E[5])},d(E){E&&_(e),L=!1,Be(b)}}}function Gi(t){let e,n,i,s,o,r,l,a,u,d,f,h,L,b,E,g,m,w,A,T,D,v,I,N,U,F,X,z,ne,ge,Z,le,pe,de,re,se,ie,Ce,_e,me,Pe,P,H,he,Fe;function tn(M){t[27](M)}function nn(M){t[28](M)}let tt={minWidth:12,minHeight:12,maxHeight:5e3,maxWidth:5e3};t[0]!==void 0&&(tt.width=t[0]),t[2]!==void 0&&(tt.aspectRatio=t[2]),r=new Yt({props:tt}),K.push(()=>ee(r,"width",tn)),K.push(()=>ee(r,"aspectRatio",nn));function rn(M){t[29](M)}let ct={tabs:[{label:"None",value:"none"},{label:"Ordered",value:"ordered"},{label:"Error Diffusion",value:"error_diffusion"}]};t[8]!==void 0&&(ct.selected=t[8]),b=new vi({props:ct}),K.push(()=>ee(b,"selected",rn));function sn(M){t[30](M)}function on(M){t[31](M)}function ln(M){t[32](M)}let ze={};t[12]!==void 0&&(ze.diffusionStrength=t[12]),t[13]!==void 0&&(ze.diffusionMatrix=t[13]),t[14]!==void 0&&(ze.diffusionOriginX=t[14]),w=new gi({props:ze}),K.push(()=>ee(w,"diffusionStrength",sn)),K.push(()=>ee(w,"diffusionMatrix",on)),K.push(()=>ee(w,"diffusionOriginX",ln));function an(M){t[33](M)}function un(M){t[34](M)}function fn(M){t[35](M)}let Ve={};t[9]!==void 0&&(Ve.thresholdMap=t[9]),t[11]!==void 0&&(Ve.noiseIntensity=t[11]),t[10]!==void 0&&(Ve.threshold=t[10]),U=new Ci({props:Ve}),K.push(()=>ee(U,"thresholdMap",an)),K.push(()=>ee(U,"noiseIntensity",un)),K.push(()=>ee(U,"threshold",fn));let $=t[3]&&jt(t);return{c(){e=y("section"),n=y("div"),i=y("h2"),s=q("Output Options"),o=R(),j(r.$$.fragment),u=R(),d=y("div"),f=y("h2"),h=q("Dithering Options"),L=R(),j(b.$$.fragment),g=R(),m=y("div"),j(w.$$.fragment),I=R(),N=y("div"),j(U.$$.fragment),ge=R(),Z=y("div"),le=y("h2"),pe=q("Palette"),de=R(),re=y("div"),se=y("div"),ie=y("input"),Ce=R(),_e=y("div"),me=y("label"),Pe=q("Monochrome"),P=R(),$&&$.c(),this.h()},l(M){e=k(M,"SECTION",{class:!0});var V=S(e);n=k(V,"DIV",{});var ve=S(n);i=k(ve,"H2",{class:!0});var Ne=S(i);s=J(Ne,"Output Options"),Ne.forEach(_),o=C(ve),Y(r.$$.fragment,ve),ve.forEach(_),u=C(V),d=k(V,"DIV",{class:!0});var oe=S(d);f=k(oe,"H2",{class:!0});var Ee=S(f);h=J(Ee,"Dithering Options"),Ee.forEach(_),L=C(oe),Y(b.$$.fragment,oe),g=C(oe),m=k(oe,"DIV",{class:!0});var dt=S(m);Y(w.$$.fragment,dt),dt.forEach(_),I=C(oe),N=k(oe,"DIV",{class:!0});var ht=S(N);Y(U.$$.fragment,ht),ht.forEach(_),oe.forEach(_),ge=C(V),Z=k(V,"DIV",{class:!0});var ye=S(Z);le=k(ye,"H2",{class:!0});var mt=S(le);pe=J(mt,"Palette"),mt.forEach(_),de=C(ye),re=k(ye,"DIV",{class:!0});var He=S(re);se=k(He,"DIV",{class:!0});var gt=S(se);ie=k(gt,"INPUT",{type:!0,id:!0,class:!0}),gt.forEach(_),Ce=C(He),_e=k(He,"DIV",{class:!0});var pt=S(_e);me=k(pt,"LABEL",{for:!0,class:!0});var _t=S(me);Pe=J(_t,"Monochrome"),_t.forEach(_),pt.forEach(_),He.forEach(_),P=C(ye),$&&$.l(ye),ye.forEach(_),V.forEach(_),this.h()},h(){c(i,"class","text-base font-semibold leading-7 text-black mb-4"),c(f,"class","text-base font-semibold leading-7 text-black mb-2"),c(m,"class",v=t[8]==="error_diffusion"?"contents":"hidden"),c(N,"class",ne=t[8]==="ordered"?"contents":"hidden"),c(d,"class","grid gap-4"),c(le,"class","text-base font-semibold leading-7 text-black mb-2"),c(ie,"type","checkbox"),c(ie,"id","monochrome"),c(ie,"class","h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600"),c(se,"class","flex h-6 items-center"),c(me,"for","monochrome"),c(me,"class","font-medium text-gray-900"),c(_e,"class","ml-3 text-sm leading-6"),c(re,"class","relative flex items-start"),c(Z,"class","grid gap-3"),Ae(Z,"hidden",t[8]==="none"),c(e,"class","grid gap-8 pt-8 px-4 safe-padding-bottom svelte-1b7r98h")},m(M,V){B(M,e,V),p(e,n),p(n,i),p(i,s),p(n,o),G(r,n,null),p(e,u),p(e,d),p(d,f),p(f,h),p(d,L),G(b,d,null),p(d,g),p(d,m),G(w,m,null),p(d,I),p(d,N),G(U,N,null),p(e,ge),p(e,Z),p(Z,le),p(le,pe),p(Z,de),p(Z,re),p(re,se),p(se,ie),ie.checked=t[3],p(re,Ce),p(re,_e),p(_e,me),p(me,Pe),p(Z,P),$&&$.m(Z,null),H=!0,he||(Fe=x(ie,"change",t[36]),he=!0)},p(M,V){const ve={};!l&&V[0]&1&&(l=!0,ve.width=M[0],te(()=>l=!1)),!a&&V[0]&4&&(a=!0,ve.aspectRatio=M[2],te(()=>a=!1)),r.$set(ve);const Ne={};!E&&V[0]&256&&(E=!0,Ne.selected=M[8],te(()=>E=!1)),b.$set(Ne);const oe={};!A&&V[0]&4096&&(A=!0,oe.diffusionStrength=M[12],te(()=>A=!1)),!T&&V[0]&8192&&(T=!0,oe.diffusionMatrix=M[13],te(()=>T=!1)),!D&&V[0]&16384&&(D=!0,oe.diffusionOriginX=M[14],te(()=>D=!1)),w.$set(oe),(!H||V[0]&256&&v!==(v=M[8]==="error_diffusion"?"contents":"hidden"))&&c(m,"class",v);const Ee={};!F&&V[0]&512&&(F=!0,Ee.thresholdMap=M[9],te(()=>F=!1)),!X&&V[0]&2048&&(X=!0,Ee.noiseIntensity=M[11],te(()=>X=!1)),!z&&V[0]&1024&&(z=!0,Ee.threshold=M[10],te(()=>z=!1)),U.$set(Ee),(!H||V[0]&256&&ne!==(ne=M[8]==="ordered"?"contents":"hidden"))&&c(N,"class",ne),V[0]&8&&(ie.checked=M[3]),M[3]?$?$.p(M,V):($=jt(M),$.c(),$.m(Z,null)):$&&($.d(1),$=null),(!H||V[0]&256)&&Ae(Z,"hidden",M[8]==="none")},i(M){H||(O(r.$$.fragment,M),O(b.$$.fragment,M),O(w.$$.fragment,M),O(U.$$.fragment,M),H=!0)},o(M){W(r.$$.fragment,M),W(b.$$.fragment,M),W(w.$$.fragment,M),W(U.$$.fragment,M),H=!1},d(M){M&&_(e),Q(r),Q(b),Q(w),Q(U),$&&$.d(),he=!1,Fe()}}}function Qi(t){let e,n,i;return e=new Re({props:{src:kn,class:"w-4 h-4"}}),{c(){j(e.$$.fragment),n=q(`
					Save`)},l(s){Y(e.$$.fragment,s),n=J(s,`
					Save`)},m(s,o){G(e,s,o),B(s,n,o),i=!0},p:ae,i(s){i||(O(e.$$.fragment,s),i=!0)},o(s){W(e.$$.fragment,s),i=!1},d(s){Q(e,s),s&&_(n)}}}function Zi(t){let e,n,i,s,o;return s=new On({props:{disabled:!t[1],$$slots:{default:[Qi]},$$scope:{ctx:t}}}),s.$on("click",t[19]),{c(){e=y("h1"),n=q("Options"),i=R(),j(s.$$.fragment),this.h()},l(r){e=k(r,"H1",{class:!0});var l=S(e);n=J(l,"Options"),l.forEach(_),i=C(r),Y(s.$$.fragment,r),this.h()},h(){c(e,"class","font-bold")},m(r,l){B(r,e,l),p(e,n),B(r,i,l),G(s,r,l),o=!0},p(r,l){const a={};l[0]&2&&(a.disabled=!r[1]),l[1]&2048&&(a.$$scope={dirty:l,ctx:r}),s.$set(a)},i(r){o||(O(s.$$.fragment,r),o=!0)},o(r){W(s.$$.fragment,r),o=!1},d(r){r&&_(e),r&&_(i),Q(s,r)}}}function qi(t){let e,n,i,s,o,r,l,a,u,d,f,h,L;e=new En({props:{icon:Xi,og_image:Wi}});const b=[Fi,Bi],E=[];function g(m,w){return m[7]&&m[1]?0:1}return r=g(t),l=E[r]=b[r](t),d=new Ui({props:{open:t[16],$$slots:{header:[Zi],default:[Gi]},$$scope:{ctx:t}}}),{c(){j(e.$$.fragment),n=R(),i=R(),s=y("main"),o=y("section"),l.c(),a=R(),u=y("aside"),j(d.$$.fragment),this.h()},l(m){Y(e.$$.fragment,m),n=C(m),i=C(m),s=k(m,"MAIN",{class:!0});var w=S(s);o=k(w,"SECTION",{class:!0});var A=S(o);l.l(A),A.forEach(_),a=C(w),u=k(w,"ASIDE",{class:!0});var T=S(u);Y(d.$$.fragment,T),T.forEach(_),w.forEach(_),this.h()},h(){c(o,"class","overflow-hidden select-none fixed inset-0"),c(u,"class","md:w-96 w-full max-h-full absolute bottom-0 left-0 right-0 top-0 md:left-auto z-50 p-2 grid place-items-end touch-none pointer-events-none"),c(s,"class","w-screen max-w-screen h-screen max-h-screen relative bg-gray-300")},m(m,w){G(e,m,w),B(m,n,w),B(m,i,w),B(m,s,w),p(s,o),E[r].m(o,null),p(s,a),p(s,u),G(d,u,null),f=!0,h||(L=[x(document.body,"drop",ot(t[20])),x(document.body,"dragover",ot(Ji))],h=!0)},p(m,w){let A=r;r=g(m),r===A?E[r].p(m,w):(Ge(),W(E[A],1,1,()=>{E[A]=null}),Qe(),l=E[r],l?l.p(m,w):(l=E[r]=b[r](m),l.c()),O(l,1),l.m(o,null));const T={};w[0]&65536&&(T.open=m[16]),w[0]&32575|w[1]&2048&&(T.$$scope={dirty:w,ctx:m}),d.$set(T)},i(m){f||(O(e.$$.fragment,m),O(l),O(d.$$.fragment,m),f=!0)},o(m){W(e.$$.fragment,m),W(l),W(d.$$.fragment,m),f=!1},d(m){Q(e,m),m&&_(n),m&&_(i),m&&_(s),E[r].d(),Q(d),h=!1,Be(L)}}}const Ji=()=>{};function Ki(t,e,n){let i,s;const o=[Qn,Zn,qn];let r=!1,l="#ede6cc",a="#21263f",u=null,d=300,f=null,h=null;async function L(){u&&await Un(u,"dithered","png")}async function b(P){var he;const H=(he=P.dataTransfer)==null?void 0:he.files[0];if(H){if(!H.type.startsWith("image/")){alert("Please drop an image file");return}try{n(1,f=await St(H))}catch(Fe){alert("Failed to load image"),console.error(Fe)}}}async function E(P){const H=P.target.files[0];if(H)try{n(1,f=await St(H))}catch(he){alert("Failed to load image"),console.error(he)}}async function g(P){const H=new Image;H.onload=()=>{n(1,f=H)},H.src=P}let m="ordered",w=null,A=.5,T=.3,D=1,v=[[1]],I=0,N="horizontal",U=!1;vn(()=>{const P=window.matchMedia("(min-width: 768px)");function H(he){n(15,N=he.matches?"horizontal":"vertical"),n(16,U=P.matches)}return P.addEventListener("change",H),H(P),()=>P.removeEventListener("change",H)});function F(P){K[P?"unshift":"push"](()=>{u=P,n(6,u)})}function X(P){K[P?"unshift":"push"](()=>{u=P,n(6,u)})}const z=()=>n(1,f=null),ne=P=>g(P);function ge(P){d=P,n(0,d)}function Z(P){s=P,n(2,s),n(1,f)}function le(P){m=P,n(8,m)}function pe(P){D=P,n(12,D)}function de(P){v=P,n(13,v)}function re(P){I=P,n(14,I)}function se(P){w=P,n(9,w)}function ie(P){T=P,n(11,T)}function Ce(P){A=P,n(10,A)}function _e(){r=this.checked,n(3,r)}function me(){l=this.value,n(4,l)}function Pe(){a=this.value,n(5,a)}return t.$$.update=()=>{t.$$.dirty[0]&2&&n(2,s=f!=null&&f.width&&(f!=null&&f.height)?f.width/f.height:1),t.$$.dirty[0]&5&&n(17,i=Math.round(d/s)),t.$$.dirty[0]&2&&(f?n(7,h=Xn(f)):n(7,h=null))},[d,f,s,r,l,a,u,h,m,w,A,T,D,v,I,N,U,i,o,L,b,E,g,F,X,z,ne,ge,Z,le,pe,de,re,se,ie,Ce,_e,me,Pe]}class nr extends ue{constructor(e){super(),fe(this,e,Ki,qi,ce,{},null,[-1,-1])}}export{nr as component,tr as universal};
