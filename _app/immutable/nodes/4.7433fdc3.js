import{S as K,i as W,s as X,y as Z,a as y,k as w,e as T,z as J,c as $,l as M,n as d,A as Q,b as _,O as D,M as Y,g as tt,d as et,B as st,h as g,q as nt,m as k,r as rt,L as at,G as N,u as ot,P as it,Q as lt}from"../chunks/index.fae6157f.js";import{M as ut}from"../chunks/Metadata.d665e25b.js";function ct(){return{title:"Blurhash",author:"Loris Sigrist",description:"Description TBD, I don't know what it is yet."}}const Pt=Object.freeze(Object.defineProperty({__proto__:null,load:ct},Symbol.toStringTag,{value:"Module"}));var ft=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"],v=e=>{let t=0;for(let n=0;n<e.length;n++){let a=e[n],i=ft.indexOf(a);t=t*83+i}return t},E=e=>{let t=e/255;return t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)},x=e=>{let t=Math.max(0,Math.min(1,e));return t<=.0031308?Math.trunc(t*12.92*255+.5):Math.trunc((1.055*Math.pow(t,.4166666666666667)-.055)*255+.5)},ht=e=>e<0?-1:1,L=(e,t)=>ht(e)*Math.pow(Math.abs(e),t),H=class extends Error{constructor(e){super(e),this.name="ValidationError",this.message=e}},V=e=>{if(!e||e.length<6)throw new H("The blurhash string must be at least 6 characters");let t=v(e[0]),n=Math.floor(t/9)+1,a=t%9+1;if(e.length!==4+2*a*n)throw new H(`blurhash length mismatch: length is ${e.length} but it should be ${4+2*a*n}`)},pt=e=>{try{V(e)}catch(t){return{result:!1,errorReason:t.message}}return{result:!0}},gt=e=>{let t=e>>16,n=e>>8&255,a=e&255;return[E(t),E(n),E(a)]},mt=(e,t)=>{let n=Math.floor(e/361),a=Math.floor(e/19)%19,i=e%19;return[L((n-9)/9,2)*t,L((a-9)/9,2)*t,L((i-9)/9,2)*t]},dt=(e,t,n,a)=>{V(e),a=a|1;let i=v(e[0]),o=Math.floor(i/9)+1,u=i%9+1,p=(v(e[1])+1)/166,c=new Array(u*o);for(let r=0;r<c.length;r++)if(r===0){let s=v(e.substring(2,6));c[r]=gt(s)}else{let s=v(e.substring(4+r*2,6+r*2));c[r]=mt(s,p*a)}let h=t*4,l=new Uint8ClampedArray(h*n);for(let r=0;r<n;r++)for(let s=0;s<t;s++){let f=0,m=0,b=0;for(let S=0;S<o;S++)for(let C=0;C<u;C++){let A=Math.cos(Math.PI*s*C/t)*Math.cos(Math.PI*r*S/n),P=c[C+S*u];f+=P[0]*A,m+=P[1]*A,b+=P[2]*A}let B=x(f),F=x(m),q=x(b);l[4*s+0+r*h]=B,l[4*s+1+r*h]=F,l[4*s+2+r*h]=q,l[4*s+3+r*h]=255}return l},U=dt;const _t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"],bt=e=>{let t=0;for(let n=0;n<e.length;n++){const a=e[n],i=_t.indexOf(a);t=t*83+i}return t},wt={width:8,height:8,blur:20};function Mt(e,t={}){const{width:n,height:a,blur:i}={...wt,...t},o=U(e,n,a,1),u=R(1/n)+" 100%",p="no-repeat",c=[],h=[];for(let r=0;r<n;r++){const s=[];for(let m=0;m<a;m++){const b=vt(o,r,m,n);s.push(b)}h.push(`linear-gradient(${s.join(",")})`);const f=r==0?"0 0":`${R(r/(n-1))} 0`;c.push(f)}const l=`0 0 0 10000px ${yt(e)}`;return{backgroundImage:h.join(","),backgroundPosition:c.join(","),backgroundSize:u,backgroundRepeat:p,boxShadow:l,filter:`blur(${i}px)`,clipPath:"inset(0)"}}function vt(e,t,n,a){const o=a*4,u=n*o+t*4,p=e[u],c=e[u+1],h=e[u+2];return G(p,c,h)}function R(e){const t=e*100;return t===Math.round(t)?t+"%":t.toFixed(1)+"%"}function G(e,t,n){e=Math.floor(e/16),t=Math.floor(t/16),n=Math.floor(n/16);const a=e.toString(16)[0],i=t.toString(16)[0],o=n.toString(16)[0];return"#"+a+i+o}function yt(e){const t=e.substring(2,6),n=bt(t),a=n>>16,i=n>>8&255,o=n&255;return G(a,i,o)}function I(e){let t="";for(const n in e){const a=$t(n),i=e[n];t+=`${a}:${i};`}return t}function $t(e){return e.replace(/([a-z0-9]|(?=[A-Z]))([A-Z])/g,"$1-$2").toLowerCase()}const St=""+new URL("../assets/big.95f5c8ff.jpeg",import.meta.url).href,j={width:5616,height:3744},Ct=":36@sCAb0g|;EiF3^1Na%MRkWCoea#azj@ay01,.~A69w]$LAGxGIVxat6NHn$oeR-oL-PNeE3$yogSis.jF-UNHNI-UX9NIxCR+-VX7R*rrNHS3$gSO9^$%$f9vs9$%JVsn";function O(e){let t,n,a,i,o,u,p,c,h=I(e[2])+"",l;return{c(){t=w("div"),n=w("div"),i=y(),o=w("img"),p=y(),c=w("p"),l=nt(h),this.h()},l(r){t=M(r,"DIV",{class:!0});var s=k(t);n=M(s,"DIV",{style:!0,class:!0}),k(n).forEach(g),i=$(s),o=M(s,"IMG",{src:!0,width:!0,height:!0,alt:!0}),s.forEach(g),p=$(r),c=M(r,"P",{});var f=k(c);l=rt(f,h),f.forEach(g),this.h()},h(){d(n,"style",a=I(e[2])),d(n,"class","absolute inset-0 -z-10"),at(o.src,u=St)||d(o,"src",u),d(o,"width",j.width),d(o,"height",j.height),d(o,"alt","big"),d(t,"class","relative")},m(r,s){_(r,t,s),N(t,n),N(t,i),N(t,o),_(r,p,s),_(r,c,s),N(c,l)},p(r,s){s&4&&a!==(a=I(r[2]))&&d(n,"style",a),s&4&&h!==(h=I(r[2])+"")&&ot(l,h)},d(r){r&&g(t),r&&g(p),r&&g(c)}}}function z(e){let t,n,a,i;return{c(){t=w("canvas"),this.h()},l(o){t=M(o,"CANVAS",{class:!0}),k(t).forEach(g),this.h()},h(){d(t,"class","w-96")},m(o,u){_(o,t,u),a||(i=it(n=e[3].call(null,t,e[1])),a=!0)},p(o,u){n&&lt(n.update)&&u&2&&n.update.call(null,o[1])},d(o){o&&g(t),a=!1,i()}}}function Nt(e){let t,n,a,i,o,u,p,c,h;t=new ut({});let l=e[2]&&O(e),r=e[1]&&z(e);return{c(){Z(t.$$.fragment),n=y(),a=w("input"),i=y(),l&&l.c(),o=y(),r&&r.c(),u=T(),this.h()},l(s){J(t.$$.fragment,s),n=$(s),a=M(s,"INPUT",{type:!0}),i=$(s),l&&l.l(s),o=$(s),r&&r.l(s),u=T(),this.h()},h(){d(a,"type","text")},m(s,f){Q(t,s,f),_(s,n,f),_(s,a,f),D(a,e[0]),_(s,i,f),l&&l.m(s,f),_(s,o,f),r&&r.m(s,f),_(s,u,f),p=!0,c||(h=Y(a,"input",e[4]),c=!0)},p(s,[f]){f&1&&a.value!==s[0]&&D(a,s[0]),s[2]?l?l.p(s,f):(l=O(s),l.c(),l.m(o.parentNode,o)):l&&(l.d(1),l=null),s[1]?r?r.p(s,f):(r=z(s),r.c(),r.m(u.parentNode,u)):r&&(r.d(1),r=null)},i(s){p||(tt(t.$$.fragment,s),p=!0)},o(s){et(t.$$.fragment,s),p=!1},d(s){st(t,s),s&&g(n),s&&g(a),s&&g(i),l&&l.d(s),s&&g(o),r&&r.d(s),s&&g(u),c=!1,h()}}}function It(e,t,n){let a,i,o=Ct;function u(c,h){const l=c.getContext("2d"),r=32,s=32;c.width=r,c.height=s;const f=()=>{const m=U(h,r,s),b=l.createImageData(r,s);b.data.set(m),l.putImageData(b,0,0)};return f(),{update(m){h=m,f()}}}function p(){o=this.value,n(0,o)}return e.$$.update=()=>{e.$$.dirty&1&&n(1,a=pt(o).result?o:null),e.$$.dirty&2&&n(2,i=a?Mt(a,{blur:60,width:8,height:8}):null)},[o,a,i,u,p]}class Et extends K{constructor(t){super(),W(this,t,It,Nt,X,{})}}export{Et as component,Pt as universal};
