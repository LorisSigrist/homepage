import{s as Q,j as Y,k as J,l as X}from"../chunks/scheduler.IgQUtjbl.js";import{S as tt,i as et,r as nt,s as w,g as v,m as U,e as x,u as st,c as M,h as y,n as V,k as b,v as rt,a as _,F as j,D as at,o as B,d as ot,t as it,f as m,w as lt,j as P,x as k}from"../chunks/index.D4Vnkr5k.js";import{M as ut}from"../chunks/Metadata.D64yAJ_a.js";function ct(){return{title:"Blurhash",author:"Loris Sigrist",description:"Description TBD, I don't know what it is yet."}}const Nt=Object.freeze(Object.defineProperty({__proto__:null,load:ct},Symbol.toStringTag,{value:"Module"}));var ht=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"],C=e=>{let t=0;for(let n=0;n<e.length;n++){let r=e[n],l=ht.indexOf(r);t=t*83+l}return t},E=e=>{let t=e/255;return t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)},D=e=>{let t=Math.max(0,Math.min(1,e));return t<=.0031308?Math.trunc(t*12.92*255+.5):Math.trunc((1.055*Math.pow(t,.4166666666666667)-.055)*255+.5)},ft=e=>e<0?-1:1,N=(e,t)=>ft(e)*Math.pow(Math.abs(e),t),L=class extends Error{constructor(e){super(e),this.name="ValidationError",this.message=e}},F=e=>{if(!e||e.length<6)throw new L("The blurhash string must be at least 6 characters");let t=C(e[0]),n=Math.floor(t/9)+1,r=t%9+1;if(e.length!==4+2*r*n)throw new L(`blurhash length mismatch: length is ${e.length} but it should be ${4+2*r*n}`)},pt=e=>{try{F(e)}catch(t){return{result:!1,errorReason:t.message}}return{result:!0}},gt=e=>{let t=e>>16,n=e>>8&255,r=e&255;return[E(t),E(n),E(r)]},dt=(e,t)=>{let n=Math.floor(e/361),r=Math.floor(e/19)%19,l=e%19;return[N((n-9)/9,2)*t,N((r-9)/9,2)*t,N((l-9)/9,2)*t]},mt=(e,t,n,r)=>{F(e),r=r|1;let l=C(e[0]),i=Math.floor(l/9)+1,f=l%9+1,g=(C(e[1])+1)/166,u=new Array(f*i);for(let o=0;o<u.length;o++)if(o===0){let a=C(e.substring(2,6));u[o]=gt(a)}else{let a=C(e.substring(4+o*2,6+o*2));u[o]=dt(a,g*r)}let h=t*4,d=new Uint8ClampedArray(h*n);for(let o=0;o<n;o++)for(let a=0;a<t;a++){let c=0,s=0,p=0;for(let S=0;S<i;S++)for(let $=0;$<f;$++){let A=Math.cos(Math.PI*a*$/t)*Math.cos(Math.PI*o*S/n),I=u[$+S*f];c+=I[0]*A,s+=I[1]*A,p+=I[2]*A}let K=D(c),W=D(s),Z=D(p);d[4*a+0+o*h]=K,d[4*a+1+o*h]=W,d[4*a+2+o*h]=Z,d[4*a+3+o*h]=255}return d},q=mt;const _t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"],bt=e=>{let t=0;for(let n=0;n<e.length;n++){const r=e[n],l=_t.indexOf(r);t=t*83+l}return t},wt={width:8,height:8,blur:20};function vt(e,t={}){const{width:n,height:r,blur:l}={...wt,...t},i=q(e,n,r,1),f=O(1/n)+" 100%",g="no-repeat",u=[],h=[];for(let o=0;o<n;o++){const a=[];for(let s=0;s<r;s++){const p=Mt(i,o,s,n);a.push(p)}h.push(`linear-gradient(${a.join(",")})`);const c=o==0?"0 0":`${O(o/(n-1))} 0`;u.push(c)}const d=`0 0 0 10000px ${yt(e)}`;return{backgroundImage:h.join(","),backgroundPosition:u.join(","),backgroundSize:f,backgroundRepeat:g,boxShadow:d,filter:`blur(${l}px)`,clipPath:"inset(0)"}}function Mt(e,t,n,r){const i=r*4,f=n*i+t*4,g=e[f],u=e[f+1],h=e[f+2];return G(g,u,h)}function O(e){const t=e*100;return t===Math.round(t)?t+"%":t.toFixed(1)+"%"}function G(e,t,n){e=Math.floor(e/16),t=Math.floor(t/16),n=Math.floor(n/16);const r=e.toString(16)[0],l=t.toString(16)[0],i=n.toString(16)[0];return"#"+r+l+i}function yt(e){const t=e.substring(2,6),n=bt(t),r=n>>16,l=n>>8&255,i=n&255;return G(r,l,i)}function Ct(e){let t="";for(const n in e){const r=St(n),l=e[n];t+=`${r}:${l};`}return t}function St(e){return e.replace(/([a-z0-9]|(?=[A-Z]))([A-Z])/g,"$1-$2").toLowerCase()}const $t=""+new URL("../assets/big.CTPQD3Sl.jpeg",import.meta.url).href,H={width:5616,height:3744},kt="L36@sCAb0g|;%MRkWCoe01,.~A69";function T(e){const t=e.slice(),n=Ct(t[2]);return t[5]=n,t}function R(e){let t,n,r,l,i,f,g,u,h=e[5]+"",d;return{c(){t=v("div"),n=v("div"),l=w(),i=v("img"),g=w(),u=v("p"),d=U(h),this.h()},l(o){t=y(o,"DIV",{class:!0});var a=P(t);n=y(a,"DIV",{style:!0,class:!0}),P(n).forEach(m),l=M(a),i=y(a,"IMG",{src:!0,width:!0,height:!0,alt:!0}),a.forEach(m),g=M(o),u=y(o,"P",{});var c=P(u);d=V(c,h),c.forEach(m),this.h()},h(){b(n,"style",r=e[5]),b(n,"class","absolute inset-0 -z-10"),Y(i.src,f=$t)||b(i,"src",f),b(i,"width",H.width),b(i,"height",H.height),b(i,"alt","big"),b(t,"class","relative")},m(o,a){_(o,t,a),k(t,n),k(t,l),k(t,i),_(o,g,a),_(o,u,a),k(u,d)},p(o,a){a&4&&r!==(r=o[5])&&b(n,"style",r),a&4&&h!==(h=o[5]+"")&&B(d,h)},d(o){o&&(m(t),m(g),m(u))}}}function z(e){let t,n,r,l;return{c(){t=v("canvas"),this.h()},l(i){t=y(i,"CANVAS",{class:!0}),P(t).forEach(m),this.h()},h(){b(t,"class","w-96")},m(i,f){_(i,t,f),r||(l=J(n=e[3].call(null,t,e[1])),r=!0)},p(i,f){n&&X(n.update)&&f&2&&n.update.call(null,i[1])},d(i){i&&m(t),r=!1,l()}}}function Pt(e){let t,n,r,l,i,f,g,u,h,d,o;t=new ut({});let a=e[2]&&R(T(e)),c=e[1]&&z(e);return{c(){nt(t.$$.fragment),n=w(),r=v("input"),l=w(),i=U(e[0]),f=w(),a&&a.c(),g=w(),c&&c.c(),u=x(),this.h()},l(s){st(t.$$.fragment,s),n=M(s),r=y(s,"INPUT",{type:!0}),l=M(s),i=V(s,e[0]),f=M(s),a&&a.l(s),g=M(s),c&&c.l(s),u=x(),this.h()},h(){b(r,"type","text")},m(s,p){rt(t,s,p),_(s,n,p),_(s,r,p),j(r,e[0]),_(s,l,p),_(s,i,p),_(s,f,p),a&&a.m(s,p),_(s,g,p),c&&c.m(s,p),_(s,u,p),h=!0,d||(o=at(r,"input",e[4]),d=!0)},p(s,[p]){p&1&&r.value!==s[0]&&j(r,s[0]),(!h||p&1)&&B(i,s[0]),s[2]?a?a.p(T(s),p):(a=R(T(s)),a.c(),a.m(g.parentNode,g)):a&&(a.d(1),a=null),s[1]?c?c.p(s,p):(c=z(s),c.c(),c.m(u.parentNode,u)):c&&(c.d(1),c=null)},i(s){h||(ot(t.$$.fragment,s),h=!0)},o(s){it(t.$$.fragment,s),h=!1},d(s){s&&(m(n),m(r),m(l),m(i),m(f),m(g),m(u)),lt(t,s),a&&a.d(s),c&&c.d(s),d=!1,o()}}}function At(e,t,n){let r,l,i=kt;function f(u,h){const d=u.getContext("2d"),o=32,a=32;u.width=o,u.height=a;const c=()=>{const s=q(h,o,a),p=d.createImageData(o,a);p.data.set(s),d.putImageData(p,0,0)};return c(),{update(s){h=s,c()}}}function g(){i=this.value,n(0,i)}return e.$$.update=()=>{e.$$.dirty&1&&n(1,r=pt(i).result?i:null),e.$$.dirty&2&&n(2,l=r?vt(r,{blur:60,width:8,height:8}):null)},[i,r,l,f,g]}class Tt extends tt{constructor(t){super(),et(this,t,At,Pt,Q,{})}}export{Tt as component,Nt as universal};
