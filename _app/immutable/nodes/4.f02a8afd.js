var cn=Object.defineProperty;var dn=(t,e,n)=>e in t?cn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ye=(t,e,n)=>(dn(t,typeof e!="symbol"?e+"":e,n),n);import{S as ue,i as fe,s as ce,k as E,q as $,a as R,y as Y,l as A,m as S,r as q,h as _,c as C,z as j,n as c,b as B,G as g,A as G,N as J,g as U,d as F,B as Z,O as Fe,C as Le,D as Ie,E as De,F as Me,P as hn,Q as Te,p as st,R as Xe,T as ot,w as Q,U as Se,u as et,H as ae,V as mn,W as gn,X as vt,Y as at,Z as _n,_ as ee,$ as te,a0 as pn,v as Ge,f as Ze,a1 as ut,J as vn,o as bn,M as Be,e as $e}from"../chunks/index.ebd1f5b7.js";import{I as Re,L as wn,A as En,C as bt,a as wt,P as An,X as yn,b as kn}from"../chunks/Icon.03c89f94.js";function Tn(t){let e,n,i,s,o,r,l,a,u,d,f,m,L,b,y,h,p,T,w,k,D,v,I,N,O,W;return L=new Re({props:{src:wn,class:"w-4 h-4",solid:!0}}),{c(){e=E("fieldset"),n=E("div"),i=E("label"),s=$("Width"),o=R(),r=E("div"),l=E("input"),a=R(),u=E("div"),d=$("px"),f=R(),m=E("span"),Y(L.$$.fragment),b=R(),y=E("div"),h=E("label"),p=$("Height"),T=R(),w=E("div"),k=E("input"),D=R(),v=E("div"),I=$("px"),this.h()},l(X){e=A(X,"FIELDSET",{class:!0});var V=S(e);n=A(V,"DIV",{class:!0});var ne=S(n);i=A(ne,"LABEL",{for:!0,class:!0});var ge=S(i);s=q(ge,"Width"),ge.forEach(_),o=C(ne),r=A(ne,"DIV",{class:!0});var K=S(r);l=A(K,"INPUT",{name:!0,id:!0,type:!0,min:!0,max:!0,step:!0,class:!0,placeholder:!0}),a=C(K),u=A(K,"DIV",{class:!0});var le=S(u);d=q(le,"px"),le.forEach(_),K.forEach(_),ne.forEach(_),f=C(V),m=A(V,"SPAN",{class:!0});var _e=S(m);j(L.$$.fragment,_e),_e.forEach(_),b=C(V),y=A(V,"DIV",{class:!0});var de=S(y);h=A(de,"LABEL",{for:!0,class:!0});var re=S(h);p=q(re,"Height"),re.forEach(_),T=C(de),w=A(de,"DIV",{class:!0});var se=S(w);k=A(se,"INPUT",{type:!0,id:!0,name:!0,min:!0,max:!0,step:!0,class:!0,placeholder:!0}),D=C(se),v=A(se,"DIV",{class:!0});var ie=S(v);I=q(ie,"px"),ie.forEach(_),se.forEach(_),de.forEach(_),V.forEach(_),this.h()},h(){c(i,"for","width-"+t[8]),c(i,"class","block text-sm font-medium leading-6 text-gray-900"),c(l,"name","width"),c(l,"id","width-"+t[8]),c(l,"type","number"),c(l,"min",t[3]),c(l,"max",t[1]),c(l,"step","1"),l.value=t[0],c(l,"class","block w-full rounded-md border-0 py-1.5 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"),c(l,"placeholder","600"),c(u,"class","pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400"),c(r,"class","relative mt-2 rounded-md shadow-sm"),c(n,"class","w-full"),c(m,"class","text-gray-500 pb-2 cursor-not-allowed"),c(h,"for","height-"+t[9]),c(h,"class","block text-sm font-medium leading-6 text-gray-900"),c(k,"type","number"),c(k,"id","height-"+t[9]),c(k,"name","height"),c(k,"min",t[4]),c(k,"max",t[2]),c(k,"step","1"),k.value=t[5],c(k,"class","block w-full rounded-md border-0 py-1.5 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"),c(k,"placeholder","340"),c(v,"class","pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400"),c(w,"class","relative mt-2 rounded-md shadow-sm"),c(y,"class","w-full"),c(e,"class","flex gap-3 items-end justify-between")},m(X,V){B(X,e,V),g(e,n),g(n,i),g(i,s),g(n,o),g(n,r),g(r,l),g(r,a),g(r,u),g(u,d),g(e,f),g(e,m),G(L,m,null),g(e,b),g(e,y),g(y,h),g(h,p),g(y,T),g(y,w),g(w,k),g(w,D),g(w,v),g(v,I),N=!0,O||(W=[J(l,"input",t[6]),J(k,"input",t[7])],O=!0)},p(X,[V]){(!N||V&8)&&c(l,"min",X[3]),(!N||V&2)&&c(l,"max",X[1]),(!N||V&1&&l.value!==X[0])&&(l.value=X[0]),(!N||V&16)&&c(k,"min",X[4]),(!N||V&4)&&c(k,"max",X[2]),(!N||V&32&&k.value!==X[5])&&(k.value=X[5])},i(X){N||(U(L.$$.fragment,X),N=!0)},o(X){F(L.$$.fragment,X),N=!1},d(X){X&&_(e),Z(L),O=!1,Fe(W)}}}function Et(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}function Sn(t,e,n){let i,{width:s}=e,{aspectRatio:o}=e,{maxWidth:r=null}=e,{maxHeight:l=null}=e,{minWidth:a=null}=e,{minHeight:u=null}=e;function d(b){const y=b.target.value;y&&(a!==null&&y<a||r!==null&&y>r||n(0,s=y))}function f(b){const y=b.target.value;y&&(u!==null&&y<u||l!==null&&y>l||n(0,s=Math.round(o*y)))}let m=Et(),L=Et();return t.$$set=b=>{"width"in b&&n(0,s=b.width),"aspectRatio"in b&&n(10,o=b.aspectRatio),"maxWidth"in b&&n(1,r=b.maxWidth),"maxHeight"in b&&n(2,l=b.maxHeight),"minWidth"in b&&n(3,a=b.minWidth),"minHeight"in b&&n(4,u=b.minHeight)},t.$$.update=()=>{t.$$.dirty&1025&&n(5,i=Math.round(s/o))},[s,r,l,a,u,i,d,f,m,L,o]}class jt extends ue{constructor(e){super(),fe(this,e,Sn,Tn,ce,{width:0,aspectRatio:10,maxWidth:1,maxHeight:2,minWidth:3,minHeight:4})}}var Ln="precision highp float;attribute vec2 position;varying vec2 fragCoord;void main(){fragCoord.x=position.x*0.5+0.5;fragCoord.y=position.y*0.5+0.5;gl_Position=vec4(position,0.0,1.0);}",In="precision highp float;varying vec2 fragCoord;uniform sampler2D uSampler;uniform float uThreshold;uniform sampler2D uNoiseSampler;uniform vec2 uNoiseSamplerSize;uniform float uNoise;uniform float uMonochrome;uniform vec2 uSize;uniform vec3 uDarkColor;uniform vec3 uLightColor;void main(void){vec2 imgPixel=vec2(fragCoord.x*uSize.x,fragCoord.y*uSize.y);vec2 noisePixel=vec2(mod(imgPixel.x,uNoiseSamplerSize.x),mod(imgPixel.y,uNoiseSamplerSize.y));vec2 noiseUV=vec2(noisePixel.x/uNoiseSamplerSize.x,noisePixel.y/uNoiseSamplerSize.y);float noise=(texture2D(uNoiseSampler,noiseUV).r-0.5)*2.0*uNoise;vec4 color=texture2D(uSampler,fragCoord);float gray=dot(color.rgb,vec3(0.299,0.587,0.114));color.r=color.r*(1.0-uMonochrome)+gray*uMonochrome;color.g=color.g*(1.0-uMonochrome)+gray*uMonochrome;color.b=color.b*(1.0-uMonochrome)+gray*uMonochrome;vec3 thresholds=vec3(step(uThreshold,color.r+noise),step(uThreshold,color.g+noise),step(uThreshold,color.b+noise));if(uMonochrome>0.0){color.rgb=vec3(mix(uDarkColor.r,uLightColor.r,thresholds.r),mix(uDarkColor.g,uLightColor.g,thresholds.g),mix(uDarkColor.b,uLightColor.b,thresholds.b));}else{color.rgb=thresholds;}gl_FragColor=color;}";function At(t){return(t&t-1)===0}function Dn(t,e,n){const i=yt(t,t.VERTEX_SHADER,e),s=yt(t,t.FRAGMENT_SHADER,n),o=t.createProgram();if(!o)throw new Error("Failed to create shader program");if(t.attachShader(o,i),t.attachShader(o,s),t.linkProgram(o),!t.getProgramParameter(o,t.LINK_STATUS))throw Error(`Unable to initialize the shader program: ${t.getProgramInfoLog(o)}`);return o}function yt(t,e,n){const i=t.createShader(e);if(!i)throw new Error("Failed to create shader");if(t.shaderSource(i,n),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS))throw Error(`An error occurred compiling the shaders: ${t.getShaderInfoLog(i)}`);return i}function Mn(t){const e=t.createBuffer(),n=t.createBuffer(),i=[-1,1,-1,-1,1,-1,1,1],s=[3,2,1,3,1,0];return t.bindBuffer(t.ARRAY_BUFFER,e),t.bufferData(t.ARRAY_BUFFER,new Float32Array(i),t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(s),t.STATIC_DRAW),{vertex_buffer:e,index_buffer:n}}function kt(t,e,n){const i=t.createTexture();if(!i)throw new Error("Failed to create texture");return t.bindTexture(t.TEXTURE_2D,i),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),At(e.width)&&At(e.height)?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,n)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,n)),i}function Rn(t,e){let n=e;const i=t.getContext("webgl",{preserveDrawingBuffer:!0});if(!i){alert("WebGL not supported");return}i.clearColor(0,0,0,1),i.clear(i.COLOR_BUFFER_BIT);const s=Dn(i,Ln,In),{vertex_buffer:o,index_buffer:r}=Mn(i),l=i.getAttribLocation(s,"position");i.vertexAttribPointer(l,2,i.FLOAT,!1,0,0),i.enableVertexAttribArray(l);const a=i.getUniformLocation(s,"uSampler"),u=i.getUniformLocation(s,"uThreshold"),d=i.getUniformLocation(s,"uNoiseSampler"),f=i.getUniformLocation(s,"uNoise"),m=i.getUniformLocation(s,"uSize"),L=i.getUniformLocation(s,"uNoiseSamplerSize"),b=i.getUniformLocation(s,"uMonochrome"),y=i.getUniformLocation(s,"uDarkColor"),h=i.getUniformLocation(s,"uLightColor");let p;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!0);const T=()=>{p&&i.deleteTexture(p),p=kt(i,n.image,i.LINEAR)};T();let w,k;i.useProgram(s);let D=null;const v=()=>{w&&i.deleteTexture(w),w=kt(i,n.thresholdMap,i.NEAREST),k={width:n.thresholdMap.width,height:n.thresholdMap.height}};v();const I=()=>{i.viewport(0,0,n.output_width,n.output_height),i.clearColor(0,0,0,1),i.clear(i.COLOR_BUFFER_BIT),i.bindBuffer(i.ARRAY_BUFFER,o),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,r),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,p),i.uniform1i(a,0),i.activeTexture(i.TEXTURE1),i.bindTexture(i.TEXTURE_2D,w),i.uniform1i(d,1),i.uniform2f(L,k.width,k.height),i.uniform1f(u,n.threshold),i.uniform1f(f,n.noiseIntensity),i.uniform2f(m,n.output_width,n.output_height),i.uniform1f(b,n.monochrome?1:0),i.uniform3f(y,...Tt(n.colorDark)),i.uniform3f(h,...Tt(n.colorLight)),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT),i.drawElements(i.TRIANGLES,6,i.UNSIGNED_SHORT,0)};function N(){D=requestAnimationFrame(()=>{I(),D=null})}return N(),{update(O){const W=n.image!==O.image,X=n.thresholdMap!==O.thresholdMap;n=O,W&&T(),X&&v(),N()},destroy(){D!==null&&cancelAnimationFrame(D)}}}function Tt(t){const e=parseInt(t.slice(1,3),16)/255,n=parseInt(t.slice(3,5),16)/255,i=parseInt(t.slice(5,7),16)/255;return[e,n,i]}function Cn(t){let e,n,i,s,o;const r=t[3].default,l=Le(r,t,t[2],null);return{c(){e=E("button"),l&&l.c(),this.h()},l(a){e=A(a,"BUTTON",{type:!0,class:!0});var u=S(e);l&&l.l(u),u.forEach(_),this.h()},h(){e.disabled=t[0],c(e,"type","button"),c(e,"class",n=t[1][t[0]?"disabled":"normal"]+" rounded-md px-2.5 py-1.5 text-sm font-semibold focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 flex items-center justify-center gap-2")},m(a,u){B(a,e,u),l&&l.m(e,null),i=!0,s||(o=J(e,"click",t[4]),s=!0)},p(a,[u]){l&&l.p&&(!i||u&4)&&Ie(l,r,a,a[2],i?Me(r,a[2],u,null):De(a[2]),null),(!i||u&1)&&(e.disabled=a[0]),(!i||u&1&&n!==(n=a[1][a[0]?"disabled":"normal"]+" rounded-md px-2.5 py-1.5 text-sm font-semibold focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 flex items-center justify-center gap-2"))&&c(e,"class",n)},i(a){i||(U(l,a),i=!0)},o(a){F(l,a),i=!1},d(a){a&&_(e),l&&l.d(a),s=!1,o()}}}function Pn(t,e,n){let{$$slots:i={},$$scope:s}=e,{disabled:o=!1}=e;const r={normal:"bg-indigo-600 text-white shadow-sm hover:bg-indigo-500",disabled:"bg-gray-200 text-gray-400 shadow-none cursor-not-allowed"};function l(a){hn.call(this,t,a)}return t.$$set=a=>{"disabled"in a&&n(0,o=a.disabled),"$$scope"in a&&n(2,s=a.$$scope)},[o,r,s,i,l]}class Nn extends ue{constructor(e){super(),fe(this,e,Pn,Cn,ce,{disabled:0})}}async function Un(t,e,n="png"){const i=new OffscreenCanvas(t.width,t.height),s=i.getContext("2d");if(!s)return;s.drawImage(t,0,0,t.width,t.height);const o=await i.convertToBlob({type:"image/"+n,quality:1}),r=URL.createObjectURL(o),l=document.createElement("a");l.download=`${e}.${n}`,l.href=r,l.click(),l.remove(),URL.revokeObjectURL(r)}function St(t){return new Promise((e,n)=>{t.type.startsWith("image/")||n(new Error("Not an image file"));const i=new FileReader;i.onload=s=>{if(typeof i.result!="string")return;const o=new Image;o.onload=()=>{e(o)},o.onerror=r=>{n(r)},o.src=i.result},i.onerror=s=>{n(s)},i.readAsDataURL(t)})}function On(t){const n=new OffscreenCanvas(t.width,t.height).getContext("2d");if(!n)throw new Error("Could not get canvas context");return n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height)}var Xn=class extends EventTarget{dispatchTypedEvent(t,e){return super.dispatchEvent(e)}};class be{constructor(e){this.id=-1,this.nativePointer=e,this.pageX=e.pageX,this.pageY=e.pageY,this.clientX=e.clientX,this.clientY=e.clientY,self.Touch&&e instanceof Touch?this.id=e.identifier:Ue(e)&&(this.id=e.pointerId)}getCoalesced(){if("getCoalescedEvents"in this.nativePointer){const e=this.nativePointer.getCoalescedEvents().map(n=>new be(n));if(e.length>0)return e}return[this]}}const Ue=t=>"pointerId"in t,nt=t=>"changedTouches"in t,Lt=()=>{};class Bn{constructor(e,{start:n=()=>!0,move:i=Lt,end:s=Lt,rawUpdates:o=!1,avoidPointerEvents:r=!1}={}){this._element=e,this.startPointers=[],this.currentPointers=[],this._excludeFromButtonsCheck=new Set,this._pointerStart=l=>{if(Ue(l)&&l.buttons===0)this._excludeFromButtonsCheck.add(l.pointerId);else if(!(l.buttons&1))return;const a=new be(l);this.currentPointers.some(u=>u.id===a.id)||this._triggerPointerStart(a,l)&&(Ue(l)?((l.target&&"setPointerCapture"in l.target?l.target:this._element).setPointerCapture(l.pointerId),this._element.addEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move),this._element.addEventListener("pointerup",this._pointerEnd),this._element.addEventListener("pointercancel",this._pointerEnd)):(window.addEventListener("mousemove",this._move),window.addEventListener("mouseup",this._pointerEnd)))},this._touchStart=l=>{for(const a of Array.from(l.changedTouches))this._triggerPointerStart(new be(a),l)},this._move=l=>{if(!nt(l)&&(!Ue(l)||!this._excludeFromButtonsCheck.has(l.pointerId))&&l.buttons===0){this._pointerEnd(l);return}const a=this.currentPointers.slice(),u=nt(l)?Array.from(l.changedTouches).map(f=>new be(f)):[new be(l)],d=[];for(const f of u){const m=this.currentPointers.findIndex(L=>L.id===f.id);m!==-1&&(d.push(f),this.currentPointers[m]=f)}d.length!==0&&this._moveCallback(a,d,l)},this._triggerPointerEnd=(l,a)=>{if(!nt(a)&&a.buttons&1)return!1;const u=this.currentPointers.findIndex(f=>f.id===l.id);if(u===-1)return!1;this.currentPointers.splice(u,1),this.startPointers.splice(u,1),this._excludeFromButtonsCheck.delete(l.id);const d=!(a.type==="mouseup"||a.type==="touchend"||a.type==="pointerup");return this._endCallback(l,a,d),!0},this._pointerEnd=l=>{if(this._triggerPointerEnd(new be(l),l))if(Ue(l)){if(this.currentPointers.length)return;this._element.removeEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move),this._element.removeEventListener("pointerup",this._pointerEnd),this._element.removeEventListener("pointercancel",this._pointerEnd)}else window.removeEventListener("mousemove",this._move),window.removeEventListener("mouseup",this._pointerEnd)},this._touchEnd=l=>{for(const a of Array.from(l.changedTouches))this._triggerPointerEnd(new be(a),l)},this._startCallback=n,this._moveCallback=i,this._endCallback=s,this._rawUpdates=o&&"onpointerrawupdate"in window,self.PointerEvent&&!r?this._element.addEventListener("pointerdown",this._pointerStart):(this._element.addEventListener("mousedown",this._pointerStart),this._element.addEventListener("touchstart",this._touchStart),this._element.addEventListener("touchmove",this._move),this._element.addEventListener("touchend",this._touchEnd),this._element.addEventListener("touchcancel",this._touchEnd))}stop(){this._element.removeEventListener("pointerdown",this._pointerStart),this._element.removeEventListener("mousedown",this._pointerStart),this._element.removeEventListener("touchstart",this._touchStart),this._element.removeEventListener("touchmove",this._move),this._element.removeEventListener("touchend",this._touchEnd),this._element.removeEventListener("touchcancel",this._touchEnd),this._element.removeEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move),this._element.removeEventListener("pointerup",this._pointerEnd),this._element.removeEventListener("pointercancel",this._pointerEnd),window.removeEventListener("mousemove",this._move),window.removeEventListener("mouseup",this._pointerEnd)}_triggerPointerStart(e,n){return this._startCallback(e,n)?(this.currentPointers.push(e),this.startPointers.push(e),!0):!1}}function Fn(t,e,n){return Math.min(Math.max(t,e),n)}function It(t,e){return e?Math.sqrt((e.clientX-t.clientX)**2+(e.clientY-t.clientY)**2):0}function Dt(t,e){return e?{clientX:(t.clientX+e.clientX)/2,clientY:(t.clientY+e.clientY)/2}:t}const xe=class extends Xn{constructor(n){super();ye(this,"element");ye(this,"transform",new DOMMatrix);ye(this,"pointerTracker");this.element=n,this.element.addEventListener("wheel",this.onWheel.bind(this)),this.pointerTracker=new Bn(this.element,{start:(i,s)=>this.pointerTracker.currentPointers.length===2?!1:(s.preventDefault(),!0),move:i=>{this.onPointerMove(i,this.pointerTracker.currentPointers)},avoidPointerEvents:this.isSafari()}),this.element.addEventListener("wheel",this.onWheel.bind(this))}get x(){return this.transform.e}get y(){return this.transform.f}get scale(){return this.transform.a}set x(n){this.transform.e=n}set y(n){this.transform.f=n}set scale(n){this.transform.a=n,this.transform.d=n}onWheel(n){n.preventDefault();const i=this.element.getBoundingClientRect();let{deltaY:s}=n;const{ctrlKey:o,deltaMode:r}=n;r===1&&(s*=15);const l=s>0,a=o?100:300,u=1-(l?-s:s)/a,d=l?1/u:u,f=n.clientX-i.left,m=n.clientY-i.top;this.applyTransformation({scaleDiff:d,originX:f,originY:m})}applyTransformation(n={}){const{panX:i=0,panY:s=0,originX:o=0,originY:r=0,scaleDiff:l=1}=n,a=new DOMMatrix().translate(o,r).scale(l).translate(-o,-r),u=new DOMMatrix().translate(i,s);a.multiplySelf(u),a.multiplySelf(this.transform);const d=a.a,f=a.e,m=a.f;this.updateTransform(d,f,m)}onPointerMove(n,i){const s=this.element.getBoundingClientRect(),o=Dt(n[0],n[1]),r=Dt(i[0],i[1]),l=o.clientX-s.left,a=o.clientY-s.top,u=It(n[0],n[1]),d=It(i[0],i[1]),f=u?d/u:1;this.applyTransformation({originX:l,originY:a,scaleDiff:f,panX:r.clientX-o.clientX,panY:r.clientY-o.clientY})}updateTransform(n,i,s){if(n<xe.MIN_SCALE||n>xe.MAX_SCALE||n===this.scale&&i===this.x&&s===this.y)return;this.x=i,this.y=s,this.scale=n;const o=new CustomEvent("panzoom:change",{bubbles:!0,detail:{x:this.x,y:this.y,scale:this.scale,matrix:this.transform}});this.dispatchTypedEvent("panzoom:change",o)}isSafari(){return/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)}reset(){this.updateTransform(1,0,0)}destroy(){this.pointerTracker.stop()}};let Oe=xe;ye(Oe,"MIN_SCALE",.01),ye(Oe,"MAX_SCALE",1e5);const Wn=t=>({}),Mt=t=>({}),Vn=t=>({}),Rt=t=>({});function zn(t){let e,n,i,s,o,r,l,a,u,d,f,m,L,b;const y=t[7].left,h=Le(y,t,t[6],Rt),p=t[7].right,T=Le(p,t,t[6],Mt);return f=new Re({props:{src:En,class:"w-6 h-6 text-white"}}),{c(){e=E("div"),n=E("div"),i=E("div"),s=E("div"),h&&h.c(),o=R(),r=E("div"),l=E("div"),T&&T.c(),a=R(),u=E("div"),d=E("div"),Y(f.$$.fragment),this.h()},l(w){e=A(w,"DIV",{class:!0});var k=S(e);n=A(k,"DIV",{class:!0});var D=S(n);i=A(D,"DIV",{class:!0});var v=S(i);s=A(v,"DIV",{style:!0,class:!0});var I=S(s);h&&h.l(I),I.forEach(_),v.forEach(_),o=C(D),r=A(D,"DIV",{class:!0});var N=S(r);l=A(N,"DIV",{style:!0,class:!0});var O=S(l);T&&T.l(O),O.forEach(_),N.forEach(_),D.forEach(_),a=C(k),u=A(k,"DIV",{class:!0});var W=S(u);d=A(W,"DIV",{class:!0});var X=S(d);j(f.$$.fragment,X),X.forEach(_),W.forEach(_),k.forEach(_),this.h()},h(){c(s,"style",t[3]),c(s,"class","w-full h-full origin-top-left grid place-items-center"),c(i,"class","mask-left svelte-u41rvx"),c(l,"style",t[3]),c(l,"class","w-full h-full origin-top-left grid place-items-center"),c(r,"class","mask-right svelte-u41rvx"),c(n,"class","w-full h-full grid place-items-center"),c(d,"class","w-12 h-12 rounded-full bg-black grid place-items-center absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"),Te(d,"rotate-90",t[1]==="vertical"),c(u,"class","handle relative shadow-lg svelte-u41rvx"),c(e,"class","pz-container svelte-u41rvx"),Te(e,"vertical",t[1]==="vertical"),st(e,"--split-point",t[0]+"%")},m(w,k){B(w,e,k),g(e,n),g(n,i),g(i,s),h&&h.m(s,null),g(n,o),g(n,r),g(r,l),T&&T.m(l,null),g(e,a),g(e,u),g(u,d),G(f,d,null),t[8](e),m=!0,L||(b=[Xe(t[5].call(null,n)),Xe(t[4].call(null,u)),J(u,"pointercancel",ot(Hn))],L=!0)},p(w,[k]){h&&h.p&&(!m||k&64)&&Ie(h,y,w,w[6],m?Me(y,w[6],k,Vn):De(w[6]),Rt),(!m||k&8)&&c(s,"style",w[3]),T&&T.p&&(!m||k&64)&&Ie(T,p,w,w[6],m?Me(p,w[6],k,Wn):De(w[6]),Mt),(!m||k&8)&&c(l,"style",w[3]),(!m||k&2)&&Te(d,"rotate-90",w[1]==="vertical"),(!m||k&2)&&Te(e,"vertical",w[1]==="vertical"),k&1&&st(e,"--split-point",w[0]+"%")},i(w){m||(U(h,w),U(T,w),U(f.$$.fragment,w),m=!0)},o(w){F(h,w),F(T,w),F(f.$$.fragment,w),m=!1},d(w){w&&_(e),h&&h.d(w),T&&T.d(w),Z(f),t[8](null),L=!1,Fe(b)}}}const Hn=()=>{};function Yn(t,e,n){let{$$slots:i={},$$scope:s}=e,{direction:o="horizontal"}=e,r=null,{split:l=50}=e;function a(m){return m.addEventListener("pointerdown",L=>{const b=o==="vertical"?L.clientY:L.clientX,y=l,h=document.body.style.cursor;document.body.style.cursor=o==="vertical"?"row-resize":"col-resize";const p=w=>{const k=r?r.clientWidth:window.innerWidth,D=r?r.clientHeight:window.innerHeight,v=o==="vertical"?D:k,N=(o==="vertical"?w.clientY:w.clientX)-b,O=y+N/v*100;n(0,l=Fn(O,0,100))},T=()=>{document.body.style.cursor=h,window.removeEventListener("pointermove",p),window.removeEventListener("pointerup",T),window.removeEventListener("pointercancel",T)};window.addEventListener("pointermove",p),window.addEventListener("pointerup",T),window.addEventListener("pointercancel",T)}),{destroy(){m.removeEventListener("pointerdown",()=>{})}}}let u="transform: none;";function d(m){const L=new Oe(m);function b(y){const{matrix:h}=y.detail;n(3,u=`transform: ${h.toString()};`)}return L.addEventListener("panzoom:change",b),{destroy(){L.removeEventListener("panzoom:change",b),L.destroy()}}}function f(m){Q[m?"unshift":"push"](()=>{r=m,n(2,r)})}return t.$$set=m=>{"direction"in m&&n(1,o=m.direction),"split"in m&&n(0,l=m.split),"$$scope"in m&&n(6,s=m.$$scope)},[l,o,r,u,a,d,s,i,f]}class jn extends ue{constructor(e){super(),fe(this,e,Yn,zn,ce,{direction:1,split:0})}}const Gn=""+new URL("../assets/cat.58b560b7.jpg",import.meta.url).href,Zn="data:image/avif;base64,AAAAHGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZgAAAOptZXRhAAAAAAAAACFoZGxyAAAAAAAAAABwaWN0AAAAAAAAAAAAAAAAAAAAAA5waXRtAAAAAAABAAAAImlsb2MAAAAAREAAAQABAAAAAAEOAAEAAAAAAAAApwAAACNpaW5mAAAAAAABAAAAFWluZmUCAAAAAAEAAGF2MDEAAAAAamlwcnAAAABLaXBjbwAAABNjb2xybmNseAACAAIABoAAAAAMYXYxQ4EEDAAAAAAUaXNwZQAAAAAAAAJyAAACcgAAABBwaXhpAAAAAAMICAgAAAAXaXBtYQAAAAAAAAABAAEEgYIDhAAAAK9tZGF0EgAKChkmZxnHggQEDQgylgERQAEEEEEA9NBi7JFlrqXV1mwMry34uIYK7WRdWYJ/ZZ0EIyWW8aLm92oz5LY0W+l2FiKsHpp4BB3Vrk+iwHuzboac7wmSHHHRWklZdZ2hpEAi4E31lf1tjXnXie8fh4lzApbqjH5Pj7ZN6761WygYVdc2zvJOsflFZstng6rQU/oulDZSO6fQWKvzpO9pseyXBLfms64=",$n=""+new URL("../assets/david.0e7e3b46.png",import.meta.url).href;/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Gt=Symbol("Comlink.proxy"),qn=Symbol("Comlink.endpoint"),Qn=Symbol("Comlink.releaseProxy"),it=Symbol("Comlink.finalizer"),je=Symbol("Comlink.thrown"),Zt=t=>typeof t=="object"&&t!==null||typeof t=="function",Kn={canHandle:t=>Zt(t)&&t[Gt],serialize(t){const{port1:e,port2:n}=new MessageChannel;return qt(t,e),[n,[n]]},deserialize(t){return t.start(),ft(t)}},Jn={canHandle:t=>Zt(t)&&je in t,serialize({value:t}){let e;return t instanceof Error?e={isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:e={isError:!1,value:t},[e,[]]},deserialize(t){throw t.isError?Object.assign(new Error(t.value.message),t.value):t.value}},$t=new Map([["proxy",Kn],["throw",Jn]]);function xn(t,e){for(const n of t)if(e===n||n==="*"||n instanceof RegExp&&n.test(e))return!0;return!1}function qt(t,e=globalThis,n=["*"]){e.addEventListener("message",function i(s){if(!s||!s.data)return;if(!xn(n,s.origin)){console.warn(`Invalid origin '${s.origin}' for comlink proxy`);return}const{id:o,type:r,path:l}=Object.assign({path:[]},s.data),a=(s.data.argumentList||[]).map(Ee);let u;try{const d=l.slice(0,-1).reduce((m,L)=>m[L],t),f=l.reduce((m,L)=>m[L],t);switch(r){case"GET":u=f;break;case"SET":d[l.slice(-1)[0]]=Ee(s.data.value),u=!0;break;case"APPLY":u=f.apply(d,a);break;case"CONSTRUCT":{const m=new f(...a);u=ri(m)}break;case"ENDPOINT":{const{port1:m,port2:L}=new MessageChannel;qt(t,L),u=xt(m,[m])}break;case"RELEASE":u=void 0;break;default:return}}catch(d){u={value:d,[je]:0}}Promise.resolve(u).catch(d=>({value:d,[je]:0})).then(d=>{const[f,m]=Ke(d);e.postMessage(Object.assign(Object.assign({},f),{id:o}),m),r==="RELEASE"&&(e.removeEventListener("message",i),Qt(e),it in t&&typeof t[it]=="function"&&t[it]())}).catch(d=>{const[f,m]=Ke({value:new TypeError("Unserializable return value"),[je]:0});e.postMessage(Object.assign(Object.assign({},f),{id:o}),m)})}),e.start&&e.start()}function ei(t){return t.constructor.name==="MessagePort"}function Qt(t){ei(t)&&t.close()}function ft(t,e){return lt(t,[],e)}function Ye(t){if(t)throw new Error("Proxy has been released and is not useable")}function Kt(t){return ke(t,{type:"RELEASE"}).then(()=>{Qt(t)})}const qe=new WeakMap,Qe="FinalizationRegistry"in globalThis&&new FinalizationRegistry(t=>{const e=(qe.get(t)||0)-1;qe.set(t,e),e===0&&Kt(t)});function ti(t,e){const n=(qe.get(e)||0)+1;qe.set(e,n),Qe&&Qe.register(t,e,t)}function ni(t){Qe&&Qe.unregister(t)}function lt(t,e=[],n=function(){}){let i=!1;const s=new Proxy(n,{get(o,r){if(Ye(i),r===Qn)return()=>{ni(s),Kt(t),i=!0};if(r==="then"){if(e.length===0)return{then:()=>s};const l=ke(t,{type:"GET",path:e.map(a=>a.toString())}).then(Ee);return l.then.bind(l)}return lt(t,[...e,r])},set(o,r,l){Ye(i);const[a,u]=Ke(l);return ke(t,{type:"SET",path:[...e,r].map(d=>d.toString()),value:a},u).then(Ee)},apply(o,r,l){Ye(i);const a=e[e.length-1];if(a===qn)return ke(t,{type:"ENDPOINT"}).then(Ee);if(a==="bind")return lt(t,e.slice(0,-1));const[u,d]=Ct(l);return ke(t,{type:"APPLY",path:e.map(f=>f.toString()),argumentList:u},d).then(Ee)},construct(o,r){Ye(i);const[l,a]=Ct(r);return ke(t,{type:"CONSTRUCT",path:e.map(u=>u.toString()),argumentList:l},a).then(Ee)}});return ti(s,t),s}function ii(t){return Array.prototype.concat.apply([],t)}function Ct(t){const e=t.map(Ke);return[e.map(n=>n[0]),ii(e.map(n=>n[1]))]}const Jt=new WeakMap;function xt(t,e){return Jt.set(t,e),t}function ri(t){return Object.assign(t,{[Gt]:!0})}function Ke(t){for(const[e,n]of $t)if(n.canHandle(t)){const[i,s]=n.serialize(t);return[{type:"HANDLER",name:e,value:i},s]}return[{type:"RAW",value:t},Jt.get(t)||[]]}function Ee(t){switch(t.type){case"HANDLER":return $t.get(t.name).deserialize(t.value);case"RAW":return t.value}}function ke(t,e,n){return new Promise(i=>{const s=si();t.addEventListener("message",function o(r){!r.data||!r.data.id||r.data.id!==s||(t.removeEventListener("message",o),i(r.data))}),t.start&&t.start(),t.postMessage(Object.assign({id:s},e),n)})}function si(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}function oi(){return new Worker(""+new URL("../workers/renderingWorker-507c4fff.js",import.meta.url).href)}function li(t,e){const n=t.transferControlToOffscreen(),i=new oi,s=ft(i);let o=null,r=null,l=()=>{};return s.errorDiffusionDithering(xt(n,[n]),e).then(a=>{r=a.update,l=a.destroy,r(o||e)}),{update:a=>{r?r(a):o=a},destroy:()=>{l(),i.terminate()}}}function ai(t){let e,n,i,s,o,r,l;return{c(){e=E("div"),n=E("label"),i=$(t[1]),s=R(),o=E("input"),this.h()},l(a){e=A(a,"DIV",{});var u=S(e);n=A(u,"LABEL",{for:!0,class:!0});var d=S(n);i=q(d,t[1]),d.forEach(_),s=C(u),o=A(u,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0,name:!0,class:!0}),u.forEach(_),this.h()},h(){c(n,"for",t[6]),c(n,"class","block mb-2 text-sm font-medium text-gray-900 dark:text-white"),c(o,"id",t[6]),c(o,"type","range"),c(o,"min",t[3]),c(o,"max",t[4]),c(o,"step",t[5]),c(o,"name",t[2]),c(o,"class","w-full h-1.5 mb-6 bg-white ring-1 ring-gray-300 shadow-sm rounded-lg appearance-none cursor-pointer accent-indigo-600 dark:bg-gray-700")},m(a,u){B(a,e,u),g(e,n),g(n,i),g(e,s),g(e,o),Se(o,t[0]),r||(l=[J(o,"change",t[7]),J(o,"input",t[7])],r=!0)},p(a,[u]){u&2&&et(i,a[1]),u&8&&c(o,"min",a[3]),u&16&&c(o,"max",a[4]),u&32&&c(o,"step",a[5]),u&4&&c(o,"name",a[2]),u&1&&Se(o,a[0])},i:ae,o:ae,d(a){a&&_(e),r=!1,Fe(l)}}}function ui(t,e,n){let{label:i}=e,{name:s=void 0}=e,{min:o=null}=e,{max:r=null}=e,{value:l=0}=e,{step:a=1}=e,u=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);function d(){l=mn(this.value),n(0,l)}return t.$$set=f=>{"label"in f&&n(1,i=f.label),"name"in f&&n(2,s=f.name),"min"in f&&n(3,o=f.min),"max"in f&&n(4,r=f.max),"value"in f&&n(0,l=f.value),"step"in f&&n(5,a=f.step)},[l,i,s,o,r,a,u,d]}class Je extends ue{constructor(e){super(),fe(this,e,ui,ai,ce,{label:1,name:2,min:3,max:4,value:0,step:5})}}function Pt(t,e,n){const i=t.slice();return i[6]=e[n],i}function Nt(t){let e,n=t[6].name+"",i,s,o;return{c(){e=E("option"),i=$(n),this.h()},l(r){e=A(r,"OPTION",{});var l=S(e);i=q(l,n),l.forEach(_),this.h()},h(){e.__value=s=t[6].value,e.value=e.__value,e.selected=o=t[6].value===t[0]},m(r,l){B(r,e,l),g(e,i)},p(r,l){l&2&&n!==(n=r[6].name+"")&&et(i,n),l&2&&s!==(s=r[6].value)&&(e.__value=s,e.value=e.__value),l&3&&o!==(o=r[6].value===r[0])&&(e.selected=o)},d(r){r&&_(e)}}}function fi(t){let e,n,i,s,o,r,l,a=t[1],u=[];for(let d=0;d<a.length;d+=1)u[d]=Nt(Pt(t,a,d));return{c(){e=E("div"),n=E("label"),i=$(t[2]),s=R(),o=E("select");for(let d=0;d<u.length;d+=1)u[d].c();this.h()},l(d){e=A(d,"DIV",{});var f=S(e);n=A(f,"LABEL",{for:!0,class:!0});var m=S(n);i=q(m,t[2]),m.forEach(_),s=C(f),o=A(f,"SELECT",{id:!0,name:!0,class:!0});var L=S(o);for(let b=0;b<u.length;b+=1)u[b].l(L);L.forEach(_),f.forEach(_),this.h()},h(){c(n,"for",t[4]),c(n,"class","block text-sm font-medium leading-6 text-gray-900"),c(o,"id",t[4]),c(o,"name",t[3]),c(o,"class","mt-2 block w-full rounded-md border-0 py-1.5 pl-3 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-indigo-600 sm:text-sm sm:leading-6"),t[0]===void 0&&gn(()=>t[5].call(o))},m(d,f){B(d,e,f),g(e,n),g(n,i),g(e,s),g(e,o);for(let m=0;m<u.length;m+=1)u[m]&&u[m].m(o,null);vt(o,t[0],!0),r||(l=J(o,"change",t[5]),r=!0)},p(d,[f]){if(f&4&&et(i,d[2]),f&3){a=d[1];let m;for(m=0;m<a.length;m+=1){const L=Pt(d,a,m);u[m]?u[m].p(L,f):(u[m]=Nt(L),u[m].c(),u[m].m(o,null))}for(;m<u.length;m+=1)u[m].d(1);u.length=a.length}f&8&&c(o,"name",d[3]),f&3&&vt(o,d[0])},i:ae,o:ae,d(d){d&&_(e),at(u,d),r=!1,l()}}}function ci(t,e,n){let{options:i}=e,{selected:s}=e,{label:o}=e,{name:r=void 0}=e,l=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);function a(){s=_n(this),n(0,s),n(1,i)}return t.$$set=u=>{"options"in u&&n(1,i=u.options),"selected"in u&&n(0,s=u.selected),"label"in u&&n(2,o=u.label),"name"in u&&n(3,r=u.name)},[s,i,o,r,l,a]}class en extends ue{constructor(e){super(),fe(this,e,ci,fi,ce,{options:1,selected:0,label:2,name:3})}}function di(t){let e,n,i,s,o,r;function l(f){t[5](f)}let a={label:"Diffusion Mode",options:t[2]};t[1]!==void 0&&(a.selected=t[1]),e=new en({props:a}),Q.push(()=>ee(e,"selected",l));function u(f){t[6](f)}let d={label:"Diffusion Strength ("+t[0]+")",min:0,max:2,step:.01};return t[0]!==void 0&&(d.value=t[0]),s=new Je({props:d}),Q.push(()=>ee(s,"value",u)),{c(){Y(e.$$.fragment),i=R(),Y(s.$$.fragment)},l(f){j(e.$$.fragment,f),i=C(f),j(s.$$.fragment,f)},m(f,m){G(e,f,m),B(f,i,m),G(s,f,m),r=!0},p(f,[m]){const L={};!n&&m&2&&(n=!0,L.selected=f[1],te(()=>n=!1)),e.$set(L);const b={};m&1&&(b.label="Diffusion Strength ("+f[0]+")"),!o&&m&1&&(o=!0,b.value=f[0],te(()=>o=!1)),s.$set(b)},i(f){r||(U(e.$$.fragment,f),U(s.$$.fragment,f),r=!0)},o(f){F(e.$$.fragment,f),F(s.$$.fragment,f),r=!1},d(f){Z(e,f),f&&_(i),Z(s,f)}}}function hi(t,e,n){let{diffusionStrength:i}=e,{diffusionMatrix:s}=e,{diffusionOriginX:o}=e,r="floyd_steinberg";const l=[{name:"Basic",value:"basic"},{name:"Floyd-Steinberg",value:"floyd_steinberg"},{name:"Atkinson",value:"atkinson"},{name:"Jarvis-Judice-Ninke",value:"jarvis_judice_ninke"}],a={basic:{matrix:[[0,1/2],[1/2,0]],originX:0},floyd_steinberg:{matrix:[[0,0,7/16],[3/16,5/16,1/16]],originX:1},atkinson:{matrix:[[0,0,1/8,1/8],[1/8,1/8,1/8,0],[0,1/8,0,0]],originX:1},jarvis_judice_ninke:{matrix:[[0,0,0,7/48,5/48],[3/48,5/48,7/48,5/48,3/48],[1/48,3/48,5/48,3/48,1/48]],originX:2}};function u(f){r=f,n(1,r)}function d(f){i=f,n(0,i)}return t.$$set=f=>{"diffusionStrength"in f&&n(0,i=f.diffusionStrength),"diffusionMatrix"in f&&n(3,s=f.diffusionMatrix),"diffusionOriginX"in f&&n(4,o=f.diffusionOriginX)},t.$$.update=()=>{if(t.$$.dirty&2){const{matrix:f,originX:m}=a[r];n(3,s=f),n(4,o=m)}},[i,r,l,s,o,u,d]}class mi extends ue{constructor(e){super(),fe(this,e,hi,di,ce,{diffusionStrength:0,diffusionMatrix:3,diffusionOriginX:4})}}function Ut(t,e,n){const i=t.slice();return i[4]=e[n],i}function Ot(t){let e,n,i,s=!1,o,r,l=t[4].label+"",a,u,d,f,m,L;return f=pn(t[3][0]),{c(){e=E("label"),n=E("input"),o=R(),r=E("div"),a=$(l),d=R(),this.h()},l(b){e=A(b,"LABEL",{class:!0});var y=S(e);n=A(y,"INPUT",{type:!0,name:!0,class:!0}),o=C(y),r=A(y,"DIV",{class:!0});var h=S(r);a=q(h,l),h.forEach(_),d=C(y),y.forEach(_),this.h()},h(){c(n,"type","radio"),c(n,"name","tabs"),n.__value=i=t[4].value,n.value=n.__value,c(n,"class","sr-only"),c(r,"class",u="flex items-center justify-center py-2 text-sm font-medium text-gray-700 border-b "+(t[4].value===t[0]?"border-indigo-500 border-b-2":"border-gray-300")+" cursor-pointer hover:bg-gray-900 hover:bg-opacity-5"),c(e,"class","flex-1"),f.p(n)},m(b,y){B(b,e,y),g(e,n),n.checked=n.__value===t[0],g(e,o),g(e,r),g(r,a),g(e,d),m||(L=J(n,"change",t[2]),m=!0)},p(b,y){y&2&&i!==(i=b[4].value)&&(n.__value=i,n.value=n.__value,s=!0),(s||y&3)&&(n.checked=n.__value===b[0]),y&2&&l!==(l=b[4].label+"")&&et(a,l),y&3&&u!==(u="flex items-center justify-center py-2 text-sm font-medium text-gray-700 border-b "+(b[4].value===b[0]?"border-indigo-500 border-b-2":"border-gray-300")+" cursor-pointer hover:bg-gray-900 hover:bg-opacity-5")&&c(r,"class",u)},d(b){b&&_(e),f.r(),m=!1,L()}}}function gi(t){let e,n=t[1],i=[];for(let s=0;s<n.length;s+=1)i[s]=Ot(Ut(t,n,s));return{c(){e=E("nav");for(let s=0;s<i.length;s+=1)i[s].c();this.h()},l(s){e=A(s,"NAV",{class:!0});var o=S(e);for(let r=0;r<i.length;r+=1)i[r].l(o);o.forEach(_),this.h()},h(){c(e,"class","flex w-full")},m(s,o){B(s,e,o);for(let r=0;r<i.length;r+=1)i[r]&&i[r].m(e,null)},p(s,[o]){if(o&3){n=s[1];let r;for(r=0;r<n.length;r+=1){const l=Ut(s,n,r);i[r]?i[r].p(l,o):(i[r]=Ot(l),i[r].c(),i[r].m(e,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=n.length}},i:ae,o:ae,d(s){s&&_(e),at(i,s)}}}function _i(t,e,n){let{tabs:i}=e,{selected:s}=e;const o=[[]];function r(){s=this.__value,n(0,s)}return t.$$set=l=>{"tabs"in l&&n(1,i=l.tabs),"selected"in l&&n(0,s=l.selected)},[s,i,r,o]}class pi extends ue{constructor(e){super(),fe(this,e,_i,gi,ce,{tabs:1,selected:0})}}const vi=t=>({}),Xt=t=>({});function bi(t){let e;const n=t[2].placeholder,i=Le(n,t,t[1],Xt),s=i||Ei();return{c(){s&&s.c()},l(o){s&&s.l(o)},m(o,r){s&&s.m(o,r),e=!0},p(o,r){i&&i.p&&(!e||r&2)&&Ie(i,n,o,o[1],e?Me(n,o[1],r,vi):De(o[1]),Xt)},i(o){e||(U(s,o),e=!0)},o(o){F(s,o),e=!1},d(o){s&&s.d(o)}}}function wi(t){let e,n,i,s;return{c(){e=E("canvas"),this.h()},l(o){e=A(o,"CANVAS",{class:!0,style:!0}),S(e).forEach(_),this.h()},h(){c(e,"class","w-full max-h-96 object-contain shadow-lg"),st(e,"image-rendering","pixelated")},m(o,r){B(o,e,r),i||(s=Xe(n=yi.call(null,e,t[0])),i=!0)},p(o,r){n&&ut(n.update)&&r&1&&n.update.call(null,o[0])},i:ae,o:ae,d(o){o&&_(e),i=!1,s()}}}function Ei(t){let e,n;return{c(){e=E("span"),n=$("No Image")},l(i){e=A(i,"SPAN",{});var s=S(e);n=q(s,"No Image"),s.forEach(_)},m(i,s){B(i,e,s),g(e,n)},p:ae,d(i){i&&_(e)}}}function Ai(t){let e,n,i,s;const o=[wi,bi],r=[];function l(a,u){return a[0]?0:1}return n=l(t),i=r[n]=o[n](t),{c(){e=E("div"),i.c(),this.h()},l(a){e=A(a,"DIV",{class:!0});var u=S(e);i.l(u),u.forEach(_),this.h()},h(){c(e,"class","w-full aspect-square rounded-lg bg-gray-100 p-8 grid place-items-center")},m(a,u){B(a,e,u),r[n].m(e,null),s=!0},p(a,[u]){let d=n;n=l(a),n===d?r[n].p(a,u):(Ge(),F(r[d],1,1,()=>{r[d]=null}),Ze(),i=r[n],i?i.p(a,u):(i=r[n]=o[n](a),i.c()),U(i,1),i.m(e,null))},i(a){s||(U(i),s=!0)},o(a){F(i),s=!1},d(a){a&&_(e),r[n].d()}}}function yi(t,e){const n=t.getContext("2d");if(!n)return;const i=()=>{t.width=e.width,t.height=e.height,n.putImageData(e,0,0)};let s=null;const o=()=>{s||(s=requestAnimationFrame(()=>{s=null,i()}))};return o(),{destroy(){s&&cancelAnimationFrame(s)},update:r=>{e=r,o()}}}function ki(t,e,n){let{$$slots:i={},$$scope:s}=e,{imageData:o}=e;return t.$$set=r=>{"imageData"in r&&n(0,o=r.imageData),"$$scope"in r&&n(1,s=r.$$scope)},[o,s,i]}class Ti extends ue{constructor(e){super(),fe(this,e,ki,Ai,ce,{imageData:0})}}function Si(){return new Worker(""+new URL("../workers/worker-09b3192d.js",import.meta.url).href)}let rt=null;async function Li(t){return rt||(rt=ft(new Si)),await rt.generate(t)}function Bt(t){let e,n,i;function s(r){t[9](r)}let o={label:"Bayer Level ("+t[4]+")",min:0,max:5,step:1};return t[4]!==void 0&&(o.value=t[4]),e=new Je({props:o}),Q.push(()=>ee(e,"value",s)),{c(){Y(e.$$.fragment)},l(r){j(e.$$.fragment,r)},m(r,l){G(e,r,l),i=!0},p(r,l){const a={};l&16&&(a.label="Bayer Level ("+r[4]+")"),!n&&l&16&&(n=!0,a.value=r[4],te(()=>n=!1)),e.$set(a)},i(r){i||(U(e.$$.fragment,r),i=!0)},o(r){F(e.$$.fragment,r),i=!1},d(r){Z(e,r)}}}function Ft(t){let e,n,i;function s(r){t[10](r)}let o={aspectRatio:1,minWidth:1,minHeight:1,maxHeight:3e3,maxWidth:3e3};return t[5]!==void 0&&(o.width=t[5]),e=new jt({props:o}),Q.push(()=>ee(e,"width",s)),{c(){Y(e.$$.fragment)},l(r){j(e.$$.fragment,r)},m(r,l){G(e,r,l),i=!0},p(r,l){const a={};!n&&l&32&&(n=!0,a.width=r[5],te(()=>n=!1)),e.$set(a)},i(r){i||(U(e.$$.fragment,r),i=!0)},o(r){F(e.$$.fragment,r),i=!1},d(r){Z(e,r)}}}function Ii(t){let e,n;return{c(){e=E("span"),n=$("Loading Threshold Map"),this.h()},l(i){e=A(i,"SPAN",{slot:!0});var s=S(e);n=q(s,"Loading Threshold Map"),s.forEach(_),this.h()},h(){c(e,"slot","placeholder")},m(i,s){B(i,e,s),g(e,n)},p:ae,d(i){i&&_(e)}}}function Di(t){let e,n,i,s,o,r,l,a,u,d,f,m,L;function b(v){t[8](v)}let y={label:"Threshold Map",options:t[6]};t[3]!==void 0&&(y.selected=t[3]),e=new en({props:y}),Q.push(()=>ee(e,"selected",b));let h=t[3]==="bayer"&&Bt(t),p=t[3]==="white_noise"&&Ft(t);r=new Ti({props:{imageData:t[0],$$slots:{placeholder:[Ii]},$$scope:{ctx:t}}});function T(v){t[11](v)}let w={label:"Threshold ("+t[1]+")",min:0,max:1,step:.01};t[1]!==void 0&&(w.value=t[1]),a=new Je({props:w}),Q.push(()=>ee(a,"value",T));function k(v){t[12](v)}let D={label:"Noise Intensity ("+t[2]+")",min:0,max:1.5,step:.01};return t[2]!==void 0&&(D.value=t[2]),f=new Je({props:D}),Q.push(()=>ee(f,"value",k)),{c(){Y(e.$$.fragment),i=R(),h&&h.c(),s=R(),p&&p.c(),o=R(),Y(r.$$.fragment),l=R(),Y(a.$$.fragment),d=R(),Y(f.$$.fragment)},l(v){j(e.$$.fragment,v),i=C(v),h&&h.l(v),s=C(v),p&&p.l(v),o=C(v),j(r.$$.fragment,v),l=C(v),j(a.$$.fragment,v),d=C(v),j(f.$$.fragment,v)},m(v,I){G(e,v,I),B(v,i,I),h&&h.m(v,I),B(v,s,I),p&&p.m(v,I),B(v,o,I),G(r,v,I),B(v,l,I),G(a,v,I),B(v,d,I),G(f,v,I),L=!0},p(v,[I]){const N={};!n&&I&8&&(n=!0,N.selected=v[3],te(()=>n=!1)),e.$set(N),v[3]==="bayer"?h?(h.p(v,I),I&8&&U(h,1)):(h=Bt(v),h.c(),U(h,1),h.m(s.parentNode,s)):h&&(Ge(),F(h,1,1,()=>{h=null}),Ze()),v[3]==="white_noise"?p?(p.p(v,I),I&8&&U(p,1)):(p=Ft(v),p.c(),U(p,1),p.m(o.parentNode,o)):p&&(Ge(),F(p,1,1,()=>{p=null}),Ze());const O={};I&1&&(O.imageData=v[0]),I&8192&&(O.$$scope={dirty:I,ctx:v}),r.$set(O);const W={};I&2&&(W.label="Threshold ("+v[1]+")"),!u&&I&2&&(u=!0,W.value=v[1],te(()=>u=!1)),a.$set(W);const X={};I&4&&(X.label="Noise Intensity ("+v[2]+")"),!m&&I&4&&(m=!0,X.value=v[2],te(()=>m=!1)),f.$set(X)},i(v){L||(U(e.$$.fragment,v),U(h),U(p),U(r.$$.fragment,v),U(a.$$.fragment,v),U(f.$$.fragment,v),L=!0)},o(v){F(e.$$.fragment,v),F(h),F(p),F(r.$$.fragment,v),F(a.$$.fragment,v),F(f.$$.fragment,v),L=!1},d(v){Z(e,v),v&&_(i),h&&h.d(v),v&&_(s),p&&p.d(v),v&&_(o),Z(r,v),v&&_(l),Z(a,v),v&&_(d),Z(f,v)}}}function Mi(t,e,n){let i,{thresholdMap:s}=e,{threshold:o}=e,{noiseIntensity:r}=e,l="bayer";const a=[{name:"Bayer",value:"bayer"},{name:"Blue Noise",value:"blue_noise"},{name:"White Noise",value:"white_noise"}];let u=3,d=256;function f(h){l=h,n(3,l)}function m(h){u=h,n(4,u)}function L(h){d=h,n(5,d)}function b(h){o=h,n(1,o)}function y(h){r=h,n(2,r)}return t.$$set=h=>{"thresholdMap"in h&&n(0,s=h.thresholdMap),"threshold"in h&&n(1,o=h.threshold),"noiseIntensity"in h&&n(2,r=h.noiseIntensity)},t.$$.update=()=>{if(t.$$.dirty&32&&n(7,i=d),t.$$.dirty&184&&"ImageData"in globalThis){let h;switch(l){case"bayer":h={mode:"bayer",level:u};break;case"blue_noise":h={mode:"blue_noise"};break;case"white_noise":h={mode:"white_noise",width:d,height:i};break}Li(h).then(p=>n(0,s=p))}},[s,o,r,l,u,d,a,i,f,m,L,b,y]}class Ri extends ue{constructor(e){super(),fe(this,e,Mi,Di,ce,{thresholdMap:0,threshold:1,noiseIntensity:2})}}const Ci=t=>({}),Wt=t=>({});function Pi(t){let e,n,i,s,o,r,l,a,u,d,f,m;s=new Re({props:{src:t[0]?bt:wt,class:"w-6 h-6 text-gray-500"}});const L=t[2].header,b=Le(L,t,t[1],Wt),y=t[2].default,h=Le(y,t,t[1],null);return{c(){e=E("div"),n=E("header"),i=E("button"),Y(s.$$.fragment),o=R(),r=E("div"),b&&b.c(),l=R(),a=E("section"),h&&h.c(),this.h()},l(p){e=A(p,"DIV",{class:!0});var T=S(e);n=A(T,"HEADER",{class:!0});var w=S(n);i=A(w,"BUTTON",{class:!0});var k=S(i);j(s.$$.fragment,k),k.forEach(_),o=C(w),r=A(w,"DIV",{class:!0});var D=S(r);b&&b.l(D),D.forEach(_),w.forEach(_),l=C(T),a=A(T,"SECTION",{class:!0});var v=S(a);h&&h.l(v),v.forEach(_),T.forEach(_),this.h()},h(){c(i,"class","contents"),c(r,"class","flex flex-1 items-center justify-between"),c(n,"class","py-4 px-4 flex-shrink-0 shadow-sm z-10 flex gap-2 items-center justify-between bg-white"),c(a,"class","overflow-y-auto overflow-x-visible"),Te(a,"hidden",!t[0]),c(e,"class",u="w-full max-h-full "+(t[0]?"h-full divide-y divide-gray-200 mt-auto":"")+" bg-white bg-opacity-95 border border-gray-100 overflow-y-hidden flex-1 shadow-lg rounded-md flex flex-col justify-start pointer-events-auto touch-auto")},m(p,T){B(p,e,T),g(e,n),g(n,i),G(s,i,null),g(n,o),g(n,r),b&&b.m(r,null),g(e,l),g(e,a),h&&h.m(a,null),d=!0,f||(m=J(i,"click",t[3]),f=!0)},p(p,[T]){const w={};T&1&&(w.src=p[0]?bt:wt),s.$set(w),b&&b.p&&(!d||T&2)&&Ie(b,L,p,p[1],d?Me(L,p[1],T,Ci):De(p[1]),Wt),h&&h.p&&(!d||T&2)&&Ie(h,y,p,p[1],d?Me(y,p[1],T,null):De(p[1]),null),(!d||T&1)&&Te(a,"hidden",!p[0]),(!d||T&1&&u!==(u="w-full max-h-full "+(p[0]?"h-full divide-y divide-gray-200 mt-auto":"")+" bg-white bg-opacity-95 border border-gray-100 overflow-y-hidden flex-1 shadow-lg rounded-md flex flex-col justify-start pointer-events-auto touch-auto"))&&c(e,"class",u)},i(p){d||(U(s.$$.fragment,p),U(b,p),U(h,p),d=!0)},o(p){F(s.$$.fragment,p),F(b,p),F(h,p),d=!1},d(p){p&&_(e),Z(s),b&&b.d(p),h&&h.d(p),f=!1,m()}}}function Ni(t,e,n){let{$$slots:i={},$$scope:s}=e,{open:o=!1}=e;const r=()=>n(0,o=!o);return t.$$set=l=>{"open"in l&&n(0,o=l.open),"$$scope"in l&&n(1,s=l.$$scope)},[o,s,i,r]}class Ui extends ue{constructor(e){super(),fe(this,e,Ni,Pi,ce,{open:0})}}function Vt(t,e,n){const i=t.slice();return i[39]=e[n],i}function Oi(t){let e,n,i,s,o,r,l,a,u,d,f,m,L,b,y,h,p,T,w=t[18],k=[];for(let D=0;D<w.length;D+=1)k[D]=zt(Vt(t,w,D));return d=new Re({props:{src:An,class:"w-12 h-12 text-gray-400"}}),{c(){e=E("div"),n=E("div"),i=E("p"),s=$("Select or Drop an Image to Start"),o=R(),r=E("div");for(let D=0;D<k.length;D+=1)k[D].c();l=R(),a=E("label"),u=E("div"),Y(d.$$.fragment),f=R(),m=E("span"),L=$("Choose an Image"),b=R(),y=E("input"),this.h()},l(D){e=A(D,"DIV",{class:!0});var v=S(e);n=A(v,"DIV",{class:!0});var I=S(n);i=A(I,"P",{class:!0});var N=S(i);s=q(N,"Select or Drop an Image to Start"),N.forEach(_),o=C(I),r=A(I,"DIV",{class:!0});var O=S(r);for(let ne=0;ne<k.length;ne+=1)k[ne].l(O);l=C(O),a=A(O,"LABEL",{for:!0,class:!0});var W=S(a);u=A(W,"DIV",{class:!0});var X=S(u);j(d.$$.fragment,X),X.forEach(_),f=C(W),m=A(W,"SPAN",{class:!0});var V=S(m);L=q(V,"Choose an Image"),V.forEach(_),b=C(W),y=A(W,"INPUT",{type:!0,class:!0,id:!0,accept:!0}),W.forEach(_),O.forEach(_),I.forEach(_),v.forEach(_),this.h()},h(){c(i,"class","text-2xl text-gray-500 text-center"),c(u,"class","grid place-items-center h-full w-full"),c(m,"class","sr-only"),c(y,"type","file"),c(y,"class","sr-only"),c(y,"id","image-input"),c(y,"accept","image/*"),c(a,"for","image-input"),c(a,"class","block spect-square h-24 w-24 object-cover rounded-md shadow-md border-2 border-white bg-white hover:bg-gray-100"),c(r,"class","flex gap-3 justify-center flex-wrap"),c(n,"class","grid gap-4"),c(e,"class","w-full h-full grid place-items-center px-8")},m(D,v){B(D,e,v),g(e,n),g(n,i),g(i,s),g(n,o),g(n,r);for(let I=0;I<k.length;I+=1)k[I]&&k[I].m(r,null);g(r,l),g(r,a),g(a,u),G(d,u,null),g(a,f),g(a,m),g(m,L),g(a,b),g(a,y),h=!0,p||(T=J(y,"input",t[21]),p=!0)},p(D,v){if(v[0]&4456448){w=D[18];let I;for(I=0;I<w.length;I+=1){const N=Vt(D,w,I);k[I]?k[I].p(N,v):(k[I]=zt(N),k[I].c(),k[I].m(r,l))}for(;I<k.length;I+=1)k[I].d(1);k.length=w.length}},i(D){h||(U(d.$$.fragment,D),h=!0)},o(D){F(d.$$.fragment,D),h=!1},d(D){D&&_(e),at(k,D),Z(d),p=!1,T()}}}function Xi(t){let e,n,i,s,o,r,l,a;return n=new jn({props:{direction:t[15],$$slots:{right:[zi],left:[Bi]},$$scope:{ctx:t}}}),o=new Re({props:{src:yn,class:"w-5 h-5 text-white"}}),{c(){e=E("div"),Y(n.$$.fragment),i=R(),s=E("button"),Y(o.$$.fragment),this.h()},l(u){e=A(u,"DIV",{class:!0});var d=S(e);j(n.$$.fragment,d),i=C(d),s=A(d,"BUTTON",{class:!0,title:!0});var f=S(s);j(o.$$.fragment,f),f.forEach(_),d.forEach(_),this.h()},h(){c(s,"class","absolute top-0 left-0 m-4 p-2 bg-black bg-opacity-40 rounded-full"),c(s,"title","Close Image & Reset"),c(e,"class","w-full h-full relative")},m(u,d){B(u,e,d),G(n,e,null),g(e,i),g(e,s),G(o,s,null),r=!0,l||(a=J(s,"click",t[25]),l=!0)},p(u,d){const f={};d[0]&32768&&(f.direction=u[15]),d[0]&163835|d[1]&2048&&(f.$$scope={dirty:d,ctx:u}),n.$set(f)},i(u){r||(U(n.$$.fragment,u),U(o.$$.fragment,u),r=!0)},o(u){F(n.$$.fragment,u),F(o.$$.fragment,u),r=!1},d(u){u&&_(e),Z(n),Z(o),l=!1,a()}}}function zt(t){let e,n,i,s,o;function r(){return t[26](t[39])}return{c(){e=E("button"),n=E("img"),this.h()},l(l){e=A(l,"BUTTON",{class:!0});var a=S(e);n=A(a,"IMG",{class:!0,src:!0,alt:!0}),a.forEach(_),this.h()},h(){c(n,"class","aspect-square h-24 w-24 object-cover rounded-md shadow-md border-2 border-white"),Be(n.src,i=t[39])||c(n,"src",i),c(n,"alt",""),c(e,"class","hover:opacity-75 transition-opacity")},m(l,a){B(l,e,a),g(e,n),s||(o=J(e,"click",r),s=!0)},p(l,a){t=l},d(l){l&&_(e),s=!1,o()}}}function Bi(t){let e,n,i;return{c(){e=E("img"),this.h()},l(s){e=A(s,"IMG",{slot:!0,src:!0,alt:!0,style:!0,class:!0}),this.h()},h(){c(e,"slot","left"),Be(e.src,n=t[1].src)||c(e,"src",n),c(e,"alt",""),c(e,"style",i=`width: ${t[0]}px; height: ${t[17]}px`),c(e,"class","pixelated max-w-none shadow-lg svelte-1b7r98h")},m(s,o){B(s,e,o)},p(s,o){o[0]&2&&!Be(e.src,n=s[1].src)&&c(e,"src",n),o[0]&131073&&i!==(i=`width: ${s[0]}px; height: ${s[17]}px`)&&c(e,"style",i)},d(s){s&&_(e)}}}function Fi(t){let e,n,i;return{c(){e=E("img"),this.h()},l(s){e=A(s,"IMG",{src:!0,alt:!0,style:!0,class:!0}),this.h()},h(){Be(e.src,n=t[1].src)||c(e,"src",n),c(e,"alt",""),c(e,"style",i=`width: ${t[0]}px; height: ${t[17]}px`),c(e,"class","pixelated max-w-none shadow-lg svelte-1b7r98h")},m(s,o){B(s,e,o)},p(s,o){o[0]&2&&!Be(e.src,n=s[1].src)&&c(e,"src",n),o[0]&131073&&i!==(i=`width: ${s[0]}px; height: ${s[17]}px`)&&c(e,"style",i)},d(s){s&&_(e)}}}function Wi(t){let e,n=t[9]&&Ht(t);return{c(){n&&n.c(),e=$e()},l(i){n&&n.l(i),e=$e()},m(i,s){n&&n.m(i,s),B(i,e,s)},p(i,s){i[9]?n?n.p(i,s):(n=Ht(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(i){n&&n.d(i),i&&_(e)}}}function Vi(t){let e,n,i,s,o;return{c(){e=E("canvas"),this.h()},l(r){e=A(r,"CANVAS",{class:!0,style:!0,width:!0,height:!0}),S(e).forEach(_),this.h()},h(){c(e,"class","pixelated shadow-lg bg-gray-200 svelte-1b7r98h"),c(e,"style",n=`width: ${t[0]}px; height: ${t[17]}px`),c(e,"width",t[0]),c(e,"height",t[17])},m(r,l){B(r,e,l),t[23](e),s||(o=Xe(i=li.call(null,e,{image:t[7],output_width:t[0],output_height:t[17],monochrome:t[3],colorLight:t[4],colorDark:t[5],diffusionStrength:t[12],diffusionMatrix:t[13],diffusionMatrixOriginX:t[14]})),s=!0)},p(r,l){l[0]&131073&&n!==(n=`width: ${r[0]}px; height: ${r[17]}px`)&&c(e,"style",n),l[0]&1&&c(e,"width",r[0]),l[0]&131072&&c(e,"height",r[17]),i&&ut(i.update)&&l[0]&159929&&i.update.call(null,{image:r[7],output_width:r[0],output_height:r[17],monochrome:r[3],colorLight:r[4],colorDark:r[5],diffusionStrength:r[12],diffusionMatrix:r[13],diffusionMatrixOriginX:r[14]})},d(r){r&&_(e),t[23](null),s=!1,o()}}}function Ht(t){let e,n,i,s,o;return{c(){e=E("canvas"),this.h()},l(r){e=A(r,"CANVAS",{class:!0,style:!0,width:!0,height:!0,"aria-label":!0}),S(e).forEach(_),this.h()},h(){c(e,"class","pixelated shadow-lg svelte-1b7r98h"),c(e,"style",n=`width: ${t[0]}px; height: ${t[17]}px`),c(e,"width",t[0]),c(e,"height",t[17]),c(e,"aria-label","Dithered Image")},m(r,l){B(r,e,l),t[24](e),s||(o=Xe(i=Rn.call(null,e,{image:t[7],threshold:t[10],noiseIntensity:t[11],monochrome:t[3],colorLight:t[4],colorDark:t[5],output_width:t[0],output_height:t[17],thresholdMap:t[9]})),s=!0)},p(r,l){l[0]&131073&&n!==(n=`width: ${r[0]}px; height: ${r[17]}px`)&&c(e,"style",n),l[0]&1&&c(e,"width",r[0]),l[0]&131072&&c(e,"height",r[17]),i&&ut(i.update)&&l[0]&134841&&i.update.call(null,{image:r[7],threshold:r[10],noiseIntensity:r[11],monochrome:r[3],colorLight:r[4],colorDark:r[5],output_width:r[0],output_height:r[17],thresholdMap:r[9]})},d(r){r&&_(e),t[24](null),s=!1,o()}}}function zi(t){let e;function n(o,r){if(o[8]==="error_diffusion")return Vi;if(o[8]==="ordered")return Wi;if(o[8]==="none")return Fi}let i=n(t),s=i&&i(t);return{c(){s&&s.c(),e=$e()},l(o){s&&s.l(o),e=$e()},m(o,r){s&&s.m(o,r),B(o,e,r)},p(o,r){i===(i=n(o))&&s?s.p(o,r):(s&&s.d(1),s=i&&i(o),s&&(s.c(),s.m(e.parentNode,e)))},d(o){s&&s.d(o),o&&_(e)}}}function Yt(t){let e,n,i,s,o,r,l,a,u,d,f,m,L,b;return{c(){e=E("fieldset"),n=E("div"),i=E("input"),s=R(),o=E("label"),r=$("Light"),l=R(),a=E("div"),u=E("input"),d=R(),f=E("label"),m=$("Dark"),this.h()},l(y){e=A(y,"FIELDSET",{});var h=S(e);n=A(h,"DIV",{class:!0});var p=S(n);i=A(p,"INPUT",{type:!0,name:!0,id:!0}),s=C(p),o=A(p,"LABEL",{for:!0,class:!0});var T=S(o);r=q(T,"Light"),T.forEach(_),p.forEach(_),l=C(h),a=A(h,"DIV",{class:!0});var w=S(a);u=A(w,"INPUT",{type:!0,name:!0,id:!0}),d=C(w),f=A(w,"LABEL",{for:!0,class:!0});var k=S(f);m=q(k,"Dark"),k.forEach(_),w.forEach(_),h.forEach(_),this.h()},h(){c(i,"type","color"),c(i,"name","color-light"),c(i,"id","color-light"),c(o,"for","color-light"),c(o,"class","font-medium text-gray-900"),c(n,"class","flex gap-3"),c(u,"type","color"),c(u,"name","color-dark"),c(u,"id","color-dark"),c(f,"for","color-dark"),c(f,"class","font-medium text-gray-900"),c(a,"class","flex gap-3")},m(y,h){B(y,e,h),g(e,n),g(n,i),Se(i,t[4]),g(n,s),g(n,o),g(o,r),g(e,l),g(e,a),g(a,u),Se(u,t[5]),g(a,d),g(a,f),g(f,m),L||(b=[J(i,"input",t[37]),J(u,"input",t[38])],L=!0)},p(y,h){h[0]&16&&Se(i,y[4]),h[0]&32&&Se(u,y[5])},d(y){y&&_(e),L=!1,Fe(b)}}}function Hi(t){let e,n,i,s,o,r,l,a,u,d,f,m,L,b,y,h,p,T,w,k,D,v,I,N,O,W,X,V,ne,ge,K,le,_e,de,re,se,ie,Ce,pe,me,Pe,P,H,he,We;function tn(M){t[27](M)}function nn(M){t[28](M)}let tt={minWidth:12,minHeight:12,maxHeight:5e3,maxWidth:5e3};t[0]!==void 0&&(tt.width=t[0]),t[2]!==void 0&&(tt.aspectRatio=t[2]),r=new jt({props:tt}),Q.push(()=>ee(r,"width",tn)),Q.push(()=>ee(r,"aspectRatio",nn));function rn(M){t[29](M)}let ct={tabs:[{label:"None",value:"none"},{label:"Ordered",value:"ordered"},{label:"Error Diffusion",value:"error_diffusion"}]};t[8]!==void 0&&(ct.selected=t[8]),b=new pi({props:ct}),Q.push(()=>ee(b,"selected",rn));function sn(M){t[30](M)}function on(M){t[31](M)}function ln(M){t[32](M)}let Ve={};t[12]!==void 0&&(Ve.diffusionStrength=t[12]),t[13]!==void 0&&(Ve.diffusionMatrix=t[13]),t[14]!==void 0&&(Ve.diffusionOriginX=t[14]),T=new mi({props:Ve}),Q.push(()=>ee(T,"diffusionStrength",sn)),Q.push(()=>ee(T,"diffusionMatrix",on)),Q.push(()=>ee(T,"diffusionOriginX",ln));function an(M){t[33](M)}function un(M){t[34](M)}function fn(M){t[35](M)}let ze={};t[9]!==void 0&&(ze.thresholdMap=t[9]),t[11]!==void 0&&(ze.noiseIntensity=t[11]),t[10]!==void 0&&(ze.threshold=t[10]),O=new Ri({props:ze}),Q.push(()=>ee(O,"thresholdMap",an)),Q.push(()=>ee(O,"noiseIntensity",un)),Q.push(()=>ee(O,"threshold",fn));let x=t[3]&&Yt(t);return{c(){e=E("section"),n=E("div"),i=E("h2"),s=$("Output Options"),o=R(),Y(r.$$.fragment),u=R(),d=E("div"),f=E("h2"),m=$("Dithering Options"),L=R(),Y(b.$$.fragment),h=R(),p=E("div"),Y(T.$$.fragment),I=R(),N=E("div"),Y(O.$$.fragment),ge=R(),K=E("div"),le=E("h2"),_e=$("Palette"),de=R(),re=E("div"),se=E("div"),ie=E("input"),Ce=R(),pe=E("div"),me=E("label"),Pe=$("Monochrome"),P=R(),x&&x.c(),this.h()},l(M){e=A(M,"SECTION",{class:!0});var z=S(e);n=A(z,"DIV",{});var ve=S(n);i=A(ve,"H2",{class:!0});var Ne=S(i);s=q(Ne,"Output Options"),Ne.forEach(_),o=C(ve),j(r.$$.fragment,ve),ve.forEach(_),u=C(z),d=A(z,"DIV",{class:!0});var oe=S(d);f=A(oe,"H2",{class:!0});var we=S(f);m=q(we,"Dithering Options"),we.forEach(_),L=C(oe),j(b.$$.fragment,oe),h=C(oe),p=A(oe,"DIV",{class:!0});var dt=S(p);j(T.$$.fragment,dt),dt.forEach(_),I=C(oe),N=A(oe,"DIV",{class:!0});var ht=S(N);j(O.$$.fragment,ht),ht.forEach(_),oe.forEach(_),ge=C(z),K=A(z,"DIV",{class:!0});var Ae=S(K);le=A(Ae,"H2",{class:!0});var mt=S(le);_e=q(mt,"Palette"),mt.forEach(_),de=C(Ae),re=A(Ae,"DIV",{class:!0});var He=S(re);se=A(He,"DIV",{class:!0});var gt=S(se);ie=A(gt,"INPUT",{type:!0,id:!0,class:!0}),gt.forEach(_),Ce=C(He),pe=A(He,"DIV",{class:!0});var _t=S(pe);me=A(_t,"LABEL",{for:!0,class:!0});var pt=S(me);Pe=q(pt,"Monochrome"),pt.forEach(_),_t.forEach(_),He.forEach(_),P=C(Ae),x&&x.l(Ae),Ae.forEach(_),z.forEach(_),this.h()},h(){c(i,"class","text-base font-semibold leading-7 text-black mb-4"),c(f,"class","text-base font-semibold leading-7 text-black mb-2"),c(p,"class",v=t[8]==="error_diffusion"?"contents":"hidden"),c(N,"class",ne=t[8]==="ordered"?"contents":"hidden"),c(d,"class","grid gap-4"),c(le,"class","text-base font-semibold leading-7 text-black mb-2"),c(ie,"type","checkbox"),c(ie,"id","monochrome"),c(ie,"class","h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600"),c(se,"class","flex h-6 items-center"),c(me,"for","monochrome"),c(me,"class","font-medium text-gray-900"),c(pe,"class","ml-3 text-sm leading-6"),c(re,"class","relative flex items-start"),c(K,"class","grid gap-3"),c(e,"class","grid gap-8 pt-8 px-4 safe-padding-bottom svelte-1b7r98h")},m(M,z){B(M,e,z),g(e,n),g(n,i),g(i,s),g(n,o),G(r,n,null),g(e,u),g(e,d),g(d,f),g(f,m),g(d,L),G(b,d,null),g(d,h),g(d,p),G(T,p,null),g(d,I),g(d,N),G(O,N,null),g(e,ge),g(e,K),g(K,le),g(le,_e),g(K,de),g(K,re),g(re,se),g(se,ie),ie.checked=t[3],g(re,Ce),g(re,pe),g(pe,me),g(me,Pe),g(K,P),x&&x.m(K,null),H=!0,he||(We=J(ie,"change",t[36]),he=!0)},p(M,z){const ve={};!l&&z[0]&1&&(l=!0,ve.width=M[0],te(()=>l=!1)),!a&&z[0]&4&&(a=!0,ve.aspectRatio=M[2],te(()=>a=!1)),r.$set(ve);const Ne={};!y&&z[0]&256&&(y=!0,Ne.selected=M[8],te(()=>y=!1)),b.$set(Ne);const oe={};!w&&z[0]&4096&&(w=!0,oe.diffusionStrength=M[12],te(()=>w=!1)),!k&&z[0]&8192&&(k=!0,oe.diffusionMatrix=M[13],te(()=>k=!1)),!D&&z[0]&16384&&(D=!0,oe.diffusionOriginX=M[14],te(()=>D=!1)),T.$set(oe),(!H||z[0]&256&&v!==(v=M[8]==="error_diffusion"?"contents":"hidden"))&&c(p,"class",v);const we={};!W&&z[0]&512&&(W=!0,we.thresholdMap=M[9],te(()=>W=!1)),!X&&z[0]&2048&&(X=!0,we.noiseIntensity=M[11],te(()=>X=!1)),!V&&z[0]&1024&&(V=!0,we.threshold=M[10],te(()=>V=!1)),O.$set(we),(!H||z[0]&256&&ne!==(ne=M[8]==="ordered"?"contents":"hidden"))&&c(N,"class",ne),z[0]&8&&(ie.checked=M[3]),M[3]?x?x.p(M,z):(x=Yt(M),x.c(),x.m(K,null)):x&&(x.d(1),x=null)},i(M){H||(U(r.$$.fragment,M),U(b.$$.fragment,M),U(T.$$.fragment,M),U(O.$$.fragment,M),H=!0)},o(M){F(r.$$.fragment,M),F(b.$$.fragment,M),F(T.$$.fragment,M),F(O.$$.fragment,M),H=!1},d(M){M&&_(e),Z(r),Z(b),Z(T),Z(O),x&&x.d(),he=!1,We()}}}function Yi(t){let e,n,i;return e=new Re({props:{src:kn,class:"w-4 h-4"}}),{c(){Y(e.$$.fragment),n=$(`
					Save`)},l(s){j(e.$$.fragment,s),n=q(s,`
					Save`)},m(s,o){G(e,s,o),B(s,n,o),i=!0},p:ae,i(s){i||(U(e.$$.fragment,s),i=!0)},o(s){F(e.$$.fragment,s),i=!1},d(s){Z(e,s),s&&_(n)}}}function ji(t){let e,n,i,s,o;return s=new Nn({props:{disabled:!t[1],$$slots:{default:[Yi]},$$scope:{ctx:t}}}),s.$on("click",t[19]),{c(){e=E("h1"),n=$("Options"),i=R(),Y(s.$$.fragment),this.h()},l(r){e=A(r,"H1",{class:!0});var l=S(e);n=q(l,"Options"),l.forEach(_),i=C(r),j(s.$$.fragment,r),this.h()},h(){c(e,"class","font-bold")},m(r,l){B(r,e,l),g(e,n),B(r,i,l),G(s,r,l),o=!0},p(r,l){const a={};l[0]&2&&(a.disabled=!r[1]),l[1]&2048&&(a.$$scope={dirty:l,ctx:r}),s.$set(a)},i(r){o||(U(s.$$.fragment,r),o=!0)},o(r){F(s.$$.fragment,r),o=!1},d(r){r&&_(e),r&&_(i),Z(s,r)}}}function Gi(t){let e,n,i,s,o,r,l,a,u,d,f,m;const L=[Xi,Oi],b=[];function y(h,p){return h[7]&&h[1]?0:1}return o=y(t),r=b[o]=L[o](t),u=new Ui({props:{open:t[16],$$slots:{header:[ji],default:[Hi]},$$scope:{ctx:t}}}),{c(){e=R(),n=R(),i=E("main"),s=E("section"),r.c(),l=R(),a=E("aside"),Y(u.$$.fragment),this.h()},l(h){vn("svelte-1hm2pfs",document.head).forEach(_),e=C(h),n=C(h),i=A(h,"MAIN",{class:!0});var T=S(i);s=A(T,"SECTION",{class:!0});var w=S(s);r.l(w),w.forEach(_),l=C(T),a=A(T,"ASIDE",{class:!0});var k=S(a);j(u.$$.fragment,k),k.forEach(_),T.forEach(_),this.h()},h(){document.title="Dithering",c(s,"class","overflow-hidden select-none fixed inset-0"),c(a,"class","md:w-96 w-full max-h-full absolute bottom-0 left-0 right-0 top-0 md:left-auto z-50 p-2 grid place-items-end touch-none pointer-events-none"),c(i,"class","w-screen max-w-screen h-screen max-h-screen relative bg-gray-300")},m(h,p){B(h,e,p),B(h,n,p),B(h,i,p),g(i,s),b[o].m(s,null),g(i,l),g(i,a),G(u,a,null),d=!0,f||(m=[J(document.body,"drop",ot(t[20])),J(document.body,"dragover",ot(Zi))],f=!0)},p(h,p){let T=o;o=y(h),o===T?b[o].p(h,p):(Ge(),F(b[T],1,1,()=>{b[T]=null}),Ze(),r=b[o],r?r.p(h,p):(r=b[o]=L[o](h),r.c()),U(r,1),r.m(s,null));const w={};p[0]&65536&&(w.open=h[16]),p[0]&32575|p[1]&2048&&(w.$$scope={dirty:p,ctx:h}),u.$set(w)},i(h){d||(U(r),U(u.$$.fragment,h),d=!0)},o(h){F(r),F(u.$$.fragment,h),d=!1},d(h){h&&_(e),h&&_(n),h&&_(i),b[o].d(),Z(u),f=!1,Fe(m)}}}const Zi=()=>{};function $i(t,e,n){let i,s;const o=[Gn,Zn,$n];let r=!1,l="#ede6cc",a="#21263f",u=null,d=300,f=null,m=null;async function L(){u&&await Un(u,"dithered","png")}async function b(P){var he;const H=(he=P.dataTransfer)==null?void 0:he.files[0];if(H){if(!H.type.startsWith("image/")){alert("Please drop an image file");return}try{n(1,f=await St(H))}catch(We){alert("Failed to load image"),console.error(We)}}}async function y(P){const H=P.target.files[0];if(H)try{n(1,f=await St(H))}catch(he){alert("Failed to load image"),console.error(he)}}async function h(P){const H=new Image;H.onload=()=>{n(1,f=H)},H.src=P}let p="ordered",T=null,w=.5,k=.3,D=1,v=[[1]],I=0,N="horizontal",O=!1;bn(()=>{const P=window.matchMedia("(min-width: 768px)");function H(he){n(15,N=he.matches?"horizontal":"vertical"),n(16,O=P.matches)}return P.addEventListener("change",H),H(P),()=>P.removeEventListener("change",H)});function W(P){Q[P?"unshift":"push"](()=>{u=P,n(6,u)})}function X(P){Q[P?"unshift":"push"](()=>{u=P,n(6,u)})}const V=()=>n(1,f=null),ne=P=>h(P);function ge(P){d=P,n(0,d)}function K(P){s=P,n(2,s),n(1,f)}function le(P){p=P,n(8,p)}function _e(P){D=P,n(12,D)}function de(P){v=P,n(13,v)}function re(P){I=P,n(14,I)}function se(P){T=P,n(9,T)}function ie(P){k=P,n(11,k)}function Ce(P){w=P,n(10,w)}function pe(){r=this.checked,n(3,r)}function me(){l=this.value,n(4,l)}function Pe(){a=this.value,n(5,a)}return t.$$.update=()=>{t.$$.dirty[0]&2&&n(2,s=f!=null&&f.width&&(f!=null&&f.height)?f.width/f.height:1),t.$$.dirty[0]&5&&n(17,i=Math.round(d/s)),t.$$.dirty[0]&2&&(f?n(7,m=On(f)):n(7,m=null))},[d,f,s,r,l,a,u,m,p,T,w,k,D,v,I,N,O,i,o,L,b,y,h,W,X,V,ne,ge,K,le,_e,de,re,se,ie,Ce,pe,me,Pe]}class Ji extends ue{constructor(e){super(),fe(this,e,$i,Gi,ce,{},null,[-1,-1])}}export{Ji as component};
