var dn=Object.defineProperty;var fn=(e,t,n)=>t in e?dn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ke=(e,t,n)=>(fn(e,typeof t!="symbol"?t+"":t,n),n);import{S as Ie,i as Le,s as Se,k as _,q as Z,a as M,y as ee,l as v,m as A,r as j,h as p,c as P,z as te,n as c,b as G,G as h,A as ne,N as q,g as B,d as F,B as re,Q as Ne,R as hn,T as Dt,u as gt,H as Te,U as Zt,V as mn,O as Me,P as pn,C as at,D as lt,E as ut,F as ct,W as gn,p as dt,X as Ge,Y as ft,w as me,Z as jt,_ as Ae,J as _n,f as Oe,$ as we,v as xe,M as ht}from"../chunks/index.47904ce3.js";/* empty css                          */import{I as Xe,L as vn,A as En,a as bn,P as An,X as wn}from"../chunks/Icon.6cd62dd7.js";function yn(e){let t,n,r,s,i,o,a,l,u,d,f,m,y,S,I,w,L,D,b,g,T,N,R,U,V,W;return y=new Xe({props:{src:vn,class:"w-4 h-4",solid:!0}}),{c(){t=_("fieldset"),n=_("div"),r=_("label"),s=Z("Width"),i=M(),o=_("div"),a=_("input"),l=M(),u=_("div"),d=Z("px"),f=M(),m=_("span"),ee(y.$$.fragment),S=M(),I=_("div"),w=_("label"),L=Z("Height"),D=M(),b=_("div"),g=_("input"),T=M(),N=_("div"),R=Z("px"),this.h()},l(C){t=v(C,"FIELDSET",{class:!0});var O=A(t);n=v(O,"DIV",{class:!0});var Q=A(n);r=v(Q,"LABEL",{for:!0,class:!0});var ie=A(r);s=j(ie,"Width"),ie.forEach(p),i=P(Q),o=v(Q,"DIV",{class:!0});var se=A(o);a=v(se,"INPUT",{name:!0,id:!0,type:!0,min:!0,max:!0,step:!0,class:!0,placeholder:!0}),l=P(se),u=v(se,"DIV",{class:!0});var J=A(u);d=j(J,"px"),J.forEach(p),se.forEach(p),Q.forEach(p),f=P(O),m=v(O,"SPAN",{class:!0});var pe=A(m);te(y.$$.fragment,pe),pe.forEach(p),S=P(O),I=v(O,"DIV",{class:!0});var oe=A(I);w=v(oe,"LABEL",{for:!0,class:!0});var le=A(w);L=j(le,"Height"),le.forEach(p),D=P(oe),b=v(oe,"DIV",{class:!0});var ue=A(b);g=v(ue,"INPUT",{type:!0,id:!0,name:!0,min:!0,max:!0,step:!0,class:!0,placeholder:!0}),T=P(ue),N=v(ue,"DIV",{class:!0});var k=A(N);R=j(k,"px"),k.forEach(p),ue.forEach(p),oe.forEach(p),O.forEach(p),this.h()},h(){c(r,"for","width-"+e[4]),c(r,"class","block text-sm font-medium leading-6 text-gray-900"),c(a,"name","width"),c(a,"id","width-"+e[4]),c(a,"type","number"),c(a,"min","12"),c(a,"max","3000"),c(a,"step","1"),a.value=e[0],c(a,"class","block w-full rounded-md border-0 py-1.5 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"),c(a,"placeholder","600"),c(u,"class","pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400"),c(o,"class","relative mt-2 rounded-md shadow-sm"),c(n,"class","w-full"),c(m,"class","text-gray-500 pb-2 cursor-not-allowed"),c(w,"for","height-"+e[5]),c(w,"class","block text-sm font-medium leading-6 text-gray-900"),c(g,"type","number"),c(g,"id","height-"+e[5]),c(g,"name","height"),c(g,"min","12"),c(g,"max","3000"),c(g,"step","1"),g.value=e[1],c(g,"class","block w-full rounded-md border-0 py-1.5 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"),c(g,"placeholder","340"),c(N,"class","pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400"),c(b,"class","relative mt-2 rounded-md shadow-sm"),c(I,"class","w-full"),c(t,"class","flex gap-3 items-end justify-between")},m(C,O){G(C,t,O),h(t,n),h(n,r),h(r,s),h(n,i),h(n,o),h(o,a),h(o,l),h(o,u),h(u,d),h(t,f),h(t,m),ne(y,m,null),h(t,S),h(t,I),h(I,w),h(w,L),h(I,D),h(I,b),h(b,g),h(b,T),h(b,N),h(N,R),U=!0,V||(W=[q(a,"input",e[2]),q(g,"input",e[3])],V=!0)},p(C,[O]){(!U||O&1&&a.value!==C[0])&&(a.value=C[0]),(!U||O&2&&g.value!==C[1])&&(g.value=C[1])},i(C){U||(B(y.$$.fragment,C),U=!0)},o(C){F(y.$$.fragment,C),U=!1},d(C){C&&p(t),re(y),V=!1,Ne(W)}}}function kt(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}function Tn(e,t,n){let r,{width:s}=t,{aspectRatio:i}=t;function o(d){const f=d.target.value;f&&n(0,s=f)}function a(d){const f=d.target.value;f&&n(0,s=Math.round(i*f))}let l=kt(),u=kt();return e.$$set=d=>{"width"in d&&n(0,s=d.width),"aspectRatio"in d&&n(6,i=d.aspectRatio)},e.$$.update=()=>{e.$$.dirty&65&&n(1,r=Math.round(s/i))},[s,r,o,a,l,u,i]}class qt extends Ie{constructor(t){super(),Le(this,t,Tn,yn,Se,{width:0,aspectRatio:6})}}function Ct(e,t,n){const r=e.slice();return r[6]=t[n],r}function Mt(e){let t,n=e[6].name+"",r,s,i;return{c(){t=_("option"),r=Z(n),this.h()},l(o){t=v(o,"OPTION",{});var a=A(t);r=j(a,n),a.forEach(p),this.h()},h(){t.__value=s=e[6].value,t.value=t.__value,t.selected=i=e[6].value===e[0]},m(o,a){G(o,t,a),h(t,r)},p(o,a){a&2&&n!==(n=o[6].name+"")&&gt(r,n),a&2&&s!==(s=o[6].value)&&(t.__value=s,t.value=t.__value),a&3&&i!==(i=o[6].value===o[0])&&(t.selected=i)},d(o){o&&p(t)}}}function In(e){let t,n,r,s,i,o,a,l=e[1],u=[];for(let d=0;d<l.length;d+=1)u[d]=Mt(Ct(e,l,d));return{c(){t=_("div"),n=_("label"),r=Z(e[2]),s=M(),i=_("select");for(let d=0;d<u.length;d+=1)u[d].c();this.h()},l(d){t=v(d,"DIV",{});var f=A(t);n=v(f,"LABEL",{for:!0,class:!0});var m=A(n);r=j(m,e[2]),m.forEach(p),s=P(f),i=v(f,"SELECT",{id:!0,name:!0,class:!0});var y=A(i);for(let S=0;S<u.length;S+=1)u[S].l(y);y.forEach(p),f.forEach(p),this.h()},h(){c(n,"for",e[4]),c(n,"class","block text-sm font-medium leading-6 text-gray-900"),c(i,"id",e[4]),c(i,"name",e[3]),c(i,"class","mt-2 block w-full rounded-md border-0 py-1.5 pl-3 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-indigo-600 sm:text-sm sm:leading-6"),e[0]===void 0&&hn(()=>e[5].call(i))},m(d,f){G(d,t,f),h(t,n),h(n,r),h(t,s),h(t,i);for(let m=0;m<u.length;m+=1)u[m]&&u[m].m(i,null);Dt(i,e[0],!0),o||(a=q(i,"change",e[5]),o=!0)},p(d,[f]){if(f&4&&gt(r,d[2]),f&3){l=d[1];let m;for(m=0;m<l.length;m+=1){const y=Ct(d,l,m);u[m]?u[m].p(y,f):(u[m]=Mt(y),u[m].c(),u[m].m(i,null))}for(;m<u.length;m+=1)u[m].d(1);u.length=l.length}f&8&&c(i,"name",d[3]),f&3&&Dt(i,d[0])},i:Te,o:Te,d(d){d&&p(t),Zt(u,d),o=!1,a()}}}function Ln(e,t,n){let{options:r}=t,{selected:s}=t,{label:i}=t,{name:o=void 0}=t,a=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);function l(){s=mn(this),n(0,s),n(1,r)}return e.$$set=u=>{"options"in u&&n(1,r=u.options),"selected"in u&&n(0,s=u.selected),"label"in u&&n(2,i=u.label),"name"in u&&n(3,o=u.name)},[s,r,i,o,a,l]}class Sn extends Ie{constructor(t){super(),Le(this,t,Ln,In,Se,{options:1,selected:0,label:2,name:3})}}function Rn(e){let t,n,r,s,i,o,a;return{c(){t=_("div"),n=_("label"),r=Z(e[1]),s=M(),i=_("input"),this.h()},l(l){t=v(l,"DIV",{});var u=A(t);n=v(u,"LABEL",{for:!0,class:!0});var d=A(n);r=j(d,e[1]),d.forEach(p),s=P(u),i=v(u,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0,name:!0,class:!0}),u.forEach(p),this.h()},h(){c(n,"for",e[6]),c(n,"class","block mb-2 text-sm font-medium text-gray-900 dark:text-white"),c(i,"id",e[6]),c(i,"type","range"),c(i,"min",e[3]),c(i,"max",e[4]),c(i,"step",e[5]),c(i,"name",e[2]),c(i,"class","w-full h-1.5 mb-6 bg-white ring-1 ring-gray-300 shadow-sm rounded-lg appearance-none cursor-pointer accent-indigo-600 dark:bg-gray-700")},m(l,u){G(l,t,u),h(t,n),h(n,r),h(t,s),h(t,i),Me(i,e[0]),o||(a=[q(i,"change",e[7]),q(i,"input",e[7])],o=!0)},p(l,[u]){u&2&&gt(r,l[1]),u&8&&c(i,"min",l[3]),u&16&&c(i,"max",l[4]),u&32&&c(i,"step",l[5]),u&4&&c(i,"name",l[2]),u&1&&Me(i,l[0])},i:Te,o:Te,d(l){l&&p(t),o=!1,Ne(a)}}}function Dn(e,t,n){let{label:r}=t,{name:s=void 0}=t,{min:i=null}=t,{max:o=null}=t,{value:a=0}=t,{step:l=1}=t,u=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);function d(){a=pn(this.value),n(0,a)}return e.$$set=f=>{"label"in f&&n(1,r=f.label),"name"in f&&n(2,s=f.name),"min"in f&&n(3,i=f.min),"max"in f&&n(4,o=f.max),"value"in f&&n(0,a=f.value),"step"in f&&n(5,l=f.step)},[a,r,s,i,o,l,u,d]}class mt extends Ie{constructor(t){super(),Le(this,t,Dn,Rn,Se,{label:1,name:2,min:3,max:4,value:0,step:5})}}var kn="precision highp float;attribute vec2 position;varying vec2 fragCoord;void main(){fragCoord.x=position.x*0.5+0.5;fragCoord.y=position.y*0.5+0.5;gl_Position=vec4(position,0.0,1.0);}",Cn="precision highp float;varying vec2 fragCoord;uniform sampler2D uSampler;uniform float uThreshold;uniform sampler2D uNoiseSampler;uniform vec2 uNoiseSamplerSize;uniform float uNoise;uniform float uMonochrome;uniform vec2 uSize;uniform vec3 uDarkColor;uniform vec3 uLightColor;void main(void){vec2 imgPixel=vec2(fragCoord.x*uSize.x,fragCoord.y*uSize.y);vec2 noisePixel=vec2(mod(imgPixel.x,uNoiseSamplerSize.x),mod(imgPixel.y,uNoiseSamplerSize.y));vec2 noiseUV=vec2(noisePixel.x/uNoiseSamplerSize.x,noisePixel.y/uNoiseSamplerSize.y);float noise=(texture2D(uNoiseSampler,noiseUV).r-0.5)*2.0*uNoise;vec4 color=texture2D(uSampler,fragCoord);float gray=dot(color.rgb,vec3(0.299,0.587,0.114));color.r=color.r*(1.0-uMonochrome)+gray*uMonochrome;color.g=color.g*(1.0-uMonochrome)+gray*uMonochrome;color.b=color.b*(1.0-uMonochrome)+gray*uMonochrome;vec3 thresholds=vec3(step(uThreshold,color.r+noise),step(uThreshold,color.g+noise),step(uThreshold,color.b+noise));if(uMonochrome>0.0){color.rgb=vec3(mix(uDarkColor.r,uLightColor.r,thresholds.r),mix(uDarkColor.g,uLightColor.g,thresholds.g),mix(uDarkColor.b,uLightColor.b,thresholds.b));}else{color.rgb=thresholds;}gl_FragColor=color;}";function Mn(e,t,n){const r=Pt(e,e.VERTEX_SHADER,t),s=Pt(e,e.FRAGMENT_SHADER,n),i=e.createProgram();if(!i)throw new Error("Failed to create shader program");if(e.attachShader(i,r),e.attachShader(i,s),e.linkProgram(i),!e.getProgramParameter(i,e.LINK_STATUS))throw Error(`Unable to initialize the shader program: ${e.getProgramInfoLog(i)}`);return i}function Pt(e,t,n){const r=e.createShader(t);if(!r)throw new Error("Failed to create shader");if(e.shaderSource(r,n),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))throw Error(`An error occurred compiling the shaders: ${e.getShaderInfoLog(r)}`);return r}function Pn(e){const t=e.createTexture();if(!t)throw new Error("Failed to create texture");e.bindTexture(e.TEXTURE_2D,t);const n=0,r=e.RGBA,s=1,i=1,o=0,a=e.RGBA,l=e.UNSIGNED_BYTE,u=new Uint8Array([0,0,255,255]);return e.texImage2D(e.TEXTURE_2D,n,r,s,i,o,a,l,u),t}function Un(e,t,n){const s=e.RGBA,i=e.RGBA,o=e.UNSIGNED_BYTE;e.bindTexture(e.TEXTURE_2D,t),e.texImage2D(e.TEXTURE_2D,0,s,i,o,n),$e(n.width)&&$e(n.height)?e.generateMipmap(e.TEXTURE_2D):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR))}function $e(e){return(e&e-1)===0}function Bn(e){const t=e.createBuffer(),n=e.createBuffer(),r=[-1,1,-1,-1,1,-1,1,1],s=[3,2,1,3,1,0];return e.bindBuffer(e.ARRAY_BUFFER,t),e.bufferData(e.ARRAY_BUFFER,new Float32Array(r),e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(s),e.STATIC_DRAW),{vertex_buffer:t,index_buffer:n}}function Nn(e,t){const n=e.createTexture();if(!n)throw new Error("Failed to create texture");return e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),$e(t.width)&&$e(t.height)?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR)),n}function Xn(e,t){let n=t;const r=e.getContext("webgl",{preserveDrawingBuffer:!0});if(!r){alert("WebGL not supported");return}const s=()=>{Un(r,D,n.image)};r.clearColor(0,0,0,1),r.clear(r.COLOR_BUFFER_BIT);const i=Mn(r,kn,Cn),{vertex_buffer:o,index_buffer:a}=Bn(r),l=r.getAttribLocation(i,"position");r.vertexAttribPointer(l,2,r.FLOAT,!1,0,0),r.enableVertexAttribArray(l);const u=r.getUniformLocation(i,"uSampler"),d=r.getUniformLocation(i,"uThreshold"),f=r.getUniformLocation(i,"uNoiseSampler"),m=r.getUniformLocation(i,"uNoise"),y=r.getUniformLocation(i,"uSize"),S=r.getUniformLocation(i,"uNoiseSamplerSize"),I=r.getUniformLocation(i,"uMonochrome"),w=r.getUniformLocation(i,"uDarkColor"),L=r.getUniformLocation(i,"uLightColor"),D=Pn(r);r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!0),s();let b,g;r.useProgram(i);let T=null;const N=()=>{b&&r.deleteTexture(b),b=Nn(r,n.thresholdMap),g={width:n.thresholdMap.width,height:n.thresholdMap.height}};N();const R=()=>{r.viewport(0,0,n.output_width,n.output_height),r.clearColor(0,0,0,1),r.clear(r.COLOR_BUFFER_BIT),r.bindBuffer(r.ARRAY_BUFFER,o),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,a),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,D),r.uniform1i(u,0),r.activeTexture(r.TEXTURE1),r.bindTexture(r.TEXTURE_2D,b),r.uniform1i(f,1),r.uniform2f(S,g.width,g.height),r.uniform1f(d,n.threshold),r.uniform1f(m,n.noiseIntensity),r.uniform2f(y,n.output_width,n.output_height),r.uniform1f(I,n.monochrome?1:0),r.uniform3f(w,...Ut(n.colorDark)),r.uniform3f(L,...Ut(n.colorLight)),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT),r.drawElements(r.TRIANGLES,6,r.UNSIGNED_SHORT,0)};function U(){T=requestAnimationFrame(()=>{R(),T=null})}return U(),{update(V){const W=n.image!==V.image,C=n.thresholdMap!==V.thresholdMap;n=V,W&&s(),C&&N(),U()},destroy(){T!==null&&cancelAnimationFrame(T)}}}function Ut(e){const t=parseInt(e.slice(1,3),16)/255,n=parseInt(e.slice(3,5),16)/255,r=parseInt(e.slice(5,7),16)/255;return[t,n,r]}function Fn(e){let t,n,r,s,i;const o=e[3].default,a=at(o,e,e[2],null);return{c(){t=_("button"),a&&a.c(),this.h()},l(l){t=v(l,"BUTTON",{type:!0,class:!0});var u=A(t);a&&a.l(u),u.forEach(p),this.h()},h(){t.disabled=e[0],c(t,"type","button"),c(t,"class",n=e[1][e[0]?"disabled":"normal"]+" rounded-md w-full px-2.5 py-1.5 text-sm font-semibold focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 flex items-center justify-center gap-2")},m(l,u){G(l,t,u),a&&a.m(t,null),r=!0,s||(i=q(t,"click",e[4]),s=!0)},p(l,[u]){a&&a.p&&(!r||u&4)&&lt(a,o,l,l[2],r?ct(o,l[2],u,null):ut(l[2]),null),(!r||u&1)&&(t.disabled=l[0]),(!r||u&1&&n!==(n=l[1][l[0]?"disabled":"normal"]+" rounded-md w-full px-2.5 py-1.5 text-sm font-semibold focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 flex items-center justify-center gap-2"))&&c(t,"class",n)},i(l){r||(B(a,l),r=!0)},o(l){F(a,l),r=!1},d(l){l&&p(t),a&&a.d(l),s=!1,i()}}}function Vn(e,t,n){let{$$slots:r={},$$scope:s}=t,{disabled:i=!1}=t;const o={normal:"bg-indigo-600 text-white shadow-sm hover:bg-indigo-500",disabled:"bg-gray-200 text-gray-400 shadow-none cursor-not-allowed"};function a(l){gn.call(this,e,l)}return e.$$set=l=>{"disabled"in l&&n(0,i=l.disabled),"$$scope"in l&&n(2,s=l.$$scope)},[i,o,s,r,a]}class Wn extends Ie{constructor(t){super(),Le(this,t,Vn,Fn,Se,{disabled:0})}}async function On(e,t,n="png"){const r=new OffscreenCanvas(e.width,e.height),s=r.getContext("2d");if(!s)return;s.drawImage(e,0,0,e.width,e.height);const i=await r.convertToBlob({type:"image/"+n,quality:1}),o=URL.createObjectURL(i),a=document.createElement("a");a.download=`${t}.${n}`,a.href=o,a.click(),a.remove(),URL.revokeObjectURL(o)}function Bt(e){return new Promise((t,n)=>{e.type.startsWith("image/")||n(new Error("Not an image file"));const r=new FileReader;r.onload=s=>{if(typeof r.result!="string")return;const i=new Image;i.onload=()=>{t(i)},i.onerror=o=>{n(o)},i.src=r.result},r.onerror=s=>{n(s)},r.readAsDataURL(e)})}var xn=class extends EventTarget{dispatchTypedEvent(e,t){return super.dispatchEvent(t)}};class be{constructor(t){this.id=-1,this.nativePointer=t,this.pageX=t.pageX,this.pageY=t.pageY,this.clientX=t.clientX,this.clientY=t.clientY,self.Touch&&t instanceof Touch?this.id=t.identifier:Ue(t)&&(this.id=t.pointerId)}getCoalesced(){if("getCoalescedEvents"in this.nativePointer){const t=this.nativePointer.getCoalescedEvents().map(n=>new be(n));if(t.length>0)return t}return[this]}}const Ue=e=>"pointerId"in e,it=e=>"changedTouches"in e,Nt=()=>{};class zn{constructor(t,{start:n=()=>!0,move:r=Nt,end:s=Nt,rawUpdates:i=!1,avoidPointerEvents:o=!1}={}){this._element=t,this.startPointers=[],this.currentPointers=[],this._excludeFromButtonsCheck=new Set,this._pointerStart=a=>{if(Ue(a)&&a.buttons===0)this._excludeFromButtonsCheck.add(a.pointerId);else if(!(a.buttons&1))return;const l=new be(a);this.currentPointers.some(u=>u.id===l.id)||this._triggerPointerStart(l,a)&&(Ue(a)?((a.target&&"setPointerCapture"in a.target?a.target:this._element).setPointerCapture(a.pointerId),this._element.addEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move),this._element.addEventListener("pointerup",this._pointerEnd),this._element.addEventListener("pointercancel",this._pointerEnd)):(window.addEventListener("mousemove",this._move),window.addEventListener("mouseup",this._pointerEnd)))},this._touchStart=a=>{for(const l of Array.from(a.changedTouches))this._triggerPointerStart(new be(l),a)},this._move=a=>{if(!it(a)&&(!Ue(a)||!this._excludeFromButtonsCheck.has(a.pointerId))&&a.buttons===0){this._pointerEnd(a);return}const l=this.currentPointers.slice(),u=it(a)?Array.from(a.changedTouches).map(f=>new be(f)):[new be(a)],d=[];for(const f of u){const m=this.currentPointers.findIndex(y=>y.id===f.id);m!==-1&&(d.push(f),this.currentPointers[m]=f)}d.length!==0&&this._moveCallback(l,d,a)},this._triggerPointerEnd=(a,l)=>{if(!it(l)&&l.buttons&1)return!1;const u=this.currentPointers.findIndex(f=>f.id===a.id);if(u===-1)return!1;this.currentPointers.splice(u,1),this.startPointers.splice(u,1),this._excludeFromButtonsCheck.delete(a.id);const d=!(l.type==="mouseup"||l.type==="touchend"||l.type==="pointerup");return this._endCallback(a,l,d),!0},this._pointerEnd=a=>{if(this._triggerPointerEnd(new be(a),a))if(Ue(a)){if(this.currentPointers.length)return;this._element.removeEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move),this._element.removeEventListener("pointerup",this._pointerEnd),this._element.removeEventListener("pointercancel",this._pointerEnd)}else window.removeEventListener("mousemove",this._move),window.removeEventListener("mouseup",this._pointerEnd)},this._touchEnd=a=>{for(const l of Array.from(a.changedTouches))this._triggerPointerEnd(new be(l),a)},this._startCallback=n,this._moveCallback=r,this._endCallback=s,this._rawUpdates=i&&"onpointerrawupdate"in window,self.PointerEvent&&!o?this._element.addEventListener("pointerdown",this._pointerStart):(this._element.addEventListener("mousedown",this._pointerStart),this._element.addEventListener("touchstart",this._touchStart),this._element.addEventListener("touchmove",this._move),this._element.addEventListener("touchend",this._touchEnd),this._element.addEventListener("touchcancel",this._touchEnd))}stop(){this._element.removeEventListener("pointerdown",this._pointerStart),this._element.removeEventListener("mousedown",this._pointerStart),this._element.removeEventListener("touchstart",this._touchStart),this._element.removeEventListener("touchmove",this._move),this._element.removeEventListener("touchend",this._touchEnd),this._element.removeEventListener("touchcancel",this._touchEnd),this._element.removeEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move),this._element.removeEventListener("pointerup",this._pointerEnd),this._element.removeEventListener("pointercancel",this._pointerEnd),window.removeEventListener("mousemove",this._move),window.removeEventListener("mouseup",this._pointerEnd)}_triggerPointerStart(t,n){return this._startCallback(t,n)?(this.currentPointers.push(t),this.startPointers.push(t),!0):!1}}function Xt(e,t){return t?Math.sqrt((t.clientX-e.clientX)**2+(t.clientY-e.clientY)**2):0}function Ft(e,t){return t?{clientX:(e.clientX+t.clientX)/2,clientY:(e.clientY+t.clientY)/2}:e}function Yn(e,t,n){return Math.min(Math.max(e,t),n)}const qe=class extends xn{constructor(n){super();ke(this,"element");ke(this,"transform",new DOMMatrix);ke(this,"pointerTracker");this.element=n,this.element.addEventListener("wheel",this.onWheel.bind(this)),this.pointerTracker=new zn(this.element,{start:(r,s)=>this.pointerTracker.currentPointers.length===2?!1:(s.preventDefault(),!0),move:r=>{this.onPointerMove(r,this.pointerTracker.currentPointers)},avoidPointerEvents:this.isSafari()}),this.element.addEventListener("wheel",this.onWheel.bind(this))}get x(){return this.transform.e}get y(){return this.transform.f}get scale(){return this.transform.a}set x(n){this.transform.e=n}set y(n){this.transform.f=n}set scale(n){this.transform.a=n,this.transform.d=n}onWheel(n){n.preventDefault();const r=this.element.getBoundingClientRect();let{deltaY:s}=n;const{ctrlKey:i,deltaMode:o}=n;o===1&&(s*=15);const a=s>0,l=i?100:300,u=1-(a?-s:s)/l,d=a?1/u:u,f=n.clientX-r.left,m=n.clientY-r.top;this.applyTransformation({scaleDiff:d,originX:f,originY:m})}applyTransformation(n={}){const{panX:r=0,panY:s=0,originX:i=0,originY:o=0,scaleDiff:a=1}=n,l=new DOMMatrix().translate(i,o).scale(a).translate(-i,-o),u=new DOMMatrix().translate(r,s);l.multiplySelf(u),l.multiplySelf(this.transform);const d=l.a,f=l.e,m=l.f;this.updateTransform(d,f,m)}onPointerMove(n,r){const s=this.element.getBoundingClientRect(),i=Ft(n[0],n[1]),o=Ft(r[0],r[1]),a=i.clientX-s.left,l=i.clientY-s.top,u=Xt(n[0],n[1]),d=Xt(r[0],r[1]),f=u?d/u:1;this.applyTransformation({originX:a,originY:l,scaleDiff:f,panX:o.clientX-i.clientX,panY:o.clientY-i.clientY})}updateTransform(n,r,s){if(n=Yn(n,qe.MIN_SCALE,qe.MAX_SCALE),n===this.scale&&r===this.x&&s===this.y)return;this.x=r,this.y=s,this.scale=n;const i=new CustomEvent("panzoom:change",{bubbles:!0,detail:{x:this.x,y:this.y,scale:this.scale,matrix:this.transform}});this.dispatchTypedEvent("panzoom:change",i)}isSafari(){return/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)}destroy(){this.pointerTracker.stop()}};let Be=qe;ke(Be,"MIN_SCALE",.01),ke(Be,"MAX_SCALE",1e5);const Gn=e=>({}),Vt=e=>({}),$n=e=>({}),Wt=e=>({});function Hn(e){let t,n,r,s,i,o,a,l,u,d,f,m,y,S;const I=e[6].left,w=at(I,e,e[5],Wt),L=e[6].right,D=at(L,e,e[5],Vt);return f=new Xe({props:{src:En,class:"w-6 h-6 text-white"}}),{c(){t=_("div"),n=_("div"),r=_("div"),s=_("div"),w&&w.c(),i=M(),o=_("div"),a=_("div"),D&&D.c(),l=M(),u=_("div"),d=_("div"),ee(f.$$.fragment),this.h()},l(b){t=v(b,"DIV",{class:!0});var g=A(t);n=v(g,"DIV",{class:!0});var T=A(n);r=v(T,"DIV",{class:!0});var N=A(r);s=v(N,"DIV",{style:!0,class:!0});var R=A(s);w&&w.l(R),R.forEach(p),N.forEach(p),i=P(T),o=v(T,"DIV",{class:!0});var U=A(o);a=v(U,"DIV",{style:!0,class:!0});var V=A(a);D&&D.l(V),V.forEach(p),U.forEach(p),T.forEach(p),l=P(g),u=v(g,"DIV",{class:!0});var W=A(u);d=v(W,"DIV",{class:!0});var C=A(d);te(f.$$.fragment,C),C.forEach(p),W.forEach(p),g.forEach(p),this.h()},h(){c(s,"style",e[2]),c(s,"class","w-full h-full origin-top-left grid place-items-center"),c(r,"class","mask-left svelte-90j1r"),c(a,"style",e[2]),c(a,"class","w-full h-full origin-top-left grid place-items-center"),c(o,"class","mask-right svelte-90j1r"),c(n,"class","w-full h-full grid place-items-center"),c(d,"class","w-12 h-12 rounded-full bg-black absolute top-1/2 -translate-x-1/2 left-1/2 grid place-items-center"),c(u,"class","handle relative shadow-lg svelte-90j1r"),c(t,"class","pz-container svelte-90j1r"),dt(t,"--split-point",e[1]+"%")},m(b,g){G(b,t,g),h(t,n),h(n,r),h(r,s),w&&w.m(s,null),h(n,i),h(n,o),h(o,a),D&&D.m(a,null),h(t,l),h(t,u),h(u,d),ne(f,d,null),e[7](t),m=!0,y||(S=[Ge(e[4].call(null,n)),Ge(e[3].call(null,u)),q(u,"pointercancel",ft(jn))],y=!0)},p(b,[g]){w&&w.p&&(!m||g&32)&&lt(w,I,b,b[5],m?ct(I,b[5],g,$n):ut(b[5]),Wt),(!m||g&4)&&c(s,"style",b[2]),D&&D.p&&(!m||g&32)&&lt(D,L,b,b[5],m?ct(L,b[5],g,Gn):ut(b[5]),Vt),(!m||g&4)&&c(a,"style",b[2]),g&2&&dt(t,"--split-point",b[1]+"%")},i(b){m||(B(w,b),B(D,b),B(f.$$.fragment,b),m=!0)},o(b){F(w,b),F(D,b),F(f.$$.fragment,b),m=!1},d(b){b&&p(t),w&&w.d(b),D&&D.d(b),re(f),e[7](null),y=!1,Ne(S)}}}function Zn(e,t,n){return Math.min(Math.max(e,t),n)}const jn=()=>{};function qn(e,t,n){let{$$slots:r={},$$scope:s}=t,i=null,o=50;function a(f){f.addEventListener("pointerdown",m=>{const y=m.clientX,S=o,I=document.body.style.cursor;document.body.style.cursor="col-resize";const w=D=>{const b=i?i.clientWidth:window.innerWidth,g=D.clientX-y,T=S+g/b*100;n(1,o=Zn(T,0,100))},L=()=>{document.body.style.cursor=I,window.removeEventListener("pointermove",w),window.removeEventListener("pointerup",L),window.removeEventListener("pointercancel",L)};window.addEventListener("pointermove",w),window.addEventListener("pointerup",L),window.addEventListener("pointercancel",L)})}let l="transform: none;";function u(f){const m=new Be(f);function y(S){const{x:I,y:w,scale:L,matrix:D}=S.detail;n(2,l=`transform: translate(${I}px, ${w}px) scale(${L})`)}return m.addEventListener("panzoom:change",y),{destroy(){m.removeEventListener("panzoom:change",y),m.destroy()}}}function d(f){me[f?"unshift":"push"](()=>{i=f,n(0,i)})}return e.$$set=f=>{"$$scope"in f&&n(5,s=f.$$scope)},[i,o,l,a,u,s,r,d]}class Qn extends Ie{constructor(t){super(),Le(this,t,qn,Hn,Se,{})}}const Jn=""+new URL("../assets/cat.58b560b7.jpg",import.meta.url).href,Kn="data:image/avif;base64,AAAAHGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZgAAAOptZXRhAAAAAAAAACFoZGxyAAAAAAAAAABwaWN0AAAAAAAAAAAAAAAAAAAAAA5waXRtAAAAAAABAAAAImlsb2MAAAAAREAAAQABAAAAAAEOAAEAAAAAAAAApwAAACNpaW5mAAAAAAABAAAAFWluZmUCAAAAAAEAAGF2MDEAAAAAamlwcnAAAABLaXBjbwAAABNjb2xybmNseAACAAIABoAAAAAMYXYxQ4EEDAAAAAAUaXNwZQAAAAAAAAJyAAACcgAAABBwaXhpAAAAAAMICAgAAAAXaXBtYQAAAAAAAAABAAEEgYIDhAAAAK9tZGF0EgAKChkmZxnHggQEDQgylgERQAEEEEEA9NBi7JFlrqXV1mwMry34uIYK7WRdWYJ/ZZ0EIyWW8aLm92oz5LY0W+l2FiKsHpp4BB3Vrk+iwHuzboac7wmSHHHRWklZdZ2hpEAi4E31lf1tjXnXie8fh4lzApbqjH5Pj7ZN6761WygYVdc2zvJOsflFZstng6rQU/oulDZSO6fQWKvzpO9pseyXBLfms64=",er=""+new URL("../assets/david.0e7e3b46.png",import.meta.url).href;/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Qt=Symbol("Comlink.proxy"),tr=Symbol("Comlink.endpoint"),nr=Symbol("Comlink.releaseProxy"),st=Symbol("Comlink.finalizer"),Ye=Symbol("Comlink.thrown"),Jt=e=>typeof e=="object"&&e!==null||typeof e=="function",rr={canHandle:e=>Jt(e)&&e[Qt],serialize(e){const{port1:t,port2:n}=new MessageChannel;return en(e,t),[n,[n]]},deserialize(e){return e.start(),nn(e)}},ir={canHandle:e=>Jt(e)&&Ye in e,serialize({value:e}){let t;return e instanceof Error?t={isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:t={isError:!1,value:e},[t,[]]},deserialize(e){throw e.isError?Object.assign(new Error(e.value.message),e.value):e.value}},Kt=new Map([["proxy",rr],["throw",ir]]);function sr(e,t){for(const n of e)if(t===n||n==="*"||n instanceof RegExp&&n.test(t))return!0;return!1}function en(e,t=globalThis,n=["*"]){t.addEventListener("message",function r(s){if(!s||!s.data)return;if(!sr(n,s.origin)){console.warn(`Invalid origin '${s.origin}' for comlink proxy`);return}const{id:i,type:o,path:a}=Object.assign({path:[]},s.data),l=(s.data.argumentList||[]).map(ye);let u;try{const d=a.slice(0,-1).reduce((m,y)=>m[y],e),f=a.reduce((m,y)=>m[y],e);switch(o){case"GET":u=f;break;case"SET":d[a.slice(-1)[0]]=ye(s.data.value),u=!0;break;case"APPLY":u=f.apply(d,l);break;case"CONSTRUCT":{const m=new f(...l);u=dr(m)}break;case"ENDPOINT":{const{port1:m,port2:y}=new MessageChannel;en(e,y),u=cr(m,[m])}break;case"RELEASE":u=void 0;break;default:return}}catch(d){u={value:d,[Ye]:0}}Promise.resolve(u).catch(d=>({value:d,[Ye]:0})).then(d=>{const[f,m]=je(d);t.postMessage(Object.assign(Object.assign({},f),{id:i}),m),o==="RELEASE"&&(t.removeEventListener("message",r),tn(t),st in e&&typeof e[st]=="function"&&e[st]())}).catch(d=>{const[f,m]=je({value:new TypeError("Unserializable return value"),[Ye]:0});t.postMessage(Object.assign(Object.assign({},f),{id:i}),m)})}),t.start&&t.start()}function or(e){return e.constructor.name==="MessagePort"}function tn(e){or(e)&&e.close()}function nn(e,t){return pt(e,[],t)}function ze(e){if(e)throw new Error("Proxy has been released and is not useable")}function rn(e){return Ce(e,{type:"RELEASE"}).then(()=>{tn(e)})}const He=new WeakMap,Ze="FinalizationRegistry"in globalThis&&new FinalizationRegistry(e=>{const t=(He.get(e)||0)-1;He.set(e,t),t===0&&rn(e)});function ar(e,t){const n=(He.get(t)||0)+1;He.set(t,n),Ze&&Ze.register(e,t,e)}function lr(e){Ze&&Ze.unregister(e)}function pt(e,t=[],n=function(){}){let r=!1;const s=new Proxy(n,{get(i,o){if(ze(r),o===nr)return()=>{lr(s),rn(e),r=!0};if(o==="then"){if(t.length===0)return{then:()=>s};const a=Ce(e,{type:"GET",path:t.map(l=>l.toString())}).then(ye);return a.then.bind(a)}return pt(e,[...t,o])},set(i,o,a){ze(r);const[l,u]=je(a);return Ce(e,{type:"SET",path:[...t,o].map(d=>d.toString()),value:l},u).then(ye)},apply(i,o,a){ze(r);const l=t[t.length-1];if(l===tr)return Ce(e,{type:"ENDPOINT"}).then(ye);if(l==="bind")return pt(e,t.slice(0,-1));const[u,d]=Ot(a);return Ce(e,{type:"APPLY",path:t.map(f=>f.toString()),argumentList:u},d).then(ye)},construct(i,o){ze(r);const[a,l]=Ot(o);return Ce(e,{type:"CONSTRUCT",path:t.map(u=>u.toString()),argumentList:a},l).then(ye)}});return ar(s,e),s}function ur(e){return Array.prototype.concat.apply([],e)}function Ot(e){const t=e.map(je);return[t.map(n=>n[0]),ur(t.map(n=>n[1]))]}const sn=new WeakMap;function cr(e,t){return sn.set(e,t),e}function dr(e){return Object.assign(e,{[Qt]:!0})}function je(e){for(const[t,n]of Kt)if(n.canHandle(e)){const[r,s]=n.serialize(e);return[{type:"HANDLER",name:t,value:r},s]}return[{type:"RAW",value:e},sn.get(e)||[]]}function ye(e){switch(e.type){case"HANDLER":return Kt.get(e.name).deserialize(e.value);case"RAW":return e.value}}function Ce(e,t,n){return new Promise(r=>{const s=fr();e.addEventListener("message",function i(o){!o.data||!o.data.id||o.data.id!==s||(e.removeEventListener("message",i),r(o.data))}),e.start&&e.start(),e.postMessage(Object.assign({id:s},t),n)})}function fr(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}const hr="data:video/mp2t;base64,aW1wb3J0ICogYXMgQ29tbGluayBmcm9tICJjb21saW5rIgppbXBvcnQgeyB0eXBlIFRocmVzaG9sZE1hcE9wdGlvbnMsIGdlbmVyYXRlVGhyZXNob2xkTWFwSW1hZ2VEYXRhIH0gZnJvbSAiLi9nZW5lcmF0aW9uIjsKCmV4cG9ydCBjb25zdCBUaHJlc2hvbGRNYXBHZW5lcmF0aW9uV29ya2VyID0gewogICAgZ2VuZXJhdGUob3B0aW9uczogVGhyZXNob2xkTWFwT3B0aW9ucyk6IFByb21pc2U8SW1hZ2VEYXRhPiB7CiAgICAgICAgcmV0dXJuIGdlbmVyYXRlVGhyZXNob2xkTWFwSW1hZ2VEYXRhKG9wdGlvbnMpOwogICAgfQp9CgpDb21saW5rLmV4cG9zZShUaHJlc2hvbGRNYXBHZW5lcmF0aW9uV29ya2VyKTs=";let ot=null;async function mr(e){return ot||(ot=nn(new Worker(hr,{type:"module"}))),await ot.generate(e)}function pr(e){let t,n,r,s;return{c(){t=_("canvas"),this.h()},l(i){t=v(i,"CANVAS",{class:!0,style:!0}),A(t).forEach(p),this.h()},h(){c(t,"class","w-full max-h-96 object-contain shadow-lg"),dt(t,"image-rendering","pixelated")},m(i,o){G(i,t,o),r||(s=Ge(n=gr.call(null,t,e[0])),r=!0)},p(i,[o]){n&&jt(n.update)&&o&1&&n.update.call(null,i[0])},i:Te,o:Te,d(i){i&&p(t),r=!1,s()}}}function gr(e,t){const n=e.getContext("2d");if(!n)return;const r=()=>{e.width=t.width,e.height=t.height,n.putImageData(t,0,0)};let s=null;const i=()=>{s||(s=requestAnimationFrame(()=>{s=null,r()}))};return i(),{destroy(){s&&cancelAnimationFrame(s)},update:o=>{t=o,i()}}}function _r(e,t,n){let{imageData:r}=t;return e.$$set=s=>{"imageData"in s&&n(0,r=s.imageData)},[r]}class vr extends Ie{constructor(t){super(),Le(this,t,_r,pr,Se,{imageData:0})}}function xt(e,t,n){const r=e.slice();return r[34]=t[n],r}function Er(e){let t,n,r,s,i,o,a,l,u,d,f,m,y,S,I,w,L,D,b=e[14],g=[];for(let T=0;T<b.length;T+=1)g[T]=zt(xt(e,b,T));return d=new Xe({props:{src:An,class:"w-12 h-12 text-gray-400"}}),{c(){t=_("div"),n=_("div"),r=_("p"),s=Z("Select or Drop an Image to Start"),i=M(),o=_("div");for(let T=0;T<g.length;T+=1)g[T].c();a=M(),l=_("label"),u=_("div"),ee(d.$$.fragment),f=M(),m=_("span"),y=Z("Choose an Image"),S=M(),I=_("input"),this.h()},l(T){t=v(T,"DIV",{class:!0});var N=A(t);n=v(N,"DIV",{class:!0});var R=A(n);r=v(R,"P",{class:!0});var U=A(r);s=j(U,"Select or Drop an Image to Start"),U.forEach(p),i=P(R),o=v(R,"DIV",{class:!0});var V=A(o);for(let Q=0;Q<g.length;Q+=1)g[Q].l(V);a=P(V),l=v(V,"LABEL",{for:!0,class:!0});var W=A(l);u=v(W,"DIV",{class:!0});var C=A(u);te(d.$$.fragment,C),C.forEach(p),f=P(W),m=v(W,"SPAN",{class:!0});var O=A(m);y=j(O,"Choose an Image"),O.forEach(p),S=P(W),I=v(W,"INPUT",{type:!0,class:!0,id:!0,accept:!0}),W.forEach(p),V.forEach(p),R.forEach(p),N.forEach(p),this.h()},h(){c(r,"class","text-2xl text-gray-500"),c(u,"class","grid place-items-center h-full w-full"),c(m,"class","sr-only"),c(I,"type","file"),c(I,"class","sr-only"),c(I,"id","image-input"),c(I,"accept","image/*"),c(l,"for","image-input"),c(l,"class","block spect-square h-24 w-24 object-cover rounded-md shadow-md border-2 border-white bg-white hover:bg-gray-100"),c(o,"class","flex gap-3 justify-center"),c(n,"class","grid gap-4"),c(t,"class","w-full h-full grid place-items-center")},m(T,N){G(T,t,N),h(t,n),h(n,r),h(r,s),h(n,i),h(n,o);for(let R=0;R<g.length;R+=1)g[R]&&g[R].m(o,null);h(o,a),h(o,l),h(l,u),ne(d,u,null),h(l,f),h(l,m),h(m,y),h(l,S),h(l,I),w=!0,L||(D=q(I,"input",e[18]),L=!0)},p(T,N){if(N[0]&540672){b=T[14];let R;for(R=0;R<b.length;R+=1){const U=xt(T,b,R);g[R]?g[R].p(U,N):(g[R]=zt(U),g[R].c(),g[R].m(o,a))}for(;R<g.length;R+=1)g[R].d(1);g.length=b.length}},i(T){w||(B(d.$$.fragment,T),w=!0)},o(T){F(d.$$.fragment,T),w=!1},d(T){T&&p(t),Zt(g,T),re(d),L=!1,D()}}}function br(e){let t,n,r,s,i,o,a,l;return n=new Qn({props:{$$slots:{right:[wr],left:[Ar]},$$scope:{ctx:e}}}),i=new Xe({props:{src:wn,class:"w-5 h-5 text-white"}}),{c(){t=_("div"),ee(n.$$.fragment),r=M(),s=_("button"),ee(i.$$.fragment),this.h()},l(u){t=v(u,"DIV",{class:!0});var d=A(t);te(n.$$.fragment,d),r=P(d),s=v(d,"BUTTON",{class:!0,title:!0});var f=A(s);te(i.$$.fragment,f),f.forEach(p),d.forEach(p),this.h()},h(){c(s,"class","absolute top-0 right-0 m-4 p-2 bg-black bg-opacity-40 rounded-full"),c(s,"title","Close Image & Reset"),c(t,"class","w-full h-full relative")},m(u,d){G(u,t,d),ne(n,t,null),h(t,r),h(t,s),ne(i,s,null),o=!0,a||(l=q(s,"click",e[22]),a=!0)},p(u,d){const f={};d[0]&16344|d[1]&64&&(f.$$scope={dirty:d,ctx:u}),n.$set(f)},i(u){o||(B(n.$$.fragment,u),B(i.$$.fragment,u),o=!0)},o(u){F(n.$$.fragment,u),F(i.$$.fragment,u),o=!1},d(u){u&&p(t),re(n),re(i),a=!1,l()}}}function zt(e){let t,n,r,s,i;function o(){return e[23](e[34])}return{c(){t=_("button"),n=_("img"),this.h()},l(a){t=v(a,"BUTTON",{class:!0});var l=A(t);n=v(l,"IMG",{class:!0,src:!0,alt:!0}),l.forEach(p),this.h()},h(){c(n,"class","aspect-square h-24 w-24 object-cover rounded-md shadow-md border-2 border-white"),ht(n.src,r=e[34])||c(n,"src",r),c(n,"alt",""),c(t,"class","hover:opacity-75 transition-opacity")},m(a,l){G(a,t,l),h(t,n),s||(i=q(t,"click",o),s=!0)},p(a,l){e=a},d(a){a&&p(t),s=!1,i()}}}function Ar(e){let t,n,r;return{c(){t=_("img"),this.h()},l(s){t=v(s,"IMG",{slot:!0,src:!0,alt:!0,style:!0,class:!0}),this.h()},h(){c(t,"slot","left"),ht(t.src,n=e[4].src)||c(t,"src",n),c(t,"alt",""),c(t,"style",r=`width: ${e[3]}px; height: ${e[13]}px`),c(t,"class","pixelated max-w-none svelte-1gkt69q")},m(s,i){G(s,t,i)},p(s,i){i[0]&16&&!ht(t.src,n=s[4].src)&&c(t,"src",n),i[0]&8200&&r!==(r=`width: ${s[3]}px; height: ${s[13]}px`)&&c(t,"style",r)},d(s){s&&p(t)}}}function wr(e){let t,n,r,s,i;return{c(){t=_("canvas"),this.h()},l(o){t=v(o,"CANVAS",{class:!0,slot:!0,style:!0,width:!0,height:!0,"aria-label":!0}),A(t).forEach(p),this.h()},h(){c(t,"class","pixelated svelte-1gkt69q"),c(t,"slot","right"),c(t,"style",n=`width: ${e[3]}px; height: ${e[13]}px`),c(t,"width",e[3]),c(t,"height",e[13]),c(t,"aria-label","Dithered Image")},m(o,a){G(o,t,a),e[21](t),s||(i=Ge(r=Xn.call(null,t,{image:e[4],threshold:e[6],noiseIntensity:e[7],monochrome:e[8],colorLight:e[9],colorDark:e[10],output_width:e[3],output_height:e[13],thresholdMap:e[12]})),s=!0)},p(o,a){a[0]&8200&&n!==(n=`width: ${o[3]}px; height: ${o[13]}px`)&&c(t,"style",n),a[0]&8&&c(t,"width",o[3]),a[0]&8192&&c(t,"height",o[13]),r&&jt(r.update)&&a[0]&14296&&r.update.call(null,{image:o[4],threshold:o[6],noiseIntensity:o[7],monochrome:o[8],colorLight:o[9],colorDark:o[10],output_width:o[3],output_height:o[13],thresholdMap:o[12]})},d(o){o&&p(t),e[21](null),s=!1,i()}}}function Yt(e){let t,n,r;function s(o){e[25](o)}let i={label:"Bayer Level ("+e[1]+")",min:0,max:5,step:1};return e[1]!==void 0&&(i.value=e[1]),t=new mt({props:i}),me.push(()=>Ae(t,"value",s)),{c(){ee(t.$$.fragment)},l(o){te(t.$$.fragment,o)},m(o,a){ne(t,o,a),r=!0},p(o,a){const l={};a[0]&2&&(l.label="Bayer Level ("+o[1]+")"),!n&&a[0]&2&&(n=!0,l.value=o[1],we(()=>n=!1)),t.$set(l)},i(o){r||(B(t.$$.fragment,o),r=!0)},o(o){F(t.$$.fragment,o),r=!1},d(o){re(t,o)}}}function Gt(e){let t,n,r;function s(o){e[26](o)}let i={aspectRatio:1};return e[2]!==void 0&&(i.width=e[2]),t=new qt({props:i}),me.push(()=>Ae(t,"width",s)),{c(){ee(t.$$.fragment)},l(o){te(t.$$.fragment,o)},m(o,a){ne(t,o,a),r=!0},p(o,a){const l={};!n&&a[0]&4&&(n=!0,l.width=o[2],we(()=>n=!1)),t.$set(l)},i(o){r||(B(t.$$.fragment,o),r=!0)},o(o){F(t.$$.fragment,o),r=!1},d(o){re(t,o)}}}function $t(e){let t,n,r;return n=new vr({props:{imageData:e[12]}}),{c(){t=_("div"),ee(n.$$.fragment),this.h()},l(s){t=v(s,"DIV",{class:!0});var i=A(t);te(n.$$.fragment,i),i.forEach(p),this.h()},h(){c(t,"class","w-full aspect-square rounded-lg bg-gray-100 p-8 grid place-items-center")},m(s,i){G(s,t,i),ne(n,t,null),r=!0},p(s,i){const o={};i[0]&4096&&(o.imageData=s[12]),n.$set(o)},i(s){r||(B(n.$$.fragment,s),r=!0)},o(s){F(n.$$.fragment,s),r=!1},d(s){s&&p(t),re(n)}}}function Ht(e){let t,n,r,s,i,o,a,l,u,d,f,m,y,S;return{c(){t=_("fieldset"),n=_("div"),r=_("input"),s=M(),i=_("label"),o=Z("Light"),a=M(),l=_("div"),u=_("input"),d=M(),f=_("label"),m=Z("Dark"),this.h()},l(I){t=v(I,"FIELDSET",{});var w=A(t);n=v(w,"DIV",{class:!0});var L=A(n);r=v(L,"INPUT",{type:!0,name:!0,id:!0}),s=P(L),i=v(L,"LABEL",{for:!0,class:!0});var D=A(i);o=j(D,"Light"),D.forEach(p),L.forEach(p),a=P(w),l=v(w,"DIV",{class:!0});var b=A(l);u=v(b,"INPUT",{type:!0,name:!0,id:!0}),d=P(b),f=v(b,"LABEL",{for:!0,class:!0});var g=A(f);m=j(g,"Dark"),g.forEach(p),b.forEach(p),w.forEach(p),this.h()},h(){c(r,"type","color"),c(r,"name","color-light"),c(r,"id","color-light"),c(i,"for","color-light"),c(i,"class","font-medium text-gray-900"),c(n,"class","flex gap-3"),c(u,"type","color"),c(u,"name","color-dark"),c(u,"id","color-dark"),c(f,"for","color-dark"),c(f,"class","font-medium text-gray-900"),c(l,"class","flex gap-3")},m(I,w){G(I,t,w),h(t,n),h(n,r),Me(r,e[9]),h(n,s),h(n,i),h(i,o),h(t,a),h(t,l),h(l,u),Me(u,e[10]),h(l,d),h(l,f),h(f,m),y||(S=[q(r,"input",e[30]),q(u,"input",e[31])],y=!0)},p(I,w){w[0]&512&&Me(r,I[9]),w[0]&1024&&Me(u,I[10])},d(I){I&&p(t),y=!1,Ne(S)}}}function yr(e){let t,n,r;return t=new Xe({props:{src:bn,class:"w-4 h-4"}}),{c(){ee(t.$$.fragment),n=Z(`
				Save`)},l(s){te(t.$$.fragment,s),n=j(s,`
				Save`)},m(s,i){ne(t,s,i),G(s,n,i),r=!0},p:Te,i(s){r||(B(t.$$.fragment,s),r=!0)},o(s){F(t.$$.fragment,s),r=!1},d(s){re(t,s),s&&p(n)}}}function Tr(e){let t,n,r,s,i,o,a,l,u,d,f,m,y,S,I,w,L,D,b,g,T,N,R,U,V,W,C,O,Q,ie,se,J,pe,oe,le,ue,k,$,ae,ge,Qe,Je,ce,Ke,et,tt,Re,he,Fe,nt,_t;const vt=[br,Er],_e=[];function Et(E,X){return E[4]&&E[12]?0:1}i=Et(e),o=_e[i]=vt[i](e);function on(E){e[24](E)}let bt={label:"Dither Mode",options:e[16]};e[0]!==void 0&&(bt.selected=e[0]),S=new Sn({props:bt}),me.push(()=>Ae(S,"selected",on));let x=e[0]==="bayer"&&Yt(e),z=e[0]==="white_noise"&&Gt(e),Y=e[12]&&$t(e);function an(E){e[27](E)}let At={label:"Threshold ("+e[6]+")",min:0,max:1,step:.01};e[6]!==void 0&&(At.value=e[6]),U=new mt({props:At}),me.push(()=>Ae(U,"value",an));function ln(E){e[28](E)}let wt={label:"Noise Intensity ("+e[7]+")",min:0,max:1.5,step:.01};e[7]!==void 0&&(wt.value=e[7]),C=new mt({props:wt}),me.push(()=>Ae(C,"value",ln));let H=e[8]&&Ht(e);function un(E){e[32](E)}function cn(E){e[33](E)}let rt={};return e[3]!==void 0&&(rt.width=e[3]),e[5]!==void 0&&(rt.aspectRatio=e[5]),ce=new qt({props:rt}),me.push(()=>Ae(ce,"width",un)),me.push(()=>Ae(ce,"aspectRatio",cn)),he=new Wn({props:{disabled:!(e[4]&&e[12]),$$slots:{default:[yr]},$$scope:{ctx:e}}}),he.$on("click",e[15]),{c(){t=M(),n=M(),r=_("main"),s=_("section"),o.c(),a=M(),l=_("aside"),u=_("section"),d=_("div"),f=_("h2"),m=Z("Threshold Map"),y=M(),ee(S.$$.fragment),w=M(),x&&x.c(),L=M(),z&&z.c(),D=M(),Y&&Y.c(),b=M(),g=_("div"),T=_("h2"),N=Z("Dithering Options"),R=M(),ee(U.$$.fragment),W=M(),ee(C.$$.fragment),Q=M(),ie=_("div"),se=_("div"),J=_("input"),pe=M(),oe=_("div"),le=_("label"),ue=Z("Monochrome"),k=M(),H&&H.c(),$=M(),ae=_("div"),ge=_("h2"),Qe=Z("Output Options"),Je=M(),ee(ce.$$.fragment),tt=M(),Re=_("footer"),ee(he.$$.fragment),this.h()},l(E){_n("svelte-1hm2pfs",document.head).forEach(p),t=P(E),n=P(E),r=v(E,"MAIN",{class:!0});var ve=A(r);s=v(ve,"SECTION",{class:!0});var Pe=A(s);o.l(Pe),Pe.forEach(p),a=P(ve),l=v(ve,"ASIDE",{class:!0});var Ee=A(l);u=v(Ee,"SECTION",{class:!0});var de=A(u);d=v(de,"DIV",{class:!0});var K=A(d);f=v(K,"H2",{class:!0});var De=A(f);m=j(De,"Threshold Map"),De.forEach(p),y=P(K),te(S.$$.fragment,K),w=P(K),x&&x.l(K),L=P(K),z&&z.l(K),D=P(K),Y&&Y.l(K),K.forEach(p),b=P(de),g=v(de,"DIV",{class:!0});var fe=A(g);T=v(fe,"H2",{class:!0});var yt=A(T);N=j(yt,"Dithering Options"),yt.forEach(p),R=P(fe),te(U.$$.fragment,fe),W=P(fe),te(C.$$.fragment,fe),Q=P(fe),ie=v(fe,"DIV",{class:!0});var Ve=A(ie);se=v(Ve,"DIV",{class:!0});var Tt=A(se);J=v(Tt,"INPUT",{type:!0,id:!0,class:!0}),Tt.forEach(p),pe=P(Ve),oe=v(Ve,"DIV",{class:!0});var It=A(oe);le=v(It,"LABEL",{for:!0,class:!0});var Lt=A(le);ue=j(Lt,"Monochrome"),Lt.forEach(p),It.forEach(p),Ve.forEach(p),k=P(fe),H&&H.l(fe),fe.forEach(p),$=P(de),ae=v(de,"DIV",{class:!0});var We=A(ae);ge=v(We,"H2",{class:!0});var St=A(ge);Qe=j(St,"Output Options"),St.forEach(p),Je=P(We),te(ce.$$.fragment,We),We.forEach(p),de.forEach(p),tt=P(Ee),Re=v(Ee,"FOOTER",{class:!0});var Rt=A(Re);te(he.$$.fragment,Rt),Rt.forEach(p),Ee.forEach(p),ve.forEach(p),this.h()},h(){document.title="Dithering",c(s,"class","flex-1 overflow-hidden select-none"),c(f,"class","text-base font-semibold leading-7 text-black mb-2"),c(d,"class","grid gap-3"),c(T,"class","text-base font-semibold leading-7 text-black mb-2"),c(J,"type","checkbox"),c(J,"id","monochrome"),c(J,"class","h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600"),c(se,"class","flex h-6 items-center"),c(le,"for","monochrome"),c(le,"class","font-medium text-gray-900"),c(oe,"class","ml-3 text-sm leading-6"),c(ie,"class","relative flex items-start"),c(g,"class","grid gap-3"),c(ge,"class","text-base font-semibold leading-7 text-black mb-4"),c(ae,"class","border-t border-gray-100 py-4"),c(u,"class","grid gap-5 overflow-y-auto overflow-x-visible py-8 px-4"),c(Re,"class","py-4 px-4 flex-shrink-0"),c(l,"class","bg-white w-full md:max-w-md border-t md:border-t-0 md:border-l border-l-0 border-gray-100 z-50 overflow-y-hidden md:h-full flex-1 shadow-lg flex flex-col divide-y divide-gray-200 justify-between"),c(r,"class","w-screen max-w-screen h-screen max-h-screen flex md:flex-row flex-col bg-gray-300")},m(E,X){G(E,t,X),G(E,n,X),G(E,r,X),h(r,s),_e[i].m(s,null),h(r,a),h(r,l),h(l,u),h(u,d),h(d,f),h(f,m),h(d,y),ne(S,d,null),h(d,w),x&&x.m(d,null),h(d,L),z&&z.m(d,null),h(d,D),Y&&Y.m(d,null),h(u,b),h(u,g),h(g,T),h(T,N),h(g,R),ne(U,g,null),h(g,W),ne(C,g,null),h(g,Q),h(g,ie),h(ie,se),h(se,J),J.checked=e[8],h(ie,pe),h(ie,oe),h(oe,le),h(le,ue),h(g,k),H&&H.m(g,null),h(u,$),h(u,ae),h(ae,ge),h(ge,Qe),h(ae,Je),ne(ce,ae,null),h(l,tt),h(l,Re),ne(he,Re,null),Fe=!0,nt||(_t=[q(document.body,"drop",ft(e[17])),q(document.body,"dragover",ft(Ir)),q(J,"change",e[29])],nt=!0)},p(E,X){let ve=i;i=Et(E),i===ve?_e[i].p(E,X):(xe(),F(_e[ve],1,1,()=>{_e[ve]=null}),Oe(),o=_e[i],o?o.p(E,X):(o=_e[i]=vt[i](E),o.c()),B(o,1),o.m(s,null));const Pe={};!I&&X[0]&1&&(I=!0,Pe.selected=E[0],we(()=>I=!1)),S.$set(Pe),E[0]==="bayer"?x?(x.p(E,X),X[0]&1&&B(x,1)):(x=Yt(E),x.c(),B(x,1),x.m(d,L)):x&&(xe(),F(x,1,1,()=>{x=null}),Oe()),E[0]==="white_noise"?z?(z.p(E,X),X[0]&1&&B(z,1)):(z=Gt(E),z.c(),B(z,1),z.m(d,D)):z&&(xe(),F(z,1,1,()=>{z=null}),Oe()),E[12]?Y?(Y.p(E,X),X[0]&4096&&B(Y,1)):(Y=$t(E),Y.c(),B(Y,1),Y.m(d,null)):Y&&(xe(),F(Y,1,1,()=>{Y=null}),Oe());const Ee={};X[0]&64&&(Ee.label="Threshold ("+E[6]+")"),!V&&X[0]&64&&(V=!0,Ee.value=E[6],we(()=>V=!1)),U.$set(Ee);const de={};X[0]&128&&(de.label="Noise Intensity ("+E[7]+")"),!O&&X[0]&128&&(O=!0,de.value=E[7],we(()=>O=!1)),C.$set(de),X[0]&256&&(J.checked=E[8]),E[8]?H?H.p(E,X):(H=Ht(E),H.c(),H.m(g,null)):H&&(H.d(1),H=null);const K={};!Ke&&X[0]&8&&(Ke=!0,K.width=E[3],we(()=>Ke=!1)),!et&&X[0]&32&&(et=!0,K.aspectRatio=E[5],we(()=>et=!1)),ce.$set(K);const De={};X[0]&4112&&(De.disabled=!(E[4]&&E[12])),X[1]&64&&(De.$$scope={dirty:X,ctx:E}),he.$set(De)},i(E){Fe||(B(o),B(S.$$.fragment,E),B(x),B(z),B(Y),B(U.$$.fragment,E),B(C.$$.fragment,E),B(ce.$$.fragment,E),B(he.$$.fragment,E),Fe=!0)},o(E){F(o),F(S.$$.fragment,E),F(x),F(z),F(Y),F(U.$$.fragment,E),F(C.$$.fragment,E),F(ce.$$.fragment,E),F(he.$$.fragment,E),Fe=!1},d(E){E&&p(t),E&&p(n),E&&p(r),_e[i].d(),re(S),x&&x.d(),z&&z.d(),Y&&Y.d(),re(U),re(C),H&&H.d(),re(ce),re(he),nt=!1,Ne(_t)}}}const Ir=()=>{};function Lr(e,t,n){let r,s,i;const o=[Jn,Kn,er];let a=.5,l=.3,u=!1,d="#ede6cc",f="#21263f",m=null,y="blue_noise",S=3,I=256,w=300,L=null;async function D(){m&&await On(m,"dithered","png")}const b=[{name:"Bayer",value:"bayer"},{name:"Blue Noise",value:"blue_noise"},{name:"White Noise",value:"white_noise"}];async function g(k){var ae;const $=(ae=k.dataTransfer)==null?void 0:ae.files[0];if($){if(!$.type.startsWith("image/")){alert("Please drop an image file");return}try{n(4,L=await Bt($))}catch(ge){alert("Failed to load image"),console.error(ge)}}}async function T(k){const $=k.target.files[0];if($)try{n(4,L=await Bt($))}catch(ae){alert("Failed to load image"),console.error(ae)}}async function N(k){const $=new Image;$.onload=()=>{n(4,L=$)},$.src=k}let R=null;function U(k){me[k?"unshift":"push"](()=>{m=k,n(11,m)})}const V=()=>n(4,L=null),W=k=>N(k);function C(k){y=k,n(0,y)}function O(k){S=k,n(1,S)}function Q(k){I=k,n(2,I)}function ie(k){a=k,n(6,a)}function se(k){l=k,n(7,l)}function J(){u=this.checked,n(8,u)}function pe(){d=this.value,n(9,d)}function oe(){f=this.value,n(10,f)}function le(k){w=k,n(3,w)}function ue(k){i=k,n(5,i),n(4,L)}return e.$$.update=()=>{if(e.$$.dirty[0]&4&&n(20,r=I),e.$$.dirty[0]&16&&n(5,i=L!=null&&L.width&&(L!=null&&L.height)?L.width/L.height:1),e.$$.dirty[0]&40&&n(13,s=w/i),e.$$.dirty[0]&1048583&&"ImageData"in globalThis){let k;switch(y){case"bayer":k={mode:"bayer",level:S};break;case"blue_noise":k={mode:"blue_noise"};break;case"white_noise":k={mode:"white_noise",width:I,height:r};break}mr(k).then($=>n(12,R=$))}},[y,S,I,w,L,i,a,l,u,d,f,m,R,s,o,D,b,g,T,N,r,U,V,W,C,O,Q,ie,se,J,pe,oe,le,ue]}class Cr extends Ie{constructor(t){super(),Le(this,t,Lr,Tr,Se,{},null,[-1,-1])}}export{Cr as component};
