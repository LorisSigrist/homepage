var nn=Object.defineProperty;var rn=(e,t,n)=>t in e?nn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Le=(e,t,n)=>(rn(e,typeof t!="symbol"?t+"":t,n),n);import{S as Ae,i as we,s as ye,k as E,q as Z,a as C,y as te,l as b,m as T,r as q,h as g,c as P,z as ne,n as c,b as j,G as h,A as re,N as K,g as U,d as F,B as ie,O as Pe,P as sn,Q as bt,u as ct,H as be,R as xt,T as on,U as Ie,V as an,C as tt,D as nt,E as rt,F as it,W as ln,p as st,X as Oe,Y as ot,w as de,Z as Wt,J as un,f as Fe,_ as _e,$ as ve,v as xe,M as at}from"../chunks/index.70018727.js";import{I as Me,L as cn,A as fn,a as dn,P as hn,X as mn}from"../chunks/Icon.c042314b.js";function pn(e){let t,n,r,o,i,s,a,u,l,f,d,m,y,A,p,w,L,D,_,v,I,B,R,N,O,X;return y=new Me({props:{src:cn,class:"w-4 h-4",solid:!0}}),{c(){t=E("fieldset"),n=E("div"),r=E("label"),o=Z("Width"),i=C(),s=E("div"),a=E("input"),u=C(),l=E("div"),f=Z("px"),d=C(),m=E("span"),te(y.$$.fragment),A=C(),p=E("div"),w=E("label"),L=Z("Height"),D=C(),_=E("div"),v=E("input"),I=C(),B=E("div"),R=Z("px"),this.h()},l(M){t=b(M,"FIELDSET",{class:!0});var W=T(t);n=b(W,"DIV",{class:!0});var G=T(n);r=b(G,"LABEL",{for:!0,class:!0});var se=T(r);o=q(se,"Width"),se.forEach(g),i=P(G),s=b(G,"DIV",{class:!0});var Q=T(s);a=b(Q,"INPUT",{name:!0,id:!0,type:!0,min:!0,max:!0,step:!0,class:!0,placeholder:!0}),u=P(Q),l=b(Q,"DIV",{class:!0});var he=T(l);f=q(he,"px"),he.forEach(g),Q.forEach(g),G.forEach(g),d=P(W),m=b(W,"SPAN",{class:!0});var oe=T(m);ne(y.$$.fragment,oe),oe.forEach(g),A=P(W),p=b(W,"DIV",{class:!0});var J=T(p);w=b(J,"LABEL",{for:!0,class:!0});var me=T(w);L=q(me,"Height"),me.forEach(g),D=P(J),_=b(J,"DIV",{class:!0});var le=T(_);v=b(le,"INPUT",{type:!0,id:!0,name:!0,min:!0,max:!0,step:!0,class:!0,placeholder:!0}),I=P(le),B=b(le,"DIV",{class:!0});var k=T(B);R=q(k,"px"),k.forEach(g),le.forEach(g),J.forEach(g),W.forEach(g),this.h()},h(){c(r,"for","width-"+e[8]),c(r,"class","block text-sm font-medium leading-6 text-gray-900"),c(a,"name","width"),c(a,"id","width-"+e[8]),c(a,"type","number"),c(a,"min",e[3]),c(a,"max",e[1]),c(a,"step","1"),a.value=e[0],c(a,"class","block w-full rounded-md border-0 py-1.5 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"),c(a,"placeholder","600"),c(l,"class","pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400"),c(s,"class","relative mt-2 rounded-md shadow-sm"),c(n,"class","w-full"),c(m,"class","text-gray-500 pb-2 cursor-not-allowed"),c(w,"for","height-"+e[9]),c(w,"class","block text-sm font-medium leading-6 text-gray-900"),c(v,"type","number"),c(v,"id","height-"+e[9]),c(v,"name","height"),c(v,"min",e[4]),c(v,"max",e[2]),c(v,"step","1"),v.value=e[5],c(v,"class","block w-full rounded-md border-0 py-1.5 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"),c(v,"placeholder","340"),c(B,"class","pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400"),c(_,"class","relative mt-2 rounded-md shadow-sm"),c(p,"class","w-full"),c(t,"class","flex gap-3 items-end justify-between")},m(M,W){j(M,t,W),h(t,n),h(n,r),h(r,o),h(n,i),h(n,s),h(s,a),h(s,u),h(s,l),h(l,f),h(t,d),h(t,m),re(y,m,null),h(t,A),h(t,p),h(p,w),h(w,L),h(p,D),h(p,_),h(_,v),h(_,I),h(_,B),h(B,R),N=!0,O||(X=[K(a,"input",e[6]),K(v,"input",e[7])],O=!0)},p(M,[W]){(!N||W&8)&&c(a,"min",M[3]),(!N||W&2)&&c(a,"max",M[1]),(!N||W&1&&a.value!==M[0])&&(a.value=M[0]),(!N||W&16)&&c(v,"min",M[4]),(!N||W&4)&&c(v,"max",M[2]),(!N||W&32&&v.value!==M[5])&&(v.value=M[5])},i(M){N||(U(y.$$.fragment,M),N=!0)},o(M){F(y.$$.fragment,M),N=!1},d(M){M&&g(t),ie(y),O=!1,Pe(X)}}}function At(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}function gn(e,t,n){let r,{width:o}=t,{aspectRatio:i}=t,{maxWidth:s=null}=t,{maxHeight:a=null}=t,{minWidth:u=null}=t,{minHeight:l=null}=t;function f(A){const p=A.target.value;p&&(u!==null&&p<u||s!==null&&p>s||n(0,o=p))}function d(A){const p=A.target.value;p&&(l!==null&&p<l||a!==null&&p>a||n(0,o=Math.round(i*p)))}let m=At(),y=At();return e.$$set=A=>{"width"in A&&n(0,o=A.width),"aspectRatio"in A&&n(10,i=A.aspectRatio),"maxWidth"in A&&n(1,s=A.maxWidth),"maxHeight"in A&&n(2,a=A.maxHeight),"minWidth"in A&&n(3,u=A.minWidth),"minHeight"in A&&n(4,l=A.minHeight)},e.$$.update=()=>{e.$$.dirty&1025&&n(5,r=Math.round(o/i))},[o,s,a,u,l,r,f,d,m,y,i]}class Ot extends Ae{constructor(t){super(),we(this,t,gn,pn,ye,{width:0,aspectRatio:10,maxWidth:1,maxHeight:2,minWidth:3,minHeight:4})}}function wt(e,t,n){const r=e.slice();return r[6]=t[n],r}function yt(e){let t,n=e[6].name+"",r,o,i;return{c(){t=E("option"),r=Z(n),this.h()},l(s){t=b(s,"OPTION",{});var a=T(t);r=q(a,n),a.forEach(g),this.h()},h(){t.__value=o=e[6].value,t.value=t.__value,t.selected=i=e[6].value===e[0]},m(s,a){j(s,t,a),h(t,r)},p(s,a){a&2&&n!==(n=s[6].name+"")&&ct(r,n),a&2&&o!==(o=s[6].value)&&(t.__value=o,t.value=t.__value),a&3&&i!==(i=s[6].value===s[0])&&(t.selected=i)},d(s){s&&g(t)}}}function _n(e){let t,n,r,o,i,s,a,u=e[1],l=[];for(let f=0;f<u.length;f+=1)l[f]=yt(wt(e,u,f));return{c(){t=E("div"),n=E("label"),r=Z(e[2]),o=C(),i=E("select");for(let f=0;f<l.length;f+=1)l[f].c();this.h()},l(f){t=b(f,"DIV",{});var d=T(t);n=b(d,"LABEL",{for:!0,class:!0});var m=T(n);r=q(m,e[2]),m.forEach(g),o=P(d),i=b(d,"SELECT",{id:!0,name:!0,class:!0});var y=T(i);for(let A=0;A<l.length;A+=1)l[A].l(y);y.forEach(g),d.forEach(g),this.h()},h(){c(n,"for",e[4]),c(n,"class","block text-sm font-medium leading-6 text-gray-900"),c(i,"id",e[4]),c(i,"name",e[3]),c(i,"class","mt-2 block w-full rounded-md border-0 py-1.5 pl-3 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-indigo-600 sm:text-sm sm:leading-6"),e[0]===void 0&&sn(()=>e[5].call(i))},m(f,d){j(f,t,d),h(t,n),h(n,r),h(t,o),h(t,i);for(let m=0;m<l.length;m+=1)l[m]&&l[m].m(i,null);bt(i,e[0],!0),s||(a=K(i,"change",e[5]),s=!0)},p(f,[d]){if(d&4&&ct(r,f[2]),d&3){u=f[1];let m;for(m=0;m<u.length;m+=1){const y=wt(f,u,m);l[m]?l[m].p(y,d):(l[m]=yt(y),l[m].c(),l[m].m(i,null))}for(;m<l.length;m+=1)l[m].d(1);l.length=u.length}d&8&&c(i,"name",f[3]),d&3&&bt(i,f[0])},i:be,o:be,d(f){f&&g(t),xt(l,f),s=!1,a()}}}function vn(e,t,n){let{options:r}=t,{selected:o}=t,{label:i}=t,{name:s=void 0}=t,a=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);function u(){o=on(this),n(0,o),n(1,r)}return e.$$set=l=>{"options"in l&&n(1,r=l.options),"selected"in l&&n(0,o=l.selected),"label"in l&&n(2,i=l.label),"name"in l&&n(3,s=l.name)},[o,r,i,s,a,u]}class En extends Ae{constructor(t){super(),we(this,t,vn,_n,ye,{options:1,selected:0,label:2,name:3})}}function bn(e){let t,n,r,o,i,s,a;return{c(){t=E("div"),n=E("label"),r=Z(e[1]),o=C(),i=E("input"),this.h()},l(u){t=b(u,"DIV",{});var l=T(t);n=b(l,"LABEL",{for:!0,class:!0});var f=T(n);r=q(f,e[1]),f.forEach(g),o=P(l),i=b(l,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0,name:!0,class:!0}),l.forEach(g),this.h()},h(){c(n,"for",e[6]),c(n,"class","block mb-2 text-sm font-medium text-gray-900 dark:text-white"),c(i,"id",e[6]),c(i,"type","range"),c(i,"min",e[3]),c(i,"max",e[4]),c(i,"step",e[5]),c(i,"name",e[2]),c(i,"class","w-full h-1.5 mb-6 bg-white ring-1 ring-gray-300 shadow-sm rounded-lg appearance-none cursor-pointer accent-indigo-600 dark:bg-gray-700")},m(u,l){j(u,t,l),h(t,n),h(n,r),h(t,o),h(t,i),Ie(i,e[0]),s||(a=[K(i,"change",e[7]),K(i,"input",e[7])],s=!0)},p(u,[l]){l&2&&ct(r,u[1]),l&8&&c(i,"min",u[3]),l&16&&c(i,"max",u[4]),l&32&&c(i,"step",u[5]),l&4&&c(i,"name",u[2]),l&1&&Ie(i,u[0])},i:be,o:be,d(u){u&&g(t),s=!1,Pe(a)}}}function An(e,t,n){let{label:r}=t,{name:o=void 0}=t,{min:i=null}=t,{max:s=null}=t,{value:a=0}=t,{step:u=1}=t,l=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);function f(){a=an(this.value),n(0,a)}return e.$$set=d=>{"label"in d&&n(1,r=d.label),"name"in d&&n(2,o=d.name),"min"in d&&n(3,i=d.min),"max"in d&&n(4,s=d.max),"value"in d&&n(0,a=d.value),"step"in d&&n(5,u=d.step)},[a,r,o,i,s,u,l,f]}class lt extends Ae{constructor(t){super(),we(this,t,An,bn,ye,{label:1,name:2,min:3,max:4,value:0,step:5})}}var wn="precision highp float;attribute vec2 position;varying vec2 fragCoord;void main(){fragCoord.x=position.x*0.5+0.5;fragCoord.y=position.y*0.5+0.5;gl_Position=vec4(position,0.0,1.0);}",yn="precision highp float;varying vec2 fragCoord;uniform sampler2D uSampler;uniform float uThreshold;uniform sampler2D uNoiseSampler;uniform vec2 uNoiseSamplerSize;uniform float uNoise;uniform float uMonochrome;uniform vec2 uSize;uniform vec3 uDarkColor;uniform vec3 uLightColor;void main(void){vec2 imgPixel=vec2(fragCoord.x*uSize.x,fragCoord.y*uSize.y);vec2 noisePixel=vec2(mod(imgPixel.x,uNoiseSamplerSize.x),mod(imgPixel.y,uNoiseSamplerSize.y));vec2 noiseUV=vec2(noisePixel.x/uNoiseSamplerSize.x,noisePixel.y/uNoiseSamplerSize.y);float noise=(texture2D(uNoiseSampler,noiseUV).r-0.5)*2.0*uNoise;vec4 color=texture2D(uSampler,fragCoord);float gray=dot(color.rgb,vec3(0.299,0.587,0.114));color.r=color.r*(1.0-uMonochrome)+gray*uMonochrome;color.g=color.g*(1.0-uMonochrome)+gray*uMonochrome;color.b=color.b*(1.0-uMonochrome)+gray*uMonochrome;vec3 thresholds=vec3(step(uThreshold,color.r+noise),step(uThreshold,color.g+noise),step(uThreshold,color.b+noise));if(uMonochrome>0.0){color.rgb=vec3(mix(uDarkColor.r,uLightColor.r,thresholds.r),mix(uDarkColor.g,uLightColor.g,thresholds.g),mix(uDarkColor.b,uLightColor.b,thresholds.b));}else{color.rgb=thresholds;}gl_FragColor=color;}";function ze(e){return(e&e-1)===0}function Tn(e,t,n){const r=Tt(e,e.VERTEX_SHADER,t),o=Tt(e,e.FRAGMENT_SHADER,n),i=e.createProgram();if(!i)throw new Error("Failed to create shader program");if(e.attachShader(i,r),e.attachShader(i,o),e.linkProgram(i),!e.getProgramParameter(i,e.LINK_STATUS))throw Error(`Unable to initialize the shader program: ${e.getProgramInfoLog(i)}`);return i}function Tt(e,t,n){const r=e.createShader(t);if(!r)throw new Error("Failed to create shader");if(e.shaderSource(r,n),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))throw Error(`An error occurred compiling the shaders: ${e.getShaderInfoLog(r)}`);return r}function Ln(e){const t=e.createTexture();if(!t)throw new Error("Failed to create texture");e.bindTexture(e.TEXTURE_2D,t);const n=0,r=e.RGBA,o=1,i=1,s=0,a=e.RGBA,u=e.UNSIGNED_BYTE,l=new Uint8Array([0,0,255,255]);return e.texImage2D(e.TEXTURE_2D,n,r,o,i,s,a,u,l),t}function Sn(e,t,n){const o=e.RGBA,i=e.RGBA,s=e.UNSIGNED_BYTE;e.bindTexture(e.TEXTURE_2D,t),e.texImage2D(e.TEXTURE_2D,0,o,i,s,n),ze(n.width)&&ze(n.height)?e.generateMipmap(e.TEXTURE_2D):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR))}function In(e){const t=e.createBuffer(),n=e.createBuffer(),r=[-1,1,-1,-1,1,-1,1,1],o=[3,2,1,3,1,0];return e.bindBuffer(e.ARRAY_BUFFER,t),e.bufferData(e.ARRAY_BUFFER,new Float32Array(r),e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(o),e.STATIC_DRAW),{vertex_buffer:t,index_buffer:n}}function Rn(e,t,n){const r=e.createTexture();if(!r)throw new Error("Failed to create texture");return e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),ze(t.width)&&ze(t.height)?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,n)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,n)),r}function Dn(e,t){let n=t;const r=e.getContext("webgl",{preserveDrawingBuffer:!0});if(!r){alert("WebGL not supported");return}const o=()=>{Sn(r,D,n.image)};r.clearColor(0,0,0,1),r.clear(r.COLOR_BUFFER_BIT);const i=Tn(r,wn,yn),{vertex_buffer:s,index_buffer:a}=In(r),u=r.getAttribLocation(i,"position");r.vertexAttribPointer(u,2,r.FLOAT,!1,0,0),r.enableVertexAttribArray(u);const l=r.getUniformLocation(i,"uSampler"),f=r.getUniformLocation(i,"uThreshold"),d=r.getUniformLocation(i,"uNoiseSampler"),m=r.getUniformLocation(i,"uNoise"),y=r.getUniformLocation(i,"uSize"),A=r.getUniformLocation(i,"uNoiseSamplerSize"),p=r.getUniformLocation(i,"uMonochrome"),w=r.getUniformLocation(i,"uDarkColor"),L=r.getUniformLocation(i,"uLightColor"),D=Ln(r);r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!0),o();let _,v;r.useProgram(i);let I=null;const B=()=>{_&&r.deleteTexture(_),_=Rn(r,n.thresholdMap,r.NEAREST),v={width:n.thresholdMap.width,height:n.thresholdMap.height}};B();const R=()=>{r.viewport(0,0,n.output_width,n.output_height),r.clearColor(0,0,0,1),r.clear(r.COLOR_BUFFER_BIT),r.bindBuffer(r.ARRAY_BUFFER,s),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,a),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,D),r.uniform1i(l,0),r.activeTexture(r.TEXTURE1),r.bindTexture(r.TEXTURE_2D,_),r.uniform1i(d,1),r.uniform2f(A,v.width,v.height),r.uniform1f(f,n.threshold),r.uniform1f(m,n.noiseIntensity),r.uniform2f(y,n.output_width,n.output_height),r.uniform1f(p,n.monochrome?1:0),r.uniform3f(w,...Lt(n.colorDark)),r.uniform3f(L,...Lt(n.colorLight)),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT),r.drawElements(r.TRIANGLES,6,r.UNSIGNED_SHORT,0)};function N(){I=requestAnimationFrame(()=>{R(),I=null})}return N(),{update(O){const X=n.image!==O.image,M=n.thresholdMap!==O.thresholdMap;n=O,X&&o(),M&&B(),N()},destroy(){I!==null&&cancelAnimationFrame(I)}}}function Lt(e){const t=parseInt(e.slice(1,3),16)/255,n=parseInt(e.slice(3,5),16)/255,r=parseInt(e.slice(5,7),16)/255;return[t,n,r]}function kn(e){let t,n,r,o,i;const s=e[3].default,a=tt(s,e,e[2],null);return{c(){t=E("button"),a&&a.c(),this.h()},l(u){t=b(u,"BUTTON",{type:!0,class:!0});var l=T(t);a&&a.l(l),l.forEach(g),this.h()},h(){t.disabled=e[0],c(t,"type","button"),c(t,"class",n=e[1][e[0]?"disabled":"normal"]+" rounded-md px-2.5 py-1.5 text-sm font-semibold focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 flex items-center justify-center gap-2")},m(u,l){j(u,t,l),a&&a.m(t,null),r=!0,o||(i=K(t,"click",e[4]),o=!0)},p(u,[l]){a&&a.p&&(!r||l&4)&&nt(a,s,u,u[2],r?it(s,u[2],l,null):rt(u[2]),null),(!r||l&1)&&(t.disabled=u[0]),(!r||l&1&&n!==(n=u[1][u[0]?"disabled":"normal"]+" rounded-md px-2.5 py-1.5 text-sm font-semibold focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 flex items-center justify-center gap-2"))&&c(t,"class",n)},i(u){r||(U(a,u),r=!0)},o(u){F(a,u),r=!1},d(u){u&&g(t),a&&a.d(u),o=!1,i()}}}function Cn(e,t,n){let{$$slots:r={},$$scope:o}=t,{disabled:i=!1}=t;const s={normal:"bg-indigo-600 text-white shadow-sm hover:bg-indigo-500",disabled:"bg-gray-200 text-gray-400 shadow-none cursor-not-allowed"};function a(u){ln.call(this,e,u)}return e.$$set=u=>{"disabled"in u&&n(0,i=u.disabled),"$$scope"in u&&n(2,o=u.$$scope)},[i,s,o,r,a]}class Pn extends Ae{constructor(t){super(),we(this,t,Cn,kn,ye,{disabled:0})}}async function Mn(e,t,n="png"){const r=new OffscreenCanvas(e.width,e.height),o=r.getContext("2d");if(!o)return;o.drawImage(e,0,0,e.width,e.height);const i=await r.convertToBlob({type:"image/"+n,quality:1}),s=URL.createObjectURL(i),a=document.createElement("a");a.download=`${t}.${n}`,a.href=s,a.click(),a.remove(),URL.revokeObjectURL(s)}function St(e){return new Promise((t,n)=>{e.type.startsWith("image/")||n(new Error("Not an image file"));const r=new FileReader;r.onload=o=>{if(typeof r.result!="string")return;const i=new Image;i.onload=()=>{t(i)},i.onerror=s=>{n(s)},i.src=r.result},r.onerror=o=>{n(o)},r.readAsDataURL(e)})}var Un=class extends EventTarget{dispatchTypedEvent(e,t){return super.dispatchEvent(t)}};class ge{constructor(t){this.id=-1,this.nativePointer=t,this.pageX=t.pageX,this.pageY=t.pageY,this.clientX=t.clientX,this.clientY=t.clientY,self.Touch&&t instanceof Touch?this.id=t.identifier:ke(t)&&(this.id=t.pointerId)}getCoalesced(){if("getCoalescedEvents"in this.nativePointer){const t=this.nativePointer.getCoalescedEvents().map(n=>new ge(n));if(t.length>0)return t}return[this]}}const ke=e=>"pointerId"in e,Ke=e=>"changedTouches"in e,It=()=>{};class Nn{constructor(t,{start:n=()=>!0,move:r=It,end:o=It,rawUpdates:i=!1,avoidPointerEvents:s=!1}={}){this._element=t,this.startPointers=[],this.currentPointers=[],this._excludeFromButtonsCheck=new Set,this._pointerStart=a=>{if(ke(a)&&a.buttons===0)this._excludeFromButtonsCheck.add(a.pointerId);else if(!(a.buttons&1))return;const u=new ge(a);this.currentPointers.some(l=>l.id===u.id)||this._triggerPointerStart(u,a)&&(ke(a)?((a.target&&"setPointerCapture"in a.target?a.target:this._element).setPointerCapture(a.pointerId),this._element.addEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move),this._element.addEventListener("pointerup",this._pointerEnd),this._element.addEventListener("pointercancel",this._pointerEnd)):(window.addEventListener("mousemove",this._move),window.addEventListener("mouseup",this._pointerEnd)))},this._touchStart=a=>{for(const u of Array.from(a.changedTouches))this._triggerPointerStart(new ge(u),a)},this._move=a=>{if(!Ke(a)&&(!ke(a)||!this._excludeFromButtonsCheck.has(a.pointerId))&&a.buttons===0){this._pointerEnd(a);return}const u=this.currentPointers.slice(),l=Ke(a)?Array.from(a.changedTouches).map(d=>new ge(d)):[new ge(a)],f=[];for(const d of l){const m=this.currentPointers.findIndex(y=>y.id===d.id);m!==-1&&(f.push(d),this.currentPointers[m]=d)}f.length!==0&&this._moveCallback(u,f,a)},this._triggerPointerEnd=(a,u)=>{if(!Ke(u)&&u.buttons&1)return!1;const l=this.currentPointers.findIndex(d=>d.id===a.id);if(l===-1)return!1;this.currentPointers.splice(l,1),this.startPointers.splice(l,1),this._excludeFromButtonsCheck.delete(a.id);const f=!(u.type==="mouseup"||u.type==="touchend"||u.type==="pointerup");return this._endCallback(a,u,f),!0},this._pointerEnd=a=>{if(this._triggerPointerEnd(new ge(a),a))if(ke(a)){if(this.currentPointers.length)return;this._element.removeEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move),this._element.removeEventListener("pointerup",this._pointerEnd),this._element.removeEventListener("pointercancel",this._pointerEnd)}else window.removeEventListener("mousemove",this._move),window.removeEventListener("mouseup",this._pointerEnd)},this._touchEnd=a=>{for(const u of Array.from(a.changedTouches))this._triggerPointerEnd(new ge(u),a)},this._startCallback=n,this._moveCallback=r,this._endCallback=o,this._rawUpdates=i&&"onpointerrawupdate"in window,self.PointerEvent&&!s?this._element.addEventListener("pointerdown",this._pointerStart):(this._element.addEventListener("mousedown",this._pointerStart),this._element.addEventListener("touchstart",this._touchStart),this._element.addEventListener("touchmove",this._move),this._element.addEventListener("touchend",this._touchEnd),this._element.addEventListener("touchcancel",this._touchEnd))}stop(){this._element.removeEventListener("pointerdown",this._pointerStart),this._element.removeEventListener("mousedown",this._pointerStart),this._element.removeEventListener("touchstart",this._touchStart),this._element.removeEventListener("touchmove",this._move),this._element.removeEventListener("touchend",this._touchEnd),this._element.removeEventListener("touchcancel",this._touchEnd),this._element.removeEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move),this._element.removeEventListener("pointerup",this._pointerEnd),this._element.removeEventListener("pointercancel",this._pointerEnd),window.removeEventListener("mousemove",this._move),window.removeEventListener("mouseup",this._pointerEnd)}_triggerPointerStart(t,n){return this._startCallback(t,n)?(this.currentPointers.push(t),this.startPointers.push(t),!0):!1}}function zt(e,t,n){return Math.min(Math.max(e,t),n)}function Rt(e,t){return t?Math.sqrt((t.clientX-e.clientX)**2+(t.clientY-e.clientY)**2):0}function Dt(e,t){return t?{clientX:(e.clientX+t.clientX)/2,clientY:(e.clientY+t.clientY)/2}:e}const Ge=class extends Un{constructor(n){super();Le(this,"element");Le(this,"transform",new DOMMatrix);Le(this,"pointerTracker");this.element=n,this.element.addEventListener("wheel",this.onWheel.bind(this)),this.pointerTracker=new Nn(this.element,{start:(r,o)=>this.pointerTracker.currentPointers.length===2?!1:(o.preventDefault(),!0),move:r=>{this.onPointerMove(r,this.pointerTracker.currentPointers)},avoidPointerEvents:this.isSafari()}),this.element.addEventListener("wheel",this.onWheel.bind(this))}get x(){return this.transform.e}get y(){return this.transform.f}get scale(){return this.transform.a}set x(n){this.transform.e=n}set y(n){this.transform.f=n}set scale(n){this.transform.a=n,this.transform.d=n}onWheel(n){n.preventDefault();const r=this.element.getBoundingClientRect();let{deltaY:o}=n;const{ctrlKey:i,deltaMode:s}=n;s===1&&(o*=15);const a=o>0,u=i?100:300,l=1-(a?-o:o)/u,f=a?1/l:l,d=n.clientX-r.left,m=n.clientY-r.top;this.applyTransformation({scaleDiff:f,originX:d,originY:m})}applyTransformation(n={}){const{panX:r=0,panY:o=0,originX:i=0,originY:s=0,scaleDiff:a=1}=n,u=new DOMMatrix().translate(i,s).scale(a).translate(-i,-s),l=new DOMMatrix().translate(r,o);u.multiplySelf(l),u.multiplySelf(this.transform);const f=u.a,d=u.e,m=u.f;this.updateTransform(f,d,m)}onPointerMove(n,r){const o=this.element.getBoundingClientRect(),i=Dt(n[0],n[1]),s=Dt(r[0],r[1]),a=i.clientX-o.left,u=i.clientY-o.top,l=Rt(n[0],n[1]),f=Rt(r[0],r[1]),d=l?f/l:1;this.applyTransformation({originX:a,originY:u,scaleDiff:d,panX:s.clientX-i.clientX,panY:s.clientY-i.clientY})}updateTransform(n,r,o){if(n=zt(n,Ge.MIN_SCALE,Ge.MAX_SCALE),n===this.scale&&r===this.x&&o===this.y)return;this.x=r,this.y=o,this.scale=n;const i=new CustomEvent("panzoom:change",{bubbles:!0,detail:{x:this.x,y:this.y,scale:this.scale,matrix:this.transform}});this.dispatchTypedEvent("panzoom:change",i)}isSafari(){return/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)}reset(){this.updateTransform(1,0,0)}destroy(){this.pointerTracker.stop()}};let Ce=Ge;Le(Ce,"MIN_SCALE",.01),Le(Ce,"MAX_SCALE",1e5);const Bn=e=>({}),kt=e=>({}),Xn=e=>({}),Ct=e=>({});function Fn(e){let t,n,r,o,i,s,a,u,l,f,d,m,y,A;const p=e[6].left,w=tt(p,e,e[5],Ct),L=e[6].right,D=tt(L,e,e[5],kt);return d=new Me({props:{src:fn,class:"w-6 h-6 text-white"}}),{c(){t=E("div"),n=E("div"),r=E("div"),o=E("div"),w&&w.c(),i=C(),s=E("div"),a=E("div"),D&&D.c(),u=C(),l=E("div"),f=E("div"),te(d.$$.fragment),this.h()},l(_){t=b(_,"DIV",{class:!0});var v=T(t);n=b(v,"DIV",{class:!0});var I=T(n);r=b(I,"DIV",{class:!0});var B=T(r);o=b(B,"DIV",{style:!0,class:!0});var R=T(o);w&&w.l(R),R.forEach(g),B.forEach(g),i=P(I),s=b(I,"DIV",{class:!0});var N=T(s);a=b(N,"DIV",{style:!0,class:!0});var O=T(a);D&&D.l(O),O.forEach(g),N.forEach(g),I.forEach(g),u=P(v),l=b(v,"DIV",{class:!0});var X=T(l);f=b(X,"DIV",{class:!0});var M=T(f);ne(d.$$.fragment,M),M.forEach(g),X.forEach(g),v.forEach(g),this.h()},h(){c(o,"style",e[2]),c(o,"class","w-full h-full origin-top-left grid place-items-center"),c(r,"class","mask-left svelte-90j1r"),c(a,"style",e[2]),c(a,"class","w-full h-full origin-top-left grid place-items-center"),c(s,"class","mask-right svelte-90j1r"),c(n,"class","w-full h-full grid place-items-center"),c(f,"class","w-12 h-12 rounded-full bg-black absolute top-1/2 -translate-x-1/2 left-1/2 grid place-items-center"),c(l,"class","handle relative shadow-lg svelte-90j1r"),c(t,"class","pz-container svelte-90j1r"),st(t,"--split-point",e[1]+"%")},m(_,v){j(_,t,v),h(t,n),h(n,r),h(r,o),w&&w.m(o,null),h(n,i),h(n,s),h(s,a),D&&D.m(a,null),h(t,u),h(t,l),h(l,f),re(d,f,null),e[7](t),m=!0,y||(A=[Oe(e[4].call(null,n)),Oe(e[3].call(null,l)),K(l,"pointercancel",ot(xn))],y=!0)},p(_,[v]){w&&w.p&&(!m||v&32)&&nt(w,p,_,_[5],m?it(p,_[5],v,Xn):rt(_[5]),Ct),(!m||v&4)&&c(o,"style",_[2]),D&&D.p&&(!m||v&32)&&nt(D,L,_,_[5],m?it(L,_[5],v,Bn):rt(_[5]),kt),(!m||v&4)&&c(a,"style",_[2]),v&2&&st(t,"--split-point",_[1]+"%")},i(_){m||(U(w,_),U(D,_),U(d.$$.fragment,_),m=!0)},o(_){F(w,_),F(D,_),F(d.$$.fragment,_),m=!1},d(_){_&&g(t),w&&w.d(_),D&&D.d(_),ie(d),e[7](null),y=!1,Pe(A)}}}const xn=()=>{};function Wn(e,t,n){let{$$slots:r={},$$scope:o}=t,i=null,s=50;function a(d){d.addEventListener("pointerdown",m=>{const y=m.clientX,A=s,p=document.body.style.cursor;document.body.style.cursor="col-resize";const w=D=>{const _=i?i.clientWidth:window.innerWidth,v=D.clientX-y,I=A+v/_*100;n(1,s=zt(I,0,100))},L=()=>{document.body.style.cursor=p,window.removeEventListener("pointermove",w),window.removeEventListener("pointerup",L),window.removeEventListener("pointercancel",L)};window.addEventListener("pointermove",w),window.addEventListener("pointerup",L),window.addEventListener("pointercancel",L)})}let u="transform: none;";function l(d){const m=new Ce(d);function y(A){const{matrix:p}=A.detail;n(2,u=`transform: ${p.toString()};`)}return m.addEventListener("panzoom:change",y),{destroy(){m.removeEventListener("panzoom:change",y),m.destroy()}}}function f(d){de[d?"unshift":"push"](()=>{i=d,n(0,i)})}return e.$$set=d=>{"$$scope"in d&&n(5,o=d.$$scope)},[i,s,u,a,l,o,r,f]}class On extends Ae{constructor(t){super(),we(this,t,Wn,Fn,ye,{})}}const zn=""+new URL("../assets/cat.58b560b7.jpg",import.meta.url).href,Vn="data:image/avif;base64,AAAAHGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZgAAAOptZXRhAAAAAAAAACFoZGxyAAAAAAAAAABwaWN0AAAAAAAAAAAAAAAAAAAAAA5waXRtAAAAAAABAAAAImlsb2MAAAAAREAAAQABAAAAAAEOAAEAAAAAAAAApwAAACNpaW5mAAAAAAABAAAAFWluZmUCAAAAAAEAAGF2MDEAAAAAamlwcnAAAABLaXBjbwAAABNjb2xybmNseAACAAIABoAAAAAMYXYxQ4EEDAAAAAAUaXNwZQAAAAAAAAJyAAACcgAAABBwaXhpAAAAAAMICAgAAAAXaXBtYQAAAAAAAAABAAEEgYIDhAAAAK9tZGF0EgAKChkmZxnHggQEDQgylgERQAEEEEEA9NBi7JFlrqXV1mwMry34uIYK7WRdWYJ/ZZ0EIyWW8aLm92oz5LY0W+l2FiKsHpp4BB3Vrk+iwHuzboac7wmSHHHRWklZdZ2hpEAi4E31lf1tjXnXie8fh4lzApbqjH5Pj7ZN6761WygYVdc2zvJOsflFZstng6rQU/oulDZSO6fQWKvzpO9pseyXBLfms64=",Hn=""+new URL("../assets/david.0e7e3b46.png",import.meta.url).href;/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Vt=Symbol("Comlink.proxy"),Yn=Symbol("Comlink.endpoint"),Gn=Symbol("Comlink.releaseProxy"),Je=Symbol("Comlink.finalizer"),We=Symbol("Comlink.thrown"),Ht=e=>typeof e=="object"&&e!==null||typeof e=="function",jn={canHandle:e=>Ht(e)&&e[Vt],serialize(e){const{port1:t,port2:n}=new MessageChannel;return Gt(e,t),[n,[n]]},deserialize(e){return e.start(),Zt(e)}},Zn={canHandle:e=>Ht(e)&&We in e,serialize({value:e}){let t;return e instanceof Error?t={isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:t={isError:!1,value:e},[t,[]]},deserialize(e){throw e.isError?Object.assign(new Error(e.value.message),e.value):e.value}},Yt=new Map([["proxy",jn],["throw",Zn]]);function qn(e,t){for(const n of e)if(t===n||n==="*"||n instanceof RegExp&&n.test(t))return!0;return!1}function Gt(e,t=globalThis,n=["*"]){t.addEventListener("message",function r(o){if(!o||!o.data)return;if(!qn(n,o.origin)){console.warn(`Invalid origin '${o.origin}' for comlink proxy`);return}const{id:i,type:s,path:a}=Object.assign({path:[]},o.data),u=(o.data.argumentList||[]).map(Ee);let l;try{const f=a.slice(0,-1).reduce((m,y)=>m[y],e),d=a.reduce((m,y)=>m[y],e);switch(s){case"GET":l=d;break;case"SET":f[a.slice(-1)[0]]=Ee(o.data.value),l=!0;break;case"APPLY":l=d.apply(f,u);break;case"CONSTRUCT":{const m=new d(...u);l=tr(m)}break;case"ENDPOINT":{const{port1:m,port2:y}=new MessageChannel;Gt(e,y),l=er(m,[m])}break;case"RELEASE":l=void 0;break;default:return}}catch(f){l={value:f,[We]:0}}Promise.resolve(l).catch(f=>({value:f,[We]:0})).then(f=>{const[d,m]=Ye(f);t.postMessage(Object.assign(Object.assign({},d),{id:i}),m),s==="RELEASE"&&(t.removeEventListener("message",r),jt(t),Je in e&&typeof e[Je]=="function"&&e[Je]())}).catch(f=>{const[d,m]=Ye({value:new TypeError("Unserializable return value"),[We]:0});t.postMessage(Object.assign(Object.assign({},d),{id:i}),m)})}),t.start&&t.start()}function Qn(e){return e.constructor.name==="MessagePort"}function jt(e){Qn(e)&&e.close()}function Zt(e,t){return ut(e,[],t)}function Xe(e){if(e)throw new Error("Proxy has been released and is not useable")}function qt(e){return Se(e,{type:"RELEASE"}).then(()=>{jt(e)})}const Ve=new WeakMap,He="FinalizationRegistry"in globalThis&&new FinalizationRegistry(e=>{const t=(Ve.get(e)||0)-1;Ve.set(e,t),t===0&&qt(e)});function $n(e,t){const n=(Ve.get(t)||0)+1;Ve.set(t,n),He&&He.register(e,t,e)}function Kn(e){He&&He.unregister(e)}function ut(e,t=[],n=function(){}){let r=!1;const o=new Proxy(n,{get(i,s){if(Xe(r),s===Gn)return()=>{Kn(o),qt(e),r=!0};if(s==="then"){if(t.length===0)return{then:()=>o};const a=Se(e,{type:"GET",path:t.map(u=>u.toString())}).then(Ee);return a.then.bind(a)}return ut(e,[...t,s])},set(i,s,a){Xe(r);const[u,l]=Ye(a);return Se(e,{type:"SET",path:[...t,s].map(f=>f.toString()),value:u},l).then(Ee)},apply(i,s,a){Xe(r);const u=t[t.length-1];if(u===Yn)return Se(e,{type:"ENDPOINT"}).then(Ee);if(u==="bind")return ut(e,t.slice(0,-1));const[l,f]=Pt(a);return Se(e,{type:"APPLY",path:t.map(d=>d.toString()),argumentList:l},f).then(Ee)},construct(i,s){Xe(r);const[a,u]=Pt(s);return Se(e,{type:"CONSTRUCT",path:t.map(l=>l.toString()),argumentList:a},u).then(Ee)}});return $n(o,e),o}function Jn(e){return Array.prototype.concat.apply([],e)}function Pt(e){const t=e.map(Ye);return[t.map(n=>n[0]),Jn(t.map(n=>n[1]))]}const Qt=new WeakMap;function er(e,t){return Qt.set(e,t),e}function tr(e){return Object.assign(e,{[Vt]:!0})}function Ye(e){for(const[t,n]of Yt)if(n.canHandle(e)){const[r,o]=n.serialize(e);return[{type:"HANDLER",name:t,value:r},o]}return[{type:"RAW",value:e},Qt.get(e)||[]]}function Ee(e){switch(e.type){case"HANDLER":return Yt.get(e.name).deserialize(e.value);case"RAW":return e.value}}function Se(e,t,n){return new Promise(r=>{const o=nr();e.addEventListener("message",function i(s){!s.data||!s.data.id||s.data.id!==o||(e.removeEventListener("message",i),r(s.data))}),e.start&&e.start(),e.postMessage(Object.assign({id:o},t),n)})}function nr(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}function rr(){return new Worker(""+new URL("../workers/worker-09b3192d.js",import.meta.url).href)}let et=null;async function ir(e){return et||(et=Zt(new rr)),await et.generate(e)}function sr(e){let t,n,r,o;return{c(){t=E("canvas"),this.h()},l(i){t=b(i,"CANVAS",{class:!0,style:!0}),T(t).forEach(g),this.h()},h(){c(t,"class","w-full max-h-96 object-contain shadow-lg"),st(t,"image-rendering","pixelated")},m(i,s){j(i,t,s),r||(o=Oe(n=or.call(null,t,e[0])),r=!0)},p(i,[s]){n&&Wt(n.update)&&s&1&&n.update.call(null,i[0])},i:be,o:be,d(i){i&&g(t),r=!1,o()}}}function or(e,t){const n=e.getContext("2d");if(!n)return;const r=()=>{e.width=t.width,e.height=t.height,n.putImageData(t,0,0)};let o=null;const i=()=>{o||(o=requestAnimationFrame(()=>{o=null,r()}))};return i(),{destroy(){o&&cancelAnimationFrame(o)},update:s=>{t=s,i()}}}function ar(e,t,n){let{imageData:r}=t;return e.$$set=o=>{"imageData"in o&&n(0,r=o.imageData)},[r]}class lr extends Ae{constructor(t){super(),we(this,t,ar,sr,ye,{imageData:0})}}function Mt(e,t,n){const r=e.slice();return r[34]=t[n],r}function ur(e){let t,n,r,o,i,s,a,u,l,f,d,m,y,A,p,w,L,D,_=e[14],v=[];for(let I=0;I<_.length;I+=1)v[I]=Ut(Mt(e,_,I));return f=new Me({props:{src:hn,class:"w-12 h-12 text-gray-400"}}),{c(){t=E("div"),n=E("div"),r=E("p"),o=Z("Select or Drop an Image to Start"),i=C(),s=E("div");for(let I=0;I<v.length;I+=1)v[I].c();a=C(),u=E("label"),l=E("div"),te(f.$$.fragment),d=C(),m=E("span"),y=Z("Choose an Image"),A=C(),p=E("input"),this.h()},l(I){t=b(I,"DIV",{class:!0});var B=T(t);n=b(B,"DIV",{class:!0});var R=T(n);r=b(R,"P",{class:!0});var N=T(r);o=q(N,"Select or Drop an Image to Start"),N.forEach(g),i=P(R),s=b(R,"DIV",{class:!0});var O=T(s);for(let G=0;G<v.length;G+=1)v[G].l(O);a=P(O),u=b(O,"LABEL",{for:!0,class:!0});var X=T(u);l=b(X,"DIV",{class:!0});var M=T(l);ne(f.$$.fragment,M),M.forEach(g),d=P(X),m=b(X,"SPAN",{class:!0});var W=T(m);y=q(W,"Choose an Image"),W.forEach(g),A=P(X),p=b(X,"INPUT",{type:!0,class:!0,id:!0,accept:!0}),X.forEach(g),O.forEach(g),R.forEach(g),B.forEach(g),this.h()},h(){c(r,"class","text-2xl text-gray-500 text-center"),c(l,"class","grid place-items-center h-full w-full"),c(m,"class","sr-only"),c(p,"type","file"),c(p,"class","sr-only"),c(p,"id","image-input"),c(p,"accept","image/*"),c(u,"for","image-input"),c(u,"class","block spect-square h-24 w-24 object-cover rounded-md shadow-md border-2 border-white bg-white hover:bg-gray-100"),c(s,"class","flex gap-3 justify-center flex-wrap"),c(n,"class","grid gap-4"),c(t,"class","w-full h-full grid place-items-center px-8")},m(I,B){j(I,t,B),h(t,n),h(n,r),h(r,o),h(n,i),h(n,s);for(let R=0;R<v.length;R+=1)v[R]&&v[R].m(s,null);h(s,a),h(s,u),h(u,l),re(f,l,null),h(u,d),h(u,m),h(m,y),h(u,A),h(u,p),w=!0,L||(D=K(p,"input",e[18]),L=!0)},p(I,B){if(B[0]&540672){_=I[14];let R;for(R=0;R<_.length;R+=1){const N=Mt(I,_,R);v[R]?v[R].p(N,B):(v[R]=Ut(N),v[R].c(),v[R].m(s,a))}for(;R<v.length;R+=1)v[R].d(1);v.length=_.length}},i(I){w||(U(f.$$.fragment,I),w=!0)},o(I){F(f.$$.fragment,I),w=!1},d(I){I&&g(t),xt(v,I),ie(f),L=!1,D()}}}function cr(e){let t,n,r,o,i,s,a,u;return n=new On({props:{$$slots:{right:[dr],left:[fr]},$$scope:{ctx:e}}}),i=new Me({props:{src:mn,class:"w-5 h-5 text-white"}}),{c(){t=E("div"),te(n.$$.fragment),r=C(),o=E("button"),te(i.$$.fragment),this.h()},l(l){t=b(l,"DIV",{class:!0});var f=T(t);ne(n.$$.fragment,f),r=P(f),o=b(f,"BUTTON",{class:!0,title:!0});var d=T(o);ne(i.$$.fragment,d),d.forEach(g),f.forEach(g),this.h()},h(){c(o,"class","absolute top-0 left-0 m-4 p-2 bg-black bg-opacity-40 rounded-full"),c(o,"title","Close Image & Reset"),c(t,"class","w-full h-full relative")},m(l,f){j(l,t,f),re(n,t,null),h(t,r),h(t,o),re(i,o,null),s=!0,a||(u=K(o,"click",e[22]),a=!0)},p(l,f){const d={};f[0]&16344|f[1]&64&&(d.$$scope={dirty:f,ctx:l}),n.$set(d)},i(l){s||(U(n.$$.fragment,l),U(i.$$.fragment,l),s=!0)},o(l){F(n.$$.fragment,l),F(i.$$.fragment,l),s=!1},d(l){l&&g(t),ie(n),ie(i),a=!1,u()}}}function Ut(e){let t,n,r,o,i;function s(){return e[23](e[34])}return{c(){t=E("button"),n=E("img"),this.h()},l(a){t=b(a,"BUTTON",{class:!0});var u=T(t);n=b(u,"IMG",{class:!0,src:!0,alt:!0}),u.forEach(g),this.h()},h(){c(n,"class","aspect-square h-24 w-24 object-cover rounded-md shadow-md border-2 border-white"),at(n.src,r=e[34])||c(n,"src",r),c(n,"alt",""),c(t,"class","hover:opacity-75 transition-opacity")},m(a,u){j(a,t,u),h(t,n),o||(i=K(t,"click",s),o=!0)},p(a,u){e=a},d(a){a&&g(t),o=!1,i()}}}function fr(e){let t,n,r;return{c(){t=E("img"),this.h()},l(o){t=b(o,"IMG",{slot:!0,src:!0,alt:!0,style:!0,class:!0}),this.h()},h(){c(t,"slot","left"),at(t.src,n=e[4].src)||c(t,"src",n),c(t,"alt",""),c(t,"style",r=`width: ${e[3]}px; height: ${e[13]}px`),c(t,"class","pixelated max-w-none shadow-lg svelte-1tfolzf")},m(o,i){j(o,t,i)},p(o,i){i[0]&16&&!at(t.src,n=o[4].src)&&c(t,"src",n),i[0]&8200&&r!==(r=`width: ${o[3]}px; height: ${o[13]}px`)&&c(t,"style",r)},d(o){o&&g(t)}}}function dr(e){let t,n,r,o,i;return{c(){t=E("canvas"),this.h()},l(s){t=b(s,"CANVAS",{class:!0,slot:!0,style:!0,width:!0,height:!0,"aria-label":!0}),T(t).forEach(g),this.h()},h(){c(t,"class","pixelated shadow-lg svelte-1tfolzf"),c(t,"slot","right"),c(t,"style",n=`width: ${e[3]}px; height: ${e[13]}px`),c(t,"width",e[3]),c(t,"height",e[13]),c(t,"aria-label","Dithered Image")},m(s,a){j(s,t,a),e[21](t),o||(i=Oe(r=Dn.call(null,t,{image:e[4],threshold:e[6],noiseIntensity:e[7],monochrome:e[8],colorLight:e[9],colorDark:e[10],output_width:e[3],output_height:e[13],thresholdMap:e[12]})),o=!0)},p(s,a){a[0]&8200&&n!==(n=`width: ${s[3]}px; height: ${s[13]}px`)&&c(t,"style",n),a[0]&8&&c(t,"width",s[3]),a[0]&8192&&c(t,"height",s[13]),r&&Wt(r.update)&&a[0]&14296&&r.update.call(null,{image:s[4],threshold:s[6],noiseIntensity:s[7],monochrome:s[8],colorLight:s[9],colorDark:s[10],output_width:s[3],output_height:s[13],thresholdMap:s[12]})},d(s){s&&g(t),e[21](null),o=!1,i()}}}function hr(e){let t,n,r,o,i,s,a,u,l,f,d,m,y,A,p,w,L,D,_,v,I,B,R,N,O,X,M,W,G,se,Q,he,oe,J,me,le,k,z,ae,Re,je,ue,Ze,qe,Ue,Qe,ft;s=new Pn({props:{disabled:!(e[4]&&e[12]),$$slots:{default:[mr]},$$scope:{ctx:e}}}),s.$on("click",e[15]);function $t(S){e[24](S)}let dt={label:"Dither Mode",options:e[16]};e[0]!==void 0&&(dt.selected=e[0]),y=new En({props:dt}),de.push(()=>_e(y,"selected",$t));let V=e[0]==="bayer"&&Nt(e),H=e[0]==="white_noise"&&Bt(e),Y=e[12]&&Xt(e);function Kt(S){e[27](S)}let ht={label:"Threshold ("+e[6]+")",min:0,max:1,step:.01};e[6]!==void 0&&(ht.value=e[6]),R=new lt({props:ht}),de.push(()=>_e(R,"value",Kt));function Jt(S){e[28](S)}let mt={label:"Noise Intensity ("+e[7]+")",min:0,max:1.5,step:.01};e[7]!==void 0&&(mt.value=e[7]),X=new lt({props:mt}),de.push(()=>_e(X,"value",Jt));let $=e[8]&&Ft(e);function en(S){e[32](S)}function tn(S){e[33](S)}let $e={minWidth:12,minHeight:12,maxHeight:5e3,maxWidth:5e3};return e[3]!==void 0&&($e.width=e[3]),e[5]!==void 0&&($e.aspectRatio=e[5]),ue=new Ot({props:$e}),de.push(()=>_e(ue,"width",en)),de.push(()=>_e(ue,"aspectRatio",tn)),{c(){t=E("aside"),n=E("header"),r=E("h1"),o=Z("Dither Studio"),i=C(),te(s.$$.fragment),a=C(),u=E("section"),l=E("div"),f=E("h2"),d=Z("Threshold Map"),m=C(),te(y.$$.fragment),p=C(),V&&V.c(),w=C(),H&&H.c(),L=C(),Y&&Y.c(),D=C(),_=E("div"),v=E("h2"),I=Z("Dithering Options"),B=C(),te(R.$$.fragment),O=C(),te(X.$$.fragment),W=C(),G=E("div"),se=E("div"),Q=E("input"),he=C(),oe=E("div"),J=E("label"),me=Z("Monochrome"),le=C(),$&&$.c(),k=C(),z=E("div"),ae=E("h2"),Re=Z("Output Options"),je=C(),te(ue.$$.fragment),this.h()},l(S){t=b(S,"ASIDE",{class:!0});var x=T(t);n=b(x,"HEADER",{class:!0});var pe=T(n);r=b(pe,"H1",{class:!0});var De=T(r);o=q(De,"Dither Studio"),De.forEach(g),i=P(pe),ne(s.$$.fragment,pe),pe.forEach(g),a=P(x),u=b(x,"SECTION",{class:!0});var ce=T(u);l=b(ce,"DIV",{class:!0});var ee=T(l);f=b(ee,"H2",{class:!0});var Te=T(f);d=q(Te,"Threshold Map"),Te.forEach(g),m=P(ee),ne(y.$$.fragment,ee),p=P(ee),V&&V.l(ee),w=P(ee),H&&H.l(ee),L=P(ee),Y&&Y.l(ee),ee.forEach(g),D=P(ce),_=b(ce,"DIV",{class:!0});var fe=T(_);v=b(fe,"H2",{class:!0});var pt=T(v);I=q(pt,"Dithering Options"),pt.forEach(g),B=P(fe),ne(R.$$.fragment,fe),O=P(fe),ne(X.$$.fragment,fe),W=P(fe),G=b(fe,"DIV",{class:!0});var Ne=T(G);se=b(Ne,"DIV",{class:!0});var gt=T(se);Q=b(gt,"INPUT",{type:!0,id:!0,class:!0}),gt.forEach(g),he=P(Ne),oe=b(Ne,"DIV",{class:!0});var _t=T(oe);J=b(_t,"LABEL",{for:!0,class:!0});var vt=T(J);me=q(vt,"Monochrome"),vt.forEach(g),_t.forEach(g),Ne.forEach(g),le=P(fe),$&&$.l(fe),fe.forEach(g),k=P(ce),z=b(ce,"DIV",{class:!0});var Be=T(z);ae=b(Be,"H2",{class:!0});var Et=T(ae);Re=q(Et,"Output Options"),Et.forEach(g),je=P(Be),ne(ue.$$.fragment,Be),Be.forEach(g),ce.forEach(g),x.forEach(g),this.h()},h(){c(r,"class","font-bold"),c(n,"class","py-4 px-4 flex-shrink-0 shadow-sm z-10 flex gap-2 items-center justify-between"),c(f,"class","text-base font-semibold leading-7 text-black mb-2"),c(l,"class","grid gap-3"),c(v,"class","text-base font-semibold leading-7 text-black mb-2"),c(Q,"type","checkbox"),c(Q,"id","monochrome"),c(Q,"class","h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600"),c(se,"class","flex h-6 items-center"),c(J,"for","monochrome"),c(J,"class","font-medium text-gray-900"),c(oe,"class","ml-3 text-sm leading-6"),c(G,"class","relative flex items-start"),c(_,"class","grid gap-3"),c(ae,"class","text-base font-semibold leading-7 text-black mb-4"),c(z,"class","border-t border-gray-100 py-4"),c(u,"class","grid gap-5 overflow-y-auto overflow-x-visible pt-8 px-4 safe-padding-bottom  svelte-1tfolzf"),c(t,"class","bg-white w-full md:max-w-md border-t md:border-t-0 md:border-l border-l-0 border-gray-100 z-50 overflow-y-hidden md:h-full flex-1 shadow-lg flex flex-col divide-y divide-gray-200 justify-between")},m(S,x){j(S,t,x),h(t,n),h(n,r),h(r,o),h(n,i),re(s,n,null),h(t,a),h(t,u),h(u,l),h(l,f),h(f,d),h(l,m),re(y,l,null),h(l,p),V&&V.m(l,null),h(l,w),H&&H.m(l,null),h(l,L),Y&&Y.m(l,null),h(u,D),h(u,_),h(_,v),h(v,I),h(_,B),re(R,_,null),h(_,O),re(X,_,null),h(_,W),h(_,G),h(G,se),h(se,Q),Q.checked=e[8],h(G,he),h(G,oe),h(oe,J),h(J,me),h(_,le),$&&$.m(_,null),h(u,k),h(u,z),h(z,ae),h(ae,Re),h(z,je),re(ue,z,null),Ue=!0,Qe||(ft=K(Q,"change",e[29]),Qe=!0)},p(S,x){const pe={};x[0]&4112&&(pe.disabled=!(S[4]&&S[12])),x[1]&64&&(pe.$$scope={dirty:x,ctx:S}),s.$set(pe);const De={};!A&&x[0]&1&&(A=!0,De.selected=S[0],ve(()=>A=!1)),y.$set(De),S[0]==="bayer"?V?(V.p(S,x),x[0]&1&&U(V,1)):(V=Nt(S),V.c(),U(V,1),V.m(l,w)):V&&(xe(),F(V,1,1,()=>{V=null}),Fe()),S[0]==="white_noise"?H?(H.p(S,x),x[0]&1&&U(H,1)):(H=Bt(S),H.c(),U(H,1),H.m(l,L)):H&&(xe(),F(H,1,1,()=>{H=null}),Fe()),S[12]?Y?(Y.p(S,x),x[0]&4096&&U(Y,1)):(Y=Xt(S),Y.c(),U(Y,1),Y.m(l,null)):Y&&(xe(),F(Y,1,1,()=>{Y=null}),Fe());const ce={};x[0]&64&&(ce.label="Threshold ("+S[6]+")"),!N&&x[0]&64&&(N=!0,ce.value=S[6],ve(()=>N=!1)),R.$set(ce);const ee={};x[0]&128&&(ee.label="Noise Intensity ("+S[7]+")"),!M&&x[0]&128&&(M=!0,ee.value=S[7],ve(()=>M=!1)),X.$set(ee),x[0]&256&&(Q.checked=S[8]),S[8]?$?$.p(S,x):($=Ft(S),$.c(),$.m(_,null)):$&&($.d(1),$=null);const Te={};!Ze&&x[0]&8&&(Ze=!0,Te.width=S[3],ve(()=>Ze=!1)),!qe&&x[0]&32&&(qe=!0,Te.aspectRatio=S[5],ve(()=>qe=!1)),ue.$set(Te)},i(S){Ue||(U(s.$$.fragment,S),U(y.$$.fragment,S),U(V),U(H),U(Y),U(R.$$.fragment,S),U(X.$$.fragment,S),U(ue.$$.fragment,S),Ue=!0)},o(S){F(s.$$.fragment,S),F(y.$$.fragment,S),F(V),F(H),F(Y),F(R.$$.fragment,S),F(X.$$.fragment,S),F(ue.$$.fragment,S),Ue=!1},d(S){S&&g(t),ie(s),ie(y),V&&V.d(),H&&H.d(),Y&&Y.d(),ie(R),ie(X),$&&$.d(),ie(ue),Qe=!1,ft()}}}function mr(e){let t,n,r;return t=new Me({props:{src:dn,class:"w-4 h-4"}}),{c(){te(t.$$.fragment),n=Z(`
				Save`)},l(o){ne(t.$$.fragment,o),n=q(o,`
				Save`)},m(o,i){re(t,o,i),j(o,n,i),r=!0},p:be,i(o){r||(U(t.$$.fragment,o),r=!0)},o(o){F(t.$$.fragment,o),r=!1},d(o){ie(t,o),o&&g(n)}}}function Nt(e){let t,n,r;function o(s){e[25](s)}let i={label:"Bayer Level ("+e[1]+")",min:0,max:5,step:1};return e[1]!==void 0&&(i.value=e[1]),t=new lt({props:i}),de.push(()=>_e(t,"value",o)),{c(){te(t.$$.fragment)},l(s){ne(t.$$.fragment,s)},m(s,a){re(t,s,a),r=!0},p(s,a){const u={};a[0]&2&&(u.label="Bayer Level ("+s[1]+")"),!n&&a[0]&2&&(n=!0,u.value=s[1],ve(()=>n=!1)),t.$set(u)},i(s){r||(U(t.$$.fragment,s),r=!0)},o(s){F(t.$$.fragment,s),r=!1},d(s){ie(t,s)}}}function Bt(e){let t,n,r;function o(s){e[26](s)}let i={aspectRatio:1,minWidth:1,minHeight:1,maxHeight:1e3,maxWidth:1e3};return e[2]!==void 0&&(i.width=e[2]),t=new Ot({props:i}),de.push(()=>_e(t,"width",o)),{c(){te(t.$$.fragment)},l(s){ne(t.$$.fragment,s)},m(s,a){re(t,s,a),r=!0},p(s,a){const u={};!n&&a[0]&4&&(n=!0,u.width=s[2],ve(()=>n=!1)),t.$set(u)},i(s){r||(U(t.$$.fragment,s),r=!0)},o(s){F(t.$$.fragment,s),r=!1},d(s){ie(t,s)}}}function Xt(e){let t,n,r;return n=new lr({props:{imageData:e[12]}}),{c(){t=E("div"),te(n.$$.fragment),this.h()},l(o){t=b(o,"DIV",{class:!0});var i=T(t);ne(n.$$.fragment,i),i.forEach(g),this.h()},h(){c(t,"class","w-full aspect-square rounded-lg bg-gray-100 p-8 grid place-items-center")},m(o,i){j(o,t,i),re(n,t,null),r=!0},p(o,i){const s={};i[0]&4096&&(s.imageData=o[12]),n.$set(s)},i(o){r||(U(n.$$.fragment,o),r=!0)},o(o){F(n.$$.fragment,o),r=!1},d(o){o&&g(t),ie(n)}}}function Ft(e){let t,n,r,o,i,s,a,u,l,f,d,m,y,A;return{c(){t=E("fieldset"),n=E("div"),r=E("input"),o=C(),i=E("label"),s=Z("Light"),a=C(),u=E("div"),l=E("input"),f=C(),d=E("label"),m=Z("Dark"),this.h()},l(p){t=b(p,"FIELDSET",{});var w=T(t);n=b(w,"DIV",{class:!0});var L=T(n);r=b(L,"INPUT",{type:!0,name:!0,id:!0}),o=P(L),i=b(L,"LABEL",{for:!0,class:!0});var D=T(i);s=q(D,"Light"),D.forEach(g),L.forEach(g),a=P(w),u=b(w,"DIV",{class:!0});var _=T(u);l=b(_,"INPUT",{type:!0,name:!0,id:!0}),f=P(_),d=b(_,"LABEL",{for:!0,class:!0});var v=T(d);m=q(v,"Dark"),v.forEach(g),_.forEach(g),w.forEach(g),this.h()},h(){c(r,"type","color"),c(r,"name","color-light"),c(r,"id","color-light"),c(i,"for","color-light"),c(i,"class","font-medium text-gray-900"),c(n,"class","flex gap-3"),c(l,"type","color"),c(l,"name","color-dark"),c(l,"id","color-dark"),c(d,"for","color-dark"),c(d,"class","font-medium text-gray-900"),c(u,"class","flex gap-3")},m(p,w){j(p,t,w),h(t,n),h(n,r),Ie(r,e[9]),h(n,o),h(n,i),h(i,s),h(t,a),h(t,u),h(u,l),Ie(l,e[10]),h(u,f),h(u,d),h(d,m),y||(A=[K(r,"input",e[30]),K(l,"input",e[31])],y=!0)},p(p,w){w[0]&512&&Ie(r,p[9]),w[0]&1024&&Ie(l,p[10])},d(p){p&&g(t),y=!1,Pe(A)}}}function pr(e){let t,n,r,o,i,s,a,u,l,f;const d=[cr,ur],m=[];function y(p,w){return p[4]&&p[12]?0:1}i=y(e),s=m[i]=d[i](e);let A=hr(e);return{c(){t=C(),n=C(),r=E("main"),o=E("section"),s.c(),a=C(),A&&A.c(),this.h()},l(p){un("svelte-1hm2pfs",document.head).forEach(g),t=P(p),n=P(p),r=b(p,"MAIN",{class:!0});var L=T(r);o=b(L,"SECTION",{class:!0});var D=T(o);s.l(D),D.forEach(g),a=P(L),A&&A.l(L),L.forEach(g),this.h()},h(){document.title="Dithering",c(o,"class","flex-1 overflow-hidden select-none"),c(r,"class","w-screen max-w-screen h-screen max-h-screen flex md:flex-row flex-col bg-gray-300")},m(p,w){j(p,t,w),j(p,n,w),j(p,r,w),h(r,o),m[i].m(o,null),h(r,a),A&&A.m(r,null),u=!0,l||(f=[K(document.body,"drop",ot(e[17])),K(document.body,"dragover",ot(gr))],l=!0)},p(p,w){let L=i;i=y(p),i===L?m[i].p(p,w):(xe(),F(m[L],1,1,()=>{m[L]=null}),Fe(),s=m[i],s?s.p(p,w):(s=m[i]=d[i](p),s.c()),U(s,1),s.m(o,null)),A.p(p,w)},i(p){u||(U(s),U(A),u=!0)},o(p){F(s),F(A),u=!1},d(p){p&&g(t),p&&g(n),p&&g(r),m[i].d(),A&&A.d(),l=!1,Pe(f)}}}const gr=()=>{};function _r(e,t,n){let r,o,i;const s=[zn,Vn,Hn];let a=.5,u=.3,l=!1,f="#ede6cc",d="#21263f",m=null,y="blue_noise",A=3,p=256,w=300,L=null;async function D(){m&&await Mn(m,"dithered","png")}const _=[{name:"Bayer",value:"bayer"},{name:"Blue Noise",value:"blue_noise"},{name:"White Noise",value:"white_noise"}];async function v(k){var ae;const z=(ae=k.dataTransfer)==null?void 0:ae.files[0];if(z){if(!z.type.startsWith("image/")){alert("Please drop an image file");return}try{n(4,L=await St(z))}catch(Re){alert("Failed to load image"),console.error(Re)}}}async function I(k){const z=k.target.files[0];if(z)try{n(4,L=await St(z))}catch(ae){alert("Failed to load image"),console.error(ae)}}async function B(k){const z=new Image;z.onload=()=>{n(4,L=z)},z.src=k}let R=null;function N(k){de[k?"unshift":"push"](()=>{m=k,n(11,m)})}const O=()=>n(4,L=null),X=k=>B(k);function M(k){y=k,n(0,y)}function W(k){A=k,n(1,A)}function G(k){p=k,n(2,p)}function se(k){a=k,n(6,a)}function Q(k){u=k,n(7,u)}function he(){l=this.checked,n(8,l)}function oe(){f=this.value,n(9,f)}function J(){d=this.value,n(10,d)}function me(k){w=k,n(3,w)}function le(k){i=k,n(5,i),n(4,L)}return e.$$.update=()=>{if(e.$$.dirty[0]&4&&n(20,r=p),e.$$.dirty[0]&16&&n(5,i=L!=null&&L.width&&(L!=null&&L.height)?L.width/L.height:1),e.$$.dirty[0]&40&&n(13,o=w/i),e.$$.dirty[0]&1048583&&"ImageData"in globalThis){let k;switch(y){case"bayer":k={mode:"bayer",level:A};break;case"blue_noise":k={mode:"blue_noise"};break;case"white_noise":k={mode:"white_noise",width:p,height:r};break}ir(k).then(z=>n(12,R=z))}},[y,A,p,w,L,i,a,u,l,f,d,m,R,o,s,D,_,v,I,B,r,N,O,X,M,W,G,se,Q,he,oe,J,me,le]}class Ar extends Ae{constructor(t){super(),we(this,t,_r,pr,ye,{},null,[-1,-1])}}export{Ar as component};
