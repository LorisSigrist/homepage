var dn=Object.defineProperty;var hn=(e,t,n)=>t in e?dn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ke=(e,t,n)=>(hn(e,typeof t!="symbol"?t+"":t,n),n);import{S as Le,i as Se,s as Ie,k as _,q as Z,a as P,y as ee,l as v,m as A,r as q,h as g,c as U,z as te,n as c,b as H,G as h,A as ne,N as Q,g as N,d as X,B as re,O as Be,P as mn,Q as Dt,u as gt,H as Te,R as Zt,T as pn,U as Me,V as gn,C as at,D as lt,E as ut,F as ct,W as _n,p as ft,X as He,Y as dt,w as me,Z as qt,_ as Ae,J as vn,f as xe,$ as we,v as Ve,M as ht}from"../chunks/index.70018727.js";import{I as Fe,L as En,A as bn,a as An,P as wn,X as yn}from"../chunks/Icon.f04b63ac.js";function Tn(e){let t,n,r,s,i,o,a,l,u,f,d,m,T,y,w,L,I,C,b,p,S,B,R,M,O,x;return T=new Fe({props:{src:En,class:"w-4 h-4",solid:!0}}),{c(){t=_("fieldset"),n=_("div"),r=_("label"),s=Z("Width"),i=P(),o=_("div"),a=_("input"),l=P(),u=_("div"),f=Z("px"),d=P(),m=_("span"),ee(T.$$.fragment),y=P(),w=_("div"),L=_("label"),I=Z("Height"),C=P(),b=_("div"),p=_("input"),S=P(),B=_("div"),R=Z("px"),this.h()},l(D){t=v(D,"FIELDSET",{class:!0});var W=A(t);n=v(W,"DIV",{class:!0});var $=A(n);r=v($,"LABEL",{for:!0,class:!0});var ie=A(r);s=q(ie,"Width"),ie.forEach(g),i=U($),o=v($,"DIV",{class:!0});var se=A(o);a=v(se,"INPUT",{name:!0,id:!0,type:!0,min:!0,max:!0,step:!0,class:!0,placeholder:!0}),l=U(se),u=v(se,"DIV",{class:!0});var K=A(u);f=q(K,"px"),K.forEach(g),se.forEach(g),$.forEach(g),d=U(W),m=v(W,"SPAN",{class:!0});var pe=A(m);te(T.$$.fragment,pe),pe.forEach(g),y=U(W),w=v(W,"DIV",{class:!0});var oe=A(w);L=v(oe,"LABEL",{for:!0,class:!0});var le=A(L);I=q(le,"Height"),le.forEach(g),C=U(oe),b=v(oe,"DIV",{class:!0});var ue=A(b);p=v(ue,"INPUT",{type:!0,id:!0,name:!0,min:!0,max:!0,step:!0,class:!0,placeholder:!0}),S=U(ue),B=v(ue,"DIV",{class:!0});var k=A(B);R=q(k,"px"),k.forEach(g),ue.forEach(g),oe.forEach(g),W.forEach(g),this.h()},h(){c(r,"for","width-"+e[8]),c(r,"class","block text-sm font-medium leading-6 text-gray-900"),c(a,"name","width"),c(a,"id","width-"+e[8]),c(a,"type","number"),c(a,"min",e[3]),c(a,"max",e[1]),c(a,"step","1"),a.value=e[0],c(a,"class","block w-full rounded-md border-0 py-1.5 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"),c(a,"placeholder","600"),c(u,"class","pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400"),c(o,"class","relative mt-2 rounded-md shadow-sm"),c(n,"class","w-full"),c(m,"class","text-gray-500 pb-2 cursor-not-allowed"),c(L,"for","height-"+e[9]),c(L,"class","block text-sm font-medium leading-6 text-gray-900"),c(p,"type","number"),c(p,"id","height-"+e[9]),c(p,"name","height"),c(p,"min",e[4]),c(p,"max",e[2]),c(p,"step","1"),p.value=e[5],c(p,"class","block w-full rounded-md border-0 py-1.5 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"),c(p,"placeholder","340"),c(B,"class","pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400"),c(b,"class","relative mt-2 rounded-md shadow-sm"),c(w,"class","w-full"),c(t,"class","flex gap-3 items-end justify-between")},m(D,W){H(D,t,W),h(t,n),h(n,r),h(r,s),h(n,i),h(n,o),h(o,a),h(o,l),h(o,u),h(u,f),h(t,d),h(t,m),ne(T,m,null),h(t,y),h(t,w),h(w,L),h(L,I),h(w,C),h(w,b),h(b,p),h(b,S),h(b,B),h(B,R),M=!0,O||(x=[Q(a,"input",e[6]),Q(p,"input",e[7])],O=!0)},p(D,[W]){(!M||W&8)&&c(a,"min",D[3]),(!M||W&2)&&c(a,"max",D[1]),(!M||W&1&&a.value!==D[0])&&(a.value=D[0]),(!M||W&16)&&c(p,"min",D[4]),(!M||W&4)&&c(p,"max",D[2]),(!M||W&32&&p.value!==D[5])&&(p.value=D[5])},i(D){M||(N(T.$$.fragment,D),M=!0)},o(D){X(T.$$.fragment,D),M=!1},d(D){D&&g(t),re(T),O=!1,Be(x)}}}function kt(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}function Ln(e,t,n){let r,{width:s}=t,{aspectRatio:i}=t,{maxWidth:o=null}=t,{maxHeight:a=null}=t,{minWidth:l=null}=t,{minHeight:u=null}=t;function f(y){const w=y.target.value;w&&(l!==null&&w<l||o!==null&&w>o||n(0,s=w))}function d(y){const w=y.target.value;w&&(u!==null&&w<u||a!==null&&w>a||n(0,s=Math.round(i*w)))}let m=kt(),T=kt();return e.$$set=y=>{"width"in y&&n(0,s=y.width),"aspectRatio"in y&&n(10,i=y.aspectRatio),"maxWidth"in y&&n(1,o=y.maxWidth),"maxHeight"in y&&n(2,a=y.maxHeight),"minWidth"in y&&n(3,l=y.minWidth),"minHeight"in y&&n(4,u=y.minHeight)},e.$$.update=()=>{e.$$.dirty&1025&&n(5,r=Math.round(s/i))},[s,o,a,l,u,r,f,d,m,T,i]}class Qt extends Le{constructor(t){super(),Se(this,t,Ln,Tn,Ie,{width:0,aspectRatio:10,maxWidth:1,maxHeight:2,minWidth:3,minHeight:4})}}function Ct(e,t,n){const r=e.slice();return r[6]=t[n],r}function Mt(e){let t,n=e[6].name+"",r,s,i;return{c(){t=_("option"),r=Z(n),this.h()},l(o){t=v(o,"OPTION",{});var a=A(t);r=q(a,n),a.forEach(g),this.h()},h(){t.__value=s=e[6].value,t.value=t.__value,t.selected=i=e[6].value===e[0]},m(o,a){H(o,t,a),h(t,r)},p(o,a){a&2&&n!==(n=o[6].name+"")&&gt(r,n),a&2&&s!==(s=o[6].value)&&(t.__value=s,t.value=t.__value),a&3&&i!==(i=o[6].value===o[0])&&(t.selected=i)},d(o){o&&g(t)}}}function Sn(e){let t,n,r,s,i,o,a,l=e[1],u=[];for(let f=0;f<l.length;f+=1)u[f]=Mt(Ct(e,l,f));return{c(){t=_("div"),n=_("label"),r=Z(e[2]),s=P(),i=_("select");for(let f=0;f<u.length;f+=1)u[f].c();this.h()},l(f){t=v(f,"DIV",{});var d=A(t);n=v(d,"LABEL",{for:!0,class:!0});var m=A(n);r=q(m,e[2]),m.forEach(g),s=U(d),i=v(d,"SELECT",{id:!0,name:!0,class:!0});var T=A(i);for(let y=0;y<u.length;y+=1)u[y].l(T);T.forEach(g),d.forEach(g),this.h()},h(){c(n,"for",e[4]),c(n,"class","block text-sm font-medium leading-6 text-gray-900"),c(i,"id",e[4]),c(i,"name",e[3]),c(i,"class","mt-2 block w-full rounded-md border-0 py-1.5 pl-3 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-indigo-600 sm:text-sm sm:leading-6"),e[0]===void 0&&mn(()=>e[5].call(i))},m(f,d){H(f,t,d),h(t,n),h(n,r),h(t,s),h(t,i);for(let m=0;m<u.length;m+=1)u[m]&&u[m].m(i,null);Dt(i,e[0],!0),o||(a=Q(i,"change",e[5]),o=!0)},p(f,[d]){if(d&4&&gt(r,f[2]),d&3){l=f[1];let m;for(m=0;m<l.length;m+=1){const T=Ct(f,l,m);u[m]?u[m].p(T,d):(u[m]=Mt(T),u[m].c(),u[m].m(i,null))}for(;m<u.length;m+=1)u[m].d(1);u.length=l.length}d&8&&c(i,"name",f[3]),d&3&&Dt(i,f[0])},i:Te,o:Te,d(f){f&&g(t),Zt(u,f),o=!1,a()}}}function In(e,t,n){let{options:r}=t,{selected:s}=t,{label:i}=t,{name:o=void 0}=t,a=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);function l(){s=pn(this),n(0,s),n(1,r)}return e.$$set=u=>{"options"in u&&n(1,r=u.options),"selected"in u&&n(0,s=u.selected),"label"in u&&n(2,i=u.label),"name"in u&&n(3,o=u.name)},[s,r,i,o,a,l]}class Rn extends Le{constructor(t){super(),Se(this,t,In,Sn,Ie,{options:1,selected:0,label:2,name:3})}}function Dn(e){let t,n,r,s,i,o,a;return{c(){t=_("div"),n=_("label"),r=Z(e[1]),s=P(),i=_("input"),this.h()},l(l){t=v(l,"DIV",{});var u=A(t);n=v(u,"LABEL",{for:!0,class:!0});var f=A(n);r=q(f,e[1]),f.forEach(g),s=U(u),i=v(u,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0,name:!0,class:!0}),u.forEach(g),this.h()},h(){c(n,"for",e[6]),c(n,"class","block mb-2 text-sm font-medium text-gray-900 dark:text-white"),c(i,"id",e[6]),c(i,"type","range"),c(i,"min",e[3]),c(i,"max",e[4]),c(i,"step",e[5]),c(i,"name",e[2]),c(i,"class","w-full h-1.5 mb-6 bg-white ring-1 ring-gray-300 shadow-sm rounded-lg appearance-none cursor-pointer accent-indigo-600 dark:bg-gray-700")},m(l,u){H(l,t,u),h(t,n),h(n,r),h(t,s),h(t,i),Me(i,e[0]),o||(a=[Q(i,"change",e[7]),Q(i,"input",e[7])],o=!0)},p(l,[u]){u&2&&gt(r,l[1]),u&8&&c(i,"min",l[3]),u&16&&c(i,"max",l[4]),u&32&&c(i,"step",l[5]),u&4&&c(i,"name",l[2]),u&1&&Me(i,l[0])},i:Te,o:Te,d(l){l&&g(t),o=!1,Be(a)}}}function kn(e,t,n){let{label:r}=t,{name:s=void 0}=t,{min:i=null}=t,{max:o=null}=t,{value:a=0}=t,{step:l=1}=t,u=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);function f(){a=gn(this.value),n(0,a)}return e.$$set=d=>{"label"in d&&n(1,r=d.label),"name"in d&&n(2,s=d.name),"min"in d&&n(3,i=d.min),"max"in d&&n(4,o=d.max),"value"in d&&n(0,a=d.value),"step"in d&&n(5,l=d.step)},[a,r,s,i,o,l,u,f]}class mt extends Le{constructor(t){super(),Se(this,t,kn,Dn,Ie,{label:1,name:2,min:3,max:4,value:0,step:5})}}var Cn="precision highp float;attribute vec2 position;varying vec2 fragCoord;void main(){fragCoord.x=position.x*0.5+0.5;fragCoord.y=position.y*0.5+0.5;gl_Position=vec4(position,0.0,1.0);}",Mn="precision highp float;varying vec2 fragCoord;uniform sampler2D uSampler;uniform float uThreshold;uniform sampler2D uNoiseSampler;uniform vec2 uNoiseSamplerSize;uniform float uNoise;uniform float uMonochrome;uniform vec2 uSize;uniform vec3 uDarkColor;uniform vec3 uLightColor;void main(void){vec2 imgPixel=vec2(fragCoord.x*uSize.x,fragCoord.y*uSize.y);vec2 noisePixel=vec2(mod(imgPixel.x,uNoiseSamplerSize.x),mod(imgPixel.y,uNoiseSamplerSize.y));vec2 noiseUV=vec2(noisePixel.x/uNoiseSamplerSize.x,noisePixel.y/uNoiseSamplerSize.y);float noise=(texture2D(uNoiseSampler,noiseUV).r-0.5)*2.0*uNoise;vec4 color=texture2D(uSampler,fragCoord);float gray=dot(color.rgb,vec3(0.299,0.587,0.114));color.r=color.r*(1.0-uMonochrome)+gray*uMonochrome;color.g=color.g*(1.0-uMonochrome)+gray*uMonochrome;color.b=color.b*(1.0-uMonochrome)+gray*uMonochrome;vec3 thresholds=vec3(step(uThreshold,color.r+noise),step(uThreshold,color.g+noise),step(uThreshold,color.b+noise));if(uMonochrome>0.0){color.rgb=vec3(mix(uDarkColor.r,uLightColor.r,thresholds.r),mix(uDarkColor.g,uLightColor.g,thresholds.g),mix(uDarkColor.b,uLightColor.b,thresholds.b));}else{color.rgb=thresholds;}gl_FragColor=color;}";function Ge(e){return(e&e-1)===0}function Pn(e,t,n){const r=Pt(e,e.VERTEX_SHADER,t),s=Pt(e,e.FRAGMENT_SHADER,n),i=e.createProgram();if(!i)throw new Error("Failed to create shader program");if(e.attachShader(i,r),e.attachShader(i,s),e.linkProgram(i),!e.getProgramParameter(i,e.LINK_STATUS))throw Error(`Unable to initialize the shader program: ${e.getProgramInfoLog(i)}`);return i}function Pt(e,t,n){const r=e.createShader(t);if(!r)throw new Error("Failed to create shader");if(e.shaderSource(r,n),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))throw Error(`An error occurred compiling the shaders: ${e.getShaderInfoLog(r)}`);return r}function Un(e){const t=e.createTexture();if(!t)throw new Error("Failed to create texture");e.bindTexture(e.TEXTURE_2D,t);const n=0,r=e.RGBA,s=1,i=1,o=0,a=e.RGBA,l=e.UNSIGNED_BYTE,u=new Uint8Array([0,0,255,255]);return e.texImage2D(e.TEXTURE_2D,n,r,s,i,o,a,l,u),t}function Nn(e,t,n){const s=e.RGBA,i=e.RGBA,o=e.UNSIGNED_BYTE;e.bindTexture(e.TEXTURE_2D,t),e.texImage2D(e.TEXTURE_2D,0,s,i,o,n),Ge(n.width)&&Ge(n.height)?e.generateMipmap(e.TEXTURE_2D):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR))}function Bn(e){const t=e.createBuffer(),n=e.createBuffer(),r=[-1,1,-1,-1,1,-1,1,1],s=[3,2,1,3,1,0];return e.bindBuffer(e.ARRAY_BUFFER,t),e.bufferData(e.ARRAY_BUFFER,new Float32Array(r),e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(s),e.STATIC_DRAW),{vertex_buffer:t,index_buffer:n}}function Fn(e,t){const n=e.createTexture();if(!n)throw new Error("Failed to create texture");return e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),Ge(t.width)&&Ge(t.height)?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR)),n}function Xn(e,t){let n=t;const r=e.getContext("webgl",{preserveDrawingBuffer:!0});if(!r){alert("WebGL not supported");return}const s=()=>{Nn(r,C,n.image)};r.clearColor(0,0,0,1),r.clear(r.COLOR_BUFFER_BIT);const i=Pn(r,Cn,Mn),{vertex_buffer:o,index_buffer:a}=Bn(r),l=r.getAttribLocation(i,"position");r.vertexAttribPointer(l,2,r.FLOAT,!1,0,0),r.enableVertexAttribArray(l);const u=r.getUniformLocation(i,"uSampler"),f=r.getUniformLocation(i,"uThreshold"),d=r.getUniformLocation(i,"uNoiseSampler"),m=r.getUniformLocation(i,"uNoise"),T=r.getUniformLocation(i,"uSize"),y=r.getUniformLocation(i,"uNoiseSamplerSize"),w=r.getUniformLocation(i,"uMonochrome"),L=r.getUniformLocation(i,"uDarkColor"),I=r.getUniformLocation(i,"uLightColor"),C=Un(r);r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!0),s();let b,p;r.useProgram(i);let S=null;const B=()=>{b&&r.deleteTexture(b),b=Fn(r,n.thresholdMap),p={width:n.thresholdMap.width,height:n.thresholdMap.height}};B();const R=()=>{r.viewport(0,0,n.output_width,n.output_height),r.clearColor(0,0,0,1),r.clear(r.COLOR_BUFFER_BIT),r.bindBuffer(r.ARRAY_BUFFER,o),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,a),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,C),r.uniform1i(u,0),r.activeTexture(r.TEXTURE1),r.bindTexture(r.TEXTURE_2D,b),r.uniform1i(d,1),r.uniform2f(y,p.width,p.height),r.uniform1f(f,n.threshold),r.uniform1f(m,n.noiseIntensity),r.uniform2f(T,n.output_width,n.output_height),r.uniform1f(w,n.monochrome?1:0),r.uniform3f(L,...Ut(n.colorDark)),r.uniform3f(I,...Ut(n.colorLight)),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT),r.drawElements(r.TRIANGLES,6,r.UNSIGNED_SHORT,0)};function M(){S=requestAnimationFrame(()=>{R(),S=null})}return M(),{update(O){const x=n.image!==O.image,D=n.thresholdMap!==O.thresholdMap;n=O,x&&s(),D&&B(),M()},destroy(){S!==null&&cancelAnimationFrame(S)}}}function Ut(e){const t=parseInt(e.slice(1,3),16)/255,n=parseInt(e.slice(3,5),16)/255,r=parseInt(e.slice(5,7),16)/255;return[t,n,r]}function Wn(e){let t,n,r,s,i;const o=e[3].default,a=at(o,e,e[2],null);return{c(){t=_("button"),a&&a.c(),this.h()},l(l){t=v(l,"BUTTON",{type:!0,class:!0});var u=A(t);a&&a.l(u),u.forEach(g),this.h()},h(){t.disabled=e[0],c(t,"type","button"),c(t,"class",n=e[1][e[0]?"disabled":"normal"]+" rounded-md w-full px-2.5 py-1.5 text-sm font-semibold focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 flex items-center justify-center gap-2")},m(l,u){H(l,t,u),a&&a.m(t,null),r=!0,s||(i=Q(t,"click",e[4]),s=!0)},p(l,[u]){a&&a.p&&(!r||u&4)&&lt(a,o,l,l[2],r?ct(o,l[2],u,null):ut(l[2]),null),(!r||u&1)&&(t.disabled=l[0]),(!r||u&1&&n!==(n=l[1][l[0]?"disabled":"normal"]+" rounded-md w-full px-2.5 py-1.5 text-sm font-semibold focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 flex items-center justify-center gap-2"))&&c(t,"class",n)},i(l){r||(N(a,l),r=!0)},o(l){X(a,l),r=!1},d(l){l&&g(t),a&&a.d(l),s=!1,i()}}}function On(e,t,n){let{$$slots:r={},$$scope:s}=t,{disabled:i=!1}=t;const o={normal:"bg-indigo-600 text-white shadow-sm hover:bg-indigo-500",disabled:"bg-gray-200 text-gray-400 shadow-none cursor-not-allowed"};function a(l){_n.call(this,e,l)}return e.$$set=l=>{"disabled"in l&&n(0,i=l.disabled),"$$scope"in l&&n(2,s=l.$$scope)},[i,o,s,r,a]}class xn extends Le{constructor(t){super(),Se(this,t,On,Wn,Ie,{disabled:0})}}async function Vn(e,t,n="png"){const r=new OffscreenCanvas(e.width,e.height),s=r.getContext("2d");if(!s)return;s.drawImage(e,0,0,e.width,e.height);const i=await r.convertToBlob({type:"image/"+n,quality:1}),o=URL.createObjectURL(i),a=document.createElement("a");a.download=`${t}.${n}`,a.href=o,a.click(),a.remove(),URL.revokeObjectURL(o)}function Nt(e){return new Promise((t,n)=>{e.type.startsWith("image/")||n(new Error("Not an image file"));const r=new FileReader;r.onload=s=>{if(typeof r.result!="string")return;const i=new Image;i.onload=()=>{t(i)},i.onerror=o=>{n(o)},i.src=r.result},r.onerror=s=>{n(s)},r.readAsDataURL(e)})}var zn=class extends EventTarget{dispatchTypedEvent(e,t){return super.dispatchEvent(t)}};class be{constructor(t){this.id=-1,this.nativePointer=t,this.pageX=t.pageX,this.pageY=t.pageY,this.clientX=t.clientX,this.clientY=t.clientY,self.Touch&&t instanceof Touch?this.id=t.identifier:Ue(t)&&(this.id=t.pointerId)}getCoalesced(){if("getCoalescedEvents"in this.nativePointer){const t=this.nativePointer.getCoalescedEvents().map(n=>new be(n));if(t.length>0)return t}return[this]}}const Ue=e=>"pointerId"in e,it=e=>"changedTouches"in e,Bt=()=>{};class Yn{constructor(t,{start:n=()=>!0,move:r=Bt,end:s=Bt,rawUpdates:i=!1,avoidPointerEvents:o=!1}={}){this._element=t,this.startPointers=[],this.currentPointers=[],this._excludeFromButtonsCheck=new Set,this._pointerStart=a=>{if(Ue(a)&&a.buttons===0)this._excludeFromButtonsCheck.add(a.pointerId);else if(!(a.buttons&1))return;const l=new be(a);this.currentPointers.some(u=>u.id===l.id)||this._triggerPointerStart(l,a)&&(Ue(a)?((a.target&&"setPointerCapture"in a.target?a.target:this._element).setPointerCapture(a.pointerId),this._element.addEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move),this._element.addEventListener("pointerup",this._pointerEnd),this._element.addEventListener("pointercancel",this._pointerEnd)):(window.addEventListener("mousemove",this._move),window.addEventListener("mouseup",this._pointerEnd)))},this._touchStart=a=>{for(const l of Array.from(a.changedTouches))this._triggerPointerStart(new be(l),a)},this._move=a=>{if(!it(a)&&(!Ue(a)||!this._excludeFromButtonsCheck.has(a.pointerId))&&a.buttons===0){this._pointerEnd(a);return}const l=this.currentPointers.slice(),u=it(a)?Array.from(a.changedTouches).map(d=>new be(d)):[new be(a)],f=[];for(const d of u){const m=this.currentPointers.findIndex(T=>T.id===d.id);m!==-1&&(f.push(d),this.currentPointers[m]=d)}f.length!==0&&this._moveCallback(l,f,a)},this._triggerPointerEnd=(a,l)=>{if(!it(l)&&l.buttons&1)return!1;const u=this.currentPointers.findIndex(d=>d.id===a.id);if(u===-1)return!1;this.currentPointers.splice(u,1),this.startPointers.splice(u,1),this._excludeFromButtonsCheck.delete(a.id);const f=!(l.type==="mouseup"||l.type==="touchend"||l.type==="pointerup");return this._endCallback(a,l,f),!0},this._pointerEnd=a=>{if(this._triggerPointerEnd(new be(a),a))if(Ue(a)){if(this.currentPointers.length)return;this._element.removeEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move),this._element.removeEventListener("pointerup",this._pointerEnd),this._element.removeEventListener("pointercancel",this._pointerEnd)}else window.removeEventListener("mousemove",this._move),window.removeEventListener("mouseup",this._pointerEnd)},this._touchEnd=a=>{for(const l of Array.from(a.changedTouches))this._triggerPointerEnd(new be(l),a)},this._startCallback=n,this._moveCallback=r,this._endCallback=s,this._rawUpdates=i&&"onpointerrawupdate"in window,self.PointerEvent&&!o?this._element.addEventListener("pointerdown",this._pointerStart):(this._element.addEventListener("mousedown",this._pointerStart),this._element.addEventListener("touchstart",this._touchStart),this._element.addEventListener("touchmove",this._move),this._element.addEventListener("touchend",this._touchEnd),this._element.addEventListener("touchcancel",this._touchEnd))}stop(){this._element.removeEventListener("pointerdown",this._pointerStart),this._element.removeEventListener("mousedown",this._pointerStart),this._element.removeEventListener("touchstart",this._touchStart),this._element.removeEventListener("touchmove",this._move),this._element.removeEventListener("touchend",this._touchEnd),this._element.removeEventListener("touchcancel",this._touchEnd),this._element.removeEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move),this._element.removeEventListener("pointerup",this._pointerEnd),this._element.removeEventListener("pointercancel",this._pointerEnd),window.removeEventListener("mousemove",this._move),window.removeEventListener("mouseup",this._pointerEnd)}_triggerPointerStart(t,n){return this._startCallback(t,n)?(this.currentPointers.push(t),this.startPointers.push(t),!0):!1}}function $t(e,t,n){return Math.min(Math.max(e,t),n)}function Ft(e,t){return t?Math.sqrt((t.clientX-e.clientX)**2+(t.clientY-e.clientY)**2):0}function Xt(e,t){return t?{clientX:(e.clientX+t.clientX)/2,clientY:(e.clientY+t.clientY)/2}:e}const Qe=class extends zn{constructor(n){super();ke(this,"element");ke(this,"transform",new DOMMatrix);ke(this,"pointerTracker");this.element=n,this.element.addEventListener("wheel",this.onWheel.bind(this)),this.pointerTracker=new Yn(this.element,{start:(r,s)=>this.pointerTracker.currentPointers.length===2?!1:(s.preventDefault(),!0),move:r=>{this.onPointerMove(r,this.pointerTracker.currentPointers)},avoidPointerEvents:this.isSafari()}),this.element.addEventListener("wheel",this.onWheel.bind(this))}get x(){return this.transform.e}get y(){return this.transform.f}get scale(){return this.transform.a}set x(n){this.transform.e=n}set y(n){this.transform.f=n}set scale(n){this.transform.a=n,this.transform.d=n}onWheel(n){n.preventDefault();const r=this.element.getBoundingClientRect();let{deltaY:s}=n;const{ctrlKey:i,deltaMode:o}=n;o===1&&(s*=15);const a=s>0,l=i?100:300,u=1-(a?-s:s)/l,f=a?1/u:u,d=n.clientX-r.left,m=n.clientY-r.top;this.applyTransformation({scaleDiff:f,originX:d,originY:m})}applyTransformation(n={}){const{panX:r=0,panY:s=0,originX:i=0,originY:o=0,scaleDiff:a=1}=n,l=new DOMMatrix().translate(i,o).scale(a).translate(-i,-o),u=new DOMMatrix().translate(r,s);l.multiplySelf(u),l.multiplySelf(this.transform);const f=l.a,d=l.e,m=l.f;this.updateTransform(f,d,m)}onPointerMove(n,r){const s=this.element.getBoundingClientRect(),i=Xt(n[0],n[1]),o=Xt(r[0],r[1]),a=i.clientX-s.left,l=i.clientY-s.top,u=Ft(n[0],n[1]),f=Ft(r[0],r[1]),d=u?f/u:1;this.applyTransformation({originX:a,originY:l,scaleDiff:d,panX:o.clientX-i.clientX,panY:o.clientY-i.clientY})}updateTransform(n,r,s){if(n=$t(n,Qe.MIN_SCALE,Qe.MAX_SCALE),n===this.scale&&r===this.x&&s===this.y)return;this.x=r,this.y=s,this.scale=n;const i=new CustomEvent("panzoom:change",{bubbles:!0,detail:{x:this.x,y:this.y,scale:this.scale,matrix:this.transform}});this.dispatchTypedEvent("panzoom:change",i)}isSafari(){return/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)}destroy(){this.pointerTracker.stop()}};let Ne=Qe;ke(Ne,"MIN_SCALE",.01),ke(Ne,"MAX_SCALE",1e5);const Hn=e=>({}),Wt=e=>({}),Gn=e=>({}),Ot=e=>({});function jn(e){let t,n,r,s,i,o,a,l,u,f,d,m,T,y;const w=e[6].left,L=at(w,e,e[5],Ot),I=e[6].right,C=at(I,e,e[5],Wt);return d=new Fe({props:{src:bn,class:"w-6 h-6 text-white"}}),{c(){t=_("div"),n=_("div"),r=_("div"),s=_("div"),L&&L.c(),i=P(),o=_("div"),a=_("div"),C&&C.c(),l=P(),u=_("div"),f=_("div"),ee(d.$$.fragment),this.h()},l(b){t=v(b,"DIV",{class:!0});var p=A(t);n=v(p,"DIV",{class:!0});var S=A(n);r=v(S,"DIV",{class:!0});var B=A(r);s=v(B,"DIV",{style:!0,class:!0});var R=A(s);L&&L.l(R),R.forEach(g),B.forEach(g),i=U(S),o=v(S,"DIV",{class:!0});var M=A(o);a=v(M,"DIV",{style:!0,class:!0});var O=A(a);C&&C.l(O),O.forEach(g),M.forEach(g),S.forEach(g),l=U(p),u=v(p,"DIV",{class:!0});var x=A(u);f=v(x,"DIV",{class:!0});var D=A(f);te(d.$$.fragment,D),D.forEach(g),x.forEach(g),p.forEach(g),this.h()},h(){c(s,"style",e[2]),c(s,"class","w-full h-full origin-top-left grid place-items-center"),c(r,"class","mask-left svelte-90j1r"),c(a,"style",e[2]),c(a,"class","w-full h-full origin-top-left grid place-items-center"),c(o,"class","mask-right svelte-90j1r"),c(n,"class","w-full h-full grid place-items-center"),c(f,"class","w-12 h-12 rounded-full bg-black absolute top-1/2 -translate-x-1/2 left-1/2 grid place-items-center"),c(u,"class","handle relative shadow-lg svelte-90j1r"),c(t,"class","pz-container svelte-90j1r"),ft(t,"--split-point",e[1]+"%")},m(b,p){H(b,t,p),h(t,n),h(n,r),h(r,s),L&&L.m(s,null),h(n,i),h(n,o),h(o,a),C&&C.m(a,null),h(t,l),h(t,u),h(u,f),ne(d,f,null),e[7](t),m=!0,T||(y=[He(e[4].call(null,n)),He(e[3].call(null,u)),Q(u,"pointercancel",dt(Zn))],T=!0)},p(b,[p]){L&&L.p&&(!m||p&32)&&lt(L,w,b,b[5],m?ct(w,b[5],p,Gn):ut(b[5]),Ot),(!m||p&4)&&c(s,"style",b[2]),C&&C.p&&(!m||p&32)&&lt(C,I,b,b[5],m?ct(I,b[5],p,Hn):ut(b[5]),Wt),(!m||p&4)&&c(a,"style",b[2]),p&2&&ft(t,"--split-point",b[1]+"%")},i(b){m||(N(L,b),N(C,b),N(d.$$.fragment,b),m=!0)},o(b){X(L,b),X(C,b),X(d.$$.fragment,b),m=!1},d(b){b&&g(t),L&&L.d(b),C&&C.d(b),re(d),e[7](null),T=!1,Be(y)}}}const Zn=()=>{};function qn(e,t,n){let{$$slots:r={},$$scope:s}=t,i=null,o=50;function a(d){d.addEventListener("pointerdown",m=>{const T=m.clientX,y=o,w=document.body.style.cursor;document.body.style.cursor="col-resize";const L=C=>{const b=i?i.clientWidth:window.innerWidth,p=C.clientX-T,S=y+p/b*100;n(1,o=$t(S,0,100))},I=()=>{document.body.style.cursor=w,window.removeEventListener("pointermove",L),window.removeEventListener("pointerup",I),window.removeEventListener("pointercancel",I)};window.addEventListener("pointermove",L),window.addEventListener("pointerup",I),window.addEventListener("pointercancel",I)})}let l="transform: none;";function u(d){const m=new Ne(d);function T(y){const{matrix:w}=y.detail;n(2,l=`transform: ${w.toString()};`)}return m.addEventListener("panzoom:change",T),{destroy(){m.removeEventListener("panzoom:change",T),m.destroy()}}}function f(d){me[d?"unshift":"push"](()=>{i=d,n(0,i)})}return e.$$set=d=>{"$$scope"in d&&n(5,s=d.$$scope)},[i,o,l,a,u,s,r,f]}class Qn extends Le{constructor(t){super(),Se(this,t,qn,jn,Ie,{})}}const $n=""+new URL("../assets/cat.58b560b7.jpg",import.meta.url).href,Kn="data:image/avif;base64,AAAAHGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZgAAAOptZXRhAAAAAAAAACFoZGxyAAAAAAAAAABwaWN0AAAAAAAAAAAAAAAAAAAAAA5waXRtAAAAAAABAAAAImlsb2MAAAAAREAAAQABAAAAAAEOAAEAAAAAAAAApwAAACNpaW5mAAAAAAABAAAAFWluZmUCAAAAAAEAAGF2MDEAAAAAamlwcnAAAABLaXBjbwAAABNjb2xybmNseAACAAIABoAAAAAMYXYxQ4EEDAAAAAAUaXNwZQAAAAAAAAJyAAACcgAAABBwaXhpAAAAAAMICAgAAAAXaXBtYQAAAAAAAAABAAEEgYIDhAAAAK9tZGF0EgAKChkmZxnHggQEDQgylgERQAEEEEEA9NBi7JFlrqXV1mwMry34uIYK7WRdWYJ/ZZ0EIyWW8aLm92oz5LY0W+l2FiKsHpp4BB3Vrk+iwHuzboac7wmSHHHRWklZdZ2hpEAi4E31lf1tjXnXie8fh4lzApbqjH5Pj7ZN6761WygYVdc2zvJOsflFZstng6rQU/oulDZSO6fQWKvzpO9pseyXBLfms64=",Jn=""+new URL("../assets/david.0e7e3b46.png",import.meta.url).href;/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Kt=Symbol("Comlink.proxy"),er=Symbol("Comlink.endpoint"),tr=Symbol("Comlink.releaseProxy"),st=Symbol("Comlink.finalizer"),Ye=Symbol("Comlink.thrown"),Jt=e=>typeof e=="object"&&e!==null||typeof e=="function",nr={canHandle:e=>Jt(e)&&e[Kt],serialize(e){const{port1:t,port2:n}=new MessageChannel;return tn(e,t),[n,[n]]},deserialize(e){return e.start(),rn(e)}},rr={canHandle:e=>Jt(e)&&Ye in e,serialize({value:e}){let t;return e instanceof Error?t={isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:t={isError:!1,value:e},[t,[]]},deserialize(e){throw e.isError?Object.assign(new Error(e.value.message),e.value):e.value}},en=new Map([["proxy",nr],["throw",rr]]);function ir(e,t){for(const n of e)if(t===n||n==="*"||n instanceof RegExp&&n.test(t))return!0;return!1}function tn(e,t=globalThis,n=["*"]){t.addEventListener("message",function r(s){if(!s||!s.data)return;if(!ir(n,s.origin)){console.warn(`Invalid origin '${s.origin}' for comlink proxy`);return}const{id:i,type:o,path:a}=Object.assign({path:[]},s.data),l=(s.data.argumentList||[]).map(ye);let u;try{const f=a.slice(0,-1).reduce((m,T)=>m[T],e),d=a.reduce((m,T)=>m[T],e);switch(o){case"GET":u=d;break;case"SET":f[a.slice(-1)[0]]=ye(s.data.value),u=!0;break;case"APPLY":u=d.apply(f,l);break;case"CONSTRUCT":{const m=new d(...l);u=cr(m)}break;case"ENDPOINT":{const{port1:m,port2:T}=new MessageChannel;tn(e,T),u=ur(m,[m])}break;case"RELEASE":u=void 0;break;default:return}}catch(f){u={value:f,[Ye]:0}}Promise.resolve(u).catch(f=>({value:f,[Ye]:0})).then(f=>{const[d,m]=qe(f);t.postMessage(Object.assign(Object.assign({},d),{id:i}),m),o==="RELEASE"&&(t.removeEventListener("message",r),nn(t),st in e&&typeof e[st]=="function"&&e[st]())}).catch(f=>{const[d,m]=qe({value:new TypeError("Unserializable return value"),[Ye]:0});t.postMessage(Object.assign(Object.assign({},d),{id:i}),m)})}),t.start&&t.start()}function sr(e){return e.constructor.name==="MessagePort"}function nn(e){sr(e)&&e.close()}function rn(e,t){return pt(e,[],t)}function ze(e){if(e)throw new Error("Proxy has been released and is not useable")}function sn(e){return Ce(e,{type:"RELEASE"}).then(()=>{nn(e)})}const je=new WeakMap,Ze="FinalizationRegistry"in globalThis&&new FinalizationRegistry(e=>{const t=(je.get(e)||0)-1;je.set(e,t),t===0&&sn(e)});function or(e,t){const n=(je.get(t)||0)+1;je.set(t,n),Ze&&Ze.register(e,t,e)}function ar(e){Ze&&Ze.unregister(e)}function pt(e,t=[],n=function(){}){let r=!1;const s=new Proxy(n,{get(i,o){if(ze(r),o===tr)return()=>{ar(s),sn(e),r=!0};if(o==="then"){if(t.length===0)return{then:()=>s};const a=Ce(e,{type:"GET",path:t.map(l=>l.toString())}).then(ye);return a.then.bind(a)}return pt(e,[...t,o])},set(i,o,a){ze(r);const[l,u]=qe(a);return Ce(e,{type:"SET",path:[...t,o].map(f=>f.toString()),value:l},u).then(ye)},apply(i,o,a){ze(r);const l=t[t.length-1];if(l===er)return Ce(e,{type:"ENDPOINT"}).then(ye);if(l==="bind")return pt(e,t.slice(0,-1));const[u,f]=xt(a);return Ce(e,{type:"APPLY",path:t.map(d=>d.toString()),argumentList:u},f).then(ye)},construct(i,o){ze(r);const[a,l]=xt(o);return Ce(e,{type:"CONSTRUCT",path:t.map(u=>u.toString()),argumentList:a},l).then(ye)}});return or(s,e),s}function lr(e){return Array.prototype.concat.apply([],e)}function xt(e){const t=e.map(qe);return[t.map(n=>n[0]),lr(t.map(n=>n[1]))]}const on=new WeakMap;function ur(e,t){return on.set(e,t),e}function cr(e){return Object.assign(e,{[Kt]:!0})}function qe(e){for(const[t,n]of en)if(n.canHandle(e)){const[r,s]=n.serialize(e);return[{type:"HANDLER",name:t,value:r},s]}return[{type:"RAW",value:e},on.get(e)||[]]}function ye(e){switch(e.type){case"HANDLER":return en.get(e.name).deserialize(e.value);case"RAW":return e.value}}function Ce(e,t,n){return new Promise(r=>{const s=fr();e.addEventListener("message",function i(o){!o.data||!o.data.id||o.data.id!==s||(e.removeEventListener("message",i),r(o.data))}),e.start&&e.start(),e.postMessage(Object.assign({id:s},t),n)})}function fr(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}function dr(){return new Worker(""+new URL("../workers/worker-09b3192d.js",import.meta.url).href)}let ot=null;async function hr(e){return ot||(ot=rn(new dr)),await ot.generate(e)}function mr(e){let t,n,r,s;return{c(){t=_("canvas"),this.h()},l(i){t=v(i,"CANVAS",{class:!0,style:!0}),A(t).forEach(g),this.h()},h(){c(t,"class","w-full max-h-96 object-contain shadow-lg"),ft(t,"image-rendering","pixelated")},m(i,o){H(i,t,o),r||(s=He(n=pr.call(null,t,e[0])),r=!0)},p(i,[o]){n&&qt(n.update)&&o&1&&n.update.call(null,i[0])},i:Te,o:Te,d(i){i&&g(t),r=!1,s()}}}function pr(e,t){const n=e.getContext("2d");if(!n)return;const r=()=>{e.width=t.width,e.height=t.height,n.putImageData(t,0,0)};let s=null;const i=()=>{s||(s=requestAnimationFrame(()=>{s=null,r()}))};return i(),{destroy(){s&&cancelAnimationFrame(s)},update:o=>{t=o,i()}}}function gr(e,t,n){let{imageData:r}=t;return e.$$set=s=>{"imageData"in s&&n(0,r=s.imageData)},[r]}class _r extends Le{constructor(t){super(),Se(this,t,gr,mr,Ie,{imageData:0})}}function Vt(e,t,n){const r=e.slice();return r[34]=t[n],r}function vr(e){let t,n,r,s,i,o,a,l,u,f,d,m,T,y,w,L,I,C,b=e[14],p=[];for(let S=0;S<b.length;S+=1)p[S]=zt(Vt(e,b,S));return f=new Fe({props:{src:wn,class:"w-12 h-12 text-gray-400"}}),{c(){t=_("div"),n=_("div"),r=_("p"),s=Z("Select or Drop an Image to Start"),i=P(),o=_("div");for(let S=0;S<p.length;S+=1)p[S].c();a=P(),l=_("label"),u=_("div"),ee(f.$$.fragment),d=P(),m=_("span"),T=Z("Choose an Image"),y=P(),w=_("input"),this.h()},l(S){t=v(S,"DIV",{class:!0});var B=A(t);n=v(B,"DIV",{class:!0});var R=A(n);r=v(R,"P",{class:!0});var M=A(r);s=q(M,"Select or Drop an Image to Start"),M.forEach(g),i=U(R),o=v(R,"DIV",{class:!0});var O=A(o);for(let $=0;$<p.length;$+=1)p[$].l(O);a=U(O),l=v(O,"LABEL",{for:!0,class:!0});var x=A(l);u=v(x,"DIV",{class:!0});var D=A(u);te(f.$$.fragment,D),D.forEach(g),d=U(x),m=v(x,"SPAN",{class:!0});var W=A(m);T=q(W,"Choose an Image"),W.forEach(g),y=U(x),w=v(x,"INPUT",{type:!0,class:!0,id:!0,accept:!0}),x.forEach(g),O.forEach(g),R.forEach(g),B.forEach(g),this.h()},h(){c(r,"class","text-2xl text-gray-500"),c(u,"class","grid place-items-center h-full w-full"),c(m,"class","sr-only"),c(w,"type","file"),c(w,"class","sr-only"),c(w,"id","image-input"),c(w,"accept","image/*"),c(l,"for","image-input"),c(l,"class","block spect-square h-24 w-24 object-cover rounded-md shadow-md border-2 border-white bg-white hover:bg-gray-100"),c(o,"class","flex gap-3 justify-center"),c(n,"class","grid gap-4"),c(t,"class","w-full h-full grid place-items-center")},m(S,B){H(S,t,B),h(t,n),h(n,r),h(r,s),h(n,i),h(n,o);for(let R=0;R<p.length;R+=1)p[R]&&p[R].m(o,null);h(o,a),h(o,l),h(l,u),ne(f,u,null),h(l,d),h(l,m),h(m,T),h(l,y),h(l,w),L=!0,I||(C=Q(w,"input",e[18]),I=!0)},p(S,B){if(B[0]&540672){b=S[14];let R;for(R=0;R<b.length;R+=1){const M=Vt(S,b,R);p[R]?p[R].p(M,B):(p[R]=zt(M),p[R].c(),p[R].m(o,a))}for(;R<p.length;R+=1)p[R].d(1);p.length=b.length}},i(S){L||(N(f.$$.fragment,S),L=!0)},o(S){X(f.$$.fragment,S),L=!1},d(S){S&&g(t),Zt(p,S),re(f),I=!1,C()}}}function Er(e){let t,n,r,s,i,o,a,l;return n=new Qn({props:{$$slots:{right:[Ar],left:[br]},$$scope:{ctx:e}}}),i=new Fe({props:{src:yn,class:"w-5 h-5 text-white"}}),{c(){t=_("div"),ee(n.$$.fragment),r=P(),s=_("button"),ee(i.$$.fragment),this.h()},l(u){t=v(u,"DIV",{class:!0});var f=A(t);te(n.$$.fragment,f),r=U(f),s=v(f,"BUTTON",{class:!0,title:!0});var d=A(s);te(i.$$.fragment,d),d.forEach(g),f.forEach(g),this.h()},h(){c(s,"class","absolute top-0 right-0 m-4 p-2 bg-black bg-opacity-40 rounded-full"),c(s,"title","Close Image & Reset"),c(t,"class","w-full h-full relative")},m(u,f){H(u,t,f),ne(n,t,null),h(t,r),h(t,s),ne(i,s,null),o=!0,a||(l=Q(s,"click",e[22]),a=!0)},p(u,f){const d={};f[0]&16344|f[1]&64&&(d.$$scope={dirty:f,ctx:u}),n.$set(d)},i(u){o||(N(n.$$.fragment,u),N(i.$$.fragment,u),o=!0)},o(u){X(n.$$.fragment,u),X(i.$$.fragment,u),o=!1},d(u){u&&g(t),re(n),re(i),a=!1,l()}}}function zt(e){let t,n,r,s,i;function o(){return e[23](e[34])}return{c(){t=_("button"),n=_("img"),this.h()},l(a){t=v(a,"BUTTON",{class:!0});var l=A(t);n=v(l,"IMG",{class:!0,src:!0,alt:!0}),l.forEach(g),this.h()},h(){c(n,"class","aspect-square h-24 w-24 object-cover rounded-md shadow-md border-2 border-white"),ht(n.src,r=e[34])||c(n,"src",r),c(n,"alt",""),c(t,"class","hover:opacity-75 transition-opacity")},m(a,l){H(a,t,l),h(t,n),s||(i=Q(t,"click",o),s=!0)},p(a,l){e=a},d(a){a&&g(t),s=!1,i()}}}function br(e){let t,n,r;return{c(){t=_("img"),this.h()},l(s){t=v(s,"IMG",{slot:!0,src:!0,alt:!0,style:!0,class:!0}),this.h()},h(){c(t,"slot","left"),ht(t.src,n=e[4].src)||c(t,"src",n),c(t,"alt",""),c(t,"style",r=`width: ${e[3]}px; height: ${e[13]}px`),c(t,"class","pixelated max-w-none svelte-1gkt69q")},m(s,i){H(s,t,i)},p(s,i){i[0]&16&&!ht(t.src,n=s[4].src)&&c(t,"src",n),i[0]&8200&&r!==(r=`width: ${s[3]}px; height: ${s[13]}px`)&&c(t,"style",r)},d(s){s&&g(t)}}}function Ar(e){let t,n,r,s,i;return{c(){t=_("canvas"),this.h()},l(o){t=v(o,"CANVAS",{class:!0,slot:!0,style:!0,width:!0,height:!0,"aria-label":!0}),A(t).forEach(g),this.h()},h(){c(t,"class","pixelated svelte-1gkt69q"),c(t,"slot","right"),c(t,"style",n=`width: ${e[3]}px; height: ${e[13]}px`),c(t,"width",e[3]),c(t,"height",e[13]),c(t,"aria-label","Dithered Image")},m(o,a){H(o,t,a),e[21](t),s||(i=He(r=Xn.call(null,t,{image:e[4],threshold:e[6],noiseIntensity:e[7],monochrome:e[8],colorLight:e[9],colorDark:e[10],output_width:e[3],output_height:e[13],thresholdMap:e[12]})),s=!0)},p(o,a){a[0]&8200&&n!==(n=`width: ${o[3]}px; height: ${o[13]}px`)&&c(t,"style",n),a[0]&8&&c(t,"width",o[3]),a[0]&8192&&c(t,"height",o[13]),r&&qt(r.update)&&a[0]&14296&&r.update.call(null,{image:o[4],threshold:o[6],noiseIntensity:o[7],monochrome:o[8],colorLight:o[9],colorDark:o[10],output_width:o[3],output_height:o[13],thresholdMap:o[12]})},d(o){o&&g(t),e[21](null),s=!1,i()}}}function Yt(e){let t,n,r;function s(o){e[25](o)}let i={label:"Bayer Level ("+e[1]+")",min:0,max:5,step:1};return e[1]!==void 0&&(i.value=e[1]),t=new mt({props:i}),me.push(()=>Ae(t,"value",s)),{c(){ee(t.$$.fragment)},l(o){te(t.$$.fragment,o)},m(o,a){ne(t,o,a),r=!0},p(o,a){const l={};a[0]&2&&(l.label="Bayer Level ("+o[1]+")"),!n&&a[0]&2&&(n=!0,l.value=o[1],we(()=>n=!1)),t.$set(l)},i(o){r||(N(t.$$.fragment,o),r=!0)},o(o){X(t.$$.fragment,o),r=!1},d(o){re(t,o)}}}function Ht(e){let t,n,r;function s(o){e[26](o)}let i={aspectRatio:1,minWidth:1,minHeight:1,maxHeight:1e3,maxWidth:1e3};return e[2]!==void 0&&(i.width=e[2]),t=new Qt({props:i}),me.push(()=>Ae(t,"width",s)),{c(){ee(t.$$.fragment)},l(o){te(t.$$.fragment,o)},m(o,a){ne(t,o,a),r=!0},p(o,a){const l={};!n&&a[0]&4&&(n=!0,l.width=o[2],we(()=>n=!1)),t.$set(l)},i(o){r||(N(t.$$.fragment,o),r=!0)},o(o){X(t.$$.fragment,o),r=!1},d(o){re(t,o)}}}function Gt(e){let t,n,r;return n=new _r({props:{imageData:e[12]}}),{c(){t=_("div"),ee(n.$$.fragment),this.h()},l(s){t=v(s,"DIV",{class:!0});var i=A(t);te(n.$$.fragment,i),i.forEach(g),this.h()},h(){c(t,"class","w-full aspect-square rounded-lg bg-gray-100 p-8 grid place-items-center")},m(s,i){H(s,t,i),ne(n,t,null),r=!0},p(s,i){const o={};i[0]&4096&&(o.imageData=s[12]),n.$set(o)},i(s){r||(N(n.$$.fragment,s),r=!0)},o(s){X(n.$$.fragment,s),r=!1},d(s){s&&g(t),re(n)}}}function jt(e){let t,n,r,s,i,o,a,l,u,f,d,m,T,y;return{c(){t=_("fieldset"),n=_("div"),r=_("input"),s=P(),i=_("label"),o=Z("Light"),a=P(),l=_("div"),u=_("input"),f=P(),d=_("label"),m=Z("Dark"),this.h()},l(w){t=v(w,"FIELDSET",{});var L=A(t);n=v(L,"DIV",{class:!0});var I=A(n);r=v(I,"INPUT",{type:!0,name:!0,id:!0}),s=U(I),i=v(I,"LABEL",{for:!0,class:!0});var C=A(i);o=q(C,"Light"),C.forEach(g),I.forEach(g),a=U(L),l=v(L,"DIV",{class:!0});var b=A(l);u=v(b,"INPUT",{type:!0,name:!0,id:!0}),f=U(b),d=v(b,"LABEL",{for:!0,class:!0});var p=A(d);m=q(p,"Dark"),p.forEach(g),b.forEach(g),L.forEach(g),this.h()},h(){c(r,"type","color"),c(r,"name","color-light"),c(r,"id","color-light"),c(i,"for","color-light"),c(i,"class","font-medium text-gray-900"),c(n,"class","flex gap-3"),c(u,"type","color"),c(u,"name","color-dark"),c(u,"id","color-dark"),c(d,"for","color-dark"),c(d,"class","font-medium text-gray-900"),c(l,"class","flex gap-3")},m(w,L){H(w,t,L),h(t,n),h(n,r),Me(r,e[9]),h(n,s),h(n,i),h(i,o),h(t,a),h(t,l),h(l,u),Me(u,e[10]),h(l,f),h(l,d),h(d,m),T||(y=[Q(r,"input",e[30]),Q(u,"input",e[31])],T=!0)},p(w,L){L[0]&512&&Me(r,w[9]),L[0]&1024&&Me(u,w[10])},d(w){w&&g(t),T=!1,Be(y)}}}function wr(e){let t,n,r;return t=new Fe({props:{src:An,class:"w-4 h-4"}}),{c(){ee(t.$$.fragment),n=Z(`
				Save`)},l(s){te(t.$$.fragment,s),n=q(s,`
				Save`)},m(s,i){ne(t,s,i),H(s,n,i),r=!0},p:Te,i(s){r||(N(t.$$.fragment,s),r=!0)},o(s){X(t.$$.fragment,s),r=!1},d(s){re(t,s),s&&g(n)}}}function yr(e){let t,n,r,s,i,o,a,l,u,f,d,m,T,y,w,L,I,C,b,p,S,B,R,M,O,x,D,W,$,ie,se,K,pe,oe,le,ue,k,G,ae,ge,$e,Ke,ce,Je,et,tt,Re,he,Xe,nt,_t;const vt=[Er,vr],_e=[];function Et(E,F){return E[4]&&E[12]?0:1}i=Et(e),o=_e[i]=vt[i](e);function an(E){e[24](E)}let bt={label:"Dither Mode",options:e[16]};e[0]!==void 0&&(bt.selected=e[0]),y=new Rn({props:bt}),me.push(()=>Ae(y,"selected",an));let V=e[0]==="bayer"&&Yt(e),z=e[0]==="white_noise"&&Ht(e),Y=e[12]&&Gt(e);function ln(E){e[27](E)}let At={label:"Threshold ("+e[6]+")",min:0,max:1,step:.01};e[6]!==void 0&&(At.value=e[6]),M=new mt({props:At}),me.push(()=>Ae(M,"value",ln));function un(E){e[28](E)}let wt={label:"Noise Intensity ("+e[7]+")",min:0,max:1.5,step:.01};e[7]!==void 0&&(wt.value=e[7]),D=new mt({props:wt}),me.push(()=>Ae(D,"value",un));let j=e[8]&&jt(e);function cn(E){e[32](E)}function fn(E){e[33](E)}let rt={minWidth:12,minHeight:12,maxHeight:5e3,maxWidth:5e3};return e[3]!==void 0&&(rt.width=e[3]),e[5]!==void 0&&(rt.aspectRatio=e[5]),ce=new Qt({props:rt}),me.push(()=>Ae(ce,"width",cn)),me.push(()=>Ae(ce,"aspectRatio",fn)),he=new xn({props:{disabled:!(e[4]&&e[12]),$$slots:{default:[wr]},$$scope:{ctx:e}}}),he.$on("click",e[15]),{c(){t=P(),n=P(),r=_("main"),s=_("section"),o.c(),a=P(),l=_("aside"),u=_("section"),f=_("div"),d=_("h2"),m=Z("Threshold Map"),T=P(),ee(y.$$.fragment),L=P(),V&&V.c(),I=P(),z&&z.c(),C=P(),Y&&Y.c(),b=P(),p=_("div"),S=_("h2"),B=Z("Dithering Options"),R=P(),ee(M.$$.fragment),x=P(),ee(D.$$.fragment),$=P(),ie=_("div"),se=_("div"),K=_("input"),pe=P(),oe=_("div"),le=_("label"),ue=Z("Monochrome"),k=P(),j&&j.c(),G=P(),ae=_("div"),ge=_("h2"),$e=Z("Output Options"),Ke=P(),ee(ce.$$.fragment),tt=P(),Re=_("footer"),ee(he.$$.fragment),this.h()},l(E){vn("svelte-1hm2pfs",document.head).forEach(g),t=U(E),n=U(E),r=v(E,"MAIN",{class:!0});var ve=A(r);s=v(ve,"SECTION",{class:!0});var Pe=A(s);o.l(Pe),Pe.forEach(g),a=U(ve),l=v(ve,"ASIDE",{class:!0});var Ee=A(l);u=v(Ee,"SECTION",{class:!0});var fe=A(u);f=v(fe,"DIV",{class:!0});var J=A(f);d=v(J,"H2",{class:!0});var De=A(d);m=q(De,"Threshold Map"),De.forEach(g),T=U(J),te(y.$$.fragment,J),L=U(J),V&&V.l(J),I=U(J),z&&z.l(J),C=U(J),Y&&Y.l(J),J.forEach(g),b=U(fe),p=v(fe,"DIV",{class:!0});var de=A(p);S=v(de,"H2",{class:!0});var yt=A(S);B=q(yt,"Dithering Options"),yt.forEach(g),R=U(de),te(M.$$.fragment,de),x=U(de),te(D.$$.fragment,de),$=U(de),ie=v(de,"DIV",{class:!0});var We=A(ie);se=v(We,"DIV",{class:!0});var Tt=A(se);K=v(Tt,"INPUT",{type:!0,id:!0,class:!0}),Tt.forEach(g),pe=U(We),oe=v(We,"DIV",{class:!0});var Lt=A(oe);le=v(Lt,"LABEL",{for:!0,class:!0});var St=A(le);ue=q(St,"Monochrome"),St.forEach(g),Lt.forEach(g),We.forEach(g),k=U(de),j&&j.l(de),de.forEach(g),G=U(fe),ae=v(fe,"DIV",{class:!0});var Oe=A(ae);ge=v(Oe,"H2",{class:!0});var It=A(ge);$e=q(It,"Output Options"),It.forEach(g),Ke=U(Oe),te(ce.$$.fragment,Oe),Oe.forEach(g),fe.forEach(g),tt=U(Ee),Re=v(Ee,"FOOTER",{class:!0});var Rt=A(Re);te(he.$$.fragment,Rt),Rt.forEach(g),Ee.forEach(g),ve.forEach(g),this.h()},h(){document.title="Dithering",c(s,"class","flex-1 overflow-hidden select-none"),c(d,"class","text-base font-semibold leading-7 text-black mb-2"),c(f,"class","grid gap-3"),c(S,"class","text-base font-semibold leading-7 text-black mb-2"),c(K,"type","checkbox"),c(K,"id","monochrome"),c(K,"class","h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600"),c(se,"class","flex h-6 items-center"),c(le,"for","monochrome"),c(le,"class","font-medium text-gray-900"),c(oe,"class","ml-3 text-sm leading-6"),c(ie,"class","relative flex items-start"),c(p,"class","grid gap-3"),c(ge,"class","text-base font-semibold leading-7 text-black mb-4"),c(ae,"class","border-t border-gray-100 py-4"),c(u,"class","grid gap-5 overflow-y-auto overflow-x-visible py-8 px-4"),c(Re,"class","py-4 px-4 flex-shrink-0"),c(l,"class","bg-white w-full md:max-w-md border-t md:border-t-0 md:border-l border-l-0 border-gray-100 z-50 overflow-y-hidden md:h-full flex-1 shadow-lg flex flex-col divide-y divide-gray-200 justify-between"),c(r,"class","w-screen max-w-screen h-screen max-h-screen flex md:flex-row flex-col bg-gray-300")},m(E,F){H(E,t,F),H(E,n,F),H(E,r,F),h(r,s),_e[i].m(s,null),h(r,a),h(r,l),h(l,u),h(u,f),h(f,d),h(d,m),h(f,T),ne(y,f,null),h(f,L),V&&V.m(f,null),h(f,I),z&&z.m(f,null),h(f,C),Y&&Y.m(f,null),h(u,b),h(u,p),h(p,S),h(S,B),h(p,R),ne(M,p,null),h(p,x),ne(D,p,null),h(p,$),h(p,ie),h(ie,se),h(se,K),K.checked=e[8],h(ie,pe),h(ie,oe),h(oe,le),h(le,ue),h(p,k),j&&j.m(p,null),h(u,G),h(u,ae),h(ae,ge),h(ge,$e),h(ae,Ke),ne(ce,ae,null),h(l,tt),h(l,Re),ne(he,Re,null),Xe=!0,nt||(_t=[Q(document.body,"drop",dt(e[17])),Q(document.body,"dragover",dt(Tr)),Q(K,"change",e[29])],nt=!0)},p(E,F){let ve=i;i=Et(E),i===ve?_e[i].p(E,F):(Ve(),X(_e[ve],1,1,()=>{_e[ve]=null}),xe(),o=_e[i],o?o.p(E,F):(o=_e[i]=vt[i](E),o.c()),N(o,1),o.m(s,null));const Pe={};!w&&F[0]&1&&(w=!0,Pe.selected=E[0],we(()=>w=!1)),y.$set(Pe),E[0]==="bayer"?V?(V.p(E,F),F[0]&1&&N(V,1)):(V=Yt(E),V.c(),N(V,1),V.m(f,I)):V&&(Ve(),X(V,1,1,()=>{V=null}),xe()),E[0]==="white_noise"?z?(z.p(E,F),F[0]&1&&N(z,1)):(z=Ht(E),z.c(),N(z,1),z.m(f,C)):z&&(Ve(),X(z,1,1,()=>{z=null}),xe()),E[12]?Y?(Y.p(E,F),F[0]&4096&&N(Y,1)):(Y=Gt(E),Y.c(),N(Y,1),Y.m(f,null)):Y&&(Ve(),X(Y,1,1,()=>{Y=null}),xe());const Ee={};F[0]&64&&(Ee.label="Threshold ("+E[6]+")"),!O&&F[0]&64&&(O=!0,Ee.value=E[6],we(()=>O=!1)),M.$set(Ee);const fe={};F[0]&128&&(fe.label="Noise Intensity ("+E[7]+")"),!W&&F[0]&128&&(W=!0,fe.value=E[7],we(()=>W=!1)),D.$set(fe),F[0]&256&&(K.checked=E[8]),E[8]?j?j.p(E,F):(j=jt(E),j.c(),j.m(p,null)):j&&(j.d(1),j=null);const J={};!Je&&F[0]&8&&(Je=!0,J.width=E[3],we(()=>Je=!1)),!et&&F[0]&32&&(et=!0,J.aspectRatio=E[5],we(()=>et=!1)),ce.$set(J);const De={};F[0]&4112&&(De.disabled=!(E[4]&&E[12])),F[1]&64&&(De.$$scope={dirty:F,ctx:E}),he.$set(De)},i(E){Xe||(N(o),N(y.$$.fragment,E),N(V),N(z),N(Y),N(M.$$.fragment,E),N(D.$$.fragment,E),N(ce.$$.fragment,E),N(he.$$.fragment,E),Xe=!0)},o(E){X(o),X(y.$$.fragment,E),X(V),X(z),X(Y),X(M.$$.fragment,E),X(D.$$.fragment,E),X(ce.$$.fragment,E),X(he.$$.fragment,E),Xe=!1},d(E){E&&g(t),E&&g(n),E&&g(r),_e[i].d(),re(y),V&&V.d(),z&&z.d(),Y&&Y.d(),re(M),re(D),j&&j.d(),re(ce),re(he),nt=!1,Be(_t)}}}const Tr=()=>{};function Lr(e,t,n){let r,s,i;const o=[$n,Kn,Jn];let a=.5,l=.3,u=!1,f="#ede6cc",d="#21263f",m=null,T="blue_noise",y=3,w=256,L=300,I=null;async function C(){m&&await Vn(m,"dithered","png")}const b=[{name:"Bayer",value:"bayer"},{name:"Blue Noise",value:"blue_noise"},{name:"White Noise",value:"white_noise"}];async function p(k){var ae;const G=(ae=k.dataTransfer)==null?void 0:ae.files[0];if(G){if(!G.type.startsWith("image/")){alert("Please drop an image file");return}try{n(4,I=await Nt(G))}catch(ge){alert("Failed to load image"),console.error(ge)}}}async function S(k){const G=k.target.files[0];if(G)try{n(4,I=await Nt(G))}catch(ae){alert("Failed to load image"),console.error(ae)}}async function B(k){const G=new Image;G.onload=()=>{n(4,I=G)},G.src=k}let R=null;function M(k){me[k?"unshift":"push"](()=>{m=k,n(11,m)})}const O=()=>n(4,I=null),x=k=>B(k);function D(k){T=k,n(0,T)}function W(k){y=k,n(1,y)}function $(k){w=k,n(2,w)}function ie(k){a=k,n(6,a)}function se(k){l=k,n(7,l)}function K(){u=this.checked,n(8,u)}function pe(){f=this.value,n(9,f)}function oe(){d=this.value,n(10,d)}function le(k){L=k,n(3,L)}function ue(k){i=k,n(5,i),n(4,I)}return e.$$.update=()=>{if(e.$$.dirty[0]&4&&n(20,r=w),e.$$.dirty[0]&16&&n(5,i=I!=null&&I.width&&(I!=null&&I.height)?I.width/I.height:1),e.$$.dirty[0]&40&&n(13,s=L/i),e.$$.dirty[0]&1048583&&"ImageData"in globalThis){let k;switch(T){case"bayer":k={mode:"bayer",level:y};break;case"blue_noise":k={mode:"blue_noise"};break;case"white_noise":k={mode:"white_noise",width:w,height:r};break}hr(k).then(G=>n(12,R=G))}},[T,y,w,L,I,i,a,l,u,f,d,m,R,s,o,C,b,p,S,B,r,M,O,x,D,W,$,ie,se,K,pe,oe,le,ue]}class Dr extends Le{constructor(t){super(),Se(this,t,Lr,yr,Ie,{},null,[-1,-1])}}export{Dr as component};
