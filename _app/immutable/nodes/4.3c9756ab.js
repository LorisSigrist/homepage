import{S as Ve,i as Xe,s as Ze,k as T,q as se,a as Z,y as pe,l as S,m as R,r as le,h as A,c as W,z as ge,n as m,b as oe,G as v,A as _e,N as ue,g as Q,d as J,B as be,O as et,P as jr,Q as tr,u as Ft,H as Je,R as kr,T as Hr,U as Fe,V as Kr,C as Rt,D as Lt,E as Bt,F as kt,W as Qr,p as rr,X as Ct,Y as Mt,w as Ie,Z as Ne,J as Jr,_ as Ue,f as nr,v as or,M as Nt,$ as en}from"../chunks/index.750437ab.js";import{I as tt,L as tn,A as rn,a as nn,P as on,X as an}from"../chunks/Icon.6f849253.js";import{g as sn}from"../chunks/_commonjsHelpers.725317a4.js";function ln(e){let t,r,n,i,a,o,s,c,l,f,d,h,w,L,I,b,D,M,y,_,B,N,k,F,C,P;return w=new tt({props:{src:tn,class:"w-4 h-4",solid:!0}}),{c(){t=T("fieldset"),r=T("div"),n=T("label"),i=se("Width"),a=Z(),o=T("div"),s=T("input"),c=Z(),l=T("div"),f=se("px"),d=Z(),h=T("span"),pe(w.$$.fragment),L=Z(),I=T("div"),b=T("label"),D=se("Height"),M=Z(),y=T("div"),_=T("input"),B=Z(),N=T("div"),k=se("px"),this.h()},l(U){t=S(U,"FIELDSET",{class:!0});var O=R(t);r=S(O,"DIV",{class:!0});var X=R(r);n=S(X,"LABEL",{for:!0,class:!0});var ae=R(n);i=le(ae,"Width"),ae.forEach(A),a=W(X),o=S(X,"DIV",{class:!0});var ce=R(o);s=S(ce,"INPUT",{name:!0,id:!0,type:!0,min:!0,max:!0,step:!0,class:!0,placeholder:!0}),c=W(ce),l=S(ce,"DIV",{class:!0});var me=R(l);f=le(me,"px"),me.forEach(A),ce.forEach(A),X.forEach(A),d=W(O),h=S(O,"SPAN",{class:!0});var $=R(h);ge(w.$$.fragment,$),$.forEach(A),L=W(O),I=S(O,"DIV",{class:!0});var z=R(I);b=S(z,"LABEL",{for:!0,class:!0});var j=R(b);D=le(j,"Height"),j.forEach(A),M=W(z),y=S(z,"DIV",{class:!0});var ee=R(y);_=S(ee,"INPUT",{type:!0,id:!0,name:!0,min:!0,max:!0,step:!0,class:!0,placeholder:!0}),B=W(ee),N=S(ee,"DIV",{class:!0});var ne=R(N);k=le(ne,"px"),ne.forEach(A),ee.forEach(A),z.forEach(A),O.forEach(A),this.h()},h(){m(n,"for","width-"+e[4]),m(n,"class","block text-sm font-medium leading-6 text-gray-900"),m(s,"name","width"),m(s,"id","width-"+e[4]),m(s,"type","number"),m(s,"min","12"),m(s,"max","3000"),m(s,"step","1"),s.value=e[0],m(s,"class","block w-full rounded-md border-0 py-1.5 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"),m(s,"placeholder","600"),m(l,"class","pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400"),m(o,"class","relative mt-2 rounded-md shadow-sm"),m(r,"class","w-full"),m(h,"class","text-gray-500 pb-2 cursor-not-allowed"),m(b,"for","height-"+e[5]),m(b,"class","block text-sm font-medium leading-6 text-gray-900"),m(_,"type","number"),m(_,"id","height-"+e[5]),m(_,"name","height"),m(_,"min","12"),m(_,"max","3000"),m(_,"step","1"),_.value=e[1],m(_,"class","block w-full rounded-md border-0 py-1.5 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"),m(_,"placeholder","340"),m(N,"class","pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400"),m(y,"class","relative mt-2 rounded-md shadow-sm"),m(I,"class","w-full"),m(t,"class","flex gap-3 items-end justify-between")},m(U,O){oe(U,t,O),v(t,r),v(r,n),v(n,i),v(r,a),v(r,o),v(o,s),v(o,c),v(o,l),v(l,f),v(t,d),v(t,h),_e(w,h,null),v(t,L),v(t,I),v(I,b),v(b,D),v(I,M),v(I,y),v(y,_),v(y,B),v(y,N),v(N,k),F=!0,C||(P=[ue(s,"input",e[2]),ue(_,"input",e[3])],C=!0)},p(U,[O]){(!F||O&1&&s.value!==U[0])&&(s.value=U[0]),(!F||O&2&&_.value!==U[1])&&(_.value=U[1])},i(U){F||(Q(w.$$.fragment,U),F=!0)},o(U){J(w.$$.fragment,U),F=!1},d(U){U&&A(t),be(w),C=!1,et(P)}}}function ar(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}function un(e,t,r){let n,{width:i}=t,{aspectRatio:a}=t;function o(f){const d=f.target.value;d&&r(0,i=d)}function s(f){const d=f.target.value;d&&r(0,i=Math.round(a*d))}let c=ar(),l=ar();return e.$$set=f=>{"width"in f&&r(0,i=f.width),"aspectRatio"in f&&r(6,a=f.aspectRatio)},e.$$.update=()=>{e.$$.dirty&65&&r(1,n=Math.round(i/a))},[i,n,o,s,c,l,a]}class cn extends Ve{constructor(t){super(),Xe(this,t,un,ln,Ze,{width:0,aspectRatio:6})}}function ir(e,t,r){const n=e.slice();return n[6]=t[r],n}function sr(e){let t,r=e[6].name+"",n,i,a;return{c(){t=T("option"),n=se(r),this.h()},l(o){t=S(o,"OPTION",{});var s=R(t);n=le(s,r),s.forEach(A),this.h()},h(){t.__value=i=e[6].value,t.value=t.__value,t.selected=a=e[6].value===e[0]},m(o,s){oe(o,t,s),v(t,n)},p(o,s){s&2&&r!==(r=o[6].name+"")&&Ft(n,r),s&2&&i!==(i=o[6].value)&&(t.__value=i,t.value=t.__value),s&3&&a!==(a=o[6].value===o[0])&&(t.selected=a)},d(o){o&&A(t)}}}function fn(e){let t,r,n,i,a,o,s,c=e[1],l=[];for(let f=0;f<c.length;f+=1)l[f]=sr(ir(e,c,f));return{c(){t=T("div"),r=T("label"),n=se(e[2]),i=Z(),a=T("select");for(let f=0;f<l.length;f+=1)l[f].c();this.h()},l(f){t=S(f,"DIV",{});var d=R(t);r=S(d,"LABEL",{for:!0,class:!0});var h=R(r);n=le(h,e[2]),h.forEach(A),i=W(d),a=S(d,"SELECT",{id:!0,name:!0,class:!0});var w=R(a);for(let L=0;L<l.length;L+=1)l[L].l(w);w.forEach(A),d.forEach(A),this.h()},h(){m(r,"for",e[4]),m(r,"class","block text-sm font-medium leading-6 text-gray-900"),m(a,"id",e[4]),m(a,"name",e[3]),m(a,"class","mt-2 block w-full rounded-md border-0 py-1.5 pl-3 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-indigo-600 sm:text-sm sm:leading-6"),e[0]===void 0&&jr(()=>e[5].call(a))},m(f,d){oe(f,t,d),v(t,r),v(r,n),v(t,i),v(t,a);for(let h=0;h<l.length;h+=1)l[h]&&l[h].m(a,null);tr(a,e[0],!0),o||(s=ue(a,"change",e[5]),o=!0)},p(f,[d]){if(d&4&&Ft(n,f[2]),d&3){c=f[1];let h;for(h=0;h<c.length;h+=1){const w=ir(f,c,h);l[h]?l[h].p(w,d):(l[h]=sr(w),l[h].c(),l[h].m(a,null))}for(;h<l.length;h+=1)l[h].d(1);l.length=c.length}d&8&&m(a,"name",f[3]),d&3&&tr(a,f[0])},i:Je,o:Je,d(f){f&&A(t),kr(l,f),o=!1,s()}}}function dn(e,t,r){let{options:n}=t,{selected:i}=t,{label:a}=t,{name:o=void 0}=t,s=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);function c(){i=Hr(this),r(0,i),r(1,n)}return e.$$set=l=>{"options"in l&&r(1,n=l.options),"selected"in l&&r(0,i=l.selected),"label"in l&&r(2,a=l.label),"name"in l&&r(3,o=l.name)},[i,n,a,o,s,c]}class mn extends Ve{constructor(t){super(),Xe(this,t,dn,fn,Ze,{options:1,selected:0,label:2,name:3})}}function hn(e){let t,r,n,i,a,o,s;return{c(){t=T("div"),r=T("label"),n=se(e[1]),i=Z(),a=T("input"),this.h()},l(c){t=S(c,"DIV",{});var l=R(t);r=S(l,"LABEL",{for:!0,class:!0});var f=R(r);n=le(f,e[1]),f.forEach(A),i=W(l),a=S(l,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0,name:!0,class:!0}),l.forEach(A),this.h()},h(){m(r,"for",e[6]),m(r,"class","block mb-2 text-sm font-medium text-gray-900 dark:text-white"),m(a,"id",e[6]),m(a,"type","range"),m(a,"min",e[3]),m(a,"max",e[4]),m(a,"step",e[5]),m(a,"name",e[2]),m(a,"class","w-full h-1.5 mb-6 bg-white ring-1 ring-gray-300 shadow-sm rounded-lg appearance-none cursor-pointer accent-indigo-600 dark:bg-gray-700")},m(c,l){oe(c,t,l),v(t,r),v(r,n),v(t,i),v(t,a),Fe(a,e[0]),o||(s=[ue(a,"change",e[7]),ue(a,"input",e[7])],o=!0)},p(c,[l]){l&2&&Ft(n,c[1]),l&8&&m(a,"min",c[3]),l&16&&m(a,"max",c[4]),l&32&&m(a,"step",c[5]),l&4&&m(a,"name",c[2]),l&1&&Fe(a,c[0])},i:Je,o:Je,d(c){c&&A(t),o=!1,et(s)}}}function vn(e,t,r){let{label:n}=t,{name:i=void 0}=t,{min:a=null}=t,{max:o=null}=t,{value:s=0}=t,{step:c=1}=t,l=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);function f(){s=Kr(this.value),r(0,s)}return e.$$set=d=>{"label"in d&&r(1,n=d.label),"name"in d&&r(2,i=d.name),"min"in d&&r(3,a=d.min),"max"in d&&r(4,o=d.max),"value"in d&&r(0,s=d.value),"step"in d&&r(5,c=d.step)},[s,n,i,a,o,c,l,f]}class Ut extends Ve{constructor(t){super(),Xe(this,t,vn,hn,Ze,{label:1,name:2,min:3,max:4,value:0,step:5})}}const pn=""+new URL("../assets/blue_noise.b61cfddd.png",import.meta.url).href,gn={width:470,height:470},_n=""+new URL("../assets/white_noise.2f37d8a6.png",import.meta.url).href,bn={width:256,height:256};var wn="precision highp float;attribute vec2 position;varying vec2 fragCoord;void main(){fragCoord.x=position.x*0.5+0.5;fragCoord.y=position.y*0.5+0.5;gl_Position=vec4(position,0.0,1.0);}",An="precision highp float;varying vec2 fragCoord;uniform sampler2D uSampler;uniform float uThreshold;uniform sampler2D uNoiseSampler;uniform vec2 uNoiseSamplerSize;uniform float uNoise;uniform float uMonochrome;uniform vec2 uSize;uniform vec3 uDarkColor;uniform vec3 uLightColor;void main(void){vec2 imgPixel=vec2(fragCoord.x*uSize.x,fragCoord.y*uSize.y);vec2 noisePixel=vec2(mod(imgPixel.x,uNoiseSamplerSize.x),mod(imgPixel.y,uNoiseSamplerSize.y));vec2 noiseUV=vec2(noisePixel.x/uNoiseSamplerSize.x,noisePixel.y/uNoiseSamplerSize.y);float noise=(texture2D(uNoiseSampler,noiseUV).r-0.5)*2.0*uNoise;vec4 color=texture2D(uSampler,fragCoord);float gray=dot(color.rgb,vec3(0.299,0.587,0.114));color.r=color.r*(1.0-uMonochrome)+gray*uMonochrome;color.g=color.g*(1.0-uMonochrome)+gray*uMonochrome;color.b=color.b*(1.0-uMonochrome)+gray*uMonochrome;vec3 thresholds=vec3(step(uThreshold,color.r+noise),step(uThreshold,color.g+noise),step(uThreshold,color.b+noise));if(uMonochrome>0.0){color.rgb=vec3(mix(uDarkColor.r,uLightColor.r,thresholds.r),mix(uDarkColor.g,uLightColor.g,thresholds.g),mix(uDarkColor.b,uLightColor.b,thresholds.b));}else{color.rgb=thresholds;}gl_FragColor=color;}";function yn(e,t,r){const n=lr(e,e.VERTEX_SHADER,t),i=lr(e,e.FRAGMENT_SHADER,r),a=e.createProgram();if(!a)throw new Error("Failed to create shader program");if(e.attachShader(a,n),e.attachShader(a,i),e.linkProgram(a),!e.getProgramParameter(a,e.LINK_STATUS))throw Error(`Unable to initialize the shader program: ${e.getProgramInfoLog(a)}`);return a}function lr(e,t,r){const n=e.createShader(t);if(!n)throw new Error("Failed to create shader");if(e.shaderSource(n,r),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS))throw Error(`An error occurred compiling the shaders: ${e.getShaderInfoLog(n)}`);return n}function ur(e,t,r=()=>{}){const n=e.createTexture();if(!n)throw new Error("Failed to create texture");e.bindTexture(e.TEXTURE_2D,n);const i=0,a=e.RGBA,o=1,s=1,c=0,l=e.RGBA,f=e.UNSIGNED_BYTE,d=new Uint8Array([128,128,128,255]);e.texImage2D(e.TEXTURE_2D,i,a,o,s,c,l,f,d);const h=new Image;return h.onload=()=>{e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,i,a,l,f,h),ze(h.width)&&ze(h.height)?e.generateMipmap(e.TEXTURE_2D):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR)),r()},h.src=t,n}function En(e){const t=e.createTexture();if(!t)throw new Error("Failed to create texture");e.bindTexture(e.TEXTURE_2D,t);const r=0,n=e.RGBA,i=1,a=1,o=0,s=e.RGBA,c=e.UNSIGNED_BYTE,l=new Uint8Array([0,0,255,255]);return e.texImage2D(e.TEXTURE_2D,r,n,i,a,o,s,c,l),t}function Tn(e,t,r){const i=e.RGBA,a=e.RGBA,o=e.UNSIGNED_BYTE;e.bindTexture(e.TEXTURE_2D,t),e.texImage2D(e.TEXTURE_2D,0,i,a,o,r),ze(r.width)&&ze(r.height)?e.generateMipmap(e.TEXTURE_2D):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR))}function ze(e){return(e&e-1)===0}function Sn(e){const t=e.createBuffer(),r=e.createBuffer(),n=[-1,1,-1,-1,1,-1,1,1],i=[3,2,1,3,1,0];return e.bindBuffer(e.ARRAY_BUFFER,t),e.bufferData(e.ARRAY_BUFFER,new Float32Array(n),e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(i),e.STATIC_DRAW),{vertex_buffer:t,index_buffer:r}}function xn(e,t){const r=document.createElement("canvas");r.width=Math.pow(2,t+1),r.height=Math.pow(2,t+1);const n=Cr(t),i=Math.pow(2,2*t),a=n.map(s=>s.map(c=>c/i)),o=r.getContext("2d");for(let s=0;s<a.length;s++)for(let c=0;c<a[s].length;c++){const l=a[s][c]*255/4;o.fillStyle=`rgb(${l}, ${l}, ${l})`,o.fillRect(c,s,1,1)}return Dn(e,o)}const St=new Map;function Cr(e){if(St.has(e))return St.get(e);if(e===0)return[[0,2],[3,1]];const t=Cr(e-1),r=new Array(t.length*2).fill(0).map(()=>new Array(t.length*2).fill(0));for(let n=0;n<t.length;n++)for(let i=0;i<t[n].length;i++)r[n][i]=t[n][i]*4,r[n][i+t.length]=t[n][i]*4+2,r[n+t.length][i]=t[n][i]*4+3,r[n+t.length][i+t.length]=t[n][i]*4+1;return St.set(e,r),r}function Dn(e,t){const r=e.createTexture();if(!r)throw new Error("Failed to create texture");return e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t.canvas),ze(t.canvas.width)&&ze(t.canvas.height)?e.generateMipmap(e.TEXTURE_2D):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR)),r}function In(e,t){let r=t;const n=e.getContext("webgl",{preserveDrawingBuffer:!0});if(!n){alert("WebGL not supported");return}const i=()=>{Tn(n,M,r.image)};n.clearColor(0,0,0,1),n.clear(n.COLOR_BUFFER_BIT);const a=yn(n,wn,An),{vertex_buffer:o,index_buffer:s}=Sn(n),c=n.getAttribLocation(a,"position");n.vertexAttribPointer(c,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(c);const l=n.getUniformLocation(a,"uSampler"),f=n.getUniformLocation(a,"uThreshold"),d=n.getUniformLocation(a,"uNoiseSampler"),h=n.getUniformLocation(a,"uNoise"),w=n.getUniformLocation(a,"uSize"),L=n.getUniformLocation(a,"uNoiseSamplerSize"),I=n.getUniformLocation(a,"uMonochrome"),b=n.getUniformLocation(a,"uDarkColor"),D=n.getUniformLocation(a,"uLightColor"),M=En(n);n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!0),i();let y,_;n.useProgram(a);let B=null;const N=()=>{if(r.mode==="blue_noise"){const C=ur(n,pn,F);n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!0),y=C,_=gn;return}if(r.mode==="white_noise"){const C=ur(n,_n,F);n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!0),y=C,_=bn;return}if(r.mode.startsWith("bayer_")){const C=Number(r.mode.slice(6));if(isNaN(C))throw new Error(`Invalid bayer level: "${r.mode}"`);const P=xn(n,C),U=Math.pow(2,C+1);y=P,_={width:U,height:U};return}throw new Error(`Unknown mode: "${r.mode}"`)};N();const k=()=>{n.viewport(0,0,r.width,r.height),n.clearColor(0,0,0,1),n.clear(n.COLOR_BUFFER_BIT),n.bindBuffer(n.ARRAY_BUFFER,o),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,s),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,M),n.uniform1i(l,0),n.activeTexture(n.TEXTURE1),n.bindTexture(n.TEXTURE_2D,y),n.uniform1i(d,1),n.uniform2f(L,_.width,_.height),n.uniform1f(f,r.threshold),n.uniform1f(h,r.noiseIntensity),n.uniform2f(w,r.width,r.height),n.uniform1f(I,r.monochrome?1:0),n.uniform3f(b,...cr(r.colorDark)),n.uniform3f(D,...cr(r.colorLight)),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0)};function F(){B=requestAnimationFrame(()=>{k(),B=null})}return F(),{update(C){const P=r.image!==C.image,U=r.mode!==C.mode;r=C,P&&i(),U&&N(),F()},destroy(){B!==null&&cancelAnimationFrame(B)}}}function cr(e){const t=parseInt(e.slice(1,3),16)/255,r=parseInt(e.slice(3,5),16)/255,n=parseInt(e.slice(5,7),16)/255;return[t,r,n]}function Rn(e){let t,r,n,i,a;const o=e[3].default,s=Rt(o,e,e[2],null);return{c(){t=T("button"),s&&s.c(),this.h()},l(c){t=S(c,"BUTTON",{type:!0,class:!0});var l=R(t);s&&s.l(l),l.forEach(A),this.h()},h(){t.disabled=e[0],m(t,"type","button"),m(t,"class",r=e[1][e[0]?"disabled":"normal"]+" rounded-md w-full px-2.5 py-1.5 text-sm font-semibold focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 flex items-center justify-center gap-2")},m(c,l){oe(c,t,l),s&&s.m(t,null),n=!0,i||(a=ue(t,"click",e[4]),i=!0)},p(c,[l]){s&&s.p&&(!n||l&4)&&Lt(s,o,c,c[2],n?kt(o,c[2],l,null):Bt(c[2]),null),(!n||l&1)&&(t.disabled=c[0]),(!n||l&1&&r!==(r=c[1][c[0]?"disabled":"normal"]+" rounded-md w-full px-2.5 py-1.5 text-sm font-semibold focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 flex items-center justify-center gap-2"))&&m(t,"class",r)},i(c){n||(Q(s,c),n=!0)},o(c){J(s,c),n=!1},d(c){c&&A(t),s&&s.d(c),i=!1,a()}}}function Ln(e,t,r){let{$$slots:n={},$$scope:i}=t,{disabled:a=!1}=t;const o={normal:"bg-indigo-600 text-white shadow-sm hover:bg-indigo-500",disabled:"bg-gray-200 text-gray-400 shadow-none cursor-not-allowed"};function s(c){Qr.call(this,e,c)}return e.$$set=c=>{"disabled"in c&&r(0,a=c.disabled),"$$scope"in c&&r(2,i=c.$$scope)},[a,o,i,n,s]}class Bn extends Ve{constructor(t){super(),Xe(this,t,Ln,Rn,Ze,{disabled:0})}}async function kn(e,t,r="png"){const n=new OffscreenCanvas(e.width,e.height),i=n.getContext("2d");if(!i)return;i.drawImage(e,0,0,e.width,e.height);const a=await n.convertToBlob({type:"image/"+r,quality:1}),o=URL.createObjectURL(a),s=document.createElement("a");s.download=`${t}.${r}`,s.href=o,s.click(),s.remove(),URL.revokeObjectURL(o)}function fr(e){return new Promise((t,r)=>{e.type.startsWith("image/")||r(new Error("Not an image file"));const n=new FileReader;n.onload=i=>{if(typeof n.result!="string")return;const a=new Image;a.onload=()=>{t(a)},a.onerror=o=>{r(o)},a.src=n.result},n.onerror=i=>{r(i)},n.readAsDataURL(e)})}var _t={exports:{}};_t.exports=Mr;_t.exports.addWheelListener=Mr;_t.exports.removeWheelListener=Cn;function Mr(e,t,r){e.addEventListener("wheel",t,r)}function Cn(e,t,r){e.removeEventListener("wheel",t,r)}var Mn=_t.exports,bt={exports:{}},Nn=4,Un=.001,Fn=1e-7,Pn=10,Qe=11,ht=1/(Qe-1),On=typeof Float32Array=="function";function Nr(e,t){return 1-3*t+3*e}function Ur(e,t){return 3*t-6*e}function Fr(e){return 3*e}function gt(e,t,r){return((Nr(t,r)*e+Ur(t,r))*e+Fr(t))*e}function Pr(e,t,r){return 3*Nr(t,r)*e*e+2*Ur(t,r)*e+Fr(t)}function zn(e,t,r,n,i){var a,o,s=0;do o=t+(r-t)/2,a=gt(o,n,i)-e,a>0?r=o:t=o;while(Math.abs(a)>Fn&&++s<Pn);return o}function Vn(e,t,r,n){for(var i=0;i<Nn;++i){var a=Pr(t,r,n);if(a===0)return t;var o=gt(t,r,n)-e;t-=o/a}return t}function Xn(e){return e}var Zn=function(t,r,n,i){if(!(0<=t&&t<=1&&0<=n&&n<=1))throw new Error("bezier x values must be in [0, 1] range");if(t===r&&n===i)return Xn;for(var a=On?new Float32Array(Qe):new Array(Qe),o=0;o<Qe;++o)a[o]=gt(o*ht,t,n);function s(c){for(var l=0,f=1,d=Qe-1;f!==d&&a[f]<=c;++f)l+=ht;--f;var h=(c-a[f])/(a[f+1]-a[f]),w=l+h*ht,L=Pr(w,t,n);return L>=Un?Vn(c,w,t,n):L===0?w:zn(c,l,l+ht,t,n)}return function(l){return l===0?0:l===1?1:gt(s(l),r,i)}},Ke=Zn,dr={ease:Ke(.25,.1,.25,1),easeIn:Ke(.42,0,1,1),easeOut:Ke(0,0,.58,1),easeInOut:Ke(.42,0,.58,1),linear:Ke(0,0,1,1)};bt.exports=Wn;bt.exports.makeAggregateRaf=Or;bt.exports.sharedScheduler=Or();function Wn(e,t,r){var n=Object.create(null),i=Object.create(null);r=r||{};var a=typeof r.easing=="function"?r.easing:dr[r.easing];a||(r.easing&&console.warn("Unknown easing function in amator: "+r.easing),a=dr.ease);var o=typeof r.step=="function"?r.step:mr,s=typeof r.done=="function"?r.done:mr,c=$n(r.scheduler),l=Object.keys(t);l.forEach(function(D){n[D]=e[D],i[D]=t[D]-e[D]});var f=typeof r.duration=="number"?r.duration:400,d=Math.max(1,f*.06),h,w=0;return h=c.next(I),{cancel:L};function L(){c.cancel(h),h=0}function I(){var D=a(w/d);w+=1,b(D),w<=d?(h=c.next(I),o(e)):(h=0,setTimeout(function(){s(e)},0))}function b(D){l.forEach(function(M){e[M]=i[M]*D+n[M]})}}function mr(){}function $n(e){if(!e){var t=typeof window<"u"&&window.requestAnimationFrame;return t?Gn():qn()}if(typeof e.next!="function")throw new Error("Scheduler is supposed to have next(cb) function");if(typeof e.cancel!="function")throw new Error("Scheduler is supposed to have cancel(handle) function");return e}function Gn(){return{next:window.requestAnimationFrame.bind(window),cancel:window.cancelAnimationFrame.bind(window)}}function qn(){return{next:function(e){return setTimeout(e,1e3/60)},cancel:function(e){return clearTimeout(e)}}}function Or(){var e=new Set,t=new Set,r=0;return{next:i,cancel:i,clearAll:n};function n(){e.clear(),t.clear(),cancelAnimationFrame(r),r=0}function i(s){t.add(s),a()}function a(){r||(r=requestAnimationFrame(o))}function o(){r=0;var s=t;t=e,e=s,e.forEach(function(c){c()}),e.clear()}}var Yn=bt.exports,jn=function(t){Kn(t);var r=Hn(t);return t.on=r.on,t.off=r.off,t.fire=r.fire,t};function Hn(e){var t=Object.create(null);return{on:function(r,n,i){if(typeof n!="function")throw new Error("callback is expected to be a function");var a=t[r];return a||(a=t[r]=[]),a.push({callback:n,ctx:i}),e},off:function(r,n){var i=typeof r>"u";if(i)return t=Object.create(null),e;if(t[r]){var a=typeof n!="function";if(a)delete t[r];else for(var o=t[r],s=0;s<o.length;++s)o[s].callback===n&&o.splice(s,1)}return e},fire:function(r){var n=t[r];if(!n)return e;var i;arguments.length>1&&(i=Array.prototype.splice.call(arguments,1));for(var a=0;a<n.length;++a){var o=n[a];o.callback.apply(o.ctx,i)}return e}}}function Kn(e){if(!e)throw new Error("Eventify cannot use falsy object as events subject");for(var t=["on","fire","off"],r=0;r<t.length;++r)if(e.hasOwnProperty(t[r]))throw new Error("Subject cannot be eventified, since it already has property '"+t[r]+"'")}var Qn=Jn;function Jn(e,t,r){typeof r!="object"&&(r={});var n=typeof r.minVelocity=="number"?r.minVelocity:5,i=typeof r.amplitude=="number"?r.amplitude:.25,a=typeof r.cancelAnimationFrame=="function"?r.cancelAnimationFrame:eo(),o=typeof r.requestAnimationFrame=="function"?r.requestAnimationFrame:to(),s,c,l=342,f,d,h,w,L,I,b,D;return{start:y,stop:B,cancel:M};function M(){a(f),a(D)}function y(){s=e(),w=b=d=L=0,c=new Date,a(f),a(D),f=o(_)}function _(){var k=Date.now(),F=k-c;c=k;var C=e(),P=C.x-s.x,U=C.y-s.y;s=C;var O=1e3/(1+F);d=.8*P*O+.2*d,L=.8*U*O+.2*L,f=o(_)}function B(){a(f),a(D);var k=e();h=k.x,I=k.y,c=Date.now(),(d<-n||d>n)&&(w=i*d,h+=w),(L<-n||L>n)&&(b=i*L,I+=b),D=o(N)}function N(){var k=Date.now()-c,F=!1,C=0,P=0;w&&(C=-w*Math.exp(-k/l),C>.5||C<-.5?F=!0:C=w=0),b&&(P=-b*Math.exp(-k/l),P>.5||P<-.5?F=!0:P=b=0),F&&(t(h+C,I+P),D=o(N))}}function eo(){return typeof cancelAnimationFrame=="function"?cancelAnimationFrame:clearTimeout}function to(){return typeof requestAnimationFrame=="function"?requestAnimationFrame:function(e){return setTimeout(e,16)}}var ro=no;function no(e){if(e)return{capture:vr,release:vr};var t,r,n,i=!1;return{capture:a,release:o};function a(s){i=!0,r=window.document.onselectstart,n=window.document.ondragstart,window.document.onselectstart=hr,t=s,t.ondragstart=hr}function o(){i&&(i=!1,window.document.onselectstart=r,t&&(t.ondragstart=n))}}function hr(e){return e.stopPropagation(),!1}function vr(){}var xt,pr;function oo(){if(pr)return xt;pr=1,xt=e;function e(){this.x=0,this.y=0,this.scale=1}return xt}var vt={exports:{}},gr;function ao(){if(gr)return vt.exports;gr=1,vt.exports=e,vt.exports.canAttach=t;function e(r,n){if(!t(r))throw new Error("svg element is required for svg.panzoom to work");var i=r.ownerSVGElement;if(!i)throw new Error("Do not apply panzoom to the root <svg> element. Use its child instead (e.g. <g></g>). As of March 2016 only FireFox supported transform on the root element");n.disableKeyboardInteraction||i.setAttribute("tabindex",0);var a={getBBox:s,getScreenCTM:c,getOwner:o,applyTransform:f,initTransform:l};return a;function o(){return i}function s(){var d=r.getBBox();return{left:d.x,top:d.y,width:d.width,height:d.height}}function c(){var d=i.getCTM();return d||i.getScreenCTM()}function l(d){var h=r.getCTM();h===null&&(h=document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGMatrix()),d.x=h.e,d.y=h.f,d.scale=h.a,i.removeAttributeNS(null,"viewBox")}function f(d){r.setAttribute("transform","matrix("+d.scale+" 0 0 "+d.scale+" "+d.x+" "+d.y+")")}}function t(r){return r&&r.ownerSVGElement&&r.getCTM}return vt.exports}var pt={exports:{}},_r;function io(){if(_r)return pt.exports;_r=1,pt.exports=e,pt.exports.canAttach=t;function e(r,n){var i=t(r);if(!i)throw new Error("panzoom requires DOM element to be attached to the DOM tree");var a=r.parentElement;r.scrollTop=0,n.disableKeyboardInteraction||a.setAttribute("tabindex",0);var o={getBBox:c,getOwner:s,applyTransform:l};return o;function s(){return a}function c(){return{left:0,top:0,width:r.clientWidth,height:r.clientHeight}}function l(f){r.style.transformOrigin="0 0 0",r.style.transform="matrix("+f.scale+", 0, 0, "+f.scale+", "+f.x+", "+f.y+")"}}function t(r){return r&&r.parentElement&&r.style}return pt.exports}var br=Mn,Dt=Yn,so=jn,lo=Qn,zr=ro,uo=zr(),co=zr(!0),fo=oo(),wr=ao(),Ar=io(),mo=1,ho=1.75,yr=300,Er=200,vo=Vr;function Vr(e,t){t=t||{};var r=t.controller;if(r||(wr.canAttach(e)?r=wr(e,t):Ar.canAttach(e)&&(r=Ar(e,t))),!r)throw new Error("Cannot create panzoom for the current type of dom element");var n=r.getOwner(),i={x:0,y:0},a=!1,o=new fo;r.initTransform&&r.initTransform(o);var s=typeof t.filterKey=="function"?t.filterKey:Oe,c=typeof t.pinchSpeed=="number"?t.pinchSpeed:1,l=t.bounds,f=typeof t.maxZoom=="number"?t.maxZoom:Number.POSITIVE_INFINITY,d=typeof t.minZoom=="number"?t.minZoom:0,h=typeof t.boundsPadding=="number"?t.boundsPadding:.05,w=typeof t.zoomDoubleClickSpeed=="number"?t.zoomDoubleClickSpeed:ho,L=t.beforeWheel||Oe,I=t.beforeMouseDown||Oe,b=typeof t.zoomSpeed=="number"?t.zoomSpeed:mo,D=Tr(t.transformOrigin),M=t.enableTextSelection?co:uo;po(l),t.autocenter&&nt();var y,_=0,B=0,N=0,k=null,F=new Date,C,P=!1,U=!1,O,X,ae,ce,me,$;"smoothScroll"in t&&!t.smoothScroll?$=go():$=lo(it,lt,t.smoothScroll);var z,j,ee,ne=!1;qe();var fe={dispose:ke,moveBy:xe,moveTo:he,smoothMoveTo:st,centerOn:Ee,zoomTo:dt,zoomAbs:we,smoothZoom:ft,smoothZoomAbs:qr,showRectangle:rt,pause:de,resume:Be,isPaused:We,getTransform:H,getMinZoom:wt,setMinZoom:ot,getMaxZoom:At,setMaxZoom:at,getTransformOrigin:te,setTransformOrigin:yt,getZoomSpeed:Et,setZoomSpeed:$e};so(fe);var Le=typeof t.initialX=="number"?t.initialX:o.x,Ae=typeof t.initialY=="number"?t.initialY:o.y,ie=typeof t.initialZoom=="number"?t.initialZoom:o.scale;return(Le!=o.x||Ae!=o.y||ie!=o.scale)&&we(Le,Ae,ie),fe;function de(){Ye(),ne=!0}function Be(){ne&&(qe(),ne=!1)}function We(){return ne}function rt(u){var p=n.getBoundingClientRect(),g=Te(p.width,p.height),E=u.right-u.left,V=u.bottom-u.top;if(!Number.isFinite(E)||!Number.isFinite(V))throw new Error("Invalid rectangle");var G=g.x/E,q=g.y/V,re=Math.min(G,q);o.x=-(u.left+E/2)*re+g.x/2,o.y=-(u.top+V/2)*re+g.y/2,o.scale=re}function Te(u,p){if(r.getScreenCTM){var g=r.getScreenCTM(),E=g.a,V=g.d,G=g.e,q=g.f;i.x=u*E-G,i.y=p*V-q}else i.x=u,i.y=p;return i}function nt(){var u,p,g=0,E=0,V=Y();if(V)g=V.left,E=V.top,u=V.right-V.left,p=V.bottom-V.top;else{var G=n.getBoundingClientRect();u=G.width,p=G.height}var q=r.getBBox();if(!(q.width===0||q.height===0)){var re=p/q.height,Me=u/q.width,Re=Math.min(Me,re);o.x=-(q.left+q.width/2)*Re+u/2+g,o.y=-(q.top+q.height/2)*Re+p/2+E,o.scale=Re}}function H(){return o}function wt(){return d}function ot(u){d=u}function At(){return f}function at(u){f=u}function te(){return D}function yt(u){D=Tr(u)}function Et(){return b}function $e(u){if(!Number.isFinite(u))throw new Error("Zoom speed should be a number");b=u}function it(){return{x:o.x,y:o.y}}function he(u,p){o.x=u,o.y=p,x(),Ce("pan"),ve()}function Ge(u,p){he(o.x+u,o.y+p)}function x(){var u=Y();if(u){var p=!1,g=Se(),E=u.left-g.right;return E>0&&(o.x+=E,p=!0),E=u.right-g.left,E<0&&(o.x+=E,p=!0),E=u.top-g.bottom,E>0&&(o.y+=E,p=!0),E=u.bottom-g.top,E<0&&(o.y+=E,p=!0),p}}function Y(){if(l){if(typeof l=="boolean"){var u=n.getBoundingClientRect(),p=u.width,g=u.height;return{left:p*h,top:g*h,right:p*(1-h),bottom:g*(1-h)}}return l}}function Se(){var u=r.getBBox(),p=ye(u.left,u.top);return{left:p.x,top:p.y,right:u.width*o.scale+p.x,bottom:u.height*o.scale+p.y}}function ye(u,p){return{x:u*o.scale+o.x,y:p*o.scale+o.y}}function ve(){a=!0,y=window.requestAnimationFrame(ut)}function K(u,p,g){if(It(u)||It(p)||It(g))throw new Error("zoom requires valid numbers");var E=o.scale*g;if(E<d){if(o.scale===d)return;g=d/o.scale}if(E>f){if(o.scale===f)return;g=f/o.scale}var V=Te(u,p);if(o.x=V.x-g*(V.x-o.x),o.y=V.y-g*(V.y-o.y),l&&h===1&&d===1)o.scale*=g,x();else{var G=x();G||(o.scale*=g)}Ce("zoom"),ve()}function we(u,p,g){var E=g/o.scale;K(u,p,E)}function Ee(u){var p=u.ownerSVGElement;if(!p)throw new Error("ui element is required to be within the scene");var g=u.getBoundingClientRect(),E=g.left+g.width/2,V=g.top+g.height/2,G=p.getBoundingClientRect(),q=G.width/2-E,re=G.height/2-V;xe(q,re,!0)}function st(u,p){xe(u-o.x,p-o.y,!0)}function xe(u,p,g){if(!g)return Ge(u,p);z&&z.cancel();var E={x:0,y:0},V={x:u,y:p},G=0,q=0;z=Dt(E,V,{step:function(re){Ge(re.x-G,re.y-q),G=re.x,q=re.y}})}function lt(u,p){mt(),he(u,p)}function ke(){Ye()}function qe(){n.addEventListener("mousedown",$t,{passive:!1}),n.addEventListener("dblclick",Wt,{passive:!1}),n.addEventListener("touchstart",Ot,{passive:!1}),n.addEventListener("keydown",Pt,{passive:!1}),br.addWheelListener(n,Ht,{passive:!1}),ve()}function Ye(){br.removeWheelListener(n,Ht),n.removeEventListener("mousedown",$t),n.removeEventListener("keydown",Pt),n.removeEventListener("dblclick",Wt),n.removeEventListener("touchstart",Ot),y&&(window.cancelAnimationFrame(y),y=0),$.cancel(),Yt(),jt(),M.release(),Tt()}function ut(){a&&Xr()}function Xr(){a=!1,r.applyTransform(o),Ce("transform"),y=0}function Pt(u){var p=0,g=0,E=0;if(u.keyCode===38?g=1:u.keyCode===40?g=-1:u.keyCode===37?p=1:u.keyCode===39?p=-1:u.keyCode===189||u.keyCode===109?E=1:(u.keyCode===187||u.keyCode===107)&&(E=-1),!s(u,p,g,E)){if(p||g){u.preventDefault(),u.stopPropagation();var V=n.getBoundingClientRect(),G=Math.min(V.width,V.height),q=.05,re=G*q*p,Me=G*q*g;xe(re,Me)}if(E){var Re=Kt(E*100),G=D?He():Zr();dt(G.x,G.y,Re)}}}function Zr(){var u=n.getBoundingClientRect();return{x:u.width/2,y:u.height/2}}function Ot(u){if(Wr(u),je(),u.touches.length===1)return Gr(u,u.touches[0]);u.touches.length===2&&(me=Zt(u.touches[0],u.touches[1]),ee=!0,zt())}function Wr(u){t.onTouch&&!t.onTouch(u)||(u.stopPropagation(),u.preventDefault())}function $r(u){je(),!(t.onDoubleClick&&!t.onDoubleClick(u))&&(u.preventDefault(),u.stopPropagation())}function Gr(u){B=new Date;var p=u.touches[0],g=De(p);C=g;var E=Te(g.x,g.y);O=E.x,X=E.y,ae=O,ce=X,$.cancel(),zt()}function zt(){P||(P=!0,document.addEventListener("touchmove",Vt),document.addEventListener("touchend",ct),document.addEventListener("touchcancel",ct))}function Vt(u){if(u.touches.length===1){u.stopPropagation();var p=u.touches[0],g=De(p),E=Te(g.x,g.y),V=E.x-O,G=E.y-X;V!==0&&G!==0&&Qt(),O=E.x,X=E.y,xe(V,G)}else if(u.touches.length===2){ee=!0;var q=u.touches[0],re=u.touches[1],Me=Zt(q,re),Re=1+(Me/me-1)*c,Jt=De(q),er=De(re);if(O=(Jt.x+er.x)/2,X=(Jt.y+er.y)/2,D){var g=He();O=g.x,X=g.y}dt(O,X,Re),me=Me,u.stopPropagation(),u.preventDefault()}}function je(){N&&(clearTimeout(N),N=0)}function Xt(u){if(t.onClick){je();var p=O-ae,g=X-ce,E=Math.sqrt(p*p+g*g);E>5||(N=setTimeout(function(){N=0,t.onClick(u)},yr))}}function ct(u){if(je(),u.touches.length>0){var p=De(u.touches[0]),g=Te(p.x,p.y);O=g.x,X=g.y}else{var E=new Date;if(E-_<yr)if(D){var p=He();ft(p.x,p.y,w)}else ft(C.x,C.y,w);else E-B<Er&&Xt(u);_=E,Tt(),jt()}}function Zt(u,p){var g=u.clientX-p.clientX,E=u.clientY-p.clientY;return Math.sqrt(g*g+E*E)}function Wt(u){$r(u);var p=De(u);D&&(p=He()),ft(p.x,p.y,w)}function $t(u){if(je(),!I(u)){if(k=u,F=new Date,P)return u.stopPropagation(),!1;var p=u.button===1&&window.event!==null||u.button===0;if(p){$.cancel();var g=De(u),E=Te(g.x,g.y);return ae=O=E.x,ce=X=E.y,document.addEventListener("mousemove",Gt),document.addEventListener("mouseup",qt),M.capture(u.target||u.srcElement),!1}}}function Gt(u){if(!P){Qt();var p=De(u),g=Te(p.x,p.y),E=g.x-O,V=g.y-X;O=g.x,X=g.y,xe(E,V)}}function qt(){var u=new Date;u-F<Er&&Xt(k),M.release(),Tt(),Yt()}function Yt(){document.removeEventListener("mousemove",Gt),document.removeEventListener("mouseup",qt),U=!1}function jt(){document.removeEventListener("touchmove",Vt),document.removeEventListener("touchend",ct),document.removeEventListener("touchcancel",ct),U=!1,ee=!1,P=!1}function Ht(u){if(!L(u)){$.cancel();var p=u.deltaY;u.deltaMode>0&&(p*=100);var g=Kt(p);if(g!==1){var E=D?He():De(u);dt(E.x,E.y,g),u.preventDefault()}}}function De(u){var p,g,E=n.getBoundingClientRect();return p=u.clientX-E.left,g=u.clientY-E.top,{x:p,y:g}}function ft(u,p,g){var E=o.scale,V={scale:E},G={scale:g*E};$.cancel(),mt(),j=Dt(V,G,{step:function(q){we(u,p,q.scale)},done:Yr})}function qr(u,p,g){var E=o.scale,V={scale:E},G={scale:g};$.cancel(),mt(),j=Dt(V,G,{step:function(q){we(u,p,q.scale)}})}function He(){var u=n.getBoundingClientRect();return{x:u.width*D.x,y:u.height*D.y}}function dt(u,p,g){return $.cancel(),mt(),K(u,p,g)}function mt(){j&&(j.cancel(),j=null)}function Kt(u){var p=Math.sign(u),g=Math.min(.25,Math.abs(b*u/128));return 1-p*g}function Qt(){U||(Ce("panstart"),U=!0,$.start())}function Tt(){U&&(ee||$.stop(),Ce("panend"))}function Yr(){Ce("zoomend")}function Ce(u){fe.fire(u,fe)}}function Tr(e){if(e){if(typeof e=="object")return(!Pe(e.x)||!Pe(e.y))&&Sr(e),e;Sr()}}function Sr(e){throw console.error(e),new Error(["Cannot parse transform origin.","Some good examples:",'  "center center" can be achieved with {x: 0.5, y: 0.5}','  "top center" can be achieved with {x: 0.5, y: 0}','  "bottom right" can be achieved with {x: 1, y: 1}'].join(`
`))}function Oe(){}function po(e){var t=typeof e;if(!(t==="undefined"||t==="boolean")){var r=Pe(e.left)&&Pe(e.top)&&Pe(e.bottom)&&Pe(e.right);if(!r)throw new Error("Bounds object is not valid. It can be: undefined, boolean (true|false) or an object {left, top, right, bottom}")}}function Pe(e){return Number.isFinite(e)}function It(e){return Number.isNaN?Number.isNaN(e):e!==e}function go(){return{start:Oe,stop:Oe,cancel:Oe}}function _o(){if(typeof document>"u")return;var e=document.getElementsByTagName("script");if(!e)return;for(var t,r=0;r<e.length;++r){var n=e[r];if(n.src&&n.src.match(/\bpanzoom(\.min)?\.js/)){t=n;break}}if(!t)return;var i=t.getAttribute("query");if(!i)return;var a=t.getAttribute("name")||"pz",o=Date.now();s();function s(){var f=document.querySelector(i);if(!f){var d=Date.now(),h=d-o;if(h<2e3){setTimeout(s,100);return}console.error("Cannot find the panzoom element",a);return}var w=c(t);console.log(w),window[a]=Vr(f,w)}function c(f){for(var d=f.attributes,h={},w=0;w<d.length;++w){var L=d[w],I=l(L);I&&(h[I.name]=I.value)}return h}function l(f){if(f.name){var d=f.name[0]==="p"&&f.name[1]==="z"&&f.name[2]==="-";if(d){var h=f.name.substr(3),w=JSON.parse(f.value);return{name:h,value:w}}}}}_o();const bo=sn(vo);const wo=e=>({}),xr=e=>({}),Ao=e=>({}),Dr=e=>({});function yo(e){let t,r,n,i,a,o,s,c,l,f,d,h,w,L;const I=e[6].left,b=Rt(I,e,e[5],Dr),D=e[6].right,M=Rt(D,e,e[5],xr);return d=new tt({props:{src:rn,class:"w-6 h-6 text-white"}}),{c(){t=T("div"),r=T("div"),n=T("div"),i=T("div"),b&&b.c(),a=Z(),o=T("div"),s=T("div"),M&&M.c(),c=Z(),l=T("div"),f=T("div"),pe(d.$$.fragment),this.h()},l(y){t=S(y,"DIV",{class:!0});var _=R(t);r=S(_,"DIV",{class:!0});var B=R(r);n=S(B,"DIV",{class:!0});var N=R(n);i=S(N,"DIV",{style:!0});var k=R(i);b&&b.l(k),k.forEach(A),N.forEach(A),a=W(B),o=S(B,"DIV",{class:!0});var F=R(o);s=S(F,"DIV",{style:!0});var C=R(s);M&&M.l(C),C.forEach(A),F.forEach(A),B.forEach(A),c=W(_),l=S(_,"DIV",{class:!0});var P=R(l);f=S(P,"DIV",{class:!0});var U=R(f);ge(d.$$.fragment,U),U.forEach(A),P.forEach(A),_.forEach(A),this.h()},h(){m(i,"style",e[2]),m(n,"class","left svelte-prhf1h"),m(s,"style",e[2]),m(o,"class","right svelte-prhf1h"),m(r,"class","w-full h-full grid place-items-center"),m(f,"class","w-12 h-12 rounded-full bg-black absolute top-1/2 -translate-x-1/2 left-1/2 grid place-items-center"),m(l,"class","handle relative shadow-lg svelte-prhf1h"),m(t,"class","container svelte-prhf1h"),rr(t,"--split-point",e[1]+"%")},m(y,_){oe(y,t,_),v(t,r),v(r,n),v(n,i),b&&b.m(i,null),v(r,a),v(r,o),v(o,s),M&&M.m(s,null),v(t,c),v(t,l),v(l,f),_e(d,f,null),e[7](t),h=!0,w||(L=[Ct(e[4].call(null,r)),Ct(e[3].call(null,l)),ue(l,"pointercancel",Mt(To))],w=!0)},p(y,[_]){b&&b.p&&(!h||_&32)&&Lt(b,I,y,y[5],h?kt(I,y[5],_,Ao):Bt(y[5]),Dr),(!h||_&4)&&m(i,"style",y[2]),M&&M.p&&(!h||_&32)&&Lt(M,D,y,y[5],h?kt(D,y[5],_,wo):Bt(y[5]),xr),(!h||_&4)&&m(s,"style",y[2]),_&2&&rr(t,"--split-point",y[1]+"%")},i(y){h||(Q(b,y),Q(M,y),Q(d.$$.fragment,y),h=!0)},o(y){J(b,y),J(M,y),J(d.$$.fragment,y),h=!1},d(y){y&&A(t),b&&b.d(y),M&&M.d(y),be(d),e[7](null),w=!1,et(L)}}}function Eo(e,t,r){return Math.min(Math.max(e,t),r)}const To=()=>{};function So(e,t,r){let{$$slots:n={},$$scope:i}=t,a=null,o=50;function s(d){d.addEventListener("pointerdown",h=>{const w=h.clientX,L=o,I=document.body.style.cursor;document.body.style.cursor="col-resize";const b=M=>{const y=a?a.clientWidth:window.innerWidth,_=M.clientX-w,B=L+_/y*100;r(1,o=Eo(B,0,100))},D=()=>{document.body.style.cursor=I,window.removeEventListener("pointermove",b),window.removeEventListener("pointerup",D)};window.addEventListener("pointermove",b),window.addEventListener("pointerup",D)})}let c="";function l(d){const h=bo(d,{controller:{applyTransform:w=>{r(2,c=`transform: translate(${w.x}px, ${w.y}px) scale(${w.scale})`)},getOwner:()=>d}});return{destroy:()=>h.dispose()}}function f(d){Ie[d?"unshift":"push"](()=>{a=d,r(0,a)})}return e.$$set=d=>{"$$scope"in d&&r(5,i=d.$$scope)},[a,o,c,s,l,i,n,f]}class xo extends Ve{constructor(t){super(),Xe(this,t,So,yo,Ze,{})}}const Do=""+new URL("../assets/cat.58b560b7.jpg",import.meta.url).href,Io="data:image/avif;base64,AAAAHGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZgAAAOptZXRhAAAAAAAAACFoZGxyAAAAAAAAAABwaWN0AAAAAAAAAAAAAAAAAAAAAA5waXRtAAAAAAABAAAAImlsb2MAAAAAREAAAQABAAAAAAEOAAEAAAAAAAAApwAAACNpaW5mAAAAAAABAAAAFWluZmUCAAAAAAEAAGF2MDEAAAAAamlwcnAAAABLaXBjbwAAABNjb2xybmNseAACAAIABoAAAAAMYXYxQ4EEDAAAAAAUaXNwZQAAAAAAAAJyAAACcgAAABBwaXhpAAAAAAMICAgAAAAXaXBtYQAAAAAAAAABAAEEgYIDhAAAAK9tZGF0EgAKChkmZxnHggQEDQgylgERQAEEEEEA9NBi7JFlrqXV1mwMry34uIYK7WRdWYJ/ZZ0EIyWW8aLm92oz5LY0W+l2FiKsHpp4BB3Vrk+iwHuzboac7wmSHHHRWklZdZ2hpEAi4E31lf1tjXnXie8fh4lzApbqjH5Pj7ZN6761WygYVdc2zvJOsflFZstng6rQU/oulDZSO6fQWKvzpO9pseyXBLfms64=";function Ir(e,t,r){const n=e.slice();return n[31]=t[r],n}function Rr(e){let t,r,n;function i(o){e[20](o)}let a={label:"Bayer Level ("+e[2]+")",min:0,max:5,step:1};return e[2]!==void 0&&(a.value=e[2]),t=new Ut({props:a}),Ie.push(()=>Ne(t,"value",i)),{c(){pe(t.$$.fragment)},l(o){ge(t.$$.fragment,o)},m(o,s){_e(t,o,s),n=!0},p(o,s){const c={};s[0]&4&&(c.label="Bayer Level ("+o[2]+")"),!r&&s[0]&4&&(r=!0,c.value=o[2],Ue(()=>r=!1)),t.$set(c)},i(o){n||(Q(t.$$.fragment,o),n=!0)},o(o){J(t.$$.fragment,o),n=!1},d(o){be(t,o)}}}function Lr(e){let t,r,n,i,a,o,s,c,l,f,d,h,w,L;return{c(){t=T("fieldset"),r=T("div"),n=T("input"),i=Z(),a=T("label"),o=se("Light"),s=Z(),c=T("div"),l=T("input"),f=Z(),d=T("label"),h=se("Dark"),this.h()},l(I){t=S(I,"FIELDSET",{});var b=R(t);r=S(b,"DIV",{class:!0});var D=R(r);n=S(D,"INPUT",{type:!0,name:!0,id:!0}),i=W(D),a=S(D,"LABEL",{for:!0,class:!0});var M=R(a);o=le(M,"Light"),M.forEach(A),D.forEach(A),s=W(b),c=S(b,"DIV",{class:!0});var y=R(c);l=S(y,"INPUT",{type:!0,name:!0,id:!0}),f=W(y),d=S(y,"LABEL",{for:!0,class:!0});var _=R(d);h=le(_,"Dark"),_.forEach(A),y.forEach(A),b.forEach(A),this.h()},h(){m(n,"type","color"),m(n,"name","color-light"),m(n,"id","color-light"),m(a,"for","color-light"),m(a,"class","font-medium text-gray-900"),m(r,"class","flex gap-3"),m(l,"type","color"),m(l,"name","color-dark"),m(l,"id","color-dark"),m(d,"for","color-dark"),m(d,"class","font-medium text-gray-900"),m(c,"class","flex gap-3")},m(I,b){oe(I,t,b),v(t,r),v(r,n),Fe(n,e[8]),v(r,i),v(r,a),v(a,o),v(t,s),v(t,c),v(c,l),Fe(l,e[9]),v(c,f),v(c,d),v(d,h),w||(L=[ue(n,"input",e[24]),ue(l,"input",e[25])],w=!0)},p(I,b){b[0]&256&&Fe(n,I[8]),b[0]&512&&Fe(l,I[9])},d(I){I&&A(t),w=!1,et(L)}}}function Ro(e){let t,r,n;return t=new tt({props:{src:nn,class:"w-4 h-4"}}),{c(){pe(t.$$.fragment),r=se(`
				Save`)},l(i){ge(t.$$.fragment,i),r=le(i,`
				Save`)},m(i,a){_e(t,i,a),oe(i,r,a),n=!0},p:Je,i(i){n||(Q(t.$$.fragment,i),n=!0)},o(i){J(t.$$.fragment,i),n=!1},d(i){be(t,i),i&&A(r)}}}function Lo(e){let t,r,n,i,a,o,s,c,l,f,d,h,w,L,I,b,D,M,y=e[13],_=[];for(let B=0;B<y.length;B+=1)_[B]=Br(Ir(e,y,B));return f=new tt({props:{src:on,class:"w-12 h-12 text-gray-400"}}),{c(){t=T("div"),r=T("div"),n=T("p"),i=se("Select or Drop an Image to Start"),a=Z(),o=T("div");for(let B=0;B<_.length;B+=1)_[B].c();s=Z(),c=T("label"),l=T("div"),pe(f.$$.fragment),d=Z(),h=T("span"),w=se("Choose an Image"),L=Z(),I=T("input"),this.h()},l(B){t=S(B,"DIV",{class:!0});var N=R(t);r=S(N,"DIV",{class:!0});var k=R(r);n=S(k,"P",{class:!0});var F=R(n);i=le(F,"Select or Drop an Image to Start"),F.forEach(A),a=W(k),o=S(k,"DIV",{class:!0});var C=R(o);for(let X=0;X<_.length;X+=1)_[X].l(C);s=W(C),c=S(C,"LABEL",{for:!0,class:!0});var P=R(c);l=S(P,"DIV",{class:!0});var U=R(l);ge(f.$$.fragment,U),U.forEach(A),d=W(P),h=S(P,"SPAN",{class:!0});var O=R(h);w=le(O,"Choose an Image"),O.forEach(A),L=W(P),I=S(P,"INPUT",{type:!0,class:!0,id:!0,accept:!0}),P.forEach(A),C.forEach(A),k.forEach(A),N.forEach(A),this.h()},h(){m(n,"class","text-2xl text-gray-500"),m(l,"class","grid place-items-center h-full w-full"),m(h,"class","sr-only"),m(I,"type","file"),m(I,"class","sr-only"),m(I,"id","image-input"),m(I,"accept","image/*"),m(c,"for","image-input"),m(c,"class","block spect-square h-24 w-24 object-cover rounded-md shadow-md border-2 border-white bg-white hover:bg-gray-100"),m(o,"class","flex gap-3 justify-center"),m(r,"class","grid gap-4"),m(t,"class","w-full h-full grid place-items-center")},m(B,N){oe(B,t,N),v(t,r),v(r,n),v(n,i),v(r,a),v(r,o);for(let k=0;k<_.length;k+=1)_[k]&&_[k].m(o,null);v(o,s),v(o,c),v(c,l),_e(f,l,null),v(c,d),v(c,h),v(h,w),v(c,L),v(c,I),b=!0,D||(M=ue(I,"input",e[17]),D=!0)},p(B,N){if(N[0]&270336){y=B[13];let k;for(k=0;k<y.length;k+=1){const F=Ir(B,y,k);_[k]?_[k].p(F,N):(_[k]=Br(F),_[k].c(),_[k].m(o,s))}for(;k<_.length;k+=1)_[k].d(1);_.length=y.length}},i(B){b||(Q(f.$$.fragment,B),b=!0)},o(B){J(f.$$.fragment,B),b=!1},d(B){B&&A(t),kr(_,B),be(f),D=!1,M()}}}function Bo(e){let t,r,n,i,a,o,s,c;return r=new xo({props:{$$slots:{right:[Co],left:[ko]},$$scope:{ctx:e}}}),a=new tt({props:{src:an,class:"w-5 h-5 text-white"}}),{c(){t=T("div"),pe(r.$$.fragment),n=Z(),i=T("button"),pe(a.$$.fragment),this.h()},l(l){t=S(l,"DIV",{class:!0});var f=R(t);ge(r.$$.fragment,f),n=W(f),i=S(f,"BUTTON",{class:!0,title:!0});var d=R(i);ge(a.$$.fragment,d),d.forEach(A),f.forEach(A),this.h()},h(){m(i,"class","absolute top-0 right-0 m-4 p-2 bg-black bg-opacity-40 rounded-full"),m(i,"title","Close Image & Reset"),m(t,"class","w-full h-full relative")},m(l,f){oe(l,t,f),_e(r,t,null),v(t,n),v(t,i),_e(a,i,null),o=!0,s||(c=ue(i,"click",e[29]),s=!0)},p(l,f){const d={};f[0]&8169|f[1]&8&&(d.$$scope={dirty:f,ctx:l}),r.$set(d)},i(l){o||(Q(r.$$.fragment,l),Q(a.$$.fragment,l),o=!0)},o(l){J(r.$$.fragment,l),J(a.$$.fragment,l),o=!1},d(l){l&&A(t),be(r),be(a),s=!1,c()}}}function Br(e){let t,r,n,i,a;function o(){return e[30](e[31])}return{c(){t=T("button"),r=T("img"),this.h()},l(s){t=S(s,"BUTTON",{class:!0});var c=R(t);r=S(c,"IMG",{class:!0,src:!0,alt:!0}),c.forEach(A),this.h()},h(){m(r,"class","aspect-square h-24 w-24 object-cover rounded-md shadow-md border-2 border-white"),Nt(r.src,n=e[31])||m(r,"src",n),m(r,"alt",""),m(t,"class","hover:opacity-75 transition-opacity")},m(s,c){oe(s,t,c),v(t,r),i||(a=ue(t,"click",o),i=!0)},p(s,c){e=s},d(s){s&&A(t),i=!1,a()}}}function ko(e){let t,r,n;return{c(){t=T("img"),this.h()},l(i){t=S(i,"IMG",{slot:!0,src:!0,alt:!0,style:!0,class:!0}),this.h()},h(){m(t,"slot","left"),Nt(t.src,r=e[3].src)||m(t,"src",r),m(t,"alt",""),m(t,"style",n=`width: ${e[0]}px; height: ${e[11]}px`),m(t,"class","pixelated max-w-none svelte-1gkt69q")},m(i,a){oe(i,t,a)},p(i,a){a[0]&8&&!Nt(t.src,r=i[3].src)&&m(t,"src",r),a[0]&2049&&n!==(n=`width: ${i[0]}px; height: ${i[11]}px`)&&m(t,"style",n)},d(i){i&&A(t)}}}function Co(e){let t,r,n,i,a;return{c(){t=T("canvas"),this.h()},l(o){t=S(o,"CANVAS",{class:!0,slot:!0,style:!0,width:!0,height:!0,"aria-label":!0}),R(t).forEach(A),this.h()},h(){m(t,"class","pixelated svelte-1gkt69q"),m(t,"slot","right"),m(t,"style",r=`width: ${e[0]}px; height: ${e[11]}px`),m(t,"width",e[0]),m(t,"height",e[11]),m(t,"aria-label","Dithered Image")},m(o,s){oe(o,t,s),e[28](t),i||(a=Ct(n=In.call(null,t,{image:e[3],threshold:e[5],noiseIntensity:e[6],monochrome:e[7],colorLight:e[8],colorDark:e[9],mode:e[12],width:e[0],height:e[11]})),i=!0)},p(o,s){s[0]&2049&&r!==(r=`width: ${o[0]}px; height: ${o[11]}px`)&&m(t,"style",r),s[0]&1&&m(t,"width",o[0]),s[0]&2048&&m(t,"height",o[11]),n&&en(n.update)&&s[0]&7145&&n.update.call(null,{image:o[3],threshold:o[5],noiseIntensity:o[6],monochrome:o[7],colorLight:o[8],colorDark:o[9],mode:o[12],width:o[0],height:o[11]})},d(o){o&&A(t),e[28](null),i=!1,a()}}}function Mo(e){let t,r,n,i,a,o,s,c,l,f,d,h,w,L,I,b,D,M,y,_,B,N,k,F,C,P,U,O,X,ae,ce,me,$,z,j,ee,ne,fe,Le,Ae,ie,de,Be,We,rt;function Te(x){e[19](x)}let nt={label:"Dither Mode",options:e[15]};e[1]!==void 0&&(nt.selected=e[1]),f=new mn({props:nt}),Ie.push(()=>Ne(f,"selected",Te));let H=e[1]==="bayer"&&Rr(e);function wt(x){e[21](x)}let ot={label:"Threshold ("+e[5]+")",min:0,max:1,step:.01};e[5]!==void 0&&(ot.value=e[5]),L=new Ut({props:ot}),Ie.push(()=>Ne(L,"value",wt));function At(x){e[22](x)}let at={label:"Noise Intensity ("+e[6]+")",min:0,max:1.5,step:.01};e[6]!==void 0&&(at.value=e[6]),D=new Ut({props:at}),Ie.push(()=>Ne(D,"value",At));let te=e[7]&&Lr(e);function yt(x){e[26](x)}function Et(x){e[27](x)}let $e={};e[0]!==void 0&&($e.width=e[0]),e[4]!==void 0&&($e.aspectRatio=e[4]),$=new cn({props:$e}),Ie.push(()=>Ne($,"width",yt)),Ie.push(()=>Ne($,"aspectRatio",Et)),fe=new Bn({props:{disabled:!e[3],$$slots:{default:[Ro]},$$scope:{ctx:e}}}),fe.$on("click",e[14]);const it=[Bo,Lo],he=[];function Ge(x,Y){return x[3]?0:1}return ie=Ge(e),de=he[ie]=it[ie](e),{c(){t=Z(),r=Z(),n=T("main"),i=T("aside"),a=T("section"),o=T("div"),s=T("h2"),c=se("Dithering Options"),l=Z(),pe(f.$$.fragment),h=Z(),H&&H.c(),w=Z(),pe(L.$$.fragment),b=Z(),pe(D.$$.fragment),y=Z(),_=T("div"),B=T("div"),N=T("input"),k=Z(),F=T("div"),C=T("label"),P=se("Monochrome"),U=Z(),te&&te.c(),O=Z(),X=T("div"),ae=T("h2"),ce=se("Output Options"),me=Z(),pe($.$$.fragment),ee=Z(),ne=T("footer"),pe(fe.$$.fragment),Le=Z(),Ae=T("section"),de.c(),this.h()},l(x){Jr("svelte-1hm2pfs",document.head).forEach(A),t=W(x),r=W(x),n=S(x,"MAIN",{class:!0});var Se=R(n);i=S(Se,"ASIDE",{class:!0});var ye=R(i);a=S(ye,"SECTION",{class:!0});var ve=R(a);o=S(ve,"DIV",{class:!0});var K=R(o);s=S(K,"H2",{class:!0});var we=R(s);c=le(we,"Dithering Options"),we.forEach(A),l=W(K),ge(f.$$.fragment,K),h=W(K),H&&H.l(K),w=W(K),ge(L.$$.fragment,K),b=W(K),ge(D.$$.fragment,K),y=W(K),_=S(K,"DIV",{class:!0});var Ee=R(_);B=S(Ee,"DIV",{class:!0});var st=R(B);N=S(st,"INPUT",{type:!0,id:!0,class:!0}),st.forEach(A),k=W(Ee),F=S(Ee,"DIV",{class:!0});var xe=R(F);C=S(xe,"LABEL",{for:!0,class:!0});var lt=R(C);P=le(lt,"Monochrome"),lt.forEach(A),xe.forEach(A),Ee.forEach(A),U=W(K),te&&te.l(K),K.forEach(A),O=W(ve),X=S(ve,"DIV",{class:!0});var ke=R(X);ae=S(ke,"H2",{class:!0});var qe=R(ae);ce=le(qe,"Output Options"),qe.forEach(A),me=W(ke),ge($.$$.fragment,ke),ke.forEach(A),ve.forEach(A),ee=W(ye),ne=S(ye,"FOOTER",{class:!0});var Ye=R(ne);ge(fe.$$.fragment,Ye),Ye.forEach(A),ye.forEach(A),Le=W(Se),Ae=S(Se,"SECTION",{class:!0});var ut=R(Ae);de.l(ut),ut.forEach(A),Se.forEach(A),this.h()},h(){document.title="Dithering",m(s,"class","text-base font-semibold leading-7 text-black mb-2"),m(N,"type","checkbox"),m(N,"id","monochrome"),m(N,"class","h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600"),m(B,"class","flex h-6 items-center"),m(C,"for","monochrome"),m(C,"class","font-medium text-gray-900"),m(F,"class","ml-3 text-sm leading-6"),m(_,"class","relative flex items-start"),m(o,"class","grid gap-3"),m(ae,"class","text-base font-semibold leading-7 text-black mb-4"),m(X,"class","border-t border-gray-100 py-4"),m(a,"class","grid gap-5 overflow-y-auto overflow-x-visible py-8 px-4"),m(ne,"class","py-4 px-4 flex-shrink-0"),m(i,"class","bg-white w-full md:max-w-md border-t md:border-t-0 md:border-r border-r-0 border-gray-100 z-50 overflow-y-hidden md:h-full flex-1 shadow-lg flex flex-col divide-y divide-gray-200 justify-between"),m(Ae,"class","flex-1 overflow-hidden select-none"),m(n,"class","w-screen max-w-screen h-screen max-h-screen flex md:flex-row flex-col-reverse bg-gray-300")},m(x,Y){oe(x,t,Y),oe(x,r,Y),oe(x,n,Y),v(n,i),v(i,a),v(a,o),v(o,s),v(s,c),v(o,l),_e(f,o,null),v(o,h),H&&H.m(o,null),v(o,w),_e(L,o,null),v(o,b),_e(D,o,null),v(o,y),v(o,_),v(_,B),v(B,N),N.checked=e[7],v(_,k),v(_,F),v(F,C),v(C,P),v(o,U),te&&te.m(o,null),v(a,O),v(a,X),v(X,ae),v(ae,ce),v(X,me),_e($,X,null),v(i,ee),v(i,ne),_e(fe,ne,null),v(n,Le),v(n,Ae),he[ie].m(Ae,null),Be=!0,We||(rt=[ue(document.body,"drop",Mt(e[16])),ue(document.body,"dragover",Mt(No)),ue(N,"change",e[23])],We=!0)},p(x,Y){const Se={};!d&&Y[0]&2&&(d=!0,Se.selected=x[1],Ue(()=>d=!1)),f.$set(Se),x[1]==="bayer"?H?(H.p(x,Y),Y[0]&2&&Q(H,1)):(H=Rr(x),H.c(),Q(H,1),H.m(o,w)):H&&(or(),J(H,1,1,()=>{H=null}),nr());const ye={};Y[0]&32&&(ye.label="Threshold ("+x[5]+")"),!I&&Y[0]&32&&(I=!0,ye.value=x[5],Ue(()=>I=!1)),L.$set(ye);const ve={};Y[0]&64&&(ve.label="Noise Intensity ("+x[6]+")"),!M&&Y[0]&64&&(M=!0,ve.value=x[6],Ue(()=>M=!1)),D.$set(ve),Y[0]&128&&(N.checked=x[7]),x[7]?te?te.p(x,Y):(te=Lr(x),te.c(),te.m(o,null)):te&&(te.d(1),te=null);const K={};!z&&Y[0]&1&&(z=!0,K.width=x[0],Ue(()=>z=!1)),!j&&Y[0]&16&&(j=!0,K.aspectRatio=x[4],Ue(()=>j=!1)),$.$set(K);const we={};Y[0]&8&&(we.disabled=!x[3]),Y[1]&8&&(we.$$scope={dirty:Y,ctx:x}),fe.$set(we);let Ee=ie;ie=Ge(x),ie===Ee?he[ie].p(x,Y):(or(),J(he[Ee],1,1,()=>{he[Ee]=null}),nr(),de=he[ie],de?de.p(x,Y):(de=he[ie]=it[ie](x),de.c()),Q(de,1),de.m(Ae,null))},i(x){Be||(Q(f.$$.fragment,x),Q(H),Q(L.$$.fragment,x),Q(D.$$.fragment,x),Q($.$$.fragment,x),Q(fe.$$.fragment,x),Q(de),Be=!0)},o(x){J(f.$$.fragment,x),J(H),J(L.$$.fragment,x),J(D.$$.fragment,x),J($.$$.fragment,x),J(fe.$$.fragment,x),J(de),Be=!1},d(x){x&&A(t),x&&A(r),x&&A(n),be(f),H&&H.d(),be(L),be(D),te&&te.d(),be($),be(fe),he[ie].d(),We=!1,et(rt)}}}const No=()=>{};function Uo(e,t,r){let n,i,a;const o=[Do,Io];let s=.5,c=.3,l=!1,f="#ede6cc",d="#21263f",h=null,w=600,L="blue_noise",I=3,b=null;async function D(){h&&await kn(h,"dithered","png")}const M=[{name:"Bayer",value:"bayer"},{name:"Blue Noise",value:"blue_noise"},{name:"White Noise",value:"white_noise"}];async function y(z){var ee;const j=(ee=z.dataTransfer)==null?void 0:ee.files[0];if(j){if(!j.type.startsWith("image/")){alert("Please drop an image file");return}try{r(3,b=await fr(j))}catch(ne){alert("Failed to load image"),console.error(ne)}}}async function _(z){const j=z.target.files[0];if(j)try{r(3,b=await fr(j))}catch(ee){alert("Failed to load image"),console.error(ee)}}async function B(z){const j=new Image;j.onload=()=>{r(3,b=j)},j.src=z}function N(z){L=z,r(1,L)}function k(z){I=z,r(2,I)}function F(z){s=z,r(5,s)}function C(z){c=z,r(6,c)}function P(){l=this.checked,r(7,l)}function U(){f=this.value,r(8,f)}function O(){d=this.value,r(9,d)}function X(z){w=z,r(0,w)}function ae(z){a=z,r(4,a),r(3,b)}function ce(z){Ie[z?"unshift":"push"](()=>{h=z,r(10,h)})}const me=()=>r(3,b=null),$=z=>B(z);return e.$$.update=()=>{e.$$.dirty[0]&6&&r(12,n=L==="bayer"?`bayer_${I}`:L),e.$$.dirty[0]&8&&r(4,a=b!=null&&b.width&&(b!=null&&b.height)?b.width/b.height:1),e.$$.dirty[0]&17&&r(11,i=w/a)},[w,L,I,b,a,s,c,l,f,d,h,i,n,o,D,M,y,_,B,N,k,F,C,P,U,O,X,ae,ce,me,$]}class zo extends Ve{constructor(t){super(),Xe(this,t,Uo,Mo,Ze,{},null,[-1,-1])}}export{zo as component};
