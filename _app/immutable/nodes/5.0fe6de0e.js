var xt=Object.defineProperty;var Wt=(e,t,n)=>t in e?xt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Le=(e,t,n)=>(Wt(e,typeof t!="symbol"?t+"":t,n),n);import{S as Ee,i as we,s as ye,k as _,q,a as M,y as te,l as v,m as E,r as Q,h as m,c as C,z as ne,n as c,b as G,G as h,A as re,N as K,g as P,d as z,B as ie,Q as Ce,R as $t,T as gt,u as it,H as Ae,U as Bt,V as Gt,O as De,P as Ht,C as qe,D as Qe,E as Ke,F as Je,W as Zt,p as et,X as ze,Y as tt,w as le,Z as Pt,_ as ve,J as jt,f as Xe,$ as be,v as Fe,M as nt}from"../chunks/index.47904ce3.js";/* empty css                          */import{I as Ue,L as qt,A as Qt,a as Kt,P as Jt,X as en}from"../chunks/Icon.6cd62dd7.js";function tn(e){let t,n,r,s,i,o,a,l,u,f,d,p,S,L,w,y,D,R,A,g,T,B,I,N,V,O;return S=new Ue({props:{src:qt,class:"w-4 h-4",solid:!0}}),{c(){t=_("fieldset"),n=_("div"),r=_("label"),s=q("Width"),i=M(),o=_("div"),a=_("input"),l=M(),u=_("div"),f=q("px"),d=M(),p=_("span"),te(S.$$.fragment),L=M(),w=_("div"),y=_("label"),D=q("Height"),R=M(),A=_("div"),g=_("input"),T=M(),B=_("div"),I=q("px"),this.h()},l(U){t=v(U,"FIELDSET",{class:!0});var X=E(t);n=v(X,"DIV",{class:!0});var J=E(n);r=v(J,"LABEL",{for:!0,class:!0});var ae=E(r);s=Q(ae,"Width"),ae.forEach(m),i=C(J),o=v(J,"DIV",{class:!0});var ee=E(o);a=v(ee,"INPUT",{name:!0,id:!0,type:!0,min:!0,max:!0,step:!0,class:!0,placeholder:!0}),l=C(ee),u=v(ee,"DIV",{class:!0});var he=E(u);f=Q(he,"px"),he.forEach(m),ee.forEach(m),J.forEach(m),d=C(X),p=v(X,"SPAN",{class:!0});var fe=E(p);ne(S.$$.fragment,fe),fe.forEach(m),L=C(X),w=v(X,"DIV",{class:!0});var ue=E(w);y=v(ue,"LABEL",{for:!0,class:!0});var se=E(y);D=Q(se,"Height"),se.forEach(m),R=C(ue),A=v(ue,"DIV",{class:!0});var oe=E(A);g=v(oe,"INPUT",{type:!0,id:!0,name:!0,min:!0,max:!0,step:!0,class:!0,placeholder:!0}),T=C(oe),B=v(oe,"DIV",{class:!0});var k=E(B);I=Q(k,"px"),k.forEach(m),oe.forEach(m),ue.forEach(m),X.forEach(m),this.h()},h(){c(r,"for","width-"+e[4]),c(r,"class","block text-sm font-medium leading-6 text-gray-900"),c(a,"name","width"),c(a,"id","width-"+e[4]),c(a,"type","number"),c(a,"min","12"),c(a,"max","3000"),c(a,"step","1"),a.value=e[0],c(a,"class","block w-full rounded-md border-0 py-1.5 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"),c(a,"placeholder","600"),c(u,"class","pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400"),c(o,"class","relative mt-2 rounded-md shadow-sm"),c(n,"class","w-full"),c(p,"class","text-gray-500 pb-2 cursor-not-allowed"),c(y,"for","height-"+e[5]),c(y,"class","block text-sm font-medium leading-6 text-gray-900"),c(g,"type","number"),c(g,"id","height-"+e[5]),c(g,"name","height"),c(g,"min","12"),c(g,"max","3000"),c(g,"step","1"),g.value=e[1],c(g,"class","block w-full rounded-md border-0 py-1.5 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"),c(g,"placeholder","340"),c(B,"class","pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400"),c(A,"class","relative mt-2 rounded-md shadow-sm"),c(w,"class","w-full"),c(t,"class","flex gap-3 items-end justify-between")},m(U,X){G(U,t,X),h(t,n),h(n,r),h(r,s),h(n,i),h(n,o),h(o,a),h(o,l),h(o,u),h(u,f),h(t,d),h(t,p),re(S,p,null),h(t,L),h(t,w),h(w,y),h(y,D),h(w,R),h(w,A),h(A,g),h(A,T),h(A,B),h(B,I),N=!0,V||(O=[K(a,"input",e[2]),K(g,"input",e[3])],V=!0)},p(U,[X]){(!N||X&1&&a.value!==U[0])&&(a.value=U[0]),(!N||X&2&&g.value!==U[1])&&(g.value=U[1])},i(U){N||(P(S.$$.fragment,U),N=!0)},o(U){z(S.$$.fragment,U),N=!1},d(U){U&&m(t),ie(S),V=!1,Ce(O)}}}function _t(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}function nn(e,t,n){let r,{width:s}=t,{aspectRatio:i}=t;function o(f){const d=f.target.value;d&&n(0,s=d)}function a(f){const d=f.target.value;d&&n(0,s=Math.round(i*d))}let l=_t(),u=_t();return e.$$set=f=>{"width"in f&&n(0,s=f.width),"aspectRatio"in f&&n(6,i=f.aspectRatio)},e.$$.update=()=>{e.$$.dirty&65&&n(1,r=Math.round(s/i))},[s,r,o,a,l,u,i]}class Nt extends Ee{constructor(t){super(),we(this,t,nn,tn,ye,{width:0,aspectRatio:6})}}function vt(e,t,n){const r=e.slice();return r[6]=t[n],r}function bt(e){let t,n=e[6].name+"",r,s,i;return{c(){t=_("option"),r=q(n),this.h()},l(o){t=v(o,"OPTION",{});var a=E(t);r=Q(a,n),a.forEach(m),this.h()},h(){t.__value=s=e[6].value,t.value=t.__value,t.selected=i=e[6].value===e[0]},m(o,a){G(o,t,a),h(t,r)},p(o,a){a&2&&n!==(n=o[6].name+"")&&it(r,n),a&2&&s!==(s=o[6].value)&&(t.__value=s,t.value=t.__value),a&3&&i!==(i=o[6].value===o[0])&&(t.selected=i)},d(o){o&&m(t)}}}function rn(e){let t,n,r,s,i,o,a,l=e[1],u=[];for(let f=0;f<l.length;f+=1)u[f]=bt(vt(e,l,f));return{c(){t=_("div"),n=_("label"),r=q(e[2]),s=M(),i=_("select");for(let f=0;f<u.length;f+=1)u[f].c();this.h()},l(f){t=v(f,"DIV",{});var d=E(t);n=v(d,"LABEL",{for:!0,class:!0});var p=E(n);r=Q(p,e[2]),p.forEach(m),s=C(d),i=v(d,"SELECT",{id:!0,name:!0,class:!0});var S=E(i);for(let L=0;L<u.length;L+=1)u[L].l(S);S.forEach(m),d.forEach(m),this.h()},h(){c(n,"for",e[4]),c(n,"class","block text-sm font-medium leading-6 text-gray-900"),c(i,"id",e[4]),c(i,"name",e[3]),c(i,"class","mt-2 block w-full rounded-md border-0 py-1.5 pl-3 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-indigo-600 sm:text-sm sm:leading-6"),e[0]===void 0&&$t(()=>e[5].call(i))},m(f,d){G(f,t,d),h(t,n),h(n,r),h(t,s),h(t,i);for(let p=0;p<u.length;p+=1)u[p]&&u[p].m(i,null);gt(i,e[0],!0),o||(a=K(i,"change",e[5]),o=!0)},p(f,[d]){if(d&4&&it(r,f[2]),d&3){l=f[1];let p;for(p=0;p<l.length;p+=1){const S=vt(f,l,p);u[p]?u[p].p(S,d):(u[p]=bt(S),u[p].c(),u[p].m(i,null))}for(;p<u.length;p+=1)u[p].d(1);u.length=l.length}d&8&&c(i,"name",f[3]),d&3&&gt(i,f[0])},i:Ae,o:Ae,d(f){f&&m(t),Bt(u,f),o=!1,a()}}}function sn(e,t,n){let{options:r}=t,{selected:s}=t,{label:i}=t,{name:o=void 0}=t,a=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);function l(){s=Gt(this),n(0,s),n(1,r)}return e.$$set=u=>{"options"in u&&n(1,r=u.options),"selected"in u&&n(0,s=u.selected),"label"in u&&n(2,i=u.label),"name"in u&&n(3,o=u.name)},[s,r,i,o,a,l]}class on extends Ee{constructor(t){super(),we(this,t,sn,rn,ye,{options:1,selected:0,label:2,name:3})}}function an(e){let t,n,r,s,i,o,a;return{c(){t=_("div"),n=_("label"),r=q(e[1]),s=M(),i=_("input"),this.h()},l(l){t=v(l,"DIV",{});var u=E(t);n=v(u,"LABEL",{for:!0,class:!0});var f=E(n);r=Q(f,e[1]),f.forEach(m),s=C(u),i=v(u,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0,name:!0,class:!0}),u.forEach(m),this.h()},h(){c(n,"for",e[6]),c(n,"class","block mb-2 text-sm font-medium text-gray-900 dark:text-white"),c(i,"id",e[6]),c(i,"type","range"),c(i,"min",e[3]),c(i,"max",e[4]),c(i,"step",e[5]),c(i,"name",e[2]),c(i,"class","w-full h-1.5 mb-6 bg-white ring-1 ring-gray-300 shadow-sm rounded-lg appearance-none cursor-pointer accent-indigo-600 dark:bg-gray-700")},m(l,u){G(l,t,u),h(t,n),h(n,r),h(t,s),h(t,i),De(i,e[0]),o||(a=[K(i,"change",e[7]),K(i,"input",e[7])],o=!0)},p(l,[u]){u&2&&it(r,l[1]),u&8&&c(i,"min",l[3]),u&16&&c(i,"max",l[4]),u&32&&c(i,"step",l[5]),u&4&&c(i,"name",l[2]),u&1&&De(i,l[0])},i:Ae,o:Ae,d(l){l&&m(t),o=!1,Ce(a)}}}function ln(e,t,n){let{label:r}=t,{name:s=void 0}=t,{min:i=null}=t,{max:o=null}=t,{value:a=0}=t,{step:l=1}=t,u=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);function f(){a=Ht(this.value),n(0,a)}return e.$$set=d=>{"label"in d&&n(1,r=d.label),"name"in d&&n(2,s=d.name),"min"in d&&n(3,i=d.min),"max"in d&&n(4,o=d.max),"value"in d&&n(0,a=d.value),"step"in d&&n(5,l=d.step)},[a,r,s,i,o,l,u,f]}class rt extends Ee{constructor(t){super(),we(this,t,ln,an,ye,{label:1,name:2,min:3,max:4,value:0,step:5})}}var un="precision highp float;attribute vec2 position;varying vec2 fragCoord;void main(){fragCoord.x=position.x*0.5+0.5;fragCoord.y=position.y*0.5+0.5;gl_Position=vec4(position,0.0,1.0);}",cn="precision highp float;varying vec2 fragCoord;uniform sampler2D uSampler;uniform float uThreshold;uniform sampler2D uNoiseSampler;uniform vec2 uNoiseSamplerSize;uniform float uNoise;uniform float uMonochrome;uniform vec2 uSize;uniform vec3 uDarkColor;uniform vec3 uLightColor;void main(void){vec2 imgPixel=vec2(fragCoord.x*uSize.x,fragCoord.y*uSize.y);vec2 noisePixel=vec2(mod(imgPixel.x,uNoiseSamplerSize.x),mod(imgPixel.y,uNoiseSamplerSize.y));vec2 noiseUV=vec2(noisePixel.x/uNoiseSamplerSize.x,noisePixel.y/uNoiseSamplerSize.y);float noise=(texture2D(uNoiseSampler,noiseUV).r-0.5)*2.0*uNoise;vec4 color=texture2D(uSampler,fragCoord);float gray=dot(color.rgb,vec3(0.299,0.587,0.114));color.r=color.r*(1.0-uMonochrome)+gray*uMonochrome;color.g=color.g*(1.0-uMonochrome)+gray*uMonochrome;color.b=color.b*(1.0-uMonochrome)+gray*uMonochrome;vec3 thresholds=vec3(step(uThreshold,color.r+noise),step(uThreshold,color.g+noise),step(uThreshold,color.b+noise));if(uMonochrome>0.0){color.rgb=vec3(mix(uDarkColor.r,uLightColor.r,thresholds.r),mix(uDarkColor.g,uLightColor.g,thresholds.g),mix(uDarkColor.b,uLightColor.b,thresholds.b));}else{color.rgb=thresholds;}gl_FragColor=color;}";function dn(e,t,n){const r=At(e,e.VERTEX_SHADER,t),s=At(e,e.FRAGMENT_SHADER,n),i=e.createProgram();if(!i)throw new Error("Failed to create shader program");if(e.attachShader(i,r),e.attachShader(i,s),e.linkProgram(i),!e.getProgramParameter(i,e.LINK_STATUS))throw Error(`Unable to initialize the shader program: ${e.getProgramInfoLog(i)}`);return i}function At(e,t,n){const r=e.createShader(t);if(!r)throw new Error("Failed to create shader");if(e.shaderSource(r,n),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))throw Error(`An error occurred compiling the shaders: ${e.getShaderInfoLog(r)}`);return r}function hn(e){const t=e.createTexture();if(!t)throw new Error("Failed to create texture");e.bindTexture(e.TEXTURE_2D,t);const n=0,r=e.RGBA,s=1,i=1,o=0,a=e.RGBA,l=e.UNSIGNED_BYTE,u=new Uint8Array([0,0,255,255]);return e.texImage2D(e.TEXTURE_2D,n,r,s,i,o,a,l,u),t}function fn(e,t,n){const s=e.RGBA,i=e.RGBA,o=e.UNSIGNED_BYTE;e.bindTexture(e.TEXTURE_2D,t),e.texImage2D(e.TEXTURE_2D,0,s,i,o,n),Ve(n.width)&&Ve(n.height)?e.generateMipmap(e.TEXTURE_2D):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR))}function Ve(e){return(e&e-1)===0}function mn(e){const t=e.createBuffer(),n=e.createBuffer(),r=[-1,1,-1,-1,1,-1,1,1],s=[3,2,1,3,1,0];return e.bindBuffer(e.ARRAY_BUFFER,t),e.bufferData(e.ARRAY_BUFFER,new Float32Array(r),e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(s),e.STATIC_DRAW),{vertex_buffer:t,index_buffer:n}}function pn(e,t){const n=e.createTexture();if(!n)throw new Error("Failed to create texture");return e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),Ve(t.width)&&Ve(t.height)?e.generateMipmap(e.TEXTURE_2D):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR)),n}function gn(e,t){let n=t;const r=e.getContext("webgl",{preserveDrawingBuffer:!0});if(!r){alert("WebGL not supported");return}const s=()=>{fn(r,R,n.image)};r.clearColor(0,0,0,1),r.clear(r.COLOR_BUFFER_BIT);const i=dn(r,un,cn),{vertex_buffer:o,index_buffer:a}=mn(r),l=r.getAttribLocation(i,"position");r.vertexAttribPointer(l,2,r.FLOAT,!1,0,0),r.enableVertexAttribArray(l);const u=r.getUniformLocation(i,"uSampler"),f=r.getUniformLocation(i,"uThreshold"),d=r.getUniformLocation(i,"uNoiseSampler"),p=r.getUniformLocation(i,"uNoise"),S=r.getUniformLocation(i,"uSize"),L=r.getUniformLocation(i,"uNoiseSamplerSize"),w=r.getUniformLocation(i,"uMonochrome"),y=r.getUniformLocation(i,"uDarkColor"),D=r.getUniformLocation(i,"uLightColor"),R=hn(r);r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!0),s();let A,g;r.useProgram(i);let T=null;const B=()=>{A=pn(r,n.thresholdMap),g={width:n.thresholdMap.width,height:n.thresholdMap.height}};B();const I=()=>{r.viewport(0,0,n.output_width,n.output_height),r.clearColor(0,0,0,1),r.clear(r.COLOR_BUFFER_BIT),r.bindBuffer(r.ARRAY_BUFFER,o),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,a),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,R),r.uniform1i(u,0),r.activeTexture(r.TEXTURE1),r.bindTexture(r.TEXTURE_2D,A),r.uniform1i(d,1),r.uniform2f(L,g.width,g.height),r.uniform1f(f,n.threshold),r.uniform1f(p,n.noiseIntensity),r.uniform2f(S,n.output_width,n.output_height),r.uniform1f(w,n.monochrome?1:0),r.uniform3f(y,...Et(n.colorDark)),r.uniform3f(D,...Et(n.colorLight)),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT),r.drawElements(r.TRIANGLES,6,r.UNSIGNED_SHORT,0)};function N(){T=requestAnimationFrame(()=>{I(),T=null})}return N(),{update(V){const O=n.image!==V.image,U=n.thresholdMap!==V.thresholdMap;n=V,O&&s(),U&&B(),N()},destroy(){T!==null&&cancelAnimationFrame(T)}}}function Et(e){const t=parseInt(e.slice(1,3),16)/255,n=parseInt(e.slice(3,5),16)/255,r=parseInt(e.slice(5,7),16)/255;return[t,n,r]}function _n(e){let t,n,r,s,i;const o=e[3].default,a=qe(o,e,e[2],null);return{c(){t=_("button"),a&&a.c(),this.h()},l(l){t=v(l,"BUTTON",{type:!0,class:!0});var u=E(t);a&&a.l(u),u.forEach(m),this.h()},h(){t.disabled=e[0],c(t,"type","button"),c(t,"class",n=e[1][e[0]?"disabled":"normal"]+" rounded-md w-full px-2.5 py-1.5 text-sm font-semibold focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 flex items-center justify-center gap-2")},m(l,u){G(l,t,u),a&&a.m(t,null),r=!0,s||(i=K(t,"click",e[4]),s=!0)},p(l,[u]){a&&a.p&&(!r||u&4)&&Qe(a,o,l,l[2],r?Je(o,l[2],u,null):Ke(l[2]),null),(!r||u&1)&&(t.disabled=l[0]),(!r||u&1&&n!==(n=l[1][l[0]?"disabled":"normal"]+" rounded-md w-full px-2.5 py-1.5 text-sm font-semibold focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 flex items-center justify-center gap-2"))&&c(t,"class",n)},i(l){r||(P(a,l),r=!0)},o(l){z(a,l),r=!1},d(l){l&&m(t),a&&a.d(l),s=!1,i()}}}function vn(e,t,n){let{$$slots:r={},$$scope:s}=t,{disabled:i=!1}=t;const o={normal:"bg-indigo-600 text-white shadow-sm hover:bg-indigo-500",disabled:"bg-gray-200 text-gray-400 shadow-none cursor-not-allowed"};function a(l){Zt.call(this,e,l)}return e.$$set=l=>{"disabled"in l&&n(0,i=l.disabled),"$$scope"in l&&n(2,s=l.$$scope)},[i,o,s,r,a]}class bn extends Ee{constructor(t){super(),we(this,t,vn,_n,ye,{disabled:0})}}async function An(e,t,n="png"){const r=new OffscreenCanvas(e.width,e.height),s=r.getContext("2d");if(!s)return;s.drawImage(e,0,0,e.width,e.height);const i=await r.convertToBlob({type:"image/"+n,quality:1}),o=URL.createObjectURL(i),a=document.createElement("a");a.download=`${t}.${n}`,a.href=o,a.click(),a.remove(),URL.revokeObjectURL(o)}function wt(e){return new Promise((t,n)=>{e.type.startsWith("image/")||n(new Error("Not an image file"));const r=new FileReader;r.onload=s=>{if(typeof r.result!="string")return;const i=new Image;i.onload=()=>{t(i)},i.onerror=o=>{n(o)},i.src=r.result},r.onerror=s=>{n(s)},r.readAsDataURL(e)})}async function En(e){return new Promise((t,n)=>{const r=new Image;r.onload=()=>{t(r)},r.onerror=s=>{n(s)},r.src=e})}var wn=class extends EventTarget{dispatchTypedEvent(e,t){return super.dispatchEvent(t)}};class _e{constructor(t){this.id=-1,this.nativePointer=t,this.pageX=t.pageX,this.pageY=t.pageY,this.clientX=t.clientX,this.clientY=t.clientY,self.Touch&&t instanceof Touch?this.id=t.identifier:ke(t)&&(this.id=t.pointerId)}getCoalesced(){if("getCoalescedEvents"in this.nativePointer){const t=this.nativePointer.getCoalescedEvents().map(n=>new _e(n));if(t.length>0)return t}return[this]}}const ke=e=>"pointerId"in e,He=e=>"changedTouches"in e,yt=()=>{};class yn{constructor(t,{start:n=()=>!0,move:r=yt,end:s=yt,rawUpdates:i=!1,avoidPointerEvents:o=!1}={}){this._element=t,this.startPointers=[],this.currentPointers=[],this._excludeFromButtonsCheck=new Set,this._pointerStart=a=>{if(ke(a)&&a.buttons===0)this._excludeFromButtonsCheck.add(a.pointerId);else if(!(a.buttons&1))return;const l=new _e(a);this.currentPointers.some(u=>u.id===l.id)||this._triggerPointerStart(l,a)&&(ke(a)?((a.target&&"setPointerCapture"in a.target?a.target:this._element).setPointerCapture(a.pointerId),this._element.addEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move),this._element.addEventListener("pointerup",this._pointerEnd),this._element.addEventListener("pointercancel",this._pointerEnd)):(window.addEventListener("mousemove",this._move),window.addEventListener("mouseup",this._pointerEnd)))},this._touchStart=a=>{for(const l of Array.from(a.changedTouches))this._triggerPointerStart(new _e(l),a)},this._move=a=>{if(!He(a)&&(!ke(a)||!this._excludeFromButtonsCheck.has(a.pointerId))&&a.buttons===0){this._pointerEnd(a);return}const l=this.currentPointers.slice(),u=He(a)?Array.from(a.changedTouches).map(d=>new _e(d)):[new _e(a)],f=[];for(const d of u){const p=this.currentPointers.findIndex(S=>S.id===d.id);p!==-1&&(f.push(d),this.currentPointers[p]=d)}f.length!==0&&this._moveCallback(l,f,a)},this._triggerPointerEnd=(a,l)=>{if(!He(l)&&l.buttons&1)return!1;const u=this.currentPointers.findIndex(d=>d.id===a.id);if(u===-1)return!1;this.currentPointers.splice(u,1),this.startPointers.splice(u,1),this._excludeFromButtonsCheck.delete(a.id);const f=!(l.type==="mouseup"||l.type==="touchend"||l.type==="pointerup");return this._endCallback(a,l,f),!0},this._pointerEnd=a=>{if(this._triggerPointerEnd(new _e(a),a))if(ke(a)){if(this.currentPointers.length)return;this._element.removeEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move),this._element.removeEventListener("pointerup",this._pointerEnd),this._element.removeEventListener("pointercancel",this._pointerEnd)}else window.removeEventListener("mousemove",this._move),window.removeEventListener("mouseup",this._pointerEnd)},this._touchEnd=a=>{for(const l of Array.from(a.changedTouches))this._triggerPointerEnd(new _e(l),a)},this._startCallback=n,this._moveCallback=r,this._endCallback=s,this._rawUpdates=i&&"onpointerrawupdate"in window,self.PointerEvent&&!o?this._element.addEventListener("pointerdown",this._pointerStart):(this._element.addEventListener("mousedown",this._pointerStart),this._element.addEventListener("touchstart",this._touchStart),this._element.addEventListener("touchmove",this._move),this._element.addEventListener("touchend",this._touchEnd),this._element.addEventListener("touchcancel",this._touchEnd))}stop(){this._element.removeEventListener("pointerdown",this._pointerStart),this._element.removeEventListener("mousedown",this._pointerStart),this._element.removeEventListener("touchstart",this._touchStart),this._element.removeEventListener("touchmove",this._move),this._element.removeEventListener("touchend",this._touchEnd),this._element.removeEventListener("touchcancel",this._touchEnd),this._element.removeEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move),this._element.removeEventListener("pointerup",this._pointerEnd),this._element.removeEventListener("pointercancel",this._pointerEnd),window.removeEventListener("mousemove",this._move),window.removeEventListener("mouseup",this._pointerEnd)}_triggerPointerStart(t,n){return this._startCallback(t,n)?(this.currentPointers.push(t),this.startPointers.push(t),!0):!1}}function Tt(e,t){return t?Math.sqrt((t.clientX-e.clientX)**2+(t.clientY-e.clientY)**2):0}function It(e,t){return t?{clientX:(e.clientX+t.clientX)/2,clientY:(e.clientY+t.clientY)/2}:e}function Tn(e,t,n){return Math.min(Math.max(e,t),n)}const Ye=class extends wn{constructor(n){super();Le(this,"element");Le(this,"transform",new DOMMatrix);Le(this,"pointerTracker");this.element=n,this.element.addEventListener("wheel",this.onWheel.bind(this)),this.pointerTracker=new yn(this.element,{start:(r,s)=>this.pointerTracker.currentPointers.length===2?!1:(s.preventDefault(),!0),move:r=>{this.onPointerMove(r,this.pointerTracker.currentPointers)},avoidPointerEvents:this.isSafari()}),this.element.addEventListener("wheel",this.onWheel.bind(this))}get x(){return this.transform.e}get y(){return this.transform.f}get scale(){return this.transform.a}set x(n){this.transform.e=n}set y(n){this.transform.f=n}set scale(n){this.transform.a=n,this.transform.d=n}onWheel(n){n.preventDefault();const r=this.element.getBoundingClientRect();let{deltaY:s}=n;const{ctrlKey:i,deltaMode:o}=n;o===1&&(s*=15);const a=s>0,l=i?100:300,u=1-(a?-s:s)/l,f=a?1/u:u,d=n.clientX-r.left,p=n.clientY-r.top;this.applyTransformation({scaleDiff:f,originX:d,originY:p})}applyTransformation(n={}){const{panX:r=0,panY:s=0,originX:i=0,originY:o=0,scaleDiff:a=1}=n,l=new DOMMatrix().translate(i,o).scale(a).translate(-i,-o),u=new DOMMatrix().translate(r,s);l.multiplySelf(u),l.multiplySelf(this.transform);const f=l.a,d=l.e,p=l.f;this.updateTransform(f,d,p)}onPointerMove(n,r){const s=this.element.getBoundingClientRect(),i=It(n[0],n[1]),o=It(r[0],r[1]),a=i.clientX-s.left,l=i.clientY-s.top,u=Tt(n[0],n[1]),f=Tt(r[0],r[1]),d=u?f/u:1;this.applyTransformation({originX:a,originY:l,scaleDiff:d,panX:o.clientX-i.clientX,panY:o.clientY-i.clientY})}updateTransform(n,r,s){if(n=Tn(n,Ye.MIN_SCALE,Ye.MAX_SCALE),n===this.scale&&r===this.x&&s===this.y)return;this.x=r,this.y=s,this.scale=n;const i=new CustomEvent("panzoom:change",{bubbles:!0,detail:{x:this.x,y:this.y,scale:this.scale,matrix:this.transform}});this.dispatchTypedEvent("panzoom:change",i)}isSafari(){return/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)}destroy(){this.pointerTracker.stop()}};let Me=Ye;Le(Me,"MIN_SCALE",.01),Le(Me,"MAX_SCALE",1e5);const In=e=>({}),Lt=e=>({}),Ln=e=>({}),Dt=e=>({});function Dn(e){let t,n,r,s,i,o,a,l,u,f,d,p,S,L;const w=e[7].left,y=qe(w,e,e[6],Dt),D=e[7].right,R=qe(D,e,e[6],Lt);return d=new Ue({props:{src:Qt,class:"w-6 h-6 text-white"}}),{c(){t=_("div"),n=_("div"),r=_("div"),s=_("div"),y&&y.c(),i=M(),o=_("div"),a=_("div"),R&&R.c(),l=M(),u=_("div"),f=_("div"),te(d.$$.fragment),this.h()},l(A){t=v(A,"DIV",{class:!0});var g=E(t);n=v(g,"DIV",{class:!0});var T=E(n);r=v(T,"DIV",{class:!0});var B=E(r);s=v(B,"DIV",{class:!0});var I=E(s);y&&y.l(I),I.forEach(m),B.forEach(m),i=C(T),o=v(T,"DIV",{class:!0});var N=E(o);a=v(N,"DIV",{class:!0});var V=E(a);R&&R.l(V),V.forEach(m),N.forEach(m),T.forEach(m),l=C(g),u=v(g,"DIV",{class:!0});var O=E(u);f=v(O,"DIV",{class:!0});var U=E(f);ne(d.$$.fragment,U),U.forEach(m),O.forEach(m),g.forEach(m),this.h()},h(){c(s,"class","w-full h-full origin-top-left grid place-items-center"),c(r,"class","left svelte-1i8kkz3"),c(a,"class","w-full h-full origin-top-left grid place-items-center"),c(o,"class","right svelte-1i8kkz3"),c(n,"class","w-full h-full grid place-items-center"),c(f,"class","w-12 h-12 rounded-full bg-black absolute top-1/2 -translate-x-1/2 left-1/2 grid place-items-center"),c(u,"class","handle relative shadow-lg svelte-1i8kkz3"),c(t,"class","pz-container svelte-1i8kkz3"),et(t,"--split-point",e[1]+"%")},m(A,g){G(A,t,g),h(t,n),h(n,r),h(r,s),y&&y.m(s,null),e[8](s),h(n,i),h(n,o),h(o,a),R&&R.m(a,null),e[9](a),h(t,l),h(t,u),h(u,f),re(d,f,null),e[10](t),p=!0,S||(L=[ze(e[5].call(null,n)),ze(e[4].call(null,u)),K(u,"pointercancel",tt(Rn))],S=!0)},p(A,[g]){y&&y.p&&(!p||g&64)&&Qe(y,w,A,A[6],p?Je(w,A[6],g,Ln):Ke(A[6]),Dt),R&&R.p&&(!p||g&64)&&Qe(R,D,A,A[6],p?Je(D,A[6],g,In):Ke(A[6]),Lt),g&2&&et(t,"--split-point",A[1]+"%")},i(A){p||(P(y,A),P(R,A),P(d.$$.fragment,A),p=!0)},o(A){z(y,A),z(R,A),z(d.$$.fragment,A),p=!1},d(A){A&&m(t),y&&y.d(A),e[8](null),R&&R.d(A),e[9](null),ie(d),e[10](null),S=!1,Ce(L)}}}function Sn(e,t,n){return Math.min(Math.max(e,t),n)}const Rn=()=>{};function kn(e,t,n){let{$$slots:r={},$$scope:s}=t,i=null,o=50;function a(L){L.addEventListener("pointerdown",w=>{const y=w.clientX,D=o,R=document.body.style.cursor;document.body.style.cursor="col-resize";const A=T=>{const B=i?i.clientWidth:window.innerWidth,I=T.clientX-y,N=D+I/B*100;n(1,o=Sn(N,0,100))},g=()=>{document.body.style.cursor=R,window.removeEventListener("pointermove",A),window.removeEventListener("pointerup",g)};window.addEventListener("pointermove",A),window.addEventListener("pointerup",g)})}let l,u;function f(L){const w=new Me(L);function y(D){const{x:R,y:A,scale:g,matrix:T}=D.detail;n(3,u.style.transform=T,u),n(2,l.style.transform=T,l)}return w.addEventListener("panzoom:change",y),{destroy(){w.removeEventListener("panzoom:change",y),w.destroy()}}}function d(L){le[L?"unshift":"push"](()=>{l=L,n(2,l)})}function p(L){le[L?"unshift":"push"](()=>{u=L,n(3,u)})}function S(L){le[L?"unshift":"push"](()=>{i=L,n(0,i)})}return e.$$set=L=>{"$$scope"in L&&n(6,s=L.$$scope)},[i,o,l,u,a,f,s,r,d,p,S]}class Mn extends Ee{constructor(t){super(),we(this,t,kn,Dn,ye,{})}}const Cn=""+new URL("../assets/cat.58b560b7.jpg",import.meta.url).href,Un="data:image/avif;base64,AAAAHGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZgAAAOptZXRhAAAAAAAAACFoZGxyAAAAAAAAAABwaWN0AAAAAAAAAAAAAAAAAAAAAA5waXRtAAAAAAABAAAAImlsb2MAAAAAREAAAQABAAAAAAEOAAEAAAAAAAAApwAAACNpaW5mAAAAAAABAAAAFWluZmUCAAAAAAEAAGF2MDEAAAAAamlwcnAAAABLaXBjbwAAABNjb2xybmNseAACAAIABoAAAAAMYXYxQ4EEDAAAAAAUaXNwZQAAAAAAAAJyAAACcgAAABBwaXhpAAAAAAMICAgAAAAXaXBtYQAAAAAAAAABAAEEgYIDhAAAAK9tZGF0EgAKChkmZxnHggQEDQgylgERQAEEEEEA9NBi7JFlrqXV1mwMry34uIYK7WRdWYJ/ZZ0EIyWW8aLm92oz5LY0W+l2FiKsHpp4BB3Vrk+iwHuzboac7wmSHHHRWklZdZ2hpEAi4E31lf1tjXnXie8fh4lzApbqjH5Pj7ZN6761WygYVdc2zvJOsflFZstng6rQU/oulDZSO6fQWKvzpO9pseyXBLfms64=",Bn=""+new URL("../assets/david.0e7e3b46.png",import.meta.url).href,Ze=new Map;function Pn(e){const t=Xt(e),n=Math.pow(2,2*e);return t.map(s=>s.map(i=>i/n))}function Xt(e){if(Ze.has(e))return Ze.get(e);if(e===0)return[[0,2],[3,1]];const t=Xt(e-1),n=new Array(t.length*2).fill(0).map(()=>new Array(t.length*2).fill(0));for(let r=0;r<t.length;r++)for(let s=0;s<t[r].length;s++)n[r][s]=t[r][s]*4,n[r][s+t.length]=t[r][s]*4+2,n[r+t.length][s]=t[r][s]*4+3,n[r+t.length][s+t.length]=t[r][s]*4+1;return Ze.set(e,n),n}const Nn=""+new URL("../assets/blue_noise.b61cfddd.png",import.meta.url).href,Oe={width:470,height:470};async function Xn(e){switch(e.mode){case"bayer":return await zn(e);case"blue_noise":return await On();case"white_noise":return await Fn(e)}}async function Fn(e){const t=new ImageData(e.width,e.height),n=t.data;for(let r=0;r<n.length;r+=4){const s=Math.random()*255;n[r]=s,n[r+1]=s,n[r+2]=s,n[r+3]=255}return t}let je=null;async function On(){je||(je=await En(Nn));const t=new OffscreenCanvas(Oe.width,Oe.height).getContext("2d");return t.drawImage(je,0,0),t.getImageData(0,0,Oe.width,Oe.height)}async function zn(e){const t=new OffscreenCanvas(Math.pow(2,e.level+1),Math.pow(2,e.level+1)),n=Pn(e.level),r=t.getContext("2d");for(let s=0;s<n.length;s++)for(let i=0;i<n[s].length;i++){const o=n[s][i]*255/4;r.fillStyle=`rgb(${o}, ${o}, ${o})`,r.fillRect(i,s,1,1)}return r.getImageData(0,0,t.width,t.height)}function Vn(e){let t,n,r,s;return{c(){t=_("canvas"),this.h()},l(i){t=v(i,"CANVAS",{class:!0,style:!0}),E(t).forEach(m),this.h()},h(){c(t,"class","w-full max-h-96 object-contain shadow-lg"),et(t,"image-rendering","pixelated")},m(i,o){G(i,t,o),r||(s=ze(n=Yn.call(null,t,e[0])),r=!0)},p(i,[o]){n&&Pt(n.update)&&o&1&&n.update.call(null,i[0])},i:Ae,o:Ae,d(i){i&&m(t),r=!1,s()}}}function Yn(e,t){const n=e.getContext("2d");if(!n)return;const r=()=>{e.width=t.width,e.height=t.height,n.putImageData(t,0,0)};let s=null;const i=()=>{s||(s=requestAnimationFrame(()=>{s=null,r()}))};return i(),{destroy(){s&&cancelAnimationFrame(s)},update:o=>{t=o,i()}}}function xn(e,t,n){let{imageData:r}=t;return e.$$set=s=>{"imageData"in s&&n(0,r=s.imageData)},[r]}class Wn extends Ee{constructor(t){super(),we(this,t,xn,Vn,ye,{imageData:0})}}function St(e,t,n){const r=e.slice();return r[34]=t[n],r}function $n(e){let t,n,r,s,i,o,a,l,u,f,d,p,S,L,w,y,D,R,A=e[14],g=[];for(let T=0;T<A.length;T+=1)g[T]=Rt(St(e,A,T));return f=new Ue({props:{src:Jt,class:"w-12 h-12 text-gray-400"}}),{c(){t=_("div"),n=_("div"),r=_("p"),s=q("Select or Drop an Image to Start"),i=M(),o=_("div");for(let T=0;T<g.length;T+=1)g[T].c();a=M(),l=_("label"),u=_("div"),te(f.$$.fragment),d=M(),p=_("span"),S=q("Choose an Image"),L=M(),w=_("input"),this.h()},l(T){t=v(T,"DIV",{class:!0});var B=E(t);n=v(B,"DIV",{class:!0});var I=E(n);r=v(I,"P",{class:!0});var N=E(r);s=Q(N,"Select or Drop an Image to Start"),N.forEach(m),i=C(I),o=v(I,"DIV",{class:!0});var V=E(o);for(let J=0;J<g.length;J+=1)g[J].l(V);a=C(V),l=v(V,"LABEL",{for:!0,class:!0});var O=E(l);u=v(O,"DIV",{class:!0});var U=E(u);ne(f.$$.fragment,U),U.forEach(m),d=C(O),p=v(O,"SPAN",{class:!0});var X=E(p);S=Q(X,"Choose an Image"),X.forEach(m),L=C(O),w=v(O,"INPUT",{type:!0,class:!0,id:!0,accept:!0}),O.forEach(m),V.forEach(m),I.forEach(m),B.forEach(m),this.h()},h(){c(r,"class","text-2xl text-gray-500"),c(u,"class","grid place-items-center h-full w-full"),c(p,"class","sr-only"),c(w,"type","file"),c(w,"class","sr-only"),c(w,"id","image-input"),c(w,"accept","image/*"),c(l,"for","image-input"),c(l,"class","block spect-square h-24 w-24 object-cover rounded-md shadow-md border-2 border-white bg-white hover:bg-gray-100"),c(o,"class","flex gap-3 justify-center"),c(n,"class","grid gap-4"),c(t,"class","w-full h-full grid place-items-center")},m(T,B){G(T,t,B),h(t,n),h(n,r),h(r,s),h(n,i),h(n,o);for(let I=0;I<g.length;I+=1)g[I]&&g[I].m(o,null);h(o,a),h(o,l),h(l,u),re(f,u,null),h(l,d),h(l,p),h(p,S),h(l,L),h(l,w),y=!0,D||(R=K(w,"input",e[18]),D=!0)},p(T,B){if(B[0]&540672){A=T[14];let I;for(I=0;I<A.length;I+=1){const N=St(T,A,I);g[I]?g[I].p(N,B):(g[I]=Rt(N),g[I].c(),g[I].m(o,a))}for(;I<g.length;I+=1)g[I].d(1);g.length=A.length}},i(T){y||(P(f.$$.fragment,T),y=!0)},o(T){z(f.$$.fragment,T),y=!1},d(T){T&&m(t),Bt(g,T),ie(f),D=!1,R()}}}function Gn(e){let t,n,r,s,i,o,a,l;return n=new Mn({props:{$$slots:{right:[Zn],left:[Hn]},$$scope:{ctx:e}}}),i=new Ue({props:{src:en,class:"w-5 h-5 text-white"}}),{c(){t=_("div"),te(n.$$.fragment),r=M(),s=_("button"),te(i.$$.fragment),this.h()},l(u){t=v(u,"DIV",{class:!0});var f=E(t);ne(n.$$.fragment,f),r=C(f),s=v(f,"BUTTON",{class:!0,title:!0});var d=E(s);ne(i.$$.fragment,d),d.forEach(m),f.forEach(m),this.h()},h(){c(s,"class","absolute top-0 right-0 m-4 p-2 bg-black bg-opacity-40 rounded-full"),c(s,"title","Close Image & Reset"),c(t,"class","w-full h-full relative")},m(u,f){G(u,t,f),re(n,t,null),h(t,r),h(t,s),re(i,s,null),o=!0,a||(l=K(s,"click",e[22]),a=!0)},p(u,f){const d={};f[0]&16344|f[1]&64&&(d.$$scope={dirty:f,ctx:u}),n.$set(d)},i(u){o||(P(n.$$.fragment,u),P(i.$$.fragment,u),o=!0)},o(u){z(n.$$.fragment,u),z(i.$$.fragment,u),o=!1},d(u){u&&m(t),ie(n),ie(i),a=!1,l()}}}function Rt(e){let t,n,r,s,i;function o(){return e[23](e[34])}return{c(){t=_("button"),n=_("img"),this.h()},l(a){t=v(a,"BUTTON",{class:!0});var l=E(t);n=v(l,"IMG",{class:!0,src:!0,alt:!0}),l.forEach(m),this.h()},h(){c(n,"class","aspect-square h-24 w-24 object-cover rounded-md shadow-md border-2 border-white"),nt(n.src,r=e[34])||c(n,"src",r),c(n,"alt",""),c(t,"class","hover:opacity-75 transition-opacity")},m(a,l){G(a,t,l),h(t,n),s||(i=K(t,"click",o),s=!0)},p(a,l){e=a},d(a){a&&m(t),s=!1,i()}}}function Hn(e){let t,n,r;return{c(){t=_("img"),this.h()},l(s){t=v(s,"IMG",{slot:!0,src:!0,alt:!0,style:!0,class:!0}),this.h()},h(){c(t,"slot","left"),nt(t.src,n=e[4].src)||c(t,"src",n),c(t,"alt",""),c(t,"style",r=`width: ${e[3]}px; height: ${e[13]}px`),c(t,"class","pixelated max-w-none svelte-1gkt69q")},m(s,i){G(s,t,i)},p(s,i){i[0]&16&&!nt(t.src,n=s[4].src)&&c(t,"src",n),i[0]&8200&&r!==(r=`width: ${s[3]}px; height: ${s[13]}px`)&&c(t,"style",r)},d(s){s&&m(t)}}}function Zn(e){let t,n,r,s,i;return{c(){t=_("canvas"),this.h()},l(o){t=v(o,"CANVAS",{class:!0,slot:!0,style:!0,width:!0,height:!0,"aria-label":!0}),E(t).forEach(m),this.h()},h(){c(t,"class","pixelated svelte-1gkt69q"),c(t,"slot","right"),c(t,"style",n=`width: ${e[3]}px; height: ${e[13]}px`),c(t,"width",e[3]),c(t,"height",e[13]),c(t,"aria-label","Dithered Image")},m(o,a){G(o,t,a),e[21](t),s||(i=ze(r=gn.call(null,t,{image:e[4],threshold:e[6],noiseIntensity:e[7],monochrome:e[8],colorLight:e[9],colorDark:e[10],output_width:e[3],output_height:e[13],thresholdMap:e[12]})),s=!0)},p(o,a){a[0]&8200&&n!==(n=`width: ${o[3]}px; height: ${o[13]}px`)&&c(t,"style",n),a[0]&8&&c(t,"width",o[3]),a[0]&8192&&c(t,"height",o[13]),r&&Pt(r.update)&&a[0]&14296&&r.update.call(null,{image:o[4],threshold:o[6],noiseIntensity:o[7],monochrome:o[8],colorLight:o[9],colorDark:o[10],output_width:o[3],output_height:o[13],thresholdMap:o[12]})},d(o){o&&m(t),e[21](null),s=!1,i()}}}function kt(e){let t,n,r;return n=new Wn({props:{imageData:e[12]}}),{c(){t=_("div"),te(n.$$.fragment),this.h()},l(s){t=v(s,"DIV",{class:!0});var i=E(t);ne(n.$$.fragment,i),i.forEach(m),this.h()},h(){c(t,"class","w-full aspect-square rounded-lg bg-gray-100 p-8 grid place-items-center")},m(s,i){G(s,t,i),re(n,t,null),r=!0},p(s,i){const o={};i[0]&4096&&(o.imageData=s[12]),n.$set(o)},i(s){r||(P(n.$$.fragment,s),r=!0)},o(s){z(n.$$.fragment,s),r=!1},d(s){s&&m(t),ie(n)}}}function Mt(e){let t,n,r;function s(o){e[25](o)}let i={label:"Bayer Level ("+e[1]+")",min:0,max:5,step:1};return e[1]!==void 0&&(i.value=e[1]),t=new rt({props:i}),le.push(()=>ve(t,"value",s)),{c(){te(t.$$.fragment)},l(o){ne(t.$$.fragment,o)},m(o,a){re(t,o,a),r=!0},p(o,a){const l={};a[0]&2&&(l.label="Bayer Level ("+o[1]+")"),!n&&a[0]&2&&(n=!0,l.value=o[1],be(()=>n=!1)),t.$set(l)},i(o){r||(P(t.$$.fragment,o),r=!0)},o(o){z(t.$$.fragment,o),r=!1},d(o){ie(t,o)}}}function Ct(e){let t,n,r;function s(o){e[26](o)}let i={aspectRatio:1};return e[2]!==void 0&&(i.width=e[2]),t=new Nt({props:i}),le.push(()=>ve(t,"width",s)),{c(){te(t.$$.fragment)},l(o){ne(t.$$.fragment,o)},m(o,a){re(t,o,a),r=!0},p(o,a){const l={};!n&&a[0]&4&&(n=!0,l.width=o[2],be(()=>n=!1)),t.$set(l)},i(o){r||(P(t.$$.fragment,o),r=!0)},o(o){z(t.$$.fragment,o),r=!1},d(o){ie(t,o)}}}function Ut(e){let t,n,r,s,i,o,a,l,u,f,d,p,S,L;return{c(){t=_("fieldset"),n=_("div"),r=_("input"),s=M(),i=_("label"),o=q("Light"),a=M(),l=_("div"),u=_("input"),f=M(),d=_("label"),p=q("Dark"),this.h()},l(w){t=v(w,"FIELDSET",{});var y=E(t);n=v(y,"DIV",{class:!0});var D=E(n);r=v(D,"INPUT",{type:!0,name:!0,id:!0}),s=C(D),i=v(D,"LABEL",{for:!0,class:!0});var R=E(i);o=Q(R,"Light"),R.forEach(m),D.forEach(m),a=C(y),l=v(y,"DIV",{class:!0});var A=E(l);u=v(A,"INPUT",{type:!0,name:!0,id:!0}),f=C(A),d=v(A,"LABEL",{for:!0,class:!0});var g=E(d);p=Q(g,"Dark"),g.forEach(m),A.forEach(m),y.forEach(m),this.h()},h(){c(r,"type","color"),c(r,"name","color-light"),c(r,"id","color-light"),c(i,"for","color-light"),c(i,"class","font-medium text-gray-900"),c(n,"class","flex gap-3"),c(u,"type","color"),c(u,"name","color-dark"),c(u,"id","color-dark"),c(d,"for","color-dark"),c(d,"class","font-medium text-gray-900"),c(l,"class","flex gap-3")},m(w,y){G(w,t,y),h(t,n),h(n,r),De(r,e[9]),h(n,s),h(n,i),h(i,o),h(t,a),h(t,l),h(l,u),De(u,e[10]),h(l,f),h(l,d),h(d,p),S||(L=[K(r,"input",e[30]),K(u,"input",e[31])],S=!0)},p(w,y){y[0]&512&&De(r,w[9]),y[0]&1024&&De(u,w[10])},d(w){w&&m(t),S=!1,Ce(L)}}}function jn(e){let t,n,r;return t=new Ue({props:{src:Kt,class:"w-4 h-4"}}),{c(){te(t.$$.fragment),n=q(`
				Save`)},l(s){ne(t.$$.fragment,s),n=Q(s,`
				Save`)},m(s,i){re(t,s,i),G(s,n,i),r=!0},p:Ae,i(s){r||(P(t.$$.fragment,s),r=!0)},o(s){z(t.$$.fragment,s),r=!1},d(s){ie(t,s),s&&m(n)}}}function qn(e){let t,n,r,s,i,o,a,l,u,f,d,p,S,L,w,y,D,R,A,g,T,B,I,N,V,O,U,X,J,ae,ee,he,fe,ue,se,oe,k,H,j,Se,xe,We,Te,de,Be,$e,st;const ot=[Gn,$n],me=[];function at(b,F){return b[4]&&b[12]?0:1}i=at(e),o=me[i]=ot[i](e);let Y=e[12]&&kt(e);function Ft(b){e[24](b)}let lt={label:"Dither Mode",options:e[16]};e[0]!==void 0&&(lt.selected=e[0]),w=new on({props:lt}),le.push(()=>ve(w,"selected",Ft));let x=e[0]==="bayer"&&Mt(e),W=e[0]==="white_noise"&&Ct(e);function Ot(b){e[27](b)}let ut={label:"Threshold ("+e[6]+")",min:0,max:1,step:.01};e[6]!==void 0&&(ut.value=e[6]),g=new rt({props:ut}),le.push(()=>ve(g,"value",Ot));function zt(b){e[28](b)}let ct={label:"Noise Intensity ("+e[7]+")",min:0,max:1.5,step:.01};e[7]!==void 0&&(ct.value=e[7]),I=new rt({props:ct}),le.push(()=>ve(I,"value",zt));let Z=e[8]&&Ut(e);function Vt(b){e[32](b)}function Yt(b){e[33](b)}let Ge={};return e[3]!==void 0&&(Ge.width=e[3]),e[5]!==void 0&&(Ge.aspectRatio=e[5]),j=new Nt({props:Ge}),le.push(()=>ve(j,"width",Vt)),le.push(()=>ve(j,"aspectRatio",Yt)),de=new bn({props:{disabled:!(e[4]&&e[12]),$$slots:{default:[jn]},$$scope:{ctx:e}}}),de.$on("click",e[15]),{c(){t=M(),n=M(),r=_("main"),s=_("section"),o.c(),a=M(),l=_("aside"),u=_("section"),Y&&Y.c(),f=M(),d=_("div"),p=_("h2"),S=q("Dithering Options"),L=M(),te(w.$$.fragment),D=M(),x&&x.c(),R=M(),W&&W.c(),A=M(),te(g.$$.fragment),B=M(),te(I.$$.fragment),V=M(),O=_("div"),U=_("div"),X=_("input"),J=M(),ae=_("div"),ee=_("label"),he=q("Monochrome"),fe=M(),Z&&Z.c(),ue=M(),se=_("div"),oe=_("h2"),k=q("Output Options"),H=M(),te(j.$$.fragment),We=M(),Te=_("footer"),te(de.$$.fragment),this.h()},l(b){jt("svelte-1hm2pfs",document.head).forEach(m),t=C(b),n=C(b),r=v(b,"MAIN",{class:!0});var pe=E(r);s=v(pe,"SECTION",{class:!0});var Re=E(s);o.l(Re),Re.forEach(m),a=C(pe),l=v(pe,"ASIDE",{class:!0});var ge=E(l);u=v(ge,"SECTION",{class:!0});var ce=E(u);Y&&Y.l(ce),f=C(ce),d=v(ce,"DIV",{class:!0});var $=E(d);p=v($,"H2",{class:!0});var Ie=E(p);S=Q(Ie,"Dithering Options"),Ie.forEach(m),L=C($),ne(w.$$.fragment,$),D=C($),x&&x.l($),R=C($),W&&W.l($),A=C($),ne(g.$$.fragment,$),B=C($),ne(I.$$.fragment,$),V=C($),O=v($,"DIV",{class:!0});var Pe=E(O);U=v(Pe,"DIV",{class:!0});var dt=E(U);X=v(dt,"INPUT",{type:!0,id:!0,class:!0}),dt.forEach(m),J=C(Pe),ae=v(Pe,"DIV",{class:!0});var ht=E(ae);ee=v(ht,"LABEL",{for:!0,class:!0});var ft=E(ee);he=Q(ft,"Monochrome"),ft.forEach(m),ht.forEach(m),Pe.forEach(m),fe=C($),Z&&Z.l($),$.forEach(m),ue=C(ce),se=v(ce,"DIV",{class:!0});var Ne=E(se);oe=v(Ne,"H2",{class:!0});var mt=E(oe);k=Q(mt,"Output Options"),mt.forEach(m),H=C(Ne),ne(j.$$.fragment,Ne),Ne.forEach(m),ce.forEach(m),We=C(ge),Te=v(ge,"FOOTER",{class:!0});var pt=E(Te);ne(de.$$.fragment,pt),pt.forEach(m),ge.forEach(m),pe.forEach(m),this.h()},h(){document.title="Dithering",c(s,"class","flex-1 overflow-hidden select-none"),c(p,"class","text-base font-semibold leading-7 text-black mb-2"),c(X,"type","checkbox"),c(X,"id","monochrome"),c(X,"class","h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600"),c(U,"class","flex h-6 items-center"),c(ee,"for","monochrome"),c(ee,"class","font-medium text-gray-900"),c(ae,"class","ml-3 text-sm leading-6"),c(O,"class","relative flex items-start"),c(d,"class","grid gap-3"),c(oe,"class","text-base font-semibold leading-7 text-black mb-4"),c(se,"class","border-t border-gray-100 py-4"),c(u,"class","grid gap-5 overflow-y-auto overflow-x-visible py-8 px-4"),c(Te,"class","py-4 px-4 flex-shrink-0"),c(l,"class","bg-white w-full md:max-w-md border-t md:border-t-0 md:border-l border-l-0 border-gray-100 z-50 overflow-y-hidden md:h-full flex-1 shadow-lg flex flex-col divide-y divide-gray-200 justify-between"),c(r,"class","w-screen max-w-screen h-screen max-h-screen flex md:flex-row flex-col bg-gray-300")},m(b,F){G(b,t,F),G(b,n,F),G(b,r,F),h(r,s),me[i].m(s,null),h(r,a),h(r,l),h(l,u),Y&&Y.m(u,null),h(u,f),h(u,d),h(d,p),h(p,S),h(d,L),re(w,d,null),h(d,D),x&&x.m(d,null),h(d,R),W&&W.m(d,null),h(d,A),re(g,d,null),h(d,B),re(I,d,null),h(d,V),h(d,O),h(O,U),h(U,X),X.checked=e[8],h(O,J),h(O,ae),h(ae,ee),h(ee,he),h(d,fe),Z&&Z.m(d,null),h(u,ue),h(u,se),h(se,oe),h(oe,k),h(se,H),re(j,se,null),h(l,We),h(l,Te),re(de,Te,null),Be=!0,$e||(st=[K(document.body,"drop",tt(e[17])),K(document.body,"dragover",tt(Qn)),K(X,"change",e[29])],$e=!0)},p(b,F){let pe=i;i=at(b),i===pe?me[i].p(b,F):(Fe(),z(me[pe],1,1,()=>{me[pe]=null}),Xe(),o=me[i],o?o.p(b,F):(o=me[i]=ot[i](b),o.c()),P(o,1),o.m(s,null)),b[12]?Y?(Y.p(b,F),F[0]&4096&&P(Y,1)):(Y=kt(b),Y.c(),P(Y,1),Y.m(u,f)):Y&&(Fe(),z(Y,1,1,()=>{Y=null}),Xe());const Re={};!y&&F[0]&1&&(y=!0,Re.selected=b[0],be(()=>y=!1)),w.$set(Re),b[0]==="bayer"?x?(x.p(b,F),F[0]&1&&P(x,1)):(x=Mt(b),x.c(),P(x,1),x.m(d,R)):x&&(Fe(),z(x,1,1,()=>{x=null}),Xe()),b[0]==="white_noise"?W?(W.p(b,F),F[0]&1&&P(W,1)):(W=Ct(b),W.c(),P(W,1),W.m(d,A)):W&&(Fe(),z(W,1,1,()=>{W=null}),Xe());const ge={};F[0]&64&&(ge.label="Threshold ("+b[6]+")"),!T&&F[0]&64&&(T=!0,ge.value=b[6],be(()=>T=!1)),g.$set(ge);const ce={};F[0]&128&&(ce.label="Noise Intensity ("+b[7]+")"),!N&&F[0]&128&&(N=!0,ce.value=b[7],be(()=>N=!1)),I.$set(ce),F[0]&256&&(X.checked=b[8]),b[8]?Z?Z.p(b,F):(Z=Ut(b),Z.c(),Z.m(d,null)):Z&&(Z.d(1),Z=null);const $={};!Se&&F[0]&8&&(Se=!0,$.width=b[3],be(()=>Se=!1)),!xe&&F[0]&32&&(xe=!0,$.aspectRatio=b[5],be(()=>xe=!1)),j.$set($);const Ie={};F[0]&4112&&(Ie.disabled=!(b[4]&&b[12])),F[1]&64&&(Ie.$$scope={dirty:F,ctx:b}),de.$set(Ie)},i(b){Be||(P(o),P(Y),P(w.$$.fragment,b),P(x),P(W),P(g.$$.fragment,b),P(I.$$.fragment,b),P(j.$$.fragment,b),P(de.$$.fragment,b),Be=!0)},o(b){z(o),z(Y),z(w.$$.fragment,b),z(x),z(W),z(g.$$.fragment,b),z(I.$$.fragment,b),z(j.$$.fragment,b),z(de.$$.fragment,b),Be=!1},d(b){b&&m(t),b&&m(n),b&&m(r),me[i].d(),Y&&Y.d(),ie(w),x&&x.d(),W&&W.d(),ie(g),ie(I),Z&&Z.d(),ie(j),ie(de),$e=!1,Ce(st)}}}const Qn=()=>{};function Kn(e,t,n){let r,s,i;const o=[Cn,Un,Bn];let a=.5,l=.3,u=!1,f="#ede6cc",d="#21263f",p=null,S="blue_noise",L=3,w=256,y=600,D=null;async function R(){p&&await An(p,"dithered","png")}const A=[{name:"Bayer",value:"bayer"},{name:"Blue Noise",value:"blue_noise"},{name:"White Noise",value:"white_noise"}];async function g(k){var j;const H=(j=k.dataTransfer)==null?void 0:j.files[0];if(H){if(!H.type.startsWith("image/")){alert("Please drop an image file");return}try{n(4,D=await wt(H))}catch(Se){alert("Failed to load image"),console.error(Se)}}}async function T(k){const H=k.target.files[0];if(H)try{n(4,D=await wt(H))}catch(j){alert("Failed to load image"),console.error(j)}}async function B(k){const H=new Image;H.onload=()=>{n(4,D=H)},H.src=k}let I=null;function N(k){le[k?"unshift":"push"](()=>{p=k,n(11,p)})}const V=()=>n(4,D=null),O=k=>B(k);function U(k){S=k,n(0,S)}function X(k){L=k,n(1,L)}function J(k){w=k,n(2,w)}function ae(k){a=k,n(6,a)}function ee(k){l=k,n(7,l)}function he(){u=this.checked,n(8,u)}function fe(){f=this.value,n(9,f)}function ue(){d=this.value,n(10,d)}function se(k){y=k,n(3,y)}function oe(k){i=k,n(5,i),n(4,D)}return e.$$.update=()=>{if(e.$$.dirty[0]&4&&n(20,r=w),e.$$.dirty[0]&16&&n(5,i=D!=null&&D.width&&(D!=null&&D.height)?D.width/D.height:1),e.$$.dirty[0]&40&&n(13,s=y/i),e.$$.dirty[0]&1048583&&"ImageData"in globalThis){let k;switch(S){case"bayer":k={mode:"bayer",level:L};break;case"blue_noise":k={mode:"blue_noise"};break;case"white_noise":k={mode:"white_noise",width:w,height:r};break}Xn(k).then(H=>n(12,I=H))}},[S,L,w,y,D,i,a,l,u,f,d,p,I,s,o,R,A,g,T,B,r,N,V,O,U,X,J,ae,ee,he,fe,ue,se,oe]}class rr extends Ee{constructor(t){super(),we(this,t,Kn,qn,ye,{},null,[-1,-1])}}export{rr as component};
