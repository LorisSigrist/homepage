var on=Object.defineProperty;var ln=(e,t,n)=>t in e?on(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ie=(e,t,n)=>(ln(e,typeof t!="symbol"?t+"":t,n),n);import{S as ae,i as ue,s as fe,k as E,q as H,a as C,y as Y,l as w,m as S,r as j,h as p,c as P,z as G,n as d,b as F,G as m,A as Z,N as J,g as B,d as O,B as q,O as Be,C as He,D as Ye,E as je,F as Ge,P as an,p as it,Q as Ne,R as rt,w as x,T as Me,u as $e,H as le,U as un,V as fn,W as wt,X as lt,Y as cn,Z as ee,_ as te,$ as dn,v as Ue,f as Xe,a0 as at,J as hn,M as st,e as At}from"../chunks/index.4f636332.js";import{I as Oe,L as mn,A as gn,a as _n,P as pn,X as bn}from"../chunks/Icon.4de25e85.js";function vn(e){let t,n,i,r,o,s,l,a,u,c,f,h,A,y,b,g,L,R,k,v,I,_,T,N,W,z;return A=new Oe({props:{src:mn,class:"w-4 h-4",solid:!0}}),{c(){t=E("fieldset"),n=E("div"),i=E("label"),r=H("Width"),o=C(),s=E("div"),l=E("input"),a=C(),u=E("div"),c=H("px"),f=C(),h=E("span"),Y(A.$$.fragment),y=C(),b=E("div"),g=E("label"),L=H("Height"),R=C(),k=E("div"),v=E("input"),I=C(),_=E("div"),T=H("px"),this.h()},l(D){t=w(D,"FIELDSET",{class:!0});var U=S(t);n=w(U,"DIV",{class:!0});var ne=S(n);i=w(ne,"LABEL",{for:!0,class:!0});var Q=S(i);r=j(Q,"Width"),Q.forEach(p),o=P(ne),s=w(ne,"DIV",{class:!0});var se=S(s);l=w(se,"INPUT",{name:!0,id:!0,type:!0,min:!0,max:!0,step:!0,class:!0,placeholder:!0}),a=P(se),u=w(se,"DIV",{class:!0});var he=S(u);c=j(he,"px"),he.forEach(p),se.forEach(p),ne.forEach(p),f=P(U),h=w(U,"SPAN",{class:!0});var me=S(h);G(A.$$.fragment,me),me.forEach(p),y=P(U),b=w(U,"DIV",{class:!0});var ie=S(b);g=w(ie,"LABEL",{for:!0,class:!0});var oe=S(g);L=j(oe,"Height"),oe.forEach(p),R=P(ie),k=w(ie,"DIV",{class:!0});var K=S(k);v=w(K,"INPUT",{type:!0,id:!0,name:!0,min:!0,max:!0,step:!0,class:!0,placeholder:!0}),I=P(K),_=w(K,"DIV",{class:!0});var ge=S(_);T=j(ge,"px"),ge.forEach(p),K.forEach(p),ie.forEach(p),U.forEach(p),this.h()},h(){d(i,"for","width-"+e[8]),d(i,"class","block text-sm font-medium leading-6 text-gray-900"),d(l,"name","width"),d(l,"id","width-"+e[8]),d(l,"type","number"),d(l,"min",e[3]),d(l,"max",e[1]),d(l,"step","1"),l.value=e[0],d(l,"class","block w-full rounded-md border-0 py-1.5 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"),d(l,"placeholder","600"),d(u,"class","pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400"),d(s,"class","relative mt-2 rounded-md shadow-sm"),d(n,"class","w-full"),d(h,"class","text-gray-500 pb-2 cursor-not-allowed"),d(g,"for","height-"+e[9]),d(g,"class","block text-sm font-medium leading-6 text-gray-900"),d(v,"type","number"),d(v,"id","height-"+e[9]),d(v,"name","height"),d(v,"min",e[4]),d(v,"max",e[2]),d(v,"step","1"),v.value=e[5],d(v,"class","block w-full rounded-md border-0 py-1.5 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"),d(v,"placeholder","340"),d(_,"class","pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400"),d(k,"class","relative mt-2 rounded-md shadow-sm"),d(b,"class","w-full"),d(t,"class","flex gap-3 items-end justify-between")},m(D,U){F(D,t,U),m(t,n),m(n,i),m(i,r),m(n,o),m(n,s),m(s,l),m(s,a),m(s,u),m(u,c),m(t,f),m(t,h),Z(A,h,null),m(t,y),m(t,b),m(b,g),m(g,L),m(b,R),m(b,k),m(k,v),m(k,I),m(k,_),m(_,T),N=!0,W||(z=[J(l,"input",e[6]),J(v,"input",e[7])],W=!0)},p(D,[U]){(!N||U&8)&&d(l,"min",D[3]),(!N||U&2)&&d(l,"max",D[1]),(!N||U&1&&l.value!==D[0])&&(l.value=D[0]),(!N||U&16)&&d(v,"min",D[4]),(!N||U&4)&&d(v,"max",D[2]),(!N||U&32&&v.value!==D[5])&&(v.value=D[5])},i(D){N||(B(A.$$.fragment,D),N=!0)},o(D){O(A.$$.fragment,D),N=!1},d(D){D&&p(t),q(A),W=!1,Be(z)}}}function yt(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}function En(e,t,n){let i,{width:r}=t,{aspectRatio:o}=t,{maxWidth:s=null}=t,{maxHeight:l=null}=t,{minWidth:a=null}=t,{minHeight:u=null}=t;function c(y){const b=y.target.value;b&&(a!==null&&b<a||s!==null&&b>s||n(0,r=b))}function f(y){const b=y.target.value;b&&(u!==null&&b<u||l!==null&&b>l||n(0,r=Math.round(o*b)))}let h=yt(),A=yt();return e.$$set=y=>{"width"in y&&n(0,r=y.width),"aspectRatio"in y&&n(10,o=y.aspectRatio),"maxWidth"in y&&n(1,s=y.maxWidth),"maxHeight"in y&&n(2,l=y.maxHeight),"minWidth"in y&&n(3,a=y.minWidth),"minHeight"in y&&n(4,u=y.minHeight)},e.$$.update=()=>{e.$$.dirty&1025&&n(5,i=Math.round(r/o))},[r,s,l,a,u,i,c,f,h,A,o]}class jt extends ae{constructor(t){super(),ue(this,t,En,vn,fe,{width:0,aspectRatio:10,maxWidth:1,maxHeight:2,minWidth:3,minHeight:4})}}var wn="precision highp float;attribute vec2 position;varying vec2 fragCoord;void main(){fragCoord.x=position.x*0.5+0.5;fragCoord.y=position.y*0.5+0.5;gl_Position=vec4(position,0.0,1.0);}",An="precision highp float;varying vec2 fragCoord;uniform sampler2D uSampler;uniform float uThreshold;uniform sampler2D uNoiseSampler;uniform vec2 uNoiseSamplerSize;uniform float uNoise;uniform float uMonochrome;uniform vec2 uSize;uniform vec3 uDarkColor;uniform vec3 uLightColor;void main(void){vec2 imgPixel=vec2(fragCoord.x*uSize.x,fragCoord.y*uSize.y);vec2 noisePixel=vec2(mod(imgPixel.x,uNoiseSamplerSize.x),mod(imgPixel.y,uNoiseSamplerSize.y));vec2 noiseUV=vec2(noisePixel.x/uNoiseSamplerSize.x,noisePixel.y/uNoiseSamplerSize.y);float noise=(texture2D(uNoiseSampler,noiseUV).r-0.5)*2.0*uNoise;vec4 color=texture2D(uSampler,fragCoord);float gray=dot(color.rgb,vec3(0.299,0.587,0.114));color.r=color.r*(1.0-uMonochrome)+gray*uMonochrome;color.g=color.g*(1.0-uMonochrome)+gray*uMonochrome;color.b=color.b*(1.0-uMonochrome)+gray*uMonochrome;vec3 thresholds=vec3(step(uThreshold,color.r+noise),step(uThreshold,color.g+noise),step(uThreshold,color.b+noise));if(uMonochrome>0.0){color.rgb=vec3(mix(uDarkColor.r,uLightColor.r,thresholds.r),mix(uDarkColor.g,uLightColor.g,thresholds.g),mix(uDarkColor.b,uLightColor.b,thresholds.b));}else{color.rgb=thresholds;}gl_FragColor=color;}";function kt(e){return(e&e-1)===0}function yn(e,t,n){const i=Tt(e,e.VERTEX_SHADER,t),r=Tt(e,e.FRAGMENT_SHADER,n),o=e.createProgram();if(!o)throw new Error("Failed to create shader program");if(e.attachShader(o,i),e.attachShader(o,r),e.linkProgram(o),!e.getProgramParameter(o,e.LINK_STATUS))throw Error(`Unable to initialize the shader program: ${e.getProgramInfoLog(o)}`);return o}function Tt(e,t,n){const i=e.createShader(t);if(!i)throw new Error("Failed to create shader");if(e.shaderSource(i,n),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS))throw Error(`An error occurred compiling the shaders: ${e.getShaderInfoLog(i)}`);return i}function kn(e){const t=e.createBuffer(),n=e.createBuffer(),i=[-1,1,-1,-1,1,-1,1,1],r=[3,2,1,3,1,0];return e.bindBuffer(e.ARRAY_BUFFER,t),e.bufferData(e.ARRAY_BUFFER,new Float32Array(i),e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(r),e.STATIC_DRAW),{vertex_buffer:t,index_buffer:n}}function St(e,t,n){const i=e.createTexture();if(!i)throw new Error("Failed to create texture");return e.bindTexture(e.TEXTURE_2D,i),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),kt(t.width)&&kt(t.height)?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,n)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,n)),i}function Tn(e,t){let n=t;const i=e.getContext("webgl",{preserveDrawingBuffer:!0});if(!i){alert("WebGL not supported");return}i.clearColor(0,0,0,1),i.clear(i.COLOR_BUFFER_BIT);const r=yn(i,wn,An),{vertex_buffer:o,index_buffer:s}=kn(i),l=i.getAttribLocation(r,"position");i.vertexAttribPointer(l,2,i.FLOAT,!1,0,0),i.enableVertexAttribArray(l);const a=i.getUniformLocation(r,"uSampler"),u=i.getUniformLocation(r,"uThreshold"),c=i.getUniformLocation(r,"uNoiseSampler"),f=i.getUniformLocation(r,"uNoise"),h=i.getUniformLocation(r,"uSize"),A=i.getUniformLocation(r,"uNoiseSamplerSize"),y=i.getUniformLocation(r,"uMonochrome"),b=i.getUniformLocation(r,"uDarkColor"),g=i.getUniformLocation(r,"uLightColor");let L;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!0);const R=()=>{L&&i.deleteTexture(L),L=St(i,n.image,i.LINEAR)};R();let k,v;i.useProgram(r);let I=null;const _=()=>{k&&i.deleteTexture(k),k=St(i,n.thresholdMap,i.NEAREST),v={width:n.thresholdMap.width,height:n.thresholdMap.height}};_();const T=()=>{i.viewport(0,0,n.output_width,n.output_height),i.clearColor(0,0,0,1),i.clear(i.COLOR_BUFFER_BIT),i.bindBuffer(i.ARRAY_BUFFER,o),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,s),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,L),i.uniform1i(a,0),i.activeTexture(i.TEXTURE1),i.bindTexture(i.TEXTURE_2D,k),i.uniform1i(c,1),i.uniform2f(A,v.width,v.height),i.uniform1f(u,n.threshold),i.uniform1f(f,n.noiseIntensity),i.uniform2f(h,n.output_width,n.output_height),i.uniform1f(y,n.monochrome?1:0),i.uniform3f(b,...Lt(n.colorDark)),i.uniform3f(g,...Lt(n.colorLight)),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT),i.drawElements(i.TRIANGLES,6,i.UNSIGNED_SHORT,0)};function N(){I=requestAnimationFrame(()=>{T(),I=null})}return N(),{update(W){const z=n.image!==W.image,D=n.thresholdMap!==W.thresholdMap;n=W,z&&R(),D&&_(),N()},destroy(){I!==null&&cancelAnimationFrame(I)}}}function Lt(e){const t=parseInt(e.slice(1,3),16)/255,n=parseInt(e.slice(3,5),16)/255,i=parseInt(e.slice(5,7),16)/255;return[t,n,i]}function Sn(e){let t,n,i,r,o;const s=e[3].default,l=He(s,e,e[2],null);return{c(){t=E("button"),l&&l.c(),this.h()},l(a){t=w(a,"BUTTON",{type:!0,class:!0});var u=S(t);l&&l.l(u),u.forEach(p),this.h()},h(){t.disabled=e[0],d(t,"type","button"),d(t,"class",n=e[1][e[0]?"disabled":"normal"]+" rounded-md px-2.5 py-1.5 text-sm font-semibold focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 flex items-center justify-center gap-2")},m(a,u){F(a,t,u),l&&l.m(t,null),i=!0,r||(o=J(t,"click",e[4]),r=!0)},p(a,[u]){l&&l.p&&(!i||u&4)&&Ye(l,s,a,a[2],i?Ge(s,a[2],u,null):je(a[2]),null),(!i||u&1)&&(t.disabled=a[0]),(!i||u&1&&n!==(n=a[1][a[0]?"disabled":"normal"]+" rounded-md px-2.5 py-1.5 text-sm font-semibold focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 flex items-center justify-center gap-2"))&&d(t,"class",n)},i(a){i||(B(l,a),i=!0)},o(a){O(l,a),i=!1},d(a){a&&p(t),l&&l.d(a),r=!1,o()}}}function Ln(e,t,n){let{$$slots:i={},$$scope:r}=t,{disabled:o=!1}=t;const s={normal:"bg-indigo-600 text-white shadow-sm hover:bg-indigo-500",disabled:"bg-gray-200 text-gray-400 shadow-none cursor-not-allowed"};function l(a){an.call(this,e,a)}return e.$$set=a=>{"disabled"in a&&n(0,o=a.disabled),"$$scope"in a&&n(2,r=a.$$scope)},[o,s,r,i,l]}class In extends ae{constructor(t){super(),ue(this,t,Ln,Sn,fe,{disabled:0})}}async function Dn(e,t,n="png"){const i=new OffscreenCanvas(e.width,e.height),r=i.getContext("2d");if(!r)return;r.drawImage(e,0,0,e.width,e.height);const o=await i.convertToBlob({type:"image/"+n,quality:1}),s=URL.createObjectURL(o),l=document.createElement("a");l.download=`${t}.${n}`,l.href=s,l.click(),l.remove(),URL.revokeObjectURL(s)}function It(e){return new Promise((t,n)=>{e.type.startsWith("image/")||n(new Error("Not an image file"));const i=new FileReader;i.onload=r=>{if(typeof i.result!="string")return;const o=new Image;o.onload=()=>{t(o)},o.onerror=s=>{n(s)},o.src=i.result},i.onerror=r=>{n(r)},i.readAsDataURL(e)})}function Mn(e){const n=new OffscreenCanvas(e.width,e.height).getContext("2d");if(!n)throw new Error("Could not get canvas context");return n.drawImage(e,0,0),n.getImageData(0,0,e.width,e.height)}var Rn=class extends EventTarget{dispatchTypedEvent(e,t){return super.dispatchEvent(t)}};class Ae{constructor(t){this.id=-1,this.nativePointer=t,this.pageX=t.pageX,this.pageY=t.pageY,this.clientX=t.clientX,this.clientY=t.clientY,self.Touch&&t instanceof Touch?this.id=t.identifier:Ce(t)&&(this.id=t.pointerId)}getCoalesced(){if("getCoalescedEvents"in this.nativePointer){const t=this.nativePointer.getCoalescedEvents().map(n=>new Ae(n));if(t.length>0)return t}return[this]}}const Ce=e=>"pointerId"in e,et=e=>"changedTouches"in e,Dt=()=>{};class Cn{constructor(t,{start:n=()=>!0,move:i=Dt,end:r=Dt,rawUpdates:o=!1,avoidPointerEvents:s=!1}={}){this._element=t,this.startPointers=[],this.currentPointers=[],this._excludeFromButtonsCheck=new Set,this._pointerStart=l=>{if(Ce(l)&&l.buttons===0)this._excludeFromButtonsCheck.add(l.pointerId);else if(!(l.buttons&1))return;const a=new Ae(l);this.currentPointers.some(u=>u.id===a.id)||this._triggerPointerStart(a,l)&&(Ce(l)?((l.target&&"setPointerCapture"in l.target?l.target:this._element).setPointerCapture(l.pointerId),this._element.addEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move),this._element.addEventListener("pointerup",this._pointerEnd),this._element.addEventListener("pointercancel",this._pointerEnd)):(window.addEventListener("mousemove",this._move),window.addEventListener("mouseup",this._pointerEnd)))},this._touchStart=l=>{for(const a of Array.from(l.changedTouches))this._triggerPointerStart(new Ae(a),l)},this._move=l=>{if(!et(l)&&(!Ce(l)||!this._excludeFromButtonsCheck.has(l.pointerId))&&l.buttons===0){this._pointerEnd(l);return}const a=this.currentPointers.slice(),u=et(l)?Array.from(l.changedTouches).map(f=>new Ae(f)):[new Ae(l)],c=[];for(const f of u){const h=this.currentPointers.findIndex(A=>A.id===f.id);h!==-1&&(c.push(f),this.currentPointers[h]=f)}c.length!==0&&this._moveCallback(a,c,l)},this._triggerPointerEnd=(l,a)=>{if(!et(a)&&a.buttons&1)return!1;const u=this.currentPointers.findIndex(f=>f.id===l.id);if(u===-1)return!1;this.currentPointers.splice(u,1),this.startPointers.splice(u,1),this._excludeFromButtonsCheck.delete(l.id);const c=!(a.type==="mouseup"||a.type==="touchend"||a.type==="pointerup");return this._endCallback(l,a,c),!0},this._pointerEnd=l=>{if(this._triggerPointerEnd(new Ae(l),l))if(Ce(l)){if(this.currentPointers.length)return;this._element.removeEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move),this._element.removeEventListener("pointerup",this._pointerEnd),this._element.removeEventListener("pointercancel",this._pointerEnd)}else window.removeEventListener("mousemove",this._move),window.removeEventListener("mouseup",this._pointerEnd)},this._touchEnd=l=>{for(const a of Array.from(l.changedTouches))this._triggerPointerEnd(new Ae(a),l)},this._startCallback=n,this._moveCallback=i,this._endCallback=r,this._rawUpdates=o&&"onpointerrawupdate"in window,self.PointerEvent&&!s?this._element.addEventListener("pointerdown",this._pointerStart):(this._element.addEventListener("mousedown",this._pointerStart),this._element.addEventListener("touchstart",this._touchStart),this._element.addEventListener("touchmove",this._move),this._element.addEventListener("touchend",this._touchEnd),this._element.addEventListener("touchcancel",this._touchEnd))}stop(){this._element.removeEventListener("pointerdown",this._pointerStart),this._element.removeEventListener("mousedown",this._pointerStart),this._element.removeEventListener("touchstart",this._touchStart),this._element.removeEventListener("touchmove",this._move),this._element.removeEventListener("touchend",this._touchEnd),this._element.removeEventListener("touchcancel",this._touchEnd),this._element.removeEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move),this._element.removeEventListener("pointerup",this._pointerEnd),this._element.removeEventListener("pointercancel",this._pointerEnd),window.removeEventListener("mousemove",this._move),window.removeEventListener("mouseup",this._pointerEnd)}_triggerPointerStart(t,n){return this._startCallback(t,n)?(this.currentPointers.push(t),this.startPointers.push(t),!0):!1}}function Gt(e,t,n){return Math.min(Math.max(e,t),n)}function Mt(e,t){return t?Math.sqrt((t.clientX-e.clientX)**2+(t.clientY-e.clientY)**2):0}function Rt(e,t){return t?{clientX:(e.clientX+t.clientX)/2,clientY:(e.clientY+t.clientY)/2}:e}const Ke=class extends Rn{constructor(n){super();Ie(this,"element");Ie(this,"transform",new DOMMatrix);Ie(this,"pointerTracker");this.element=n,this.element.addEventListener("wheel",this.onWheel.bind(this)),this.pointerTracker=new Cn(this.element,{start:(i,r)=>this.pointerTracker.currentPointers.length===2?!1:(r.preventDefault(),!0),move:i=>{this.onPointerMove(i,this.pointerTracker.currentPointers)},avoidPointerEvents:this.isSafari()}),this.element.addEventListener("wheel",this.onWheel.bind(this))}get x(){return this.transform.e}get y(){return this.transform.f}get scale(){return this.transform.a}set x(n){this.transform.e=n}set y(n){this.transform.f=n}set scale(n){this.transform.a=n,this.transform.d=n}onWheel(n){n.preventDefault();const i=this.element.getBoundingClientRect();let{deltaY:r}=n;const{ctrlKey:o,deltaMode:s}=n;s===1&&(r*=15);const l=r>0,a=o?100:300,u=1-(l?-r:r)/a,c=l?1/u:u,f=n.clientX-i.left,h=n.clientY-i.top;this.applyTransformation({scaleDiff:c,originX:f,originY:h})}applyTransformation(n={}){const{panX:i=0,panY:r=0,originX:o=0,originY:s=0,scaleDiff:l=1}=n,a=new DOMMatrix().translate(o,s).scale(l).translate(-o,-s),u=new DOMMatrix().translate(i,r);a.multiplySelf(u),a.multiplySelf(this.transform);const c=a.a,f=a.e,h=a.f;this.updateTransform(c,f,h)}onPointerMove(n,i){const r=this.element.getBoundingClientRect(),o=Rt(n[0],n[1]),s=Rt(i[0],i[1]),l=o.clientX-r.left,a=o.clientY-r.top,u=Mt(n[0],n[1]),c=Mt(i[0],i[1]),f=u?c/u:1;this.applyTransformation({originX:l,originY:a,scaleDiff:f,panX:s.clientX-o.clientX,panY:s.clientY-o.clientY})}updateTransform(n,i,r){if(n=Gt(n,Ke.MIN_SCALE,Ke.MAX_SCALE),n===this.scale&&i===this.x&&r===this.y)return;this.x=i,this.y=r,this.scale=n;const o=new CustomEvent("panzoom:change",{bubbles:!0,detail:{x:this.x,y:this.y,scale:this.scale,matrix:this.transform}});this.dispatchTypedEvent("panzoom:change",o)}isSafari(){return/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)}reset(){this.updateTransform(1,0,0)}destroy(){this.pointerTracker.stop()}};let Pe=Ke;Ie(Pe,"MIN_SCALE",.01),Ie(Pe,"MAX_SCALE",1e5);const Pn=e=>({}),Ct=e=>({}),Nn=e=>({}),Pt=e=>({});function Un(e){let t,n,i,r,o,s,l,a,u,c,f,h,A,y;const b=e[6].left,g=He(b,e,e[5],Pt),L=e[6].right,R=He(L,e,e[5],Ct);return f=new Oe({props:{src:gn,class:"w-6 h-6 text-white"}}),{c(){t=E("div"),n=E("div"),i=E("div"),r=E("div"),g&&g.c(),o=C(),s=E("div"),l=E("div"),R&&R.c(),a=C(),u=E("div"),c=E("div"),Y(f.$$.fragment),this.h()},l(k){t=w(k,"DIV",{class:!0});var v=S(t);n=w(v,"DIV",{class:!0});var I=S(n);i=w(I,"DIV",{class:!0});var _=S(i);r=w(_,"DIV",{style:!0,class:!0});var T=S(r);g&&g.l(T),T.forEach(p),_.forEach(p),o=P(I),s=w(I,"DIV",{class:!0});var N=S(s);l=w(N,"DIV",{style:!0,class:!0});var W=S(l);R&&R.l(W),W.forEach(p),N.forEach(p),I.forEach(p),a=P(v),u=w(v,"DIV",{class:!0});var z=S(u);c=w(z,"DIV",{class:!0});var D=S(c);G(f.$$.fragment,D),D.forEach(p),z.forEach(p),v.forEach(p),this.h()},h(){d(r,"style",e[2]),d(r,"class","w-full h-full origin-top-left grid place-items-center"),d(i,"class","mask-left svelte-90j1r"),d(l,"style",e[2]),d(l,"class","w-full h-full origin-top-left grid place-items-center"),d(s,"class","mask-right svelte-90j1r"),d(n,"class","w-full h-full grid place-items-center"),d(c,"class","w-12 h-12 rounded-full bg-black absolute top-1/2 -translate-x-1/2 left-1/2 grid place-items-center"),d(u,"class","handle relative shadow-lg svelte-90j1r"),d(t,"class","pz-container svelte-90j1r"),it(t,"--split-point",e[1]+"%")},m(k,v){F(k,t,v),m(t,n),m(n,i),m(i,r),g&&g.m(r,null),m(n,o),m(n,s),m(s,l),R&&R.m(l,null),m(t,a),m(t,u),m(u,c),Z(f,c,null),e[7](t),h=!0,A||(y=[Ne(e[4].call(null,n)),Ne(e[3].call(null,u)),J(u,"pointercancel",rt(Xn))],A=!0)},p(k,[v]){g&&g.p&&(!h||v&32)&&Ye(g,b,k,k[5],h?Ge(b,k[5],v,Nn):je(k[5]),Pt),(!h||v&4)&&d(r,"style",k[2]),R&&R.p&&(!h||v&32)&&Ye(R,L,k,k[5],h?Ge(L,k[5],v,Pn):je(k[5]),Ct),(!h||v&4)&&d(l,"style",k[2]),v&2&&it(t,"--split-point",k[1]+"%")},i(k){h||(B(g,k),B(R,k),B(f.$$.fragment,k),h=!0)},o(k){O(g,k),O(R,k),O(f.$$.fragment,k),h=!1},d(k){k&&p(t),g&&g.d(k),R&&R.d(k),q(f),e[7](null),A=!1,Be(y)}}}const Xn=()=>{};function Bn(e,t,n){let{$$slots:i={},$$scope:r}=t,o=null,s=50;function l(f){f.addEventListener("pointerdown",h=>{const A=h.clientX,y=s,b=document.body.style.cursor;document.body.style.cursor="col-resize";const g=R=>{const k=o?o.clientWidth:window.innerWidth,v=R.clientX-A,I=y+v/k*100;n(1,s=Gt(I,0,100))},L=()=>{document.body.style.cursor=b,window.removeEventListener("pointermove",g),window.removeEventListener("pointerup",L),window.removeEventListener("pointercancel",L)};window.addEventListener("pointermove",g),window.addEventListener("pointerup",L),window.addEventListener("pointercancel",L)})}let a="transform: none;";function u(f){const h=new Pe(f);function A(y){const{matrix:b}=y.detail;n(2,a=`transform: ${b.toString()};`)}return h.addEventListener("panzoom:change",A),{destroy(){h.removeEventListener("panzoom:change",A),h.destroy()}}}function c(f){x[f?"unshift":"push"](()=>{o=f,n(0,o)})}return e.$$set=f=>{"$$scope"in f&&n(5,r=f.$$scope)},[o,s,a,l,u,r,i,c]}class On extends ae{constructor(t){super(),ue(this,t,Bn,Un,fe,{})}}const Fn=""+new URL("../assets/cat.58b560b7.jpg",import.meta.url).href,Wn="data:image/avif;base64,AAAAHGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZgAAAOptZXRhAAAAAAAAACFoZGxyAAAAAAAAAABwaWN0AAAAAAAAAAAAAAAAAAAAAA5waXRtAAAAAAABAAAAImlsb2MAAAAAREAAAQABAAAAAAEOAAEAAAAAAAAApwAAACNpaW5mAAAAAAABAAAAFWluZmUCAAAAAAEAAGF2MDEAAAAAamlwcnAAAABLaXBjbwAAABNjb2xybmNseAACAAIABoAAAAAMYXYxQ4EEDAAAAAAUaXNwZQAAAAAAAAJyAAACcgAAABBwaXhpAAAAAAMICAgAAAAXaXBtYQAAAAAAAAABAAEEgYIDhAAAAK9tZGF0EgAKChkmZxnHggQEDQgylgERQAEEEEEA9NBi7JFlrqXV1mwMry34uIYK7WRdWYJ/ZZ0EIyWW8aLm92oz5LY0W+l2FiKsHpp4BB3Vrk+iwHuzboac7wmSHHHRWklZdZ2hpEAi4E31lf1tjXnXie8fh4lzApbqjH5Pj7ZN6761WygYVdc2zvJOsflFZstng6rQU/oulDZSO6fQWKvzpO9pseyXBLfms64=",zn=""+new URL("../assets/david.0e7e3b46.png",import.meta.url).href;/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Zt=Symbol("Comlink.proxy"),Vn=Symbol("Comlink.endpoint"),Hn=Symbol("Comlink.releaseProxy"),tt=Symbol("Comlink.finalizer"),Ve=Symbol("Comlink.thrown"),qt=e=>typeof e=="object"&&e!==null||typeof e=="function",Yn={canHandle:e=>qt(e)&&e[Zt],serialize(e){const{port1:t,port2:n}=new MessageChannel;return Qt(e,t),[n,[n]]},deserialize(e){return e.start(),ut(e)}},jn={canHandle:e=>qt(e)&&Ve in e,serialize({value:e}){let t;return e instanceof Error?t={isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:t={isError:!1,value:e},[t,[]]},deserialize(e){throw e.isError?Object.assign(new Error(e.value.message),e.value):e.value}},xt=new Map([["proxy",Yn],["throw",jn]]);function Gn(e,t){for(const n of e)if(t===n||n==="*"||n instanceof RegExp&&n.test(t))return!0;return!1}function Qt(e,t=globalThis,n=["*"]){t.addEventListener("message",function i(r){if(!r||!r.data)return;if(!Gn(n,r.origin)){console.warn(`Invalid origin '${r.origin}' for comlink proxy`);return}const{id:o,type:s,path:l}=Object.assign({path:[]},r.data),a=(r.data.argumentList||[]).map(ke);let u;try{const c=l.slice(0,-1).reduce((h,A)=>h[A],e),f=l.reduce((h,A)=>h[A],e);switch(s){case"GET":u=f;break;case"SET":c[l.slice(-1)[0]]=ke(r.data.value),u=!0;break;case"APPLY":u=f.apply(c,a);break;case"CONSTRUCT":{const h=new f(...a);u=Kn(h)}break;case"ENDPOINT":{const{port1:h,port2:A}=new MessageChannel;Qt(e,A),u=en(h,[h])}break;case"RELEASE":u=void 0;break;default:return}}catch(c){u={value:c,[Ve]:0}}Promise.resolve(u).catch(c=>({value:c,[Ve]:0})).then(c=>{const[f,h]=xe(c);t.postMessage(Object.assign(Object.assign({},f),{id:o}),h),s==="RELEASE"&&(t.removeEventListener("message",i),Kt(t),tt in e&&typeof e[tt]=="function"&&e[tt]())}).catch(c=>{const[f,h]=xe({value:new TypeError("Unserializable return value"),[Ve]:0});t.postMessage(Object.assign(Object.assign({},f),{id:o}),h)})}),t.start&&t.start()}function Zn(e){return e.constructor.name==="MessagePort"}function Kt(e){Zn(e)&&e.close()}function ut(e,t){return ot(e,[],t)}function ze(e){if(e)throw new Error("Proxy has been released and is not useable")}function $t(e){return De(e,{type:"RELEASE"}).then(()=>{Kt(e)})}const Ze=new WeakMap,qe="FinalizationRegistry"in globalThis&&new FinalizationRegistry(e=>{const t=(Ze.get(e)||0)-1;Ze.set(e,t),t===0&&$t(e)});function qn(e,t){const n=(Ze.get(t)||0)+1;Ze.set(t,n),qe&&qe.register(e,t,e)}function xn(e){qe&&qe.unregister(e)}function ot(e,t=[],n=function(){}){let i=!1;const r=new Proxy(n,{get(o,s){if(ze(i),s===Hn)return()=>{xn(r),$t(e),i=!0};if(s==="then"){if(t.length===0)return{then:()=>r};const l=De(e,{type:"GET",path:t.map(a=>a.toString())}).then(ke);return l.then.bind(l)}return ot(e,[...t,s])},set(o,s,l){ze(i);const[a,u]=xe(l);return De(e,{type:"SET",path:[...t,s].map(c=>c.toString()),value:a},u).then(ke)},apply(o,s,l){ze(i);const a=t[t.length-1];if(a===Vn)return De(e,{type:"ENDPOINT"}).then(ke);if(a==="bind")return ot(e,t.slice(0,-1));const[u,c]=Nt(l);return De(e,{type:"APPLY",path:t.map(f=>f.toString()),argumentList:u},c).then(ke)},construct(o,s){ze(i);const[l,a]=Nt(s);return De(e,{type:"CONSTRUCT",path:t.map(u=>u.toString()),argumentList:l},a).then(ke)}});return qn(r,e),r}function Qn(e){return Array.prototype.concat.apply([],e)}function Nt(e){const t=e.map(xe);return[t.map(n=>n[0]),Qn(t.map(n=>n[1]))]}const Jt=new WeakMap;function en(e,t){return Jt.set(e,t),e}function Kn(e){return Object.assign(e,{[Zt]:!0})}function xe(e){for(const[t,n]of xt)if(n.canHandle(e)){const[i,r]=n.serialize(e);return[{type:"HANDLER",name:t,value:i},r]}return[{type:"RAW",value:e},Jt.get(e)||[]]}function ke(e){switch(e.type){case"HANDLER":return xt.get(e.name).deserialize(e.value);case"RAW":return e.value}}function De(e,t,n){return new Promise(i=>{const r=$n();e.addEventListener("message",function o(s){!s.data||!s.data.id||s.data.id!==r||(e.removeEventListener("message",o),i(s.data))}),e.start&&e.start(),e.postMessage(Object.assign({id:r},t),n)})}function $n(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}function Jn(){return new Worker(""+new URL("../workers/renderingWorker-507c4fff.js",import.meta.url).href)}function ei(e,t){const n=e.transferControlToOffscreen(),i=new Jn,r=ut(i);let o=null,s=null,l=()=>{};return r.errorDiffusionDithering(en(n,[n]),t).then(a=>{s=a.update,l=a.destroy,s(o||t)}),{update:a=>{s?s(a):o=a},destroy:()=>{l(),i.terminate()}}}function ti(e){let t,n,i,r,o,s,l;return{c(){t=E("div"),n=E("label"),i=H(e[1]),r=C(),o=E("input"),this.h()},l(a){t=w(a,"DIV",{});var u=S(t);n=w(u,"LABEL",{for:!0,class:!0});var c=S(n);i=j(c,e[1]),c.forEach(p),r=P(u),o=w(u,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0,name:!0,class:!0}),u.forEach(p),this.h()},h(){d(n,"for",e[6]),d(n,"class","block mb-2 text-sm font-medium text-gray-900 dark:text-white"),d(o,"id",e[6]),d(o,"type","range"),d(o,"min",e[3]),d(o,"max",e[4]),d(o,"step",e[5]),d(o,"name",e[2]),d(o,"class","w-full h-1.5 mb-6 bg-white ring-1 ring-gray-300 shadow-sm rounded-lg appearance-none cursor-pointer accent-indigo-600 dark:bg-gray-700")},m(a,u){F(a,t,u),m(t,n),m(n,i),m(t,r),m(t,o),Me(o,e[0]),s||(l=[J(o,"change",e[7]),J(o,"input",e[7])],s=!0)},p(a,[u]){u&2&&$e(i,a[1]),u&8&&d(o,"min",a[3]),u&16&&d(o,"max",a[4]),u&32&&d(o,"step",a[5]),u&4&&d(o,"name",a[2]),u&1&&Me(o,a[0])},i:le,o:le,d(a){a&&p(t),s=!1,Be(l)}}}function ni(e,t,n){let{label:i}=t,{name:r=void 0}=t,{min:o=null}=t,{max:s=null}=t,{value:l=0}=t,{step:a=1}=t,u=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);function c(){l=un(this.value),n(0,l)}return e.$$set=f=>{"label"in f&&n(1,i=f.label),"name"in f&&n(2,r=f.name),"min"in f&&n(3,o=f.min),"max"in f&&n(4,s=f.max),"value"in f&&n(0,l=f.value),"step"in f&&n(5,a=f.step)},[l,i,r,o,s,a,u,c]}class Qe extends ae{constructor(t){super(),ue(this,t,ni,ti,fe,{label:1,name:2,min:3,max:4,value:0,step:5})}}function Ut(e,t,n){const i=e.slice();return i[6]=t[n],i}function Xt(e){let t,n=e[6].name+"",i,r,o;return{c(){t=E("option"),i=H(n),this.h()},l(s){t=w(s,"OPTION",{});var l=S(t);i=j(l,n),l.forEach(p),this.h()},h(){t.__value=r=e[6].value,t.value=t.__value,t.selected=o=e[6].value===e[0]},m(s,l){F(s,t,l),m(t,i)},p(s,l){l&2&&n!==(n=s[6].name+"")&&$e(i,n),l&2&&r!==(r=s[6].value)&&(t.__value=r,t.value=t.__value),l&3&&o!==(o=s[6].value===s[0])&&(t.selected=o)},d(s){s&&p(t)}}}function ii(e){let t,n,i,r,o,s,l,a=e[1],u=[];for(let c=0;c<a.length;c+=1)u[c]=Xt(Ut(e,a,c));return{c(){t=E("div"),n=E("label"),i=H(e[2]),r=C(),o=E("select");for(let c=0;c<u.length;c+=1)u[c].c();this.h()},l(c){t=w(c,"DIV",{});var f=S(t);n=w(f,"LABEL",{for:!0,class:!0});var h=S(n);i=j(h,e[2]),h.forEach(p),r=P(f),o=w(f,"SELECT",{id:!0,name:!0,class:!0});var A=S(o);for(let y=0;y<u.length;y+=1)u[y].l(A);A.forEach(p),f.forEach(p),this.h()},h(){d(n,"for",e[4]),d(n,"class","block text-sm font-medium leading-6 text-gray-900"),d(o,"id",e[4]),d(o,"name",e[3]),d(o,"class","mt-2 block w-full rounded-md border-0 py-1.5 pl-3 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-indigo-600 sm:text-sm sm:leading-6"),e[0]===void 0&&fn(()=>e[5].call(o))},m(c,f){F(c,t,f),m(t,n),m(n,i),m(t,r),m(t,o);for(let h=0;h<u.length;h+=1)u[h]&&u[h].m(o,null);wt(o,e[0],!0),s||(l=J(o,"change",e[5]),s=!0)},p(c,[f]){if(f&4&&$e(i,c[2]),f&3){a=c[1];let h;for(h=0;h<a.length;h+=1){const A=Ut(c,a,h);u[h]?u[h].p(A,f):(u[h]=Xt(A),u[h].c(),u[h].m(o,null))}for(;h<u.length;h+=1)u[h].d(1);u.length=a.length}f&8&&d(o,"name",c[3]),f&3&&wt(o,c[0])},i:le,o:le,d(c){c&&p(t),lt(u,c),s=!1,l()}}}function ri(e,t,n){let{options:i}=t,{selected:r}=t,{label:o}=t,{name:s=void 0}=t,l=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);function a(){r=cn(this),n(0,r),n(1,i)}return e.$$set=u=>{"options"in u&&n(1,i=u.options),"selected"in u&&n(0,r=u.selected),"label"in u&&n(2,o=u.label),"name"in u&&n(3,s=u.name)},[r,i,o,s,l,a]}class tn extends ae{constructor(t){super(),ue(this,t,ri,ii,fe,{options:1,selected:0,label:2,name:3})}}function si(e){let t,n,i,r,o,s;function l(f){e[5](f)}let a={label:"Diffusion Mode",options:e[2]};e[1]!==void 0&&(a.selected=e[1]),t=new tn({props:a}),x.push(()=>ee(t,"selected",l));function u(f){e[6](f)}let c={label:"Diffusion Strength ("+e[0]+")",min:0,max:2,step:.01};return e[0]!==void 0&&(c.value=e[0]),r=new Qe({props:c}),x.push(()=>ee(r,"value",u)),{c(){Y(t.$$.fragment),i=C(),Y(r.$$.fragment)},l(f){G(t.$$.fragment,f),i=P(f),G(r.$$.fragment,f)},m(f,h){Z(t,f,h),F(f,i,h),Z(r,f,h),s=!0},p(f,[h]){const A={};!n&&h&2&&(n=!0,A.selected=f[1],te(()=>n=!1)),t.$set(A);const y={};h&1&&(y.label="Diffusion Strength ("+f[0]+")"),!o&&h&1&&(o=!0,y.value=f[0],te(()=>o=!1)),r.$set(y)},i(f){s||(B(t.$$.fragment,f),B(r.$$.fragment,f),s=!0)},o(f){O(t.$$.fragment,f),O(r.$$.fragment,f),s=!1},d(f){q(t,f),f&&p(i),q(r,f)}}}function oi(e,t,n){let{diffusionStrength:i}=t,{diffusionMatrix:r}=t,{diffusionOriginX:o}=t,s="floyd_steinberg";const l=[{name:"Basic",value:"basic"},{name:"Floyd-Steinberg",value:"floyd_steinberg"},{name:"Atkinson",value:"atkinson"},{name:"Jarvis-Judice-Ninke",value:"jarvis_judice_ninke"}],a={basic:{matrix:[[0,1/2],[1/2,0]],originX:0},floyd_steinberg:{matrix:[[0,0,7/16],[3/16,5/16,1/16]],originX:1},atkinson:{matrix:[[0,0,1/8,1/8],[1/8,1/8,1/8,0],[0,1/8,0,0]],originX:1},jarvis_judice_ninke:{matrix:[[0,0,0,7/48,5/48],[3/48,5/48,7/48,5/48,3/48],[1/48,3/48,5/48,3/48,1/48]],originX:2}};function u(f){s=f,n(1,s)}function c(f){i=f,n(0,i)}return e.$$set=f=>{"diffusionStrength"in f&&n(0,i=f.diffusionStrength),"diffusionMatrix"in f&&n(3,r=f.diffusionMatrix),"diffusionOriginX"in f&&n(4,o=f.diffusionOriginX)},e.$$.update=()=>{if(e.$$.dirty&2){const{matrix:f,originX:h}=a[s];n(3,r=f),n(4,o=h)}},[i,s,l,r,o,u,c]}class li extends ae{constructor(t){super(),ue(this,t,oi,si,fe,{diffusionStrength:0,diffusionMatrix:3,diffusionOriginX:4})}}function Bt(e,t,n){const i=e.slice();return i[4]=t[n],i}function Ot(e){let t,n,i,r=!1,o,s,l=e[4].label+"",a,u,c,f,h,A;return f=dn(e[3][0]),{c(){t=E("label"),n=E("input"),o=C(),s=E("div"),a=H(l),c=C(),this.h()},l(y){t=w(y,"LABEL",{class:!0});var b=S(t);n=w(b,"INPUT",{type:!0,name:!0,class:!0}),o=P(b),s=w(b,"DIV",{class:!0});var g=S(s);a=j(g,l),g.forEach(p),c=P(b),b.forEach(p),this.h()},h(){d(n,"type","radio"),d(n,"name","tabs"),n.__value=i=e[4].value,n.value=n.__value,d(n,"class","sr-only"),d(s,"class",u="flex items-center justify-center py-2 text-sm font-medium text-gray-700 bg-white border-b "+(e[4].value===e[0]?"border-indigo-500 border-b-2":"border-gray-300")+" cursor-pointer hover:bg-gray-50"),d(t,"class","flex-1"),f.p(n)},m(y,b){F(y,t,b),m(t,n),n.checked=n.__value===e[0],m(t,o),m(t,s),m(s,a),m(t,c),h||(A=J(n,"change",e[2]),h=!0)},p(y,b){b&2&&i!==(i=y[4].value)&&(n.__value=i,n.value=n.__value,r=!0),(r||b&3)&&(n.checked=n.__value===y[0]),b&2&&l!==(l=y[4].label+"")&&$e(a,l),b&3&&u!==(u="flex items-center justify-center py-2 text-sm font-medium text-gray-700 bg-white border-b "+(y[4].value===y[0]?"border-indigo-500 border-b-2":"border-gray-300")+" cursor-pointer hover:bg-gray-50")&&d(s,"class",u)},d(y){y&&p(t),f.r(),h=!1,A()}}}function ai(e){let t,n=e[1],i=[];for(let r=0;r<n.length;r+=1)i[r]=Ot(Bt(e,n,r));return{c(){t=E("nav");for(let r=0;r<i.length;r+=1)i[r].c();this.h()},l(r){t=w(r,"NAV",{class:!0});var o=S(t);for(let s=0;s<i.length;s+=1)i[s].l(o);o.forEach(p),this.h()},h(){d(t,"class","flex w-full")},m(r,o){F(r,t,o);for(let s=0;s<i.length;s+=1)i[s]&&i[s].m(t,null)},p(r,[o]){if(o&3){n=r[1];let s;for(s=0;s<n.length;s+=1){const l=Bt(r,n,s);i[s]?i[s].p(l,o):(i[s]=Ot(l),i[s].c(),i[s].m(t,null))}for(;s<i.length;s+=1)i[s].d(1);i.length=n.length}},i:le,o:le,d(r){r&&p(t),lt(i,r)}}}function ui(e,t,n){let{tabs:i}=t,{selected:r}=t;const o=[[]];function s(){r=this.__value,n(0,r)}return e.$$set=l=>{"tabs"in l&&n(1,i=l.tabs),"selected"in l&&n(0,r=l.selected)},[r,i,s,o]}class fi extends ae{constructor(t){super(),ue(this,t,ui,ai,fe,{tabs:1,selected:0})}}const ci=e=>({}),Ft=e=>({});function di(e){let t;const n=e[2].placeholder,i=He(n,e,e[1],Ft),r=i||mi();return{c(){r&&r.c()},l(o){r&&r.l(o)},m(o,s){r&&r.m(o,s),t=!0},p(o,s){i&&i.p&&(!t||s&2)&&Ye(i,n,o,o[1],t?Ge(n,o[1],s,ci):je(o[1]),Ft)},i(o){t||(B(r,o),t=!0)},o(o){O(r,o),t=!1},d(o){r&&r.d(o)}}}function hi(e){let t,n,i,r;return{c(){t=E("canvas"),this.h()},l(o){t=w(o,"CANVAS",{class:!0,style:!0}),S(t).forEach(p),this.h()},h(){d(t,"class","w-full max-h-96 object-contain shadow-lg"),it(t,"image-rendering","pixelated")},m(o,s){F(o,t,s),i||(r=Ne(n=_i.call(null,t,e[0])),i=!0)},p(o,s){n&&at(n.update)&&s&1&&n.update.call(null,o[0])},i:le,o:le,d(o){o&&p(t),i=!1,r()}}}function mi(e){let t,n;return{c(){t=E("span"),n=H("No Image")},l(i){t=w(i,"SPAN",{});var r=S(t);n=j(r,"No Image"),r.forEach(p)},m(i,r){F(i,t,r),m(t,n)},p:le,d(i){i&&p(t)}}}function gi(e){let t,n,i,r;const o=[hi,di],s=[];function l(a,u){return a[0]?0:1}return n=l(e),i=s[n]=o[n](e),{c(){t=E("div"),i.c(),this.h()},l(a){t=w(a,"DIV",{class:!0});var u=S(t);i.l(u),u.forEach(p),this.h()},h(){d(t,"class","w-full aspect-square rounded-lg bg-gray-100 p-8 grid place-items-center")},m(a,u){F(a,t,u),s[n].m(t,null),r=!0},p(a,[u]){let c=n;n=l(a),n===c?s[n].p(a,u):(Ue(),O(s[c],1,1,()=>{s[c]=null}),Xe(),i=s[n],i?i.p(a,u):(i=s[n]=o[n](a),i.c()),B(i,1),i.m(t,null))},i(a){r||(B(i),r=!0)},o(a){O(i),r=!1},d(a){a&&p(t),s[n].d()}}}function _i(e,t){const n=e.getContext("2d");if(!n)return;const i=()=>{e.width=t.width,e.height=t.height,n.putImageData(t,0,0)};let r=null;const o=()=>{r||(r=requestAnimationFrame(()=>{r=null,i()}))};return o(),{destroy(){r&&cancelAnimationFrame(r)},update:s=>{t=s,o()}}}function pi(e,t,n){let{$$slots:i={},$$scope:r}=t,{imageData:o}=t;return e.$$set=s=>{"imageData"in s&&n(0,o=s.imageData),"$$scope"in s&&n(1,r=s.$$scope)},[o,r,i]}class bi extends ae{constructor(t){super(),ue(this,t,pi,gi,fe,{imageData:0})}}function vi(){return new Worker(""+new URL("../workers/worker-09b3192d.js",import.meta.url).href)}let nt=null;async function Ei(e){return nt||(nt=ut(new vi)),await nt.generate(e)}function Wt(e){let t,n,i;function r(s){e[9](s)}let o={label:"Bayer Level ("+e[4]+")",min:0,max:5,step:1};return e[4]!==void 0&&(o.value=e[4]),t=new Qe({props:o}),x.push(()=>ee(t,"value",r)),{c(){Y(t.$$.fragment)},l(s){G(t.$$.fragment,s)},m(s,l){Z(t,s,l),i=!0},p(s,l){const a={};l&16&&(a.label="Bayer Level ("+s[4]+")"),!n&&l&16&&(n=!0,a.value=s[4],te(()=>n=!1)),t.$set(a)},i(s){i||(B(t.$$.fragment,s),i=!0)},o(s){O(t.$$.fragment,s),i=!1},d(s){q(t,s)}}}function zt(e){let t,n,i;function r(s){e[10](s)}let o={aspectRatio:1,minWidth:1,minHeight:1,maxHeight:3e3,maxWidth:3e3};return e[5]!==void 0&&(o.width=e[5]),t=new jt({props:o}),x.push(()=>ee(t,"width",r)),{c(){Y(t.$$.fragment)},l(s){G(t.$$.fragment,s)},m(s,l){Z(t,s,l),i=!0},p(s,l){const a={};!n&&l&32&&(n=!0,a.width=s[5],te(()=>n=!1)),t.$set(a)},i(s){i||(B(t.$$.fragment,s),i=!0)},o(s){O(t.$$.fragment,s),i=!1},d(s){q(t,s)}}}function wi(e){let t,n;return{c(){t=E("span"),n=H("Loading Threshold Map"),this.h()},l(i){t=w(i,"SPAN",{slot:!0});var r=S(t);n=j(r,"Loading Threshold Map"),r.forEach(p),this.h()},h(){d(t,"slot","placeholder")},m(i,r){F(i,t,r),m(t,n)},p:le,d(i){i&&p(t)}}}function Ai(e){let t,n,i,r,o,s,l,a,u,c,f,h,A;function y(_){e[8](_)}let b={label:"Threshold Map",options:e[6]};e[3]!==void 0&&(b.selected=e[3]),t=new tn({props:b}),x.push(()=>ee(t,"selected",y));let g=e[3]==="bayer"&&Wt(e),L=e[3]==="white_noise"&&zt(e);s=new bi({props:{imageData:e[0],$$slots:{placeholder:[wi]},$$scope:{ctx:e}}});function R(_){e[11](_)}let k={label:"Threshold ("+e[1]+")",min:0,max:1,step:.01};e[1]!==void 0&&(k.value=e[1]),a=new Qe({props:k}),x.push(()=>ee(a,"value",R));function v(_){e[12](_)}let I={label:"Noise Intensity ("+e[2]+")",min:0,max:1.5,step:.01};return e[2]!==void 0&&(I.value=e[2]),f=new Qe({props:I}),x.push(()=>ee(f,"value",v)),{c(){Y(t.$$.fragment),i=C(),g&&g.c(),r=C(),L&&L.c(),o=C(),Y(s.$$.fragment),l=C(),Y(a.$$.fragment),c=C(),Y(f.$$.fragment)},l(_){G(t.$$.fragment,_),i=P(_),g&&g.l(_),r=P(_),L&&L.l(_),o=P(_),G(s.$$.fragment,_),l=P(_),G(a.$$.fragment,_),c=P(_),G(f.$$.fragment,_)},m(_,T){Z(t,_,T),F(_,i,T),g&&g.m(_,T),F(_,r,T),L&&L.m(_,T),F(_,o,T),Z(s,_,T),F(_,l,T),Z(a,_,T),F(_,c,T),Z(f,_,T),A=!0},p(_,[T]){const N={};!n&&T&8&&(n=!0,N.selected=_[3],te(()=>n=!1)),t.$set(N),_[3]==="bayer"?g?(g.p(_,T),T&8&&B(g,1)):(g=Wt(_),g.c(),B(g,1),g.m(r.parentNode,r)):g&&(Ue(),O(g,1,1,()=>{g=null}),Xe()),_[3]==="white_noise"?L?(L.p(_,T),T&8&&B(L,1)):(L=zt(_),L.c(),B(L,1),L.m(o.parentNode,o)):L&&(Ue(),O(L,1,1,()=>{L=null}),Xe());const W={};T&1&&(W.imageData=_[0]),T&8192&&(W.$$scope={dirty:T,ctx:_}),s.$set(W);const z={};T&2&&(z.label="Threshold ("+_[1]+")"),!u&&T&2&&(u=!0,z.value=_[1],te(()=>u=!1)),a.$set(z);const D={};T&4&&(D.label="Noise Intensity ("+_[2]+")"),!h&&T&4&&(h=!0,D.value=_[2],te(()=>h=!1)),f.$set(D)},i(_){A||(B(t.$$.fragment,_),B(g),B(L),B(s.$$.fragment,_),B(a.$$.fragment,_),B(f.$$.fragment,_),A=!0)},o(_){O(t.$$.fragment,_),O(g),O(L),O(s.$$.fragment,_),O(a.$$.fragment,_),O(f.$$.fragment,_),A=!1},d(_){q(t,_),_&&p(i),g&&g.d(_),_&&p(r),L&&L.d(_),_&&p(o),q(s,_),_&&p(l),q(a,_),_&&p(c),q(f,_)}}}function yi(e,t,n){let i,{thresholdMap:r}=t,{threshold:o}=t,{noiseIntensity:s}=t,l="bayer";const a=[{name:"Bayer",value:"bayer"},{name:"Blue Noise",value:"blue_noise"},{name:"White Noise",value:"white_noise"}];let u=3,c=256;function f(g){l=g,n(3,l)}function h(g){u=g,n(4,u)}function A(g){c=g,n(5,c)}function y(g){o=g,n(1,o)}function b(g){s=g,n(2,s)}return e.$$set=g=>{"thresholdMap"in g&&n(0,r=g.thresholdMap),"threshold"in g&&n(1,o=g.threshold),"noiseIntensity"in g&&n(2,s=g.noiseIntensity)},e.$$.update=()=>{if(e.$$.dirty&32&&n(7,i=c),e.$$.dirty&184&&"ImageData"in globalThis){let g;switch(l){case"bayer":g={mode:"bayer",level:u};break;case"blue_noise":g={mode:"blue_noise"};break;case"white_noise":g={mode:"white_noise",width:c,height:i};break}Ei(g).then(L=>n(0,r=L))}},[r,o,s,l,u,c,a,i,f,h,A,y,b]}class ki extends ae{constructor(t){super(),ue(this,t,yi,Ai,fe,{thresholdMap:0,threshold:1,noiseIntensity:2})}}function Vt(e,t,n){const i=e.slice();return i[37]=t[n],i}function Ti(e){let t,n,i,r,o,s,l,a,u,c,f,h,A,y,b,g,L,R,k=e[16],v=[];for(let I=0;I<k.length;I+=1)v[I]=Ht(Vt(e,k,I));return c=new Oe({props:{src:pn,class:"w-12 h-12 text-gray-400"}}),{c(){t=E("div"),n=E("div"),i=E("p"),r=H("Select or Drop an Image to Start"),o=C(),s=E("div");for(let I=0;I<v.length;I+=1)v[I].c();l=C(),a=E("label"),u=E("div"),Y(c.$$.fragment),f=C(),h=E("span"),A=H("Choose an Image"),y=C(),b=E("input"),this.h()},l(I){t=w(I,"DIV",{class:!0});var _=S(t);n=w(_,"DIV",{class:!0});var T=S(n);i=w(T,"P",{class:!0});var N=S(i);r=j(N,"Select or Drop an Image to Start"),N.forEach(p),o=P(T),s=w(T,"DIV",{class:!0});var W=S(s);for(let ne=0;ne<v.length;ne+=1)v[ne].l(W);l=P(W),a=w(W,"LABEL",{for:!0,class:!0});var z=S(a);u=w(z,"DIV",{class:!0});var D=S(u);G(c.$$.fragment,D),D.forEach(p),f=P(z),h=w(z,"SPAN",{class:!0});var U=S(h);A=j(U,"Choose an Image"),U.forEach(p),y=P(z),b=w(z,"INPUT",{type:!0,class:!0,id:!0,accept:!0}),z.forEach(p),W.forEach(p),T.forEach(p),_.forEach(p),this.h()},h(){d(i,"class","text-2xl text-gray-500 text-center"),d(u,"class","grid place-items-center h-full w-full"),d(h,"class","sr-only"),d(b,"type","file"),d(b,"class","sr-only"),d(b,"id","image-input"),d(b,"accept","image/*"),d(a,"for","image-input"),d(a,"class","block spect-square h-24 w-24 object-cover rounded-md shadow-md border-2 border-white bg-white hover:bg-gray-100"),d(s,"class","flex gap-3 justify-center flex-wrap"),d(n,"class","grid gap-4"),d(t,"class","w-full h-full grid place-items-center px-8")},m(I,_){F(I,t,_),m(t,n),m(n,i),m(i,r),m(n,o),m(n,s);for(let T=0;T<v.length;T+=1)v[T]&&v[T].m(s,null);m(s,l),m(s,a),m(a,u),Z(c,u,null),m(a,f),m(a,h),m(h,A),m(a,y),m(a,b),g=!0,L||(R=J(b,"input",e[19]),L=!0)},p(I,_){if(_[0]&1114112){k=I[16];let T;for(T=0;T<k.length;T+=1){const N=Vt(I,k,T);v[T]?v[T].p(N,_):(v[T]=Ht(N),v[T].c(),v[T].m(s,l))}for(;T<v.length;T+=1)v[T].d(1);v.length=k.length}},i(I){g||(B(c.$$.fragment,I),g=!0)},o(I){O(c.$$.fragment,I),g=!1},d(I){I&&p(t),lt(v,I),q(c),L=!1,R()}}}function Si(e){let t,n,i,r,o,s,l,a;return n=new On({props:{$$slots:{right:[Mi],left:[Li]},$$scope:{ctx:e}}}),o=new Oe({props:{src:bn,class:"w-5 h-5 text-white"}}),{c(){t=E("div"),Y(n.$$.fragment),i=C(),r=E("button"),Y(o.$$.fragment),this.h()},l(u){t=w(u,"DIV",{class:!0});var c=S(t);G(n.$$.fragment,c),i=P(c),r=w(c,"BUTTON",{class:!0,title:!0});var f=S(r);G(o.$$.fragment,f),f.forEach(p),c.forEach(p),this.h()},h(){d(r,"class","absolute top-0 left-0 m-4 p-2 bg-black bg-opacity-40 rounded-full"),d(r,"title","Close Image & Reset"),d(t,"class","w-full h-full relative")},m(u,c){F(u,t,c),Z(n,t,null),m(t,i),m(t,r),Z(o,r,null),s=!0,l||(a=J(r,"click",e[23]),l=!0)},p(u,c){const f={};c[0]&65531|c[1]&512&&(f.$$scope={dirty:c,ctx:u}),n.$set(f)},i(u){s||(B(n.$$.fragment,u),B(o.$$.fragment,u),s=!0)},o(u){O(n.$$.fragment,u),O(o.$$.fragment,u),s=!1},d(u){u&&p(t),q(n),q(o),l=!1,a()}}}function Ht(e){let t,n,i,r,o;function s(){return e[24](e[37])}return{c(){t=E("button"),n=E("img"),this.h()},l(l){t=w(l,"BUTTON",{class:!0});var a=S(t);n=w(a,"IMG",{class:!0,src:!0,alt:!0}),a.forEach(p),this.h()},h(){d(n,"class","aspect-square h-24 w-24 object-cover rounded-md shadow-md border-2 border-white"),st(n.src,i=e[37])||d(n,"src",i),d(n,"alt",""),d(t,"class","hover:opacity-75 transition-opacity")},m(l,a){F(l,t,a),m(t,n),r||(o=J(t,"click",s),r=!0)},p(l,a){e=l},d(l){l&&p(t),r=!1,o()}}}function Li(e){let t,n,i;return{c(){t=E("img"),this.h()},l(r){t=w(r,"IMG",{slot:!0,src:!0,alt:!0,style:!0,class:!0}),this.h()},h(){d(t,"slot","left"),st(t.src,n=e[1].src)||d(t,"src",n),d(t,"alt",""),d(t,"style",i=`width: ${e[0]}px; height: ${e[15]}px`),d(t,"class","pixelated max-w-none shadow-lg svelte-1tfolzf")},m(r,o){F(r,t,o)},p(r,o){o[0]&2&&!st(t.src,n=r[1].src)&&d(t,"src",n),o[0]&32769&&i!==(i=`width: ${r[0]}px; height: ${r[15]}px`)&&d(t,"style",i)},d(r){r&&p(t)}}}function Ii(e){let t,n,i,r,o;return{c(){t=E("canvas"),this.h()},l(s){t=w(s,"CANVAS",{class:!0,style:!0,width:!0,height:!0,"aria-label":!0}),S(t).forEach(p),this.h()},h(){d(t,"class","pixelated shadow-lg svelte-1tfolzf"),d(t,"style",n=`width: ${e[0]}px; height: ${e[15]}px`),d(t,"width",e[0]),d(t,"height",e[15]),d(t,"aria-label","Dithered Image")},m(s,l){F(s,t,l),e[22](t),r||(o=Ne(i=Tn.call(null,t,{image:e[7],threshold:e[10],noiseIntensity:e[11],monochrome:e[3],colorLight:e[4],colorDark:e[5],output_width:e[0],output_height:e[15],thresholdMap:e[9]})),r=!0)},p(s,l){l[0]&32769&&n!==(n=`width: ${s[0]}px; height: ${s[15]}px`)&&d(t,"style",n),l[0]&1&&d(t,"width",s[0]),l[0]&32768&&d(t,"height",s[15]),i&&at(i.update)&&l[0]&36537&&i.update.call(null,{image:s[7],threshold:s[10],noiseIntensity:s[11],monochrome:s[3],colorLight:s[4],colorDark:s[5],output_width:s[0],output_height:s[15],thresholdMap:s[9]})},d(s){s&&p(t),e[22](null),r=!1,o()}}}function Di(e){let t,n,i,r,o;return{c(){t=E("canvas"),this.h()},l(s){t=w(s,"CANVAS",{class:!0,style:!0,width:!0,height:!0}),S(t).forEach(p),this.h()},h(){d(t,"class","pixelated shadow-lg svelte-1tfolzf"),d(t,"style",n=`width: ${e[0]}px; height: ${e[15]}px`),d(t,"width",e[0]),d(t,"height",e[15])},m(s,l){F(s,t,l),e[21](t),r||(o=Ne(i=ei.call(null,t,{image:e[7],output_width:e[0],output_height:e[15],monochrome:e[3],colorLight:e[4],colorDark:e[5],diffusionStrength:e[12],diffusionMatrix:e[13],diffusionMatrixOriginX:e[14]})),r=!0)},p(s,l){l[0]&32769&&n!==(n=`width: ${s[0]}px; height: ${s[15]}px`)&&d(t,"style",n),l[0]&1&&d(t,"width",s[0]),l[0]&32768&&d(t,"height",s[15]),i&&at(i.update)&&l[0]&61625&&i.update.call(null,{image:s[7],output_width:s[0],output_height:s[15],monochrome:s[3],colorLight:s[4],colorDark:s[5],diffusionStrength:s[12],diffusionMatrix:s[13],diffusionMatrixOriginX:s[14]})},d(s){s&&p(t),e[21](null),r=!1,o()}}}function Mi(e){let t;function n(o,s){if(o[8]==="error_diffusion")return Di;if(o[9])return Ii}let i=n(e),r=i&&i(e);return{c(){r&&r.c(),t=At()},l(o){r&&r.l(o),t=At()},m(o,s){r&&r.m(o,s),F(o,t,s)},p(o,s){i===(i=n(o))&&r?r.p(o,s):(r&&r.d(1),r=i&&i(o),r&&(r.c(),r.m(t.parentNode,t)))},d(o){r&&r.d(o),o&&p(t)}}}function Ri(e){let t,n,i;return t=new Oe({props:{src:_n,class:"w-4 h-4"}}),{c(){Y(t.$$.fragment),n=H(`
				Save`)},l(r){G(t.$$.fragment,r),n=j(r,`
				Save`)},m(r,o){Z(t,r,o),F(r,n,o),i=!0},p:le,i(r){i||(B(t.$$.fragment,r),i=!0)},o(r){O(t.$$.fragment,r),i=!1},d(r){q(t,r),r&&p(n)}}}function Ci(e){let t,n,i,r,o;function s(c){e[31](c)}function l(c){e[32](c)}function a(c){e[33](c)}let u={};return e[9]!==void 0&&(u.thresholdMap=e[9]),e[11]!==void 0&&(u.noiseIntensity=e[11]),e[10]!==void 0&&(u.threshold=e[10]),t=new ki({props:u}),x.push(()=>ee(t,"thresholdMap",s)),x.push(()=>ee(t,"noiseIntensity",l)),x.push(()=>ee(t,"threshold",a)),{c(){Y(t.$$.fragment)},l(c){G(t.$$.fragment,c)},m(c,f){Z(t,c,f),o=!0},p(c,f){const h={};!n&&f[0]&512&&(n=!0,h.thresholdMap=c[9],te(()=>n=!1)),!i&&f[0]&2048&&(i=!0,h.noiseIntensity=c[11],te(()=>i=!1)),!r&&f[0]&1024&&(r=!0,h.threshold=c[10],te(()=>r=!1)),t.$set(h)},i(c){o||(B(t.$$.fragment,c),o=!0)},o(c){O(t.$$.fragment,c),o=!1},d(c){q(t,c)}}}function Pi(e){let t,n,i,r,o;function s(c){e[28](c)}function l(c){e[29](c)}function a(c){e[30](c)}let u={};return e[12]!==void 0&&(u.diffusionStrength=e[12]),e[13]!==void 0&&(u.diffusionMatrix=e[13]),e[14]!==void 0&&(u.diffusionOriginX=e[14]),t=new li({props:u}),x.push(()=>ee(t,"diffusionStrength",s)),x.push(()=>ee(t,"diffusionMatrix",l)),x.push(()=>ee(t,"diffusionOriginX",a)),{c(){Y(t.$$.fragment)},l(c){G(t.$$.fragment,c)},m(c,f){Z(t,c,f),o=!0},p(c,f){const h={};!n&&f[0]&4096&&(n=!0,h.diffusionStrength=c[12],te(()=>n=!1)),!i&&f[0]&8192&&(i=!0,h.diffusionMatrix=c[13],te(()=>i=!1)),!r&&f[0]&16384&&(r=!0,h.diffusionOriginX=c[14],te(()=>r=!1)),t.$set(h)},i(c){o||(B(t.$$.fragment,c),o=!0)},o(c){O(t.$$.fragment,c),o=!1},d(c){q(t,c)}}}function Yt(e){let t,n,i,r,o,s,l,a,u,c,f,h,A,y;return{c(){t=E("fieldset"),n=E("div"),i=E("input"),r=C(),o=E("label"),s=H("Light"),l=C(),a=E("div"),u=E("input"),c=C(),f=E("label"),h=H("Dark"),this.h()},l(b){t=w(b,"FIELDSET",{});var g=S(t);n=w(g,"DIV",{class:!0});var L=S(n);i=w(L,"INPUT",{type:!0,name:!0,id:!0}),r=P(L),o=w(L,"LABEL",{for:!0,class:!0});var R=S(o);s=j(R,"Light"),R.forEach(p),L.forEach(p),l=P(g),a=w(g,"DIV",{class:!0});var k=S(a);u=w(k,"INPUT",{type:!0,name:!0,id:!0}),c=P(k),f=w(k,"LABEL",{for:!0,class:!0});var v=S(f);h=j(v,"Dark"),v.forEach(p),k.forEach(p),g.forEach(p),this.h()},h(){d(i,"type","color"),d(i,"name","color-light"),d(i,"id","color-light"),d(o,"for","color-light"),d(o,"class","font-medium text-gray-900"),d(n,"class","flex gap-3"),d(u,"type","color"),d(u,"name","color-dark"),d(u,"id","color-dark"),d(f,"for","color-dark"),d(f,"class","font-medium text-gray-900"),d(a,"class","flex gap-3")},m(b,g){F(b,t,g),m(t,n),m(n,i),Me(i,e[4]),m(n,r),m(n,o),m(o,s),m(t,l),m(t,a),m(a,u),Me(u,e[5]),m(a,c),m(a,f),m(f,h),A||(y=[J(i,"input",e[35]),J(u,"input",e[36])],A=!0)},p(b,g){g[0]&16&&Me(i,b[4]),g[0]&32&&Me(u,b[5])},d(b){b&&p(t),A=!1,Be(y)}}}function Ni(e){let t,n,i,r,o,s,l,a,u,c,f,h,A,y,b,g,L,R,k,v,I,_,T,N,W,z,D,U,ne,Q,se,he,me,ie,oe,K,ge,_e,ce,X,re,de,Re,ft;const ct=[Si,Ti],pe=[];function dt(M,V){return M[7]&&M[1]?0:1}o=dt(e),s=pe[o]=ct[o](e),A=new In({props:{disabled:!e[1],$$slots:{default:[Ri]},$$scope:{ctx:e}}}),A.$on("click",e[17]);function nn(M){e[25](M)}function rn(M){e[26](M)}let Je={minWidth:12,minHeight:12,maxHeight:5e3,maxWidth:5e3};e[0]!==void 0&&(Je.width=e[0]),e[2]!==void 0&&(Je.aspectRatio=e[2]),v=new jt({props:Je}),x.push(()=>ee(v,"width",nn)),x.push(()=>ee(v,"aspectRatio",rn));function sn(M){e[27](M)}let ht={tabs:[{label:"Ordered",value:"ordered"},{label:"Error Diffusion",value:"error_diffusion"}]};e[8]!==void 0&&(ht.selected=e[8]),N=new fi({props:ht}),x.push(()=>ee(N,"selected",sn));const mt=[Pi,Ci],be=[];function gt(M,V){return M[8]==="error_diffusion"?0:M[8]==="ordered"?1:-1}~(D=gt(e))&&(U=be[D]=mt[D](e));let $=e[3]&&Yt(e);return{c(){t=C(),n=C(),i=E("main"),r=E("section"),s.c(),l=C(),a=E("aside"),u=E("header"),c=E("h1"),f=H("Dither Studio"),h=C(),Y(A.$$.fragment),y=C(),b=E("section"),g=E("div"),L=E("h2"),R=H("Output Options"),k=C(),Y(v.$$.fragment),T=C(),Y(N.$$.fragment),z=C(),U&&U.c(),ne=C(),Q=E("div"),se=E("h2"),he=H("Dithering Options"),me=C(),ie=E("div"),oe=E("div"),K=E("input"),ge=C(),_e=E("div"),ce=E("label"),X=H("Monochrome"),re=C(),$&&$.c(),this.h()},l(M){hn("svelte-1hm2pfs",document.head).forEach(p),t=P(M),n=P(M),i=w(M,"MAIN",{class:!0});var ve=S(i);r=w(ve,"SECTION",{class:!0});var Te=S(r);s.l(Te),Te.forEach(p),l=P(ve),a=w(ve,"ASIDE",{class:!0});var Ee=S(a);u=w(Ee,"HEADER",{class:!0});var ye=S(u);c=w(ye,"H1",{class:!0});var Se=S(c);f=j(Se,"Dither Studio"),Se.forEach(p),h=P(ye),G(A.$$.fragment,ye),ye.forEach(p),y=P(Ee),b=w(Ee,"SECTION",{class:!0});var we=S(b);g=w(we,"DIV",{});var Fe=S(g);L=w(Fe,"H2",{class:!0});var _t=S(L);R=j(_t,"Output Options"),_t.forEach(p),k=P(Fe),G(v.$$.fragment,Fe),Fe.forEach(p),T=P(we),G(N.$$.fragment,we),z=P(we),U&&U.l(we),ne=P(we),Q=w(we,"DIV",{class:!0});var Le=S(Q);se=w(Le,"H2",{class:!0});var pt=S(se);he=j(pt,"Dithering Options"),pt.forEach(p),me=P(Le),ie=w(Le,"DIV",{class:!0});var We=S(ie);oe=w(We,"DIV",{class:!0});var bt=S(oe);K=w(bt,"INPUT",{type:!0,id:!0,class:!0}),bt.forEach(p),ge=P(We),_e=w(We,"DIV",{class:!0});var vt=S(_e);ce=w(vt,"LABEL",{for:!0,class:!0});var Et=S(ce);X=j(Et,"Monochrome"),Et.forEach(p),vt.forEach(p),We.forEach(p),re=P(Le),$&&$.l(Le),Le.forEach(p),we.forEach(p),Ee.forEach(p),ve.forEach(p),this.h()},h(){document.title="Dithering",d(r,"class","flex-1 overflow-hidden select-none"),d(c,"class","font-bold"),d(u,"class","py-4 px-4 flex-shrink-0 shadow-sm z-10 flex gap-2 items-center justify-between"),d(L,"class","text-base font-semibold leading-7 text-black mb-4"),d(se,"class","text-base font-semibold leading-7 text-black mb-2"),d(K,"type","checkbox"),d(K,"id","monochrome"),d(K,"class","h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600"),d(oe,"class","flex h-6 items-center"),d(ce,"for","monochrome"),d(ce,"class","font-medium text-gray-900"),d(_e,"class","ml-3 text-sm leading-6"),d(ie,"class","relative flex items-start"),d(Q,"class","grid gap-3"),d(b,"class","grid gap-5 overflow-y-auto overflow-x-visible pt-8 px-4 safe-padding-bottom svelte-1tfolzf"),d(a,"class","bg-white w-full md:max-w-md border-t md:border-t-0 md:border-l border-l-0 border-gray-100 z-50 overflow-y-hidden md:h-full flex-1 shadow-lg flex flex-col divide-y divide-gray-200 justify-start"),d(i,"class","w-screen max-w-screen h-screen max-h-screen flex md:flex-row flex-col bg-gray-300")},m(M,V){F(M,t,V),F(M,n,V),F(M,i,V),m(i,r),pe[o].m(r,null),m(i,l),m(i,a),m(a,u),m(u,c),m(c,f),m(u,h),Z(A,u,null),m(a,y),m(a,b),m(b,g),m(g,L),m(L,R),m(g,k),Z(v,g,null),m(b,T),Z(N,b,null),m(b,z),~D&&be[D].m(b,null),m(b,ne),m(b,Q),m(Q,se),m(se,he),m(Q,me),m(Q,ie),m(ie,oe),m(oe,K),K.checked=e[3],m(ie,ge),m(ie,_e),m(_e,ce),m(ce,X),m(Q,re),$&&$.m(Q,null),de=!0,Re||(ft=[J(document.body,"drop",rt(e[18])),J(document.body,"dragover",rt(Ui)),J(K,"change",e[34])],Re=!0)},p(M,V){let ve=o;o=dt(M),o===ve?pe[o].p(M,V):(Ue(),O(pe[ve],1,1,()=>{pe[ve]=null}),Xe(),s=pe[o],s?s.p(M,V):(s=pe[o]=ct[o](M),s.c()),B(s,1),s.m(r,null));const Te={};V[0]&2&&(Te.disabled=!M[1]),V[1]&512&&(Te.$$scope={dirty:V,ctx:M}),A.$set(Te);const Ee={};!I&&V[0]&1&&(I=!0,Ee.width=M[0],te(()=>I=!1)),!_&&V[0]&4&&(_=!0,Ee.aspectRatio=M[2],te(()=>_=!1)),v.$set(Ee);const ye={};!W&&V[0]&256&&(W=!0,ye.selected=M[8],te(()=>W=!1)),N.$set(ye);let Se=D;D=gt(M),D===Se?~D&&be[D].p(M,V):(U&&(Ue(),O(be[Se],1,1,()=>{be[Se]=null}),Xe()),~D?(U=be[D],U?U.p(M,V):(U=be[D]=mt[D](M),U.c()),B(U,1),U.m(b,ne)):U=null),V[0]&8&&(K.checked=M[3]),M[3]?$?$.p(M,V):($=Yt(M),$.c(),$.m(Q,null)):$&&($.d(1),$=null)},i(M){de||(B(s),B(A.$$.fragment,M),B(v.$$.fragment,M),B(N.$$.fragment,M),B(U),de=!0)},o(M){O(s),O(A.$$.fragment,M),O(v.$$.fragment,M),O(N.$$.fragment,M),O(U),de=!1},d(M){M&&p(t),M&&p(n),M&&p(i),pe[o].d(),q(A),q(v),q(N),~D&&be[D].d(),$&&$.d(),Re=!1,Be(ft)}}}const Ui=()=>{};function Xi(e,t,n){let i,r;const o=[Fn,Wn,zn];let s=!1,l="#ede6cc",a="#21263f",u=null,c=300,f=null,h=null;async function A(){u&&await Dn(u,"dithered","png")}async function y(X){var de;const re=(de=X.dataTransfer)==null?void 0:de.files[0];if(re){if(!re.type.startsWith("image/")){alert("Please drop an image file");return}try{n(1,f=await It(re))}catch(Re){alert("Failed to load image"),console.error(Re)}}}async function b(X){const re=X.target.files[0];if(re)try{n(1,f=await It(re))}catch(de){alert("Failed to load image"),console.error(de)}}async function g(X){const re=new Image;re.onload=()=>{n(1,f=re)},re.src=X}let L="ordered",R=null,k=.5,v=.3,I=1,_=[[1]],T=0;function N(X){x[X?"unshift":"push"](()=>{u=X,n(6,u)})}function W(X){x[X?"unshift":"push"](()=>{u=X,n(6,u)})}const z=()=>n(1,f=null),D=X=>g(X);function U(X){c=X,n(0,c)}function ne(X){r=X,n(2,r),n(1,f)}function Q(X){L=X,n(8,L)}function se(X){I=X,n(12,I)}function he(X){_=X,n(13,_)}function me(X){T=X,n(14,T)}function ie(X){R=X,n(9,R)}function oe(X){v=X,n(11,v)}function K(X){k=X,n(10,k)}function ge(){s=this.checked,n(3,s)}function _e(){l=this.value,n(4,l)}function ce(){a=this.value,n(5,a)}return e.$$.update=()=>{e.$$.dirty[0]&2&&n(2,r=f!=null&&f.width&&(f!=null&&f.height)?f.width/f.height:1),e.$$.dirty[0]&5&&n(15,i=Math.round(c/r)),e.$$.dirty[0]&2&&(f?n(7,h=Mn(f)):n(7,h=null))},[c,f,r,s,l,a,u,h,L,R,k,v,I,_,T,i,o,A,y,b,g,N,W,z,D,U,ne,Q,se,he,me,ie,oe,K,ge,_e,ce]}class Wi extends ae{constructor(t){super(),ue(this,t,Xi,Ni,fe,{},null,[-1,-1])}}export{Wi as component};
