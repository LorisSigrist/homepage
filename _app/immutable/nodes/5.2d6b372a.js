var zt=Object.defineProperty;var Yt=(e,t,n)=>t in e?zt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Le=(e,t,n)=>(Yt(e,typeof t!="symbol"?t+"":t,n),n);import{S as Ae,i as we,s as ye,k as g,q,a as k,y as te,l as v,m as A,r as Q,h as p,c as M,z as ne,n as c,b as G,G as h,A as re,N as K,g as B,d as $,B as ie,Q as Ce,R as Wt,T as _t,u as it,H as be,U as Bt,V as Gt,O as De,P as jt,C as qe,D as Qe,E as Ke,F as Je,W as Ht,p as et,X as Oe,Y as tt,w as de,Z as Pt,_ as ve,J as Zt,f as Xe,$ as Ee,v as Fe,M as nt}from"../chunks/index.47904ce3.js";/* empty css                          */import{I as Ue,L as qt,A as Qt,a as Kt,P as Jt,X as en}from"../chunks/Icon.6cd62dd7.js";function tn(e){let t,n,r,s,i,o,a,l,u,f,d,m,L,C,w,y,D,S,b,_,T,P,I,O,x,F;return L=new Ue({props:{src:qt,class:"w-4 h-4",solid:!0}}),{c(){t=g("fieldset"),n=g("div"),r=g("label"),s=q("Width"),i=k(),o=g("div"),a=g("input"),l=k(),u=g("div"),f=q("px"),d=k(),m=g("span"),te(L.$$.fragment),C=k(),w=g("div"),y=g("label"),D=q("Height"),S=k(),b=g("div"),_=g("input"),T=k(),P=g("div"),I=q("px"),this.h()},l(U){t=v(U,"FIELDSET",{class:!0});var N=A(t);n=v(N,"DIV",{class:!0});var J=A(n);r=v(J,"LABEL",{for:!0,class:!0});var ae=A(r);s=Q(ae,"Width"),ae.forEach(p),i=M(J),o=v(J,"DIV",{class:!0});var ee=A(o);a=v(ee,"INPUT",{name:!0,id:!0,type:!0,min:!0,max:!0,step:!0,class:!0,placeholder:!0}),l=M(ee),u=v(ee,"DIV",{class:!0});var he=A(u);f=Q(he,"px"),he.forEach(p),ee.forEach(p),J.forEach(p),d=M(N),m=v(N,"SPAN",{class:!0});var fe=A(m);ne(L.$$.fragment,fe),fe.forEach(p),C=M(N),w=v(N,"DIV",{class:!0});var le=A(w);y=v(le,"LABEL",{for:!0,class:!0});var se=A(y);D=Q(se,"Height"),se.forEach(p),S=M(le),b=v(le,"DIV",{class:!0});var oe=A(b);_=v(oe,"INPUT",{type:!0,id:!0,name:!0,min:!0,max:!0,step:!0,class:!0,placeholder:!0}),T=M(oe),P=v(oe,"DIV",{class:!0});var R=A(P);I=Q(R,"px"),R.forEach(p),oe.forEach(p),le.forEach(p),N.forEach(p),this.h()},h(){c(r,"for","width-"+e[4]),c(r,"class","block text-sm font-medium leading-6 text-gray-900"),c(a,"name","width"),c(a,"id","width-"+e[4]),c(a,"type","number"),c(a,"min","12"),c(a,"max","3000"),c(a,"step","1"),a.value=e[0],c(a,"class","block w-full rounded-md border-0 py-1.5 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"),c(a,"placeholder","600"),c(u,"class","pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400"),c(o,"class","relative mt-2 rounded-md shadow-sm"),c(n,"class","w-full"),c(m,"class","text-gray-500 pb-2 cursor-not-allowed"),c(y,"for","height-"+e[5]),c(y,"class","block text-sm font-medium leading-6 text-gray-900"),c(_,"type","number"),c(_,"id","height-"+e[5]),c(_,"name","height"),c(_,"min","12"),c(_,"max","3000"),c(_,"step","1"),_.value=e[1],c(_,"class","block w-full rounded-md border-0 py-1.5 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"),c(_,"placeholder","340"),c(P,"class","pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400"),c(b,"class","relative mt-2 rounded-md shadow-sm"),c(w,"class","w-full"),c(t,"class","flex gap-3 items-end justify-between")},m(U,N){G(U,t,N),h(t,n),h(n,r),h(r,s),h(n,i),h(n,o),h(o,a),h(o,l),h(o,u),h(u,f),h(t,d),h(t,m),re(L,m,null),h(t,C),h(t,w),h(w,y),h(y,D),h(w,S),h(w,b),h(b,_),h(b,T),h(b,P),h(P,I),O=!0,x||(F=[K(a,"input",e[2]),K(_,"input",e[3])],x=!0)},p(U,[N]){(!O||N&1&&a.value!==U[0])&&(a.value=U[0]),(!O||N&2&&_.value!==U[1])&&(_.value=U[1])},i(U){O||(B(L.$$.fragment,U),O=!0)},o(U){$(L.$$.fragment,U),O=!1},d(U){U&&p(t),ie(L),x=!1,Ce(F)}}}function gt(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}function nn(e,t,n){let r,{width:s}=t,{aspectRatio:i}=t;function o(f){const d=f.target.value;d&&n(0,s=d)}function a(f){const d=f.target.value;d&&n(0,s=Math.round(i*d))}let l=gt(),u=gt();return e.$$set=f=>{"width"in f&&n(0,s=f.width),"aspectRatio"in f&&n(6,i=f.aspectRatio)},e.$$.update=()=>{e.$$.dirty&65&&n(1,r=Math.round(s/i))},[s,r,o,a,l,u,i]}class Nt extends Ae{constructor(t){super(),we(this,t,nn,tn,ye,{width:0,aspectRatio:6})}}function vt(e,t,n){const r=e.slice();return r[6]=t[n],r}function Et(e){let t,n=e[6].name+"",r,s,i;return{c(){t=g("option"),r=q(n),this.h()},l(o){t=v(o,"OPTION",{});var a=A(t);r=Q(a,n),a.forEach(p),this.h()},h(){t.__value=s=e[6].value,t.value=t.__value,t.selected=i=e[6].value===e[0]},m(o,a){G(o,t,a),h(t,r)},p(o,a){a&2&&n!==(n=o[6].name+"")&&it(r,n),a&2&&s!==(s=o[6].value)&&(t.__value=s,t.value=t.__value),a&3&&i!==(i=o[6].value===o[0])&&(t.selected=i)},d(o){o&&p(t)}}}function rn(e){let t,n,r,s,i,o,a,l=e[1],u=[];for(let f=0;f<l.length;f+=1)u[f]=Et(vt(e,l,f));return{c(){t=g("div"),n=g("label"),r=q(e[2]),s=k(),i=g("select");for(let f=0;f<u.length;f+=1)u[f].c();this.h()},l(f){t=v(f,"DIV",{});var d=A(t);n=v(d,"LABEL",{for:!0,class:!0});var m=A(n);r=Q(m,e[2]),m.forEach(p),s=M(d),i=v(d,"SELECT",{id:!0,name:!0,class:!0});var L=A(i);for(let C=0;C<u.length;C+=1)u[C].l(L);L.forEach(p),d.forEach(p),this.h()},h(){c(n,"for",e[4]),c(n,"class","block text-sm font-medium leading-6 text-gray-900"),c(i,"id",e[4]),c(i,"name",e[3]),c(i,"class","mt-2 block w-full rounded-md border-0 py-1.5 pl-3 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-indigo-600 sm:text-sm sm:leading-6"),e[0]===void 0&&Wt(()=>e[5].call(i))},m(f,d){G(f,t,d),h(t,n),h(n,r),h(t,s),h(t,i);for(let m=0;m<u.length;m+=1)u[m]&&u[m].m(i,null);_t(i,e[0],!0),o||(a=K(i,"change",e[5]),o=!0)},p(f,[d]){if(d&4&&it(r,f[2]),d&3){l=f[1];let m;for(m=0;m<l.length;m+=1){const L=vt(f,l,m);u[m]?u[m].p(L,d):(u[m]=Et(L),u[m].c(),u[m].m(i,null))}for(;m<u.length;m+=1)u[m].d(1);u.length=l.length}d&8&&c(i,"name",f[3]),d&3&&_t(i,f[0])},i:be,o:be,d(f){f&&p(t),Bt(u,f),o=!1,a()}}}function sn(e,t,n){let{options:r}=t,{selected:s}=t,{label:i}=t,{name:o=void 0}=t,a=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);function l(){s=Gt(this),n(0,s),n(1,r)}return e.$$set=u=>{"options"in u&&n(1,r=u.options),"selected"in u&&n(0,s=u.selected),"label"in u&&n(2,i=u.label),"name"in u&&n(3,o=u.name)},[s,r,i,o,a,l]}class on extends Ae{constructor(t){super(),we(this,t,sn,rn,ye,{options:1,selected:0,label:2,name:3})}}function an(e){let t,n,r,s,i,o,a;return{c(){t=g("div"),n=g("label"),r=q(e[1]),s=k(),i=g("input"),this.h()},l(l){t=v(l,"DIV",{});var u=A(t);n=v(u,"LABEL",{for:!0,class:!0});var f=A(n);r=Q(f,e[1]),f.forEach(p),s=M(u),i=v(u,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0,name:!0,class:!0}),u.forEach(p),this.h()},h(){c(n,"for",e[6]),c(n,"class","block mb-2 text-sm font-medium text-gray-900 dark:text-white"),c(i,"id",e[6]),c(i,"type","range"),c(i,"min",e[3]),c(i,"max",e[4]),c(i,"step",e[5]),c(i,"name",e[2]),c(i,"class","w-full h-1.5 mb-6 bg-white ring-1 ring-gray-300 shadow-sm rounded-lg appearance-none cursor-pointer accent-indigo-600 dark:bg-gray-700")},m(l,u){G(l,t,u),h(t,n),h(n,r),h(t,s),h(t,i),De(i,e[0]),o||(a=[K(i,"change",e[7]),K(i,"input",e[7])],o=!0)},p(l,[u]){u&2&&it(r,l[1]),u&8&&c(i,"min",l[3]),u&16&&c(i,"max",l[4]),u&32&&c(i,"step",l[5]),u&4&&c(i,"name",l[2]),u&1&&De(i,l[0])},i:be,o:be,d(l){l&&p(t),o=!1,Ce(a)}}}function ln(e,t,n){let{label:r}=t,{name:s=void 0}=t,{min:i=null}=t,{max:o=null}=t,{value:a=0}=t,{step:l=1}=t,u=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);function f(){a=jt(this.value),n(0,a)}return e.$$set=d=>{"label"in d&&n(1,r=d.label),"name"in d&&n(2,s=d.name),"min"in d&&n(3,i=d.min),"max"in d&&n(4,o=d.max),"value"in d&&n(0,a=d.value),"step"in d&&n(5,l=d.step)},[a,r,s,i,o,l,u,f]}class rt extends Ae{constructor(t){super(),we(this,t,ln,an,ye,{label:1,name:2,min:3,max:4,value:0,step:5})}}var un="precision highp float;attribute vec2 position;varying vec2 fragCoord;void main(){fragCoord.x=position.x*0.5+0.5;fragCoord.y=position.y*0.5+0.5;gl_Position=vec4(position,0.0,1.0);}",cn="precision highp float;varying vec2 fragCoord;uniform sampler2D uSampler;uniform float uThreshold;uniform sampler2D uNoiseSampler;uniform vec2 uNoiseSamplerSize;uniform float uNoise;uniform float uMonochrome;uniform vec2 uSize;uniform vec3 uDarkColor;uniform vec3 uLightColor;void main(void){vec2 imgPixel=vec2(fragCoord.x*uSize.x,fragCoord.y*uSize.y);vec2 noisePixel=vec2(mod(imgPixel.x,uNoiseSamplerSize.x),mod(imgPixel.y,uNoiseSamplerSize.y));vec2 noiseUV=vec2(noisePixel.x/uNoiseSamplerSize.x,noisePixel.y/uNoiseSamplerSize.y);float noise=(texture2D(uNoiseSampler,noiseUV).r-0.5)*2.0*uNoise;vec4 color=texture2D(uSampler,fragCoord);float gray=dot(color.rgb,vec3(0.299,0.587,0.114));color.r=color.r*(1.0-uMonochrome)+gray*uMonochrome;color.g=color.g*(1.0-uMonochrome)+gray*uMonochrome;color.b=color.b*(1.0-uMonochrome)+gray*uMonochrome;vec3 thresholds=vec3(step(uThreshold,color.r+noise),step(uThreshold,color.g+noise),step(uThreshold,color.b+noise));if(uMonochrome>0.0){color.rgb=vec3(mix(uDarkColor.r,uLightColor.r,thresholds.r),mix(uDarkColor.g,uLightColor.g,thresholds.g),mix(uDarkColor.b,uLightColor.b,thresholds.b));}else{color.rgb=thresholds;}gl_FragColor=color;}";function dn(e,t,n){const r=bt(e,e.VERTEX_SHADER,t),s=bt(e,e.FRAGMENT_SHADER,n),i=e.createProgram();if(!i)throw new Error("Failed to create shader program");if(e.attachShader(i,r),e.attachShader(i,s),e.linkProgram(i),!e.getProgramParameter(i,e.LINK_STATUS))throw Error(`Unable to initialize the shader program: ${e.getProgramInfoLog(i)}`);return i}function bt(e,t,n){const r=e.createShader(t);if(!r)throw new Error("Failed to create shader");if(e.shaderSource(r,n),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))throw Error(`An error occurred compiling the shaders: ${e.getShaderInfoLog(r)}`);return r}function hn(e){const t=e.createTexture();if(!t)throw new Error("Failed to create texture");e.bindTexture(e.TEXTURE_2D,t);const n=0,r=e.RGBA,s=1,i=1,o=0,a=e.RGBA,l=e.UNSIGNED_BYTE,u=new Uint8Array([0,0,255,255]);return e.texImage2D(e.TEXTURE_2D,n,r,s,i,o,a,l,u),t}function fn(e,t,n){const s=e.RGBA,i=e.RGBA,o=e.UNSIGNED_BYTE;e.bindTexture(e.TEXTURE_2D,t),e.texImage2D(e.TEXTURE_2D,0,s,i,o,n),xe(n.width)&&xe(n.height)?e.generateMipmap(e.TEXTURE_2D):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR))}function xe(e){return(e&e-1)===0}function mn(e){const t=e.createBuffer(),n=e.createBuffer(),r=[-1,1,-1,-1,1,-1,1,1],s=[3,2,1,3,1,0];return e.bindBuffer(e.ARRAY_BUFFER,t),e.bufferData(e.ARRAY_BUFFER,new Float32Array(r),e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(s),e.STATIC_DRAW),{vertex_buffer:t,index_buffer:n}}function pn(e,t){const n=e.createTexture();if(!n)throw new Error("Failed to create texture");return e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),xe(t.width)&&xe(t.height)?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR)),n}function _n(e,t){let n=t;const r=e.getContext("webgl",{preserveDrawingBuffer:!0});if(!r){alert("WebGL not supported");return}const s=()=>{fn(r,S,n.image)};r.clearColor(0,0,0,1),r.clear(r.COLOR_BUFFER_BIT);const i=dn(r,un,cn),{vertex_buffer:o,index_buffer:a}=mn(r),l=r.getAttribLocation(i,"position");r.vertexAttribPointer(l,2,r.FLOAT,!1,0,0),r.enableVertexAttribArray(l);const u=r.getUniformLocation(i,"uSampler"),f=r.getUniformLocation(i,"uThreshold"),d=r.getUniformLocation(i,"uNoiseSampler"),m=r.getUniformLocation(i,"uNoise"),L=r.getUniformLocation(i,"uSize"),C=r.getUniformLocation(i,"uNoiseSamplerSize"),w=r.getUniformLocation(i,"uMonochrome"),y=r.getUniformLocation(i,"uDarkColor"),D=r.getUniformLocation(i,"uLightColor"),S=hn(r);r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!0),s();let b,_;r.useProgram(i);let T=null;const P=()=>{b&&r.deleteTexture(b),b=pn(r,n.thresholdMap),_={width:n.thresholdMap.width,height:n.thresholdMap.height}};P();const I=()=>{r.viewport(0,0,n.output_width,n.output_height),r.clearColor(0,0,0,1),r.clear(r.COLOR_BUFFER_BIT),r.bindBuffer(r.ARRAY_BUFFER,o),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,a),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,S),r.uniform1i(u,0),r.activeTexture(r.TEXTURE1),r.bindTexture(r.TEXTURE_2D,b),r.uniform1i(d,1),r.uniform2f(C,_.width,_.height),r.uniform1f(f,n.threshold),r.uniform1f(m,n.noiseIntensity),r.uniform2f(L,n.output_width,n.output_height),r.uniform1f(w,n.monochrome?1:0),r.uniform3f(y,...At(n.colorDark)),r.uniform3f(D,...At(n.colorLight)),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT),r.drawElements(r.TRIANGLES,6,r.UNSIGNED_SHORT,0)};function O(){T=requestAnimationFrame(()=>{I(),T=null})}return O(),{update(x){const F=n.image!==x.image,U=n.thresholdMap!==x.thresholdMap;n=x,F&&s(),U&&P(),O()},destroy(){T!==null&&cancelAnimationFrame(T)}}}function At(e){const t=parseInt(e.slice(1,3),16)/255,n=parseInt(e.slice(3,5),16)/255,r=parseInt(e.slice(5,7),16)/255;return[t,n,r]}function gn(e){let t,n,r,s,i;const o=e[3].default,a=qe(o,e,e[2],null);return{c(){t=g("button"),a&&a.c(),this.h()},l(l){t=v(l,"BUTTON",{type:!0,class:!0});var u=A(t);a&&a.l(u),u.forEach(p),this.h()},h(){t.disabled=e[0],c(t,"type","button"),c(t,"class",n=e[1][e[0]?"disabled":"normal"]+" rounded-md w-full px-2.5 py-1.5 text-sm font-semibold focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 flex items-center justify-center gap-2")},m(l,u){G(l,t,u),a&&a.m(t,null),r=!0,s||(i=K(t,"click",e[4]),s=!0)},p(l,[u]){a&&a.p&&(!r||u&4)&&Qe(a,o,l,l[2],r?Je(o,l[2],u,null):Ke(l[2]),null),(!r||u&1)&&(t.disabled=l[0]),(!r||u&1&&n!==(n=l[1][l[0]?"disabled":"normal"]+" rounded-md w-full px-2.5 py-1.5 text-sm font-semibold focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 flex items-center justify-center gap-2"))&&c(t,"class",n)},i(l){r||(B(a,l),r=!0)},o(l){$(a,l),r=!1},d(l){l&&p(t),a&&a.d(l),s=!1,i()}}}function vn(e,t,n){let{$$slots:r={},$$scope:s}=t,{disabled:i=!1}=t;const o={normal:"bg-indigo-600 text-white shadow-sm hover:bg-indigo-500",disabled:"bg-gray-200 text-gray-400 shadow-none cursor-not-allowed"};function a(l){Ht.call(this,e,l)}return e.$$set=l=>{"disabled"in l&&n(0,i=l.disabled),"$$scope"in l&&n(2,s=l.$$scope)},[i,o,s,r,a]}class En extends Ae{constructor(t){super(),we(this,t,vn,gn,ye,{disabled:0})}}async function bn(e,t,n="png"){const r=new OffscreenCanvas(e.width,e.height),s=r.getContext("2d");if(!s)return;s.drawImage(e,0,0,e.width,e.height);const i=await r.convertToBlob({type:"image/"+n,quality:1}),o=URL.createObjectURL(i),a=document.createElement("a");a.download=`${t}.${n}`,a.href=o,a.click(),a.remove(),URL.revokeObjectURL(o)}function wt(e){return new Promise((t,n)=>{e.type.startsWith("image/")||n(new Error("Not an image file"));const r=new FileReader;r.onload=s=>{if(typeof r.result!="string")return;const i=new Image;i.onload=()=>{t(i)},i.onerror=o=>{n(o)},i.src=r.result},r.onerror=s=>{n(s)},r.readAsDataURL(e)})}async function An(e){return new Promise((t,n)=>{const r=new Image;r.onload=()=>{t(r)},r.onerror=s=>{n(s)},r.src=e})}var wn=class extends EventTarget{dispatchTypedEvent(e,t){return super.dispatchEvent(t)}};class ge{constructor(t){this.id=-1,this.nativePointer=t,this.pageX=t.pageX,this.pageY=t.pageY,this.clientX=t.clientX,this.clientY=t.clientY,self.Touch&&t instanceof Touch?this.id=t.identifier:ke(t)&&(this.id=t.pointerId)}getCoalesced(){if("getCoalescedEvents"in this.nativePointer){const t=this.nativePointer.getCoalescedEvents().map(n=>new ge(n));if(t.length>0)return t}return[this]}}const ke=e=>"pointerId"in e,je=e=>"changedTouches"in e,yt=()=>{};class yn{constructor(t,{start:n=()=>!0,move:r=yt,end:s=yt,rawUpdates:i=!1,avoidPointerEvents:o=!1}={}){this._element=t,this.startPointers=[],this.currentPointers=[],this._excludeFromButtonsCheck=new Set,this._pointerStart=a=>{if(ke(a)&&a.buttons===0)this._excludeFromButtonsCheck.add(a.pointerId);else if(!(a.buttons&1))return;const l=new ge(a);this.currentPointers.some(u=>u.id===l.id)||this._triggerPointerStart(l,a)&&(ke(a)?((a.target&&"setPointerCapture"in a.target?a.target:this._element).setPointerCapture(a.pointerId),this._element.addEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move),this._element.addEventListener("pointerup",this._pointerEnd),this._element.addEventListener("pointercancel",this._pointerEnd)):(window.addEventListener("mousemove",this._move),window.addEventListener("mouseup",this._pointerEnd)))},this._touchStart=a=>{for(const l of Array.from(a.changedTouches))this._triggerPointerStart(new ge(l),a)},this._move=a=>{if(!je(a)&&(!ke(a)||!this._excludeFromButtonsCheck.has(a.pointerId))&&a.buttons===0){this._pointerEnd(a);return}const l=this.currentPointers.slice(),u=je(a)?Array.from(a.changedTouches).map(d=>new ge(d)):[new ge(a)],f=[];for(const d of u){const m=this.currentPointers.findIndex(L=>L.id===d.id);m!==-1&&(f.push(d),this.currentPointers[m]=d)}f.length!==0&&this._moveCallback(l,f,a)},this._triggerPointerEnd=(a,l)=>{if(!je(l)&&l.buttons&1)return!1;const u=this.currentPointers.findIndex(d=>d.id===a.id);if(u===-1)return!1;this.currentPointers.splice(u,1),this.startPointers.splice(u,1),this._excludeFromButtonsCheck.delete(a.id);const f=!(l.type==="mouseup"||l.type==="touchend"||l.type==="pointerup");return this._endCallback(a,l,f),!0},this._pointerEnd=a=>{if(this._triggerPointerEnd(new ge(a),a))if(ke(a)){if(this.currentPointers.length)return;this._element.removeEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move),this._element.removeEventListener("pointerup",this._pointerEnd),this._element.removeEventListener("pointercancel",this._pointerEnd)}else window.removeEventListener("mousemove",this._move),window.removeEventListener("mouseup",this._pointerEnd)},this._touchEnd=a=>{for(const l of Array.from(a.changedTouches))this._triggerPointerEnd(new ge(l),a)},this._startCallback=n,this._moveCallback=r,this._endCallback=s,this._rawUpdates=i&&"onpointerrawupdate"in window,self.PointerEvent&&!o?this._element.addEventListener("pointerdown",this._pointerStart):(this._element.addEventListener("mousedown",this._pointerStart),this._element.addEventListener("touchstart",this._touchStart),this._element.addEventListener("touchmove",this._move),this._element.addEventListener("touchend",this._touchEnd),this._element.addEventListener("touchcancel",this._touchEnd))}stop(){this._element.removeEventListener("pointerdown",this._pointerStart),this._element.removeEventListener("mousedown",this._pointerStart),this._element.removeEventListener("touchstart",this._touchStart),this._element.removeEventListener("touchmove",this._move),this._element.removeEventListener("touchend",this._touchEnd),this._element.removeEventListener("touchcancel",this._touchEnd),this._element.removeEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move),this._element.removeEventListener("pointerup",this._pointerEnd),this._element.removeEventListener("pointercancel",this._pointerEnd),window.removeEventListener("mousemove",this._move),window.removeEventListener("mouseup",this._pointerEnd)}_triggerPointerStart(t,n){return this._startCallback(t,n)?(this.currentPointers.push(t),this.startPointers.push(t),!0):!1}}function Tt(e,t){return t?Math.sqrt((t.clientX-e.clientX)**2+(t.clientY-e.clientY)**2):0}function It(e,t){return t?{clientX:(e.clientX+t.clientX)/2,clientY:(e.clientY+t.clientY)/2}:e}function Tn(e,t,n){return Math.min(Math.max(e,t),n)}const Ve=class extends wn{constructor(n){super();Le(this,"element");Le(this,"transform",new DOMMatrix);Le(this,"pointerTracker");this.element=n,this.element.addEventListener("wheel",this.onWheel.bind(this)),this.pointerTracker=new yn(this.element,{start:(r,s)=>this.pointerTracker.currentPointers.length===2?!1:(s.preventDefault(),!0),move:r=>{this.onPointerMove(r,this.pointerTracker.currentPointers)},avoidPointerEvents:this.isSafari()}),this.element.addEventListener("wheel",this.onWheel.bind(this))}get x(){return this.transform.e}get y(){return this.transform.f}get scale(){return this.transform.a}set x(n){this.transform.e=n}set y(n){this.transform.f=n}set scale(n){this.transform.a=n,this.transform.d=n}onWheel(n){n.preventDefault();const r=this.element.getBoundingClientRect();let{deltaY:s}=n;const{ctrlKey:i,deltaMode:o}=n;o===1&&(s*=15);const a=s>0,l=i?100:300,u=1-(a?-s:s)/l,f=a?1/u:u,d=n.clientX-r.left,m=n.clientY-r.top;this.applyTransformation({scaleDiff:f,originX:d,originY:m})}applyTransformation(n={}){const{panX:r=0,panY:s=0,originX:i=0,originY:o=0,scaleDiff:a=1}=n,l=new DOMMatrix().translate(i,o).scale(a).translate(-i,-o),u=new DOMMatrix().translate(r,s);l.multiplySelf(u),l.multiplySelf(this.transform);const f=l.a,d=l.e,m=l.f;this.updateTransform(f,d,m)}onPointerMove(n,r){const s=this.element.getBoundingClientRect(),i=It(n[0],n[1]),o=It(r[0],r[1]),a=i.clientX-s.left,l=i.clientY-s.top,u=Tt(n[0],n[1]),f=Tt(r[0],r[1]),d=u?f/u:1;this.applyTransformation({originX:a,originY:l,scaleDiff:d,panX:o.clientX-i.clientX,panY:o.clientY-i.clientY})}updateTransform(n,r,s){if(n=Tn(n,Ve.MIN_SCALE,Ve.MAX_SCALE),n===this.scale&&r===this.x&&s===this.y)return;this.x=r,this.y=s,this.scale=n;const i=new CustomEvent("panzoom:change",{bubbles:!0,detail:{x:this.x,y:this.y,scale:this.scale,matrix:this.transform}});this.dispatchTypedEvent("panzoom:change",i)}isSafari(){return/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)}destroy(){this.pointerTracker.stop()}};let Me=Ve;Le(Me,"MIN_SCALE",.01),Le(Me,"MAX_SCALE",1e5);const In=e=>({}),Lt=e=>({}),Ln=e=>({}),Dt=e=>({});function Dn(e){let t,n,r,s,i,o,a,l,u,f,d,m,L,C;const w=e[6].left,y=qe(w,e,e[5],Dt),D=e[6].right,S=qe(D,e,e[5],Lt);return d=new Ue({props:{src:Qt,class:"w-6 h-6 text-white"}}),{c(){t=g("div"),n=g("div"),r=g("div"),s=g("div"),y&&y.c(),i=k(),o=g("div"),a=g("div"),S&&S.c(),l=k(),u=g("div"),f=g("div"),te(d.$$.fragment),this.h()},l(b){t=v(b,"DIV",{class:!0});var _=A(t);n=v(_,"DIV",{class:!0});var T=A(n);r=v(T,"DIV",{class:!0});var P=A(r);s=v(P,"DIV",{style:!0,class:!0});var I=A(s);y&&y.l(I),I.forEach(p),P.forEach(p),i=M(T),o=v(T,"DIV",{class:!0});var O=A(o);a=v(O,"DIV",{style:!0,class:!0});var x=A(a);S&&S.l(x),x.forEach(p),O.forEach(p),T.forEach(p),l=M(_),u=v(_,"DIV",{class:!0});var F=A(u);f=v(F,"DIV",{class:!0});var U=A(f);ne(d.$$.fragment,U),U.forEach(p),F.forEach(p),_.forEach(p),this.h()},h(){c(s,"style",e[2]),c(s,"class","w-full h-full origin-top-left grid place-items-center"),c(r,"class","mask-left svelte-90j1r"),c(a,"style",e[2]),c(a,"class","w-full h-full origin-top-left grid place-items-center"),c(o,"class","mask-right svelte-90j1r"),c(n,"class","w-full h-full grid place-items-center"),c(f,"class","w-12 h-12 rounded-full bg-black absolute top-1/2 -translate-x-1/2 left-1/2 grid place-items-center"),c(u,"class","handle relative shadow-lg svelte-90j1r"),c(t,"class","pz-container svelte-90j1r"),et(t,"--split-point",e[1]+"%")},m(b,_){G(b,t,_),h(t,n),h(n,r),h(r,s),y&&y.m(s,null),h(n,i),h(n,o),h(o,a),S&&S.m(a,null),h(t,l),h(t,u),h(u,f),re(d,f,null),e[7](t),m=!0,L||(C=[Oe(e[4].call(null,n)),Oe(e[3].call(null,u)),K(u,"pointercancel",tt(Rn))],L=!0)},p(b,[_]){y&&y.p&&(!m||_&32)&&Qe(y,w,b,b[5],m?Je(w,b[5],_,Ln):Ke(b[5]),Dt),(!m||_&4)&&c(s,"style",b[2]),S&&S.p&&(!m||_&32)&&Qe(S,D,b,b[5],m?Je(D,b[5],_,In):Ke(b[5]),Lt),(!m||_&4)&&c(a,"style",b[2]),_&2&&et(t,"--split-point",b[1]+"%")},i(b){m||(B(y,b),B(S,b),B(d.$$.fragment,b),m=!0)},o(b){$(y,b),$(S,b),$(d.$$.fragment,b),m=!1},d(b){b&&p(t),y&&y.d(b),S&&S.d(b),ie(d),e[7](null),L=!1,Ce(C)}}}function Sn(e,t,n){return Math.min(Math.max(e,t),n)}const Rn=()=>{};function kn(e,t,n){let{$$slots:r={},$$scope:s}=t,i=null,o=50;function a(d){d.addEventListener("pointerdown",m=>{const L=m.clientX,C=o,w=document.body.style.cursor;document.body.style.cursor="col-resize";const y=S=>{const b=i?i.clientWidth:window.innerWidth,_=S.clientX-L,T=C+_/b*100;n(1,o=Sn(T,0,100))},D=()=>{document.body.style.cursor=w,window.removeEventListener("pointermove",y),window.removeEventListener("pointerup",D)};window.addEventListener("pointermove",y),window.addEventListener("pointerup",D)})}let l="transform: none;";function u(d){const m=new Me(d);function L(C){const{x:w,y,scale:D,matrix:S}=C.detail;n(2,l=`transform: translate(${w}px, ${y}px) scale(${D})`)}return m.addEventListener("panzoom:change",L),{destroy(){m.removeEventListener("panzoom:change",L),m.destroy()}}}function f(d){de[d?"unshift":"push"](()=>{i=d,n(0,i)})}return e.$$set=d=>{"$$scope"in d&&n(5,s=d.$$scope)},[i,o,l,a,u,s,r,f]}class Mn extends Ae{constructor(t){super(),we(this,t,kn,Dn,ye,{})}}const Cn=""+new URL("../assets/cat.58b560b7.jpg",import.meta.url).href,Un="data:image/avif;base64,AAAAHGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZgAAAOptZXRhAAAAAAAAACFoZGxyAAAAAAAAAABwaWN0AAAAAAAAAAAAAAAAAAAAAA5waXRtAAAAAAABAAAAImlsb2MAAAAAREAAAQABAAAAAAEOAAEAAAAAAAAApwAAACNpaW5mAAAAAAABAAAAFWluZmUCAAAAAAEAAGF2MDEAAAAAamlwcnAAAABLaXBjbwAAABNjb2xybmNseAACAAIABoAAAAAMYXYxQ4EEDAAAAAAUaXNwZQAAAAAAAAJyAAACcgAAABBwaXhpAAAAAAMICAgAAAAXaXBtYQAAAAAAAAABAAEEgYIDhAAAAK9tZGF0EgAKChkmZxnHggQEDQgylgERQAEEEEEA9NBi7JFlrqXV1mwMry34uIYK7WRdWYJ/ZZ0EIyWW8aLm92oz5LY0W+l2FiKsHpp4BB3Vrk+iwHuzboac7wmSHHHRWklZdZ2hpEAi4E31lf1tjXnXie8fh4lzApbqjH5Pj7ZN6761WygYVdc2zvJOsflFZstng6rQU/oulDZSO6fQWKvzpO9pseyXBLfms64=",Bn=""+new URL("../assets/david.0e7e3b46.png",import.meta.url).href,He=new Map;function Pn(e){const t=Xt(e),n=Math.pow(2,2*e);return t.map(s=>s.map(i=>i/n))}function Xt(e){if(He.has(e))return He.get(e);if(e===0)return[[0,2],[3,1]];const t=Xt(e-1),n=new Array(t.length*2).fill(0).map(()=>new Array(t.length*2).fill(0));for(let r=0;r<t.length;r++)for(let s=0;s<t[r].length;s++)n[r][s]=t[r][s]*4,n[r][s+t.length]=t[r][s]*4+2,n[r+t.length][s]=t[r][s]*4+3,n[r+t.length][s+t.length]=t[r][s]*4+1;return He.set(e,n),n}const Nn=""+new URL("../assets/blue_noise.b61cfddd.png",import.meta.url).href,$e={width:470,height:470};async function Xn(e){switch(e.mode){case"bayer":return await On(e);case"blue_noise":return await $n();case"white_noise":return await Fn(e)}}async function Fn(e){const t=new ImageData(e.width,e.height),n=t.data;for(let r=0;r<n.length;r+=4){const s=Math.random()*255;n[r]=s,n[r+1]=s,n[r+2]=s,n[r+3]=255}return t}let Ze=null;async function $n(){Ze||(Ze=await An(Nn));const t=new OffscreenCanvas($e.width,$e.height).getContext("2d");return t.drawImage(Ze,0,0),t.getImageData(0,0,$e.width,$e.height)}async function On(e){const t=new OffscreenCanvas(Math.pow(2,e.level+1),Math.pow(2,e.level+1)),n=Pn(e.level),r=t.getContext("2d");for(let s=0;s<n.length;s++)for(let i=0;i<n[s].length;i++){const o=n[s][i]*255/4;r.fillStyle=`rgb(${o}, ${o}, ${o})`,r.fillRect(i,s,1,1)}return r.getImageData(0,0,t.width,t.height)}function xn(e){let t,n,r,s;return{c(){t=g("canvas"),this.h()},l(i){t=v(i,"CANVAS",{class:!0,style:!0}),A(t).forEach(p),this.h()},h(){c(t,"class","w-full max-h-96 object-contain shadow-lg"),et(t,"image-rendering","pixelated")},m(i,o){G(i,t,o),r||(s=Oe(n=Vn.call(null,t,e[0])),r=!0)},p(i,[o]){n&&Pt(n.update)&&o&1&&n.update.call(null,i[0])},i:be,o:be,d(i){i&&p(t),r=!1,s()}}}function Vn(e,t){const n=e.getContext("2d");if(!n)return;const r=()=>{e.width=t.width,e.height=t.height,n.putImageData(t,0,0)};let s=null;const i=()=>{s||(s=requestAnimationFrame(()=>{s=null,r()}))};return i(),{destroy(){s&&cancelAnimationFrame(s)},update:o=>{t=o,i()}}}function zn(e,t,n){let{imageData:r}=t;return e.$$set=s=>{"imageData"in s&&n(0,r=s.imageData)},[r]}class Yn extends Ae{constructor(t){super(),we(this,t,zn,xn,ye,{imageData:0})}}function St(e,t,n){const r=e.slice();return r[34]=t[n],r}function Wn(e){let t,n,r,s,i,o,a,l,u,f,d,m,L,C,w,y,D,S,b=e[14],_=[];for(let T=0;T<b.length;T+=1)_[T]=Rt(St(e,b,T));return f=new Ue({props:{src:Jt,class:"w-12 h-12 text-gray-400"}}),{c(){t=g("div"),n=g("div"),r=g("p"),s=q("Select or Drop an Image to Start"),i=k(),o=g("div");for(let T=0;T<_.length;T+=1)_[T].c();a=k(),l=g("label"),u=g("div"),te(f.$$.fragment),d=k(),m=g("span"),L=q("Choose an Image"),C=k(),w=g("input"),this.h()},l(T){t=v(T,"DIV",{class:!0});var P=A(t);n=v(P,"DIV",{class:!0});var I=A(n);r=v(I,"P",{class:!0});var O=A(r);s=Q(O,"Select or Drop an Image to Start"),O.forEach(p),i=M(I),o=v(I,"DIV",{class:!0});var x=A(o);for(let J=0;J<_.length;J+=1)_[J].l(x);a=M(x),l=v(x,"LABEL",{for:!0,class:!0});var F=A(l);u=v(F,"DIV",{class:!0});var U=A(u);ne(f.$$.fragment,U),U.forEach(p),d=M(F),m=v(F,"SPAN",{class:!0});var N=A(m);L=Q(N,"Choose an Image"),N.forEach(p),C=M(F),w=v(F,"INPUT",{type:!0,class:!0,id:!0,accept:!0}),F.forEach(p),x.forEach(p),I.forEach(p),P.forEach(p),this.h()},h(){c(r,"class","text-2xl text-gray-500"),c(u,"class","grid place-items-center h-full w-full"),c(m,"class","sr-only"),c(w,"type","file"),c(w,"class","sr-only"),c(w,"id","image-input"),c(w,"accept","image/*"),c(l,"for","image-input"),c(l,"class","block spect-square h-24 w-24 object-cover rounded-md shadow-md border-2 border-white bg-white hover:bg-gray-100"),c(o,"class","flex gap-3 justify-center"),c(n,"class","grid gap-4"),c(t,"class","w-full h-full grid place-items-center")},m(T,P){G(T,t,P),h(t,n),h(n,r),h(r,s),h(n,i),h(n,o);for(let I=0;I<_.length;I+=1)_[I]&&_[I].m(o,null);h(o,a),h(o,l),h(l,u),re(f,u,null),h(l,d),h(l,m),h(m,L),h(l,C),h(l,w),y=!0,D||(S=K(w,"input",e[18]),D=!0)},p(T,P){if(P[0]&540672){b=T[14];let I;for(I=0;I<b.length;I+=1){const O=St(T,b,I);_[I]?_[I].p(O,P):(_[I]=Rt(O),_[I].c(),_[I].m(o,a))}for(;I<_.length;I+=1)_[I].d(1);_.length=b.length}},i(T){y||(B(f.$$.fragment,T),y=!0)},o(T){$(f.$$.fragment,T),y=!1},d(T){T&&p(t),Bt(_,T),ie(f),D=!1,S()}}}function Gn(e){let t,n,r,s,i,o,a,l;return n=new Mn({props:{$$slots:{right:[Hn],left:[jn]},$$scope:{ctx:e}}}),i=new Ue({props:{src:en,class:"w-5 h-5 text-white"}}),{c(){t=g("div"),te(n.$$.fragment),r=k(),s=g("button"),te(i.$$.fragment),this.h()},l(u){t=v(u,"DIV",{class:!0});var f=A(t);ne(n.$$.fragment,f),r=M(f),s=v(f,"BUTTON",{class:!0,title:!0});var d=A(s);ne(i.$$.fragment,d),d.forEach(p),f.forEach(p),this.h()},h(){c(s,"class","absolute top-0 right-0 m-4 p-2 bg-black bg-opacity-40 rounded-full"),c(s,"title","Close Image & Reset"),c(t,"class","w-full h-full relative")},m(u,f){G(u,t,f),re(n,t,null),h(t,r),h(t,s),re(i,s,null),o=!0,a||(l=K(s,"click",e[22]),a=!0)},p(u,f){const d={};f[0]&16344|f[1]&64&&(d.$$scope={dirty:f,ctx:u}),n.$set(d)},i(u){o||(B(n.$$.fragment,u),B(i.$$.fragment,u),o=!0)},o(u){$(n.$$.fragment,u),$(i.$$.fragment,u),o=!1},d(u){u&&p(t),ie(n),ie(i),a=!1,l()}}}function Rt(e){let t,n,r,s,i;function o(){return e[23](e[34])}return{c(){t=g("button"),n=g("img"),this.h()},l(a){t=v(a,"BUTTON",{class:!0});var l=A(t);n=v(l,"IMG",{class:!0,src:!0,alt:!0}),l.forEach(p),this.h()},h(){c(n,"class","aspect-square h-24 w-24 object-cover rounded-md shadow-md border-2 border-white"),nt(n.src,r=e[34])||c(n,"src",r),c(n,"alt",""),c(t,"class","hover:opacity-75 transition-opacity")},m(a,l){G(a,t,l),h(t,n),s||(i=K(t,"click",o),s=!0)},p(a,l){e=a},d(a){a&&p(t),s=!1,i()}}}function jn(e){let t,n,r;return{c(){t=g("img"),this.h()},l(s){t=v(s,"IMG",{slot:!0,src:!0,alt:!0,style:!0,class:!0}),this.h()},h(){c(t,"slot","left"),nt(t.src,n=e[4].src)||c(t,"src",n),c(t,"alt",""),c(t,"style",r=`width: ${e[3]}px; height: ${e[13]}px`),c(t,"class","pixelated max-w-none svelte-1gkt69q")},m(s,i){G(s,t,i)},p(s,i){i[0]&16&&!nt(t.src,n=s[4].src)&&c(t,"src",n),i[0]&8200&&r!==(r=`width: ${s[3]}px; height: ${s[13]}px`)&&c(t,"style",r)},d(s){s&&p(t)}}}function Hn(e){let t,n,r,s,i;return{c(){t=g("canvas"),this.h()},l(o){t=v(o,"CANVAS",{class:!0,slot:!0,style:!0,width:!0,height:!0,"aria-label":!0}),A(t).forEach(p),this.h()},h(){c(t,"class","pixelated svelte-1gkt69q"),c(t,"slot","right"),c(t,"style",n=`width: ${e[3]}px; height: ${e[13]}px`),c(t,"width",e[3]),c(t,"height",e[13]),c(t,"aria-label","Dithered Image")},m(o,a){G(o,t,a),e[21](t),s||(i=Oe(r=_n.call(null,t,{image:e[4],threshold:e[6],noiseIntensity:e[7],monochrome:e[8],colorLight:e[9],colorDark:e[10],output_width:e[3],output_height:e[13],thresholdMap:e[12]})),s=!0)},p(o,a){a[0]&8200&&n!==(n=`width: ${o[3]}px; height: ${o[13]}px`)&&c(t,"style",n),a[0]&8&&c(t,"width",o[3]),a[0]&8192&&c(t,"height",o[13]),r&&Pt(r.update)&&a[0]&14296&&r.update.call(null,{image:o[4],threshold:o[6],noiseIntensity:o[7],monochrome:o[8],colorLight:o[9],colorDark:o[10],output_width:o[3],output_height:o[13],thresholdMap:o[12]})},d(o){o&&p(t),e[21](null),s=!1,i()}}}function kt(e){let t,n,r;return n=new Yn({props:{imageData:e[12]}}),{c(){t=g("div"),te(n.$$.fragment),this.h()},l(s){t=v(s,"DIV",{class:!0});var i=A(t);ne(n.$$.fragment,i),i.forEach(p),this.h()},h(){c(t,"class","w-full aspect-square rounded-lg bg-gray-100 p-8 grid place-items-center")},m(s,i){G(s,t,i),re(n,t,null),r=!0},p(s,i){const o={};i[0]&4096&&(o.imageData=s[12]),n.$set(o)},i(s){r||(B(n.$$.fragment,s),r=!0)},o(s){$(n.$$.fragment,s),r=!1},d(s){s&&p(t),ie(n)}}}function Mt(e){let t,n,r;function s(o){e[25](o)}let i={label:"Bayer Level ("+e[1]+")",min:0,max:5,step:1};return e[1]!==void 0&&(i.value=e[1]),t=new rt({props:i}),de.push(()=>ve(t,"value",s)),{c(){te(t.$$.fragment)},l(o){ne(t.$$.fragment,o)},m(o,a){re(t,o,a),r=!0},p(o,a){const l={};a[0]&2&&(l.label="Bayer Level ("+o[1]+")"),!n&&a[0]&2&&(n=!0,l.value=o[1],Ee(()=>n=!1)),t.$set(l)},i(o){r||(B(t.$$.fragment,o),r=!0)},o(o){$(t.$$.fragment,o),r=!1},d(o){ie(t,o)}}}function Ct(e){let t,n,r;function s(o){e[26](o)}let i={aspectRatio:1};return e[2]!==void 0&&(i.width=e[2]),t=new Nt({props:i}),de.push(()=>ve(t,"width",s)),{c(){te(t.$$.fragment)},l(o){ne(t.$$.fragment,o)},m(o,a){re(t,o,a),r=!0},p(o,a){const l={};!n&&a[0]&4&&(n=!0,l.width=o[2],Ee(()=>n=!1)),t.$set(l)},i(o){r||(B(t.$$.fragment,o),r=!0)},o(o){$(t.$$.fragment,o),r=!1},d(o){ie(t,o)}}}function Ut(e){let t,n,r,s,i,o,a,l,u,f,d,m,L,C;return{c(){t=g("fieldset"),n=g("div"),r=g("input"),s=k(),i=g("label"),o=q("Light"),a=k(),l=g("div"),u=g("input"),f=k(),d=g("label"),m=q("Dark"),this.h()},l(w){t=v(w,"FIELDSET",{});var y=A(t);n=v(y,"DIV",{class:!0});var D=A(n);r=v(D,"INPUT",{type:!0,name:!0,id:!0}),s=M(D),i=v(D,"LABEL",{for:!0,class:!0});var S=A(i);o=Q(S,"Light"),S.forEach(p),D.forEach(p),a=M(y),l=v(y,"DIV",{class:!0});var b=A(l);u=v(b,"INPUT",{type:!0,name:!0,id:!0}),f=M(b),d=v(b,"LABEL",{for:!0,class:!0});var _=A(d);m=Q(_,"Dark"),_.forEach(p),b.forEach(p),y.forEach(p),this.h()},h(){c(r,"type","color"),c(r,"name","color-light"),c(r,"id","color-light"),c(i,"for","color-light"),c(i,"class","font-medium text-gray-900"),c(n,"class","flex gap-3"),c(u,"type","color"),c(u,"name","color-dark"),c(u,"id","color-dark"),c(d,"for","color-dark"),c(d,"class","font-medium text-gray-900"),c(l,"class","flex gap-3")},m(w,y){G(w,t,y),h(t,n),h(n,r),De(r,e[9]),h(n,s),h(n,i),h(i,o),h(t,a),h(t,l),h(l,u),De(u,e[10]),h(l,f),h(l,d),h(d,m),L||(C=[K(r,"input",e[30]),K(u,"input",e[31])],L=!0)},p(w,y){y[0]&512&&De(r,w[9]),y[0]&1024&&De(u,w[10])},d(w){w&&p(t),L=!1,Ce(C)}}}function Zn(e){let t,n,r;return t=new Ue({props:{src:Kt,class:"w-4 h-4"}}),{c(){te(t.$$.fragment),n=q(`
				Save`)},l(s){ne(t.$$.fragment,s),n=Q(s,`
				Save`)},m(s,i){re(t,s,i),G(s,n,i),r=!0},p:be,i(s){r||(B(t.$$.fragment,s),r=!0)},o(s){$(t.$$.fragment,s),r=!1},d(s){ie(t,s),s&&p(n)}}}function qn(e){let t,n,r,s,i,o,a,l,u,f,d,m,L,C,w,y,D,S,b,_,T,P,I,O,x,F,U,N,J,ae,ee,he,fe,le,se,oe,R,j,Z,Se,ze,Ye,Te,ce,Be,We,st;const ot=[Gn,Wn],me=[];function at(E,X){return E[4]&&E[12]?0:1}i=at(e),o=me[i]=ot[i](e);let V=e[12]&&kt(e);function Ft(E){e[24](E)}let lt={label:"Dither Mode",options:e[16]};e[0]!==void 0&&(lt.selected=e[0]),w=new on({props:lt}),de.push(()=>ve(w,"selected",Ft));let z=e[0]==="bayer"&&Mt(e),Y=e[0]==="white_noise"&&Ct(e);function $t(E){e[27](E)}let ut={label:"Threshold ("+e[6]+")",min:0,max:1,step:.01};e[6]!==void 0&&(ut.value=e[6]),_=new rt({props:ut}),de.push(()=>ve(_,"value",$t));function Ot(E){e[28](E)}let ct={label:"Noise Intensity ("+e[7]+")",min:0,max:1.5,step:.01};e[7]!==void 0&&(ct.value=e[7]),I=new rt({props:ct}),de.push(()=>ve(I,"value",Ot));let H=e[8]&&Ut(e);function xt(E){e[32](E)}function Vt(E){e[33](E)}let Ge={};return e[3]!==void 0&&(Ge.width=e[3]),e[5]!==void 0&&(Ge.aspectRatio=e[5]),Z=new Nt({props:Ge}),de.push(()=>ve(Z,"width",xt)),de.push(()=>ve(Z,"aspectRatio",Vt)),ce=new En({props:{disabled:!(e[4]&&e[12]),$$slots:{default:[Zn]},$$scope:{ctx:e}}}),ce.$on("click",e[15]),{c(){t=k(),n=k(),r=g("main"),s=g("section"),o.c(),a=k(),l=g("aside"),u=g("section"),V&&V.c(),f=k(),d=g("div"),m=g("h2"),L=q("Dithering Options"),C=k(),te(w.$$.fragment),D=k(),z&&z.c(),S=k(),Y&&Y.c(),b=k(),te(_.$$.fragment),P=k(),te(I.$$.fragment),x=k(),F=g("div"),U=g("div"),N=g("input"),J=k(),ae=g("div"),ee=g("label"),he=q("Monochrome"),fe=k(),H&&H.c(),le=k(),se=g("div"),oe=g("h2"),R=q("Output Options"),j=k(),te(Z.$$.fragment),Ye=k(),Te=g("footer"),te(ce.$$.fragment),this.h()},l(E){Zt("svelte-1hm2pfs",document.head).forEach(p),t=M(E),n=M(E),r=v(E,"MAIN",{class:!0});var pe=A(r);s=v(pe,"SECTION",{class:!0});var Re=A(s);o.l(Re),Re.forEach(p),a=M(pe),l=v(pe,"ASIDE",{class:!0});var _e=A(l);u=v(_e,"SECTION",{class:!0});var ue=A(u);V&&V.l(ue),f=M(ue),d=v(ue,"DIV",{class:!0});var W=A(d);m=v(W,"H2",{class:!0});var Ie=A(m);L=Q(Ie,"Dithering Options"),Ie.forEach(p),C=M(W),ne(w.$$.fragment,W),D=M(W),z&&z.l(W),S=M(W),Y&&Y.l(W),b=M(W),ne(_.$$.fragment,W),P=M(W),ne(I.$$.fragment,W),x=M(W),F=v(W,"DIV",{class:!0});var Pe=A(F);U=v(Pe,"DIV",{class:!0});var dt=A(U);N=v(dt,"INPUT",{type:!0,id:!0,class:!0}),dt.forEach(p),J=M(Pe),ae=v(Pe,"DIV",{class:!0});var ht=A(ae);ee=v(ht,"LABEL",{for:!0,class:!0});var ft=A(ee);he=Q(ft,"Monochrome"),ft.forEach(p),ht.forEach(p),Pe.forEach(p),fe=M(W),H&&H.l(W),W.forEach(p),le=M(ue),se=v(ue,"DIV",{class:!0});var Ne=A(se);oe=v(Ne,"H2",{class:!0});var mt=A(oe);R=Q(mt,"Output Options"),mt.forEach(p),j=M(Ne),ne(Z.$$.fragment,Ne),Ne.forEach(p),ue.forEach(p),Ye=M(_e),Te=v(_e,"FOOTER",{class:!0});var pt=A(Te);ne(ce.$$.fragment,pt),pt.forEach(p),_e.forEach(p),pe.forEach(p),this.h()},h(){document.title="Dithering",c(s,"class","flex-1 overflow-hidden select-none"),c(m,"class","text-base font-semibold leading-7 text-black mb-2"),c(N,"type","checkbox"),c(N,"id","monochrome"),c(N,"class","h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600"),c(U,"class","flex h-6 items-center"),c(ee,"for","monochrome"),c(ee,"class","font-medium text-gray-900"),c(ae,"class","ml-3 text-sm leading-6"),c(F,"class","relative flex items-start"),c(d,"class","grid gap-3"),c(oe,"class","text-base font-semibold leading-7 text-black mb-4"),c(se,"class","border-t border-gray-100 py-4"),c(u,"class","grid gap-5 overflow-y-auto overflow-x-visible py-8 px-4"),c(Te,"class","py-4 px-4 flex-shrink-0"),c(l,"class","bg-white w-full md:max-w-md border-t md:border-t-0 md:border-l border-l-0 border-gray-100 z-50 overflow-y-hidden md:h-full flex-1 shadow-lg flex flex-col divide-y divide-gray-200 justify-between"),c(r,"class","w-screen max-w-screen h-screen max-h-screen flex md:flex-row flex-col bg-gray-300")},m(E,X){G(E,t,X),G(E,n,X),G(E,r,X),h(r,s),me[i].m(s,null),h(r,a),h(r,l),h(l,u),V&&V.m(u,null),h(u,f),h(u,d),h(d,m),h(m,L),h(d,C),re(w,d,null),h(d,D),z&&z.m(d,null),h(d,S),Y&&Y.m(d,null),h(d,b),re(_,d,null),h(d,P),re(I,d,null),h(d,x),h(d,F),h(F,U),h(U,N),N.checked=e[8],h(F,J),h(F,ae),h(ae,ee),h(ee,he),h(d,fe),H&&H.m(d,null),h(u,le),h(u,se),h(se,oe),h(oe,R),h(se,j),re(Z,se,null),h(l,Ye),h(l,Te),re(ce,Te,null),Be=!0,We||(st=[K(document.body,"drop",tt(e[17])),K(document.body,"dragover",tt(Qn)),K(N,"change",e[29])],We=!0)},p(E,X){let pe=i;i=at(E),i===pe?me[i].p(E,X):(Fe(),$(me[pe],1,1,()=>{me[pe]=null}),Xe(),o=me[i],o?o.p(E,X):(o=me[i]=ot[i](E),o.c()),B(o,1),o.m(s,null)),E[12]?V?(V.p(E,X),X[0]&4096&&B(V,1)):(V=kt(E),V.c(),B(V,1),V.m(u,f)):V&&(Fe(),$(V,1,1,()=>{V=null}),Xe());const Re={};!y&&X[0]&1&&(y=!0,Re.selected=E[0],Ee(()=>y=!1)),w.$set(Re),E[0]==="bayer"?z?(z.p(E,X),X[0]&1&&B(z,1)):(z=Mt(E),z.c(),B(z,1),z.m(d,S)):z&&(Fe(),$(z,1,1,()=>{z=null}),Xe()),E[0]==="white_noise"?Y?(Y.p(E,X),X[0]&1&&B(Y,1)):(Y=Ct(E),Y.c(),B(Y,1),Y.m(d,b)):Y&&(Fe(),$(Y,1,1,()=>{Y=null}),Xe());const _e={};X[0]&64&&(_e.label="Threshold ("+E[6]+")"),!T&&X[0]&64&&(T=!0,_e.value=E[6],Ee(()=>T=!1)),_.$set(_e);const ue={};X[0]&128&&(ue.label="Noise Intensity ("+E[7]+")"),!O&&X[0]&128&&(O=!0,ue.value=E[7],Ee(()=>O=!1)),I.$set(ue),X[0]&256&&(N.checked=E[8]),E[8]?H?H.p(E,X):(H=Ut(E),H.c(),H.m(d,null)):H&&(H.d(1),H=null);const W={};!Se&&X[0]&8&&(Se=!0,W.width=E[3],Ee(()=>Se=!1)),!ze&&X[0]&32&&(ze=!0,W.aspectRatio=E[5],Ee(()=>ze=!1)),Z.$set(W);const Ie={};X[0]&4112&&(Ie.disabled=!(E[4]&&E[12])),X[1]&64&&(Ie.$$scope={dirty:X,ctx:E}),ce.$set(Ie)},i(E){Be||(B(o),B(V),B(w.$$.fragment,E),B(z),B(Y),B(_.$$.fragment,E),B(I.$$.fragment,E),B(Z.$$.fragment,E),B(ce.$$.fragment,E),Be=!0)},o(E){$(o),$(V),$(w.$$.fragment,E),$(z),$(Y),$(_.$$.fragment,E),$(I.$$.fragment,E),$(Z.$$.fragment,E),$(ce.$$.fragment,E),Be=!1},d(E){E&&p(t),E&&p(n),E&&p(r),me[i].d(),V&&V.d(),ie(w),z&&z.d(),Y&&Y.d(),ie(_),ie(I),H&&H.d(),ie(Z),ie(ce),We=!1,Ce(st)}}}const Qn=()=>{};function Kn(e,t,n){let r,s,i;const o=[Cn,Un,Bn];let a=.5,l=.3,u=!1,f="#ede6cc",d="#21263f",m=null,L="blue_noise",C=3,w=256,y=600,D=null;async function S(){m&&await bn(m,"dithered","png")}const b=[{name:"Bayer",value:"bayer"},{name:"Blue Noise",value:"blue_noise"},{name:"White Noise",value:"white_noise"}];async function _(R){var Z;const j=(Z=R.dataTransfer)==null?void 0:Z.files[0];if(j){if(!j.type.startsWith("image/")){alert("Please drop an image file");return}try{n(4,D=await wt(j))}catch(Se){alert("Failed to load image"),console.error(Se)}}}async function T(R){const j=R.target.files[0];if(j)try{n(4,D=await wt(j))}catch(Z){alert("Failed to load image"),console.error(Z)}}async function P(R){const j=new Image;j.onload=()=>{n(4,D=j)},j.src=R}let I=null;function O(R){de[R?"unshift":"push"](()=>{m=R,n(11,m)})}const x=()=>n(4,D=null),F=R=>P(R);function U(R){L=R,n(0,L)}function N(R){C=R,n(1,C)}function J(R){w=R,n(2,w)}function ae(R){a=R,n(6,a)}function ee(R){l=R,n(7,l)}function he(){u=this.checked,n(8,u)}function fe(){f=this.value,n(9,f)}function le(){d=this.value,n(10,d)}function se(R){y=R,n(3,y)}function oe(R){i=R,n(5,i),n(4,D)}return e.$$.update=()=>{if(e.$$.dirty[0]&4&&n(20,r=w),e.$$.dirty[0]&16&&n(5,i=D!=null&&D.width&&(D!=null&&D.height)?D.width/D.height:1),e.$$.dirty[0]&40&&n(13,s=y/i),e.$$.dirty[0]&1048583&&"ImageData"in globalThis){let R;switch(L){case"bayer":R={mode:"bayer",level:C};break;case"blue_noise":R={mode:"blue_noise"};break;case"white_noise":R={mode:"white_noise",width:w,height:r};break}Xn(R).then(j=>n(12,I=j))}},[L,C,w,y,D,i,a,l,u,f,d,m,I,s,o,S,b,_,T,P,r,O,x,F,U,N,J,ae,ee,he,fe,le,se,oe]}class rr extends Ae{constructor(t){super(),we(this,t,Kn,qn,ye,{},null,[-1,-1])}}export{rr as component};
