var Rn=Object.defineProperty;var Cn=(e,t,n)=>t in e?Rn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Be=(e,t,n)=>(Cn(e,typeof t!="symbol"?t+"":t,n),n);import{S as fe,i as ce,s as de,k as v,q as H,a as R,y as G,l as b,m as y,r as Y,h as g,c as C,z as Z,n as c,b as B,G as h,A as q,N as ee,g as X,d as O,B as $,O as Ye,C as xe,D as Je,E as et,F as tt,P as Pn,p as At,Q as ze,R as yt,w as j,T as Fe,u as ft,H as ae,U as Nn,V as Un,W as Wt,X as Tt,Y as Xn,Z as x,_ as J,$ as Bn,v as nt,f as it,a0 as St,J as On,M as He,e as rt}from"../chunks/index.4f636332.js";import{I as je,L as Fn,A as Wn,a as Vn,P as zn,X as Hn}from"../chunks/Icon.85c9c75e.js";function Yn(e){let t,n,i,r,o,s,l,a,u,d,f,m,A,k,E,_,I,P,T,w,D,p,L,M,W,V;return A=new je({props:{src:Fn,class:"w-4 h-4",solid:!0}}),{c(){t=v("fieldset"),n=v("div"),i=v("label"),r=H("Width"),o=R(),s=v("div"),l=v("input"),a=R(),u=v("div"),d=H("px"),f=R(),m=v("span"),G(A.$$.fragment),k=R(),E=v("div"),_=v("label"),I=H("Height"),P=R(),T=v("div"),w=v("input"),D=R(),p=v("div"),L=H("px"),this.h()},l(N){t=b(N,"FIELDSET",{class:!0});var F=y(t);n=b(F,"DIV",{class:!0});var te=y(n);i=b(te,"LABEL",{for:!0,class:!0});var ge=y(i);r=Y(ge,"Width"),ge.forEach(g),o=C(te),s=b(te,"DIV",{class:!0});var ne=y(s);l=b(ne,"INPUT",{name:!0,id:!0,type:!0,min:!0,max:!0,step:!0,class:!0,placeholder:!0}),a=C(ne),u=b(ne,"DIV",{class:!0});var Q=y(u);d=Y(Q,"px"),Q.forEach(g),ne.forEach(g),te.forEach(g),f=C(F),m=b(F,"SPAN",{class:!0});var _e=y(m);Z(A.$$.fragment,_e),_e.forEach(g),k=C(F),E=b(F,"DIV",{class:!0});var ue=y(E);_=b(ue,"LABEL",{for:!0,class:!0});var pe=y(_);I=Y(pe,"Height"),pe.forEach(g),P=C(ue),T=b(ue,"DIV",{class:!0});var se=y(T);w=b(se,"INPUT",{type:!0,id:!0,name:!0,min:!0,max:!0,step:!0,class:!0,placeholder:!0}),D=C(se),p=b(se,"DIV",{class:!0});var ve=y(p);L=Y(ve,"px"),ve.forEach(g),se.forEach(g),ue.forEach(g),F.forEach(g),this.h()},h(){c(i,"for","width-"+e[8]),c(i,"class","block text-sm font-medium leading-6 text-gray-900"),c(l,"name","width"),c(l,"id","width-"+e[8]),c(l,"type","number"),c(l,"min",e[3]),c(l,"max",e[1]),c(l,"step","1"),l.value=e[0],c(l,"class","block w-full rounded-md border-0 py-1.5 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"),c(l,"placeholder","600"),c(u,"class","pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400"),c(s,"class","relative mt-2 rounded-md shadow-sm"),c(n,"class","w-full"),c(m,"class","text-gray-500 pb-2 cursor-not-allowed"),c(_,"for","height-"+e[9]),c(_,"class","block text-sm font-medium leading-6 text-gray-900"),c(w,"type","number"),c(w,"id","height-"+e[9]),c(w,"name","height"),c(w,"min",e[4]),c(w,"max",e[2]),c(w,"step","1"),w.value=e[5],c(w,"class","block w-full rounded-md border-0 py-1.5 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"),c(w,"placeholder","340"),c(p,"class","pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400"),c(T,"class","relative mt-2 rounded-md shadow-sm"),c(E,"class","w-full"),c(t,"class","flex gap-3 items-end justify-between")},m(N,F){B(N,t,F),h(t,n),h(n,i),h(i,r),h(n,o),h(n,s),h(s,l),h(s,a),h(s,u),h(u,d),h(t,f),h(t,m),q(A,m,null),h(t,k),h(t,E),h(E,_),h(_,I),h(E,P),h(E,T),h(T,w),h(T,D),h(T,p),h(p,L),M=!0,W||(V=[ee(l,"input",e[6]),ee(w,"input",e[7])],W=!0)},p(N,[F]){(!M||F&8)&&c(l,"min",N[3]),(!M||F&2)&&c(l,"max",N[1]),(!M||F&1&&l.value!==N[0])&&(l.value=N[0]),(!M||F&16)&&c(w,"min",N[4]),(!M||F&4)&&c(w,"max",N[2]),(!M||F&32&&w.value!==N[5])&&(w.value=N[5])},i(N){M||(X(A.$$.fragment,N),M=!0)},o(N){O(A.$$.fragment,N),M=!1},d(N){N&&g(t),$(A),W=!1,Ye(V)}}}function Vt(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}function jn(e,t,n){let i,{width:r}=t,{aspectRatio:o}=t,{maxWidth:s=null}=t,{maxHeight:l=null}=t,{minWidth:a=null}=t,{minHeight:u=null}=t;function d(k){const E=k.target.value;E&&(a!==null&&E<a||s!==null&&E>s||n(0,r=E))}function f(k){const E=k.target.value;E&&(u!==null&&E<u||l!==null&&E>l||n(0,r=Math.round(o*E)))}let m=Vt(),A=Vt();return e.$$set=k=>{"width"in k&&n(0,r=k.width),"aspectRatio"in k&&n(10,o=k.aspectRatio),"maxWidth"in k&&n(1,s=k.maxWidth),"maxHeight"in k&&n(2,l=k.maxHeight),"minWidth"in k&&n(3,a=k.minWidth),"minHeight"in k&&n(4,u=k.minHeight)},e.$$.update=()=>{e.$$.dirty&1025&&n(5,i=Math.round(r/o))},[r,s,l,a,u,i,d,f,m,A,o]}class cn extends fe{constructor(t){super(),ce(this,t,jn,Yn,de,{width:0,aspectRatio:10,maxWidth:1,maxHeight:2,minWidth:3,minHeight:4})}}var Gn="precision highp float;attribute vec2 position;varying vec2 fragCoord;void main(){fragCoord.x=position.x*0.5+0.5;fragCoord.y=position.y*0.5+0.5;gl_Position=vec4(position,0.0,1.0);}",Zn="precision highp float;varying vec2 fragCoord;uniform sampler2D uSampler;uniform float uThreshold;uniform sampler2D uNoiseSampler;uniform vec2 uNoiseSamplerSize;uniform float uNoise;uniform float uMonochrome;uniform vec2 uSize;uniform vec3 uDarkColor;uniform vec3 uLightColor;void main(void){vec2 imgPixel=vec2(fragCoord.x*uSize.x,fragCoord.y*uSize.y);vec2 noisePixel=vec2(mod(imgPixel.x,uNoiseSamplerSize.x),mod(imgPixel.y,uNoiseSamplerSize.y));vec2 noiseUV=vec2(noisePixel.x/uNoiseSamplerSize.x,noisePixel.y/uNoiseSamplerSize.y);float noise=(texture2D(uNoiseSampler,noiseUV).r-0.5)*2.0*uNoise;vec4 color=texture2D(uSampler,fragCoord);float gray=dot(color.rgb,vec3(0.299,0.587,0.114));color.r=color.r*(1.0-uMonochrome)+gray*uMonochrome;color.g=color.g*(1.0-uMonochrome)+gray*uMonochrome;color.b=color.b*(1.0-uMonochrome)+gray*uMonochrome;vec3 thresholds=vec3(step(uThreshold,color.r+noise),step(uThreshold,color.g+noise),step(uThreshold,color.b+noise));if(uMonochrome>0.0){color.rgb=vec3(mix(uDarkColor.r,uLightColor.r,thresholds.r),mix(uDarkColor.g,uLightColor.g,thresholds.g),mix(uDarkColor.b,uLightColor.b,thresholds.b));}else{color.rgb=thresholds;}gl_FragColor=color;}";function zt(e){return(e&e-1)===0}function qn(e,t,n){const i=Ht(e,e.VERTEX_SHADER,t),r=Ht(e,e.FRAGMENT_SHADER,n),o=e.createProgram();if(!o)throw new Error("Failed to create shader program");if(e.attachShader(o,i),e.attachShader(o,r),e.linkProgram(o),!e.getProgramParameter(o,e.LINK_STATUS))throw Error(`Unable to initialize the shader program: ${e.getProgramInfoLog(o)}`);return o}function Ht(e,t,n){const i=e.createShader(t);if(!i)throw new Error("Failed to create shader");if(e.shaderSource(i,n),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS))throw Error(`An error occurred compiling the shaders: ${e.getShaderInfoLog(i)}`);return i}function $n(e){const t=e.createBuffer(),n=e.createBuffer(),i=[-1,1,-1,-1,1,-1,1,1],r=[3,2,1,3,1,0];return e.bindBuffer(e.ARRAY_BUFFER,t),e.bufferData(e.ARRAY_BUFFER,new Float32Array(i),e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(r),e.STATIC_DRAW),{vertex_buffer:t,index_buffer:n}}function Yt(e,t,n){const i=e.createTexture();if(!i)throw new Error("Failed to create texture");return e.bindTexture(e.TEXTURE_2D,i),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),zt(t.width)&&zt(t.height)?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,n)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,n)),i}function Qn(e,t){let n=t;const i=e.getContext("webgl",{preserveDrawingBuffer:!0});if(!i){alert("WebGL not supported");return}i.clearColor(0,0,0,1),i.clear(i.COLOR_BUFFER_BIT);const r=qn(i,Gn,Zn),{vertex_buffer:o,index_buffer:s}=$n(i),l=i.getAttribLocation(r,"position");i.vertexAttribPointer(l,2,i.FLOAT,!1,0,0),i.enableVertexAttribArray(l);const a=i.getUniformLocation(r,"uSampler"),u=i.getUniformLocation(r,"uThreshold"),d=i.getUniformLocation(r,"uNoiseSampler"),f=i.getUniformLocation(r,"uNoise"),m=i.getUniformLocation(r,"uSize"),A=i.getUniformLocation(r,"uNoiseSamplerSize"),k=i.getUniformLocation(r,"uMonochrome"),E=i.getUniformLocation(r,"uDarkColor"),_=i.getUniformLocation(r,"uLightColor");let I;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!0);const P=()=>{I&&i.deleteTexture(I),I=Yt(i,n.image,i.LINEAR)};P();let T,w;i.useProgram(r);let D=null;const p=()=>{T&&i.deleteTexture(T),T=Yt(i,n.thresholdMap,i.NEAREST),w={width:n.thresholdMap.width,height:n.thresholdMap.height}};p();const L=()=>{i.viewport(0,0,n.output_width,n.output_height),i.clearColor(0,0,0,1),i.clear(i.COLOR_BUFFER_BIT),i.bindBuffer(i.ARRAY_BUFFER,o),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,s),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,I),i.uniform1i(a,0),i.activeTexture(i.TEXTURE1),i.bindTexture(i.TEXTURE_2D,T),i.uniform1i(d,1),i.uniform2f(A,w.width,w.height),i.uniform1f(u,n.threshold),i.uniform1f(f,n.noiseIntensity),i.uniform2f(m,n.output_width,n.output_height),i.uniform1f(k,n.monochrome?1:0),i.uniform3f(E,...jt(n.colorDark)),i.uniform3f(_,...jt(n.colorLight)),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT),i.drawElements(i.TRIANGLES,6,i.UNSIGNED_SHORT,0)};function M(){D=requestAnimationFrame(()=>{L(),D=null})}return M(),{update(W){const V=n.image!==W.image,N=n.thresholdMap!==W.thresholdMap;n=W,V&&P(),N&&p(),M()},destroy(){D!==null&&cancelAnimationFrame(D)}}}function jt(e){const t=parseInt(e.slice(1,3),16)/255,n=parseInt(e.slice(3,5),16)/255,i=parseInt(e.slice(5,7),16)/255;return[t,n,i]}function Kn(e){let t,n,i,r,o;const s=e[3].default,l=xe(s,e,e[2],null);return{c(){t=v("button"),l&&l.c(),this.h()},l(a){t=b(a,"BUTTON",{type:!0,class:!0});var u=y(t);l&&l.l(u),u.forEach(g),this.h()},h(){t.disabled=e[0],c(t,"type","button"),c(t,"class",n=e[1][e[0]?"disabled":"normal"]+" rounded-md px-2.5 py-1.5 text-sm font-semibold focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 flex items-center justify-center gap-2")},m(a,u){B(a,t,u),l&&l.m(t,null),i=!0,r||(o=ee(t,"click",e[4]),r=!0)},p(a,[u]){l&&l.p&&(!i||u&4)&&Je(l,s,a,a[2],i?tt(s,a[2],u,null):et(a[2]),null),(!i||u&1)&&(t.disabled=a[0]),(!i||u&1&&n!==(n=a[1][a[0]?"disabled":"normal"]+" rounded-md px-2.5 py-1.5 text-sm font-semibold focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 flex items-center justify-center gap-2"))&&c(t,"class",n)},i(a){i||(X(l,a),i=!0)},o(a){O(l,a),i=!1},d(a){a&&g(t),l&&l.d(a),r=!1,o()}}}function xn(e,t,n){let{$$slots:i={},$$scope:r}=t,{disabled:o=!1}=t;const s={normal:"bg-indigo-600 text-white shadow-sm hover:bg-indigo-500",disabled:"bg-gray-200 text-gray-400 shadow-none cursor-not-allowed"};function l(a){Pn.call(this,e,a)}return e.$$set=a=>{"disabled"in a&&n(0,o=a.disabled),"$$scope"in a&&n(2,r=a.$$scope)},[o,s,r,i,l]}class Jn extends fe{constructor(t){super(),ce(this,t,xn,Kn,de,{disabled:0})}}async function ei(e,t,n="png"){const i=new OffscreenCanvas(e.width,e.height),r=i.getContext("2d");if(!r)return;r.drawImage(e,0,0,e.width,e.height);const o=await i.convertToBlob({type:"image/"+n,quality:1}),s=URL.createObjectURL(o),l=document.createElement("a");l.download=`${t}.${n}`,l.href=s,l.click(),l.remove(),URL.revokeObjectURL(s)}function Gt(e){return new Promise((t,n)=>{e.type.startsWith("image/")||n(new Error("Not an image file"));const i=new FileReader;i.onload=r=>{if(typeof i.result!="string")return;const o=new Image;o.onload=()=>{t(o)},o.onerror=s=>{n(s)},o.src=i.result},i.onerror=r=>{n(r)},i.readAsDataURL(e)})}function ti(e){const n=new OffscreenCanvas(e.width,e.height).getContext("2d");if(!n)throw new Error("Could not get canvas context");return n.drawImage(e,0,0),n.getImageData(0,0,e.width,e.height)}var ni=class extends EventTarget{dispatchTypedEvent(e,t){return super.dispatchEvent(t)}};class Te{constructor(t){this.id=-1,this.nativePointer=t,this.pageX=t.pageX,this.pageY=t.pageY,this.clientX=t.clientX,this.clientY=t.clientY,self.Touch&&t instanceof Touch?this.id=t.identifier:We(t)&&(this.id=t.pointerId)}getCoalesced(){if("getCoalescedEvents"in this.nativePointer){const t=this.nativePointer.getCoalescedEvents().map(n=>new Te(n));if(t.length>0)return t}return[this]}}const We=e=>"pointerId"in e,bt=e=>"changedTouches"in e,Zt=()=>{};class ii{constructor(t,{start:n=()=>!0,move:i=Zt,end:r=Zt,rawUpdates:o=!1,avoidPointerEvents:s=!1}={}){this._element=t,this.startPointers=[],this.currentPointers=[],this._excludeFromButtonsCheck=new Set,this._pointerStart=l=>{if(We(l)&&l.buttons===0)this._excludeFromButtonsCheck.add(l.pointerId);else if(!(l.buttons&1))return;const a=new Te(l);this.currentPointers.some(u=>u.id===a.id)||this._triggerPointerStart(a,l)&&(We(l)?((l.target&&"setPointerCapture"in l.target?l.target:this._element).setPointerCapture(l.pointerId),this._element.addEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move),this._element.addEventListener("pointerup",this._pointerEnd),this._element.addEventListener("pointercancel",this._pointerEnd)):(window.addEventListener("mousemove",this._move),window.addEventListener("mouseup",this._pointerEnd)))},this._touchStart=l=>{for(const a of Array.from(l.changedTouches))this._triggerPointerStart(new Te(a),l)},this._move=l=>{if(!bt(l)&&(!We(l)||!this._excludeFromButtonsCheck.has(l.pointerId))&&l.buttons===0){this._pointerEnd(l);return}const a=this.currentPointers.slice(),u=bt(l)?Array.from(l.changedTouches).map(f=>new Te(f)):[new Te(l)],d=[];for(const f of u){const m=this.currentPointers.findIndex(A=>A.id===f.id);m!==-1&&(d.push(f),this.currentPointers[m]=f)}d.length!==0&&this._moveCallback(a,d,l)},this._triggerPointerEnd=(l,a)=>{if(!bt(a)&&a.buttons&1)return!1;const u=this.currentPointers.findIndex(f=>f.id===l.id);if(u===-1)return!1;this.currentPointers.splice(u,1),this.startPointers.splice(u,1),this._excludeFromButtonsCheck.delete(l.id);const d=!(a.type==="mouseup"||a.type==="touchend"||a.type==="pointerup");return this._endCallback(l,a,d),!0},this._pointerEnd=l=>{if(this._triggerPointerEnd(new Te(l),l))if(We(l)){if(this.currentPointers.length)return;this._element.removeEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move),this._element.removeEventListener("pointerup",this._pointerEnd),this._element.removeEventListener("pointercancel",this._pointerEnd)}else window.removeEventListener("mousemove",this._move),window.removeEventListener("mouseup",this._pointerEnd)},this._touchEnd=l=>{for(const a of Array.from(l.changedTouches))this._triggerPointerEnd(new Te(a),l)},this._startCallback=n,this._moveCallback=i,this._endCallback=r,this._rawUpdates=o&&"onpointerrawupdate"in window,self.PointerEvent&&!s?this._element.addEventListener("pointerdown",this._pointerStart):(this._element.addEventListener("mousedown",this._pointerStart),this._element.addEventListener("touchstart",this._touchStart),this._element.addEventListener("touchmove",this._move),this._element.addEventListener("touchend",this._touchEnd),this._element.addEventListener("touchcancel",this._touchEnd))}stop(){this._element.removeEventListener("pointerdown",this._pointerStart),this._element.removeEventListener("mousedown",this._pointerStart),this._element.removeEventListener("touchstart",this._touchStart),this._element.removeEventListener("touchmove",this._move),this._element.removeEventListener("touchend",this._touchEnd),this._element.removeEventListener("touchcancel",this._touchEnd),this._element.removeEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move),this._element.removeEventListener("pointerup",this._pointerEnd),this._element.removeEventListener("pointercancel",this._pointerEnd),window.removeEventListener("mousemove",this._move),window.removeEventListener("mouseup",this._pointerEnd)}_triggerPointerStart(t,n){return this._startCallback(t,n)?(this.currentPointers.push(t),this.startPointers.push(t),!0):!1}}function dn(e,t,n){return Math.min(Math.max(e,t),n)}function qt(e,t){return t?Math.sqrt((t.clientX-e.clientX)**2+(t.clientY-e.clientY)**2):0}function $t(e,t){return t?{clientX:(e.clientX+t.clientX)/2,clientY:(e.clientY+t.clientY)/2}:e}const ut=class extends ni{constructor(n){super();Be(this,"element");Be(this,"transform",new DOMMatrix);Be(this,"pointerTracker");this.element=n,this.element.addEventListener("wheel",this.onWheel.bind(this)),this.pointerTracker=new ii(this.element,{start:(i,r)=>this.pointerTracker.currentPointers.length===2?!1:(r.preventDefault(),!0),move:i=>{this.onPointerMove(i,this.pointerTracker.currentPointers)},avoidPointerEvents:this.isSafari()}),this.element.addEventListener("wheel",this.onWheel.bind(this))}get x(){return this.transform.e}get y(){return this.transform.f}get scale(){return this.transform.a}set x(n){this.transform.e=n}set y(n){this.transform.f=n}set scale(n){this.transform.a=n,this.transform.d=n}onWheel(n){n.preventDefault();const i=this.element.getBoundingClientRect();let{deltaY:r}=n;const{ctrlKey:o,deltaMode:s}=n;s===1&&(r*=15);const l=r>0,a=o?100:300,u=1-(l?-r:r)/a,d=l?1/u:u,f=n.clientX-i.left,m=n.clientY-i.top;this.applyTransformation({scaleDiff:d,originX:f,originY:m})}applyTransformation(n={}){const{panX:i=0,panY:r=0,originX:o=0,originY:s=0,scaleDiff:l=1}=n,a=new DOMMatrix().translate(o,s).scale(l).translate(-o,-s),u=new DOMMatrix().translate(i,r);a.multiplySelf(u),a.multiplySelf(this.transform);const d=a.a,f=a.e,m=a.f;this.updateTransform(d,f,m)}onPointerMove(n,i){const r=this.element.getBoundingClientRect(),o=$t(n[0],n[1]),s=$t(i[0],i[1]),l=o.clientX-r.left,a=o.clientY-r.top,u=qt(n[0],n[1]),d=qt(i[0],i[1]),f=u?d/u:1;this.applyTransformation({originX:l,originY:a,scaleDiff:f,panX:s.clientX-o.clientX,panY:s.clientY-o.clientY})}updateTransform(n,i,r){if(n=dn(n,ut.MIN_SCALE,ut.MAX_SCALE),n===this.scale&&i===this.x&&r===this.y)return;this.x=i,this.y=r,this.scale=n;const o=new CustomEvent("panzoom:change",{bubbles:!0,detail:{x:this.x,y:this.y,scale:this.scale,matrix:this.transform}});this.dispatchTypedEvent("panzoom:change",o)}isSafari(){return/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)}reset(){this.updateTransform(1,0,0)}destroy(){this.pointerTracker.stop()}};let Ve=ut;Be(Ve,"MIN_SCALE",.01),Be(Ve,"MAX_SCALE",1e5);const ri=e=>({}),Qt=e=>({}),si=e=>({}),Kt=e=>({});function oi(e){let t,n,i,r,o,s,l,a,u,d,f,m,A,k;const E=e[6].left,_=xe(E,e,e[5],Kt),I=e[6].right,P=xe(I,e,e[5],Qt);return f=new je({props:{src:Wn,class:"w-6 h-6 text-white"}}),{c(){t=v("div"),n=v("div"),i=v("div"),r=v("div"),_&&_.c(),o=R(),s=v("div"),l=v("div"),P&&P.c(),a=R(),u=v("div"),d=v("div"),G(f.$$.fragment),this.h()},l(T){t=b(T,"DIV",{class:!0});var w=y(t);n=b(w,"DIV",{class:!0});var D=y(n);i=b(D,"DIV",{class:!0});var p=y(i);r=b(p,"DIV",{style:!0,class:!0});var L=y(r);_&&_.l(L),L.forEach(g),p.forEach(g),o=C(D),s=b(D,"DIV",{class:!0});var M=y(s);l=b(M,"DIV",{style:!0,class:!0});var W=y(l);P&&P.l(W),W.forEach(g),M.forEach(g),D.forEach(g),a=C(w),u=b(w,"DIV",{class:!0});var V=y(u);d=b(V,"DIV",{class:!0});var N=y(d);Z(f.$$.fragment,N),N.forEach(g),V.forEach(g),w.forEach(g),this.h()},h(){c(r,"style",e[2]),c(r,"class","w-full h-full origin-top-left grid place-items-center"),c(i,"class","mask-left svelte-90j1r"),c(l,"style",e[2]),c(l,"class","w-full h-full origin-top-left grid place-items-center"),c(s,"class","mask-right svelte-90j1r"),c(n,"class","w-full h-full grid place-items-center"),c(d,"class","w-12 h-12 rounded-full bg-black absolute top-1/2 -translate-x-1/2 left-1/2 grid place-items-center"),c(u,"class","handle relative shadow-lg svelte-90j1r"),c(t,"class","pz-container svelte-90j1r"),At(t,"--split-point",e[1]+"%")},m(T,w){B(T,t,w),h(t,n),h(n,i),h(i,r),_&&_.m(r,null),h(n,o),h(n,s),h(s,l),P&&P.m(l,null),h(t,a),h(t,u),h(u,d),q(f,d,null),e[7](t),m=!0,A||(k=[ze(e[4].call(null,n)),ze(e[3].call(null,u)),ee(u,"pointercancel",yt(li))],A=!0)},p(T,[w]){_&&_.p&&(!m||w&32)&&Je(_,E,T,T[5],m?tt(E,T[5],w,si):et(T[5]),Kt),(!m||w&4)&&c(r,"style",T[2]),P&&P.p&&(!m||w&32)&&Je(P,I,T,T[5],m?tt(I,T[5],w,ri):et(T[5]),Qt),(!m||w&4)&&c(l,"style",T[2]),w&2&&At(t,"--split-point",T[1]+"%")},i(T){m||(X(_,T),X(P,T),X(f.$$.fragment,T),m=!0)},o(T){O(_,T),O(P,T),O(f.$$.fragment,T),m=!1},d(T){T&&g(t),_&&_.d(T),P&&P.d(T),$(f),e[7](null),A=!1,Ye(k)}}}const li=()=>{};function ai(e,t,n){let{$$slots:i={},$$scope:r}=t,o=null,s=50;function l(f){f.addEventListener("pointerdown",m=>{const A=m.clientX,k=s,E=document.body.style.cursor;document.body.style.cursor="col-resize";const _=P=>{const T=o?o.clientWidth:window.innerWidth,w=P.clientX-A,D=k+w/T*100;n(1,s=dn(D,0,100))},I=()=>{document.body.style.cursor=E,window.removeEventListener("pointermove",_),window.removeEventListener("pointerup",I),window.removeEventListener("pointercancel",I)};window.addEventListener("pointermove",_),window.addEventListener("pointerup",I),window.addEventListener("pointercancel",I)})}let a="transform: none;";function u(f){const m=new Ve(f);function A(k){const{matrix:E}=k.detail;n(2,a=`transform: ${E.toString()};`)}return m.addEventListener("panzoom:change",A),{destroy(){m.removeEventListener("panzoom:change",A),m.destroy()}}}function d(f){j[f?"unshift":"push"](()=>{o=f,n(0,o)})}return e.$$set=f=>{"$$scope"in f&&n(5,r=f.$$scope)},[o,s,a,l,u,r,i,d]}class ui extends fe{constructor(t){super(),ce(this,t,ai,oi,de,{})}}const fi=""+new URL("../assets/cat.58b560b7.jpg",import.meta.url).href,ci="data:image/avif;base64,AAAAHGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZgAAAOptZXRhAAAAAAAAACFoZGxyAAAAAAAAAABwaWN0AAAAAAAAAAAAAAAAAAAAAA5waXRtAAAAAAABAAAAImlsb2MAAAAAREAAAQABAAAAAAEOAAEAAAAAAAAApwAAACNpaW5mAAAAAAABAAAAFWluZmUCAAAAAAEAAGF2MDEAAAAAamlwcnAAAABLaXBjbwAAABNjb2xybmNseAACAAIABoAAAAAMYXYxQ4EEDAAAAAAUaXNwZQAAAAAAAAJyAAACcgAAABBwaXhpAAAAAAMICAgAAAAXaXBtYQAAAAAAAAABAAEEgYIDhAAAAK9tZGF0EgAKChkmZxnHggQEDQgylgERQAEEEEEA9NBi7JFlrqXV1mwMry34uIYK7WRdWYJ/ZZ0EIyWW8aLm92oz5LY0W+l2FiKsHpp4BB3Vrk+iwHuzboac7wmSHHHRWklZdZ2hpEAi4E31lf1tjXnXie8fh4lzApbqjH5Pj7ZN6761WygYVdc2zvJOsflFZstng6rQU/oulDZSO6fQWKvzpO9pseyXBLfms64=",di=""+new URL("../assets/david.0e7e3b46.png",import.meta.url).href;/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const hn=Symbol("Comlink.proxy"),hi=Symbol("Comlink.endpoint"),mi=Symbol("Comlink.releaseProxy"),Et=Symbol("Comlink.finalizer"),Ke=Symbol("Comlink.thrown"),mn=e=>typeof e=="object"&&e!==null||typeof e=="function",gi={canHandle:e=>mn(e)&&e[hn],serialize(e){const{port1:t,port2:n}=new MessageChannel;return _n(e,t),[n,[n]]},deserialize(e){return e.start(),Lt(e)}},_i={canHandle:e=>mn(e)&&Ke in e,serialize({value:e}){let t;return e instanceof Error?t={isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:t={isError:!1,value:e},[t,[]]},deserialize(e){throw e.isError?Object.assign(new Error(e.value.message),e.value):e.value}},gn=new Map([["proxy",gi],["throw",_i]]);function pi(e,t){for(const n of e)if(t===n||n==="*"||n instanceof RegExp&&n.test(t))return!0;return!1}function _n(e,t=globalThis,n=["*"]){t.addEventListener("message",function i(r){if(!r||!r.data)return;if(!pi(n,r.origin)){console.warn(`Invalid origin '${r.origin}' for comlink proxy`);return}const{id:o,type:s,path:l}=Object.assign({path:[]},r.data),a=(r.data.argumentList||[]).map(De);let u;try{const d=l.slice(0,-1).reduce((m,A)=>m[A],e),f=l.reduce((m,A)=>m[A],e);switch(s){case"GET":u=f;break;case"SET":d[l.slice(-1)[0]]=De(r.data.value),u=!0;break;case"APPLY":u=f.apply(d,a);break;case"CONSTRUCT":{const m=new f(...a);u=Ai(m)}break;case"ENDPOINT":{const{port1:m,port2:A}=new MessageChannel;_n(e,A),u=En(m,[m])}break;case"RELEASE":u=void 0;break;default:return}}catch(d){u={value:d,[Ke]:0}}Promise.resolve(u).catch(d=>({value:d,[Ke]:0})).then(d=>{const[f,m]=lt(d);t.postMessage(Object.assign(Object.assign({},f),{id:o}),m),s==="RELEASE"&&(t.removeEventListener("message",i),pn(t),Et in e&&typeof e[Et]=="function"&&e[Et]())}).catch(d=>{const[f,m]=lt({value:new TypeError("Unserializable return value"),[Ke]:0});t.postMessage(Object.assign(Object.assign({},f),{id:o}),m)})}),t.start&&t.start()}function vi(e){return e.constructor.name==="MessagePort"}function pn(e){vi(e)&&e.close()}function Lt(e,t){return kt(e,[],t)}function Qe(e){if(e)throw new Error("Proxy has been released and is not useable")}function vn(e){return Oe(e,{type:"RELEASE"}).then(()=>{pn(e)})}const st=new WeakMap,ot="FinalizationRegistry"in globalThis&&new FinalizationRegistry(e=>{const t=(st.get(e)||0)-1;st.set(e,t),t===0&&vn(e)});function bi(e,t){const n=(st.get(t)||0)+1;st.set(t,n),ot&&ot.register(e,t,e)}function Ei(e){ot&&ot.unregister(e)}function kt(e,t=[],n=function(){}){let i=!1;const r=new Proxy(n,{get(o,s){if(Qe(i),s===mi)return()=>{Ei(r),vn(e),i=!0};if(s==="then"){if(t.length===0)return{then:()=>r};const l=Oe(e,{type:"GET",path:t.map(a=>a.toString())}).then(De);return l.then.bind(l)}return kt(e,[...t,s])},set(o,s,l){Qe(i);const[a,u]=lt(l);return Oe(e,{type:"SET",path:[...t,s].map(d=>d.toString()),value:a},u).then(De)},apply(o,s,l){Qe(i);const a=t[t.length-1];if(a===hi)return Oe(e,{type:"ENDPOINT"}).then(De);if(a==="bind")return kt(e,t.slice(0,-1));const[u,d]=xt(l);return Oe(e,{type:"APPLY",path:t.map(f=>f.toString()),argumentList:u},d).then(De)},construct(o,s){Qe(i);const[l,a]=xt(s);return Oe(e,{type:"CONSTRUCT",path:t.map(u=>u.toString()),argumentList:l},a).then(De)}});return bi(r,e),r}function wi(e){return Array.prototype.concat.apply([],e)}function xt(e){const t=e.map(lt);return[t.map(n=>n[0]),wi(t.map(n=>n[1]))]}const bn=new WeakMap;function En(e,t){return bn.set(e,t),e}function Ai(e){return Object.assign(e,{[hn]:!0})}function lt(e){for(const[t,n]of gn)if(n.canHandle(e)){const[i,r]=n.serialize(e);return[{type:"HANDLER",name:t,value:i},r]}return[{type:"RAW",value:e},bn.get(e)||[]]}function De(e){switch(e.type){case"HANDLER":return gn.get(e.name).deserialize(e.value);case"RAW":return e.value}}function Oe(e,t,n){return new Promise(i=>{const r=yi();e.addEventListener("message",function o(s){!s.data||!s.data.id||s.data.id!==r||(e.removeEventListener("message",o),i(s.data))}),e.start&&e.start(),e.postMessage(Object.assign({id:r},t),n)})}function yi(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}function ki(){return new Worker(""+new URL("../workers/renderingWorker-507c4fff.js",import.meta.url).href)}function Ti(e,t){const n=e.transferControlToOffscreen(),i=new ki,r=Lt(i);let o=null,s=null,l=()=>{};return r.errorDiffusionDithering(En(n,[n]),t).then(a=>{s=a.update,l=a.destroy,s(o||t)}),{update:a=>{s?s(a):o=a},destroy:()=>{l(),i.terminate()}}}function Si(e){let t,n,i,r,o,s,l;return{c(){t=v("div"),n=v("label"),i=H(e[1]),r=R(),o=v("input"),this.h()},l(a){t=b(a,"DIV",{});var u=y(t);n=b(u,"LABEL",{for:!0,class:!0});var d=y(n);i=Y(d,e[1]),d.forEach(g),r=C(u),o=b(u,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0,name:!0,class:!0}),u.forEach(g),this.h()},h(){c(n,"for",e[6]),c(n,"class","block mb-2 text-sm font-medium text-gray-900 dark:text-white"),c(o,"id",e[6]),c(o,"type","range"),c(o,"min",e[3]),c(o,"max",e[4]),c(o,"step",e[5]),c(o,"name",e[2]),c(o,"class","w-full h-1.5 mb-6 bg-white ring-1 ring-gray-300 shadow-sm rounded-lg appearance-none cursor-pointer accent-indigo-600 dark:bg-gray-700")},m(a,u){B(a,t,u),h(t,n),h(n,i),h(t,r),h(t,o),Fe(o,e[0]),s||(l=[ee(o,"change",e[7]),ee(o,"input",e[7])],s=!0)},p(a,[u]){u&2&&ft(i,a[1]),u&8&&c(o,"min",a[3]),u&16&&c(o,"max",a[4]),u&32&&c(o,"step",a[5]),u&4&&c(o,"name",a[2]),u&1&&Fe(o,a[0])},i:ae,o:ae,d(a){a&&g(t),s=!1,Ye(l)}}}function Li(e,t,n){let{label:i}=t,{name:r=void 0}=t,{min:o=null}=t,{max:s=null}=t,{value:l=0}=t,{step:a=1}=t,u=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);function d(){l=Nn(this.value),n(0,l)}return e.$$set=f=>{"label"in f&&n(1,i=f.label),"name"in f&&n(2,r=f.name),"min"in f&&n(3,o=f.min),"max"in f&&n(4,s=f.max),"value"in f&&n(0,l=f.value),"step"in f&&n(5,a=f.step)},[l,i,r,o,s,a,u,d]}class at extends fe{constructor(t){super(),ce(this,t,Li,Si,de,{label:1,name:2,min:3,max:4,value:0,step:5})}}function Jt(e,t,n){const i=e.slice();return i[6]=t[n],i}function en(e){let t,n=e[6].name+"",i,r,o;return{c(){t=v("option"),i=H(n),this.h()},l(s){t=b(s,"OPTION",{});var l=y(t);i=Y(l,n),l.forEach(g),this.h()},h(){t.__value=r=e[6].value,t.value=t.__value,t.selected=o=e[6].value===e[0]},m(s,l){B(s,t,l),h(t,i)},p(s,l){l&2&&n!==(n=s[6].name+"")&&ft(i,n),l&2&&r!==(r=s[6].value)&&(t.__value=r,t.value=t.__value),l&3&&o!==(o=s[6].value===s[0])&&(t.selected=o)},d(s){s&&g(t)}}}function Ii(e){let t,n,i,r,o,s,l,a=e[1],u=[];for(let d=0;d<a.length;d+=1)u[d]=en(Jt(e,a,d));return{c(){t=v("div"),n=v("label"),i=H(e[2]),r=R(),o=v("select");for(let d=0;d<u.length;d+=1)u[d].c();this.h()},l(d){t=b(d,"DIV",{});var f=y(t);n=b(f,"LABEL",{for:!0,class:!0});var m=y(n);i=Y(m,e[2]),m.forEach(g),r=C(f),o=b(f,"SELECT",{id:!0,name:!0,class:!0});var A=y(o);for(let k=0;k<u.length;k+=1)u[k].l(A);A.forEach(g),f.forEach(g),this.h()},h(){c(n,"for",e[4]),c(n,"class","block text-sm font-medium leading-6 text-gray-900"),c(o,"id",e[4]),c(o,"name",e[3]),c(o,"class","mt-2 block w-full rounded-md border-0 py-1.5 pl-3 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-indigo-600 sm:text-sm sm:leading-6"),e[0]===void 0&&Un(()=>e[5].call(o))},m(d,f){B(d,t,f),h(t,n),h(n,i),h(t,r),h(t,o);for(let m=0;m<u.length;m+=1)u[m]&&u[m].m(o,null);Wt(o,e[0],!0),s||(l=ee(o,"change",e[5]),s=!0)},p(d,[f]){if(f&4&&ft(i,d[2]),f&3){a=d[1];let m;for(m=0;m<a.length;m+=1){const A=Jt(d,a,m);u[m]?u[m].p(A,f):(u[m]=en(A),u[m].c(),u[m].m(o,null))}for(;m<u.length;m+=1)u[m].d(1);u.length=a.length}f&8&&c(o,"name",d[3]),f&3&&Wt(o,d[0])},i:ae,o:ae,d(d){d&&g(t),Tt(u,d),s=!1,l()}}}function Di(e,t,n){let{options:i}=t,{selected:r}=t,{label:o}=t,{name:s=void 0}=t,l=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);function a(){r=Xn(this),n(0,r),n(1,i)}return e.$$set=u=>{"options"in u&&n(1,i=u.options),"selected"in u&&n(0,r=u.selected),"label"in u&&n(2,o=u.label),"name"in u&&n(3,s=u.name)},[r,i,o,s,l,a]}class wn extends fe{constructor(t){super(),ce(this,t,Di,Ii,de,{options:1,selected:0,label:2,name:3})}}function Mi(e){let t,n,i,r,o,s;function l(f){e[5](f)}let a={label:"Diffusion Mode",options:e[2]};e[1]!==void 0&&(a.selected=e[1]),t=new wn({props:a}),j.push(()=>x(t,"selected",l));function u(f){e[6](f)}let d={label:"Diffusion Strength ("+e[0]+")",min:0,max:2,step:.01};return e[0]!==void 0&&(d.value=e[0]),r=new at({props:d}),j.push(()=>x(r,"value",u)),{c(){G(t.$$.fragment),i=R(),G(r.$$.fragment)},l(f){Z(t.$$.fragment,f),i=C(f),Z(r.$$.fragment,f)},m(f,m){q(t,f,m),B(f,i,m),q(r,f,m),s=!0},p(f,[m]){const A={};!n&&m&2&&(n=!0,A.selected=f[1],J(()=>n=!1)),t.$set(A);const k={};m&1&&(k.label="Diffusion Strength ("+f[0]+")"),!o&&m&1&&(o=!0,k.value=f[0],J(()=>o=!1)),r.$set(k)},i(f){s||(X(t.$$.fragment,f),X(r.$$.fragment,f),s=!0)},o(f){O(t.$$.fragment,f),O(r.$$.fragment,f),s=!1},d(f){$(t,f),f&&g(i),$(r,f)}}}function Ri(e,t,n){let{diffusionStrength:i}=t,{diffusionMatrix:r}=t,{diffusionOriginX:o}=t,s="floyd_steinberg";const l=[{name:"Basic",value:"basic"},{name:"Floyd-Steinberg",value:"floyd_steinberg"},{name:"Atkinson",value:"atkinson"},{name:"Jarvis-Judice-Ninke",value:"jarvis_judice_ninke"}],a={basic:{matrix:[[0,1/2],[1/2,0]],originX:0},floyd_steinberg:{matrix:[[0,0,7/16],[3/16,5/16,1/16]],originX:1},atkinson:{matrix:[[0,0,1/8,1/8],[1/8,1/8,1/8,0],[0,1/8,0,0]],originX:1},jarvis_judice_ninke:{matrix:[[0,0,0,7/48,5/48],[3/48,5/48,7/48,5/48,3/48],[1/48,3/48,5/48,3/48,1/48]],originX:2}};function u(f){s=f,n(1,s)}function d(f){i=f,n(0,i)}return e.$$set=f=>{"diffusionStrength"in f&&n(0,i=f.diffusionStrength),"diffusionMatrix"in f&&n(3,r=f.diffusionMatrix),"diffusionOriginX"in f&&n(4,o=f.diffusionOriginX)},e.$$.update=()=>{if(e.$$.dirty&2){const{matrix:f,originX:m}=a[s];n(3,r=f),n(4,o=m)}},[i,s,l,r,o,u,d]}class Ci extends fe{constructor(t){super(),ce(this,t,Ri,Mi,de,{diffusionStrength:0,diffusionMatrix:3,diffusionOriginX:4})}}function tn(e,t,n){const i=e.slice();return i[4]=t[n],i}function nn(e){let t,n,i,r=!1,o,s,l=e[4].label+"",a,u,d,f,m,A;return f=Bn(e[3][0]),{c(){t=v("label"),n=v("input"),o=R(),s=v("div"),a=H(l),d=R(),this.h()},l(k){t=b(k,"LABEL",{class:!0});var E=y(t);n=b(E,"INPUT",{type:!0,name:!0,class:!0}),o=C(E),s=b(E,"DIV",{class:!0});var _=y(s);a=Y(_,l),_.forEach(g),d=C(E),E.forEach(g),this.h()},h(){c(n,"type","radio"),c(n,"name","tabs"),n.__value=i=e[4].value,n.value=n.__value,c(n,"class","sr-only"),c(s,"class",u="flex items-center justify-center py-2 text-sm font-medium text-gray-700 bg-white border-b "+(e[4].value===e[0]?"border-indigo-500 border-b-2":"border-gray-300")+" cursor-pointer hover:bg-gray-50"),c(t,"class","flex-1"),f.p(n)},m(k,E){B(k,t,E),h(t,n),n.checked=n.__value===e[0],h(t,o),h(t,s),h(s,a),h(t,d),m||(A=ee(n,"change",e[2]),m=!0)},p(k,E){E&2&&i!==(i=k[4].value)&&(n.__value=i,n.value=n.__value,r=!0),(r||E&3)&&(n.checked=n.__value===k[0]),E&2&&l!==(l=k[4].label+"")&&ft(a,l),E&3&&u!==(u="flex items-center justify-center py-2 text-sm font-medium text-gray-700 bg-white border-b "+(k[4].value===k[0]?"border-indigo-500 border-b-2":"border-gray-300")+" cursor-pointer hover:bg-gray-50")&&c(s,"class",u)},d(k){k&&g(t),f.r(),m=!1,A()}}}function Pi(e){let t,n=e[1],i=[];for(let r=0;r<n.length;r+=1)i[r]=nn(tn(e,n,r));return{c(){t=v("nav");for(let r=0;r<i.length;r+=1)i[r].c();this.h()},l(r){t=b(r,"NAV",{class:!0});var o=y(t);for(let s=0;s<i.length;s+=1)i[s].l(o);o.forEach(g),this.h()},h(){c(t,"class","flex w-full")},m(r,o){B(r,t,o);for(let s=0;s<i.length;s+=1)i[s]&&i[s].m(t,null)},p(r,[o]){if(o&3){n=r[1];let s;for(s=0;s<n.length;s+=1){const l=tn(r,n,s);i[s]?i[s].p(l,o):(i[s]=nn(l),i[s].c(),i[s].m(t,null))}for(;s<i.length;s+=1)i[s].d(1);i.length=n.length}},i:ae,o:ae,d(r){r&&g(t),Tt(i,r)}}}function Ni(e,t,n){let{tabs:i}=t,{selected:r}=t;const o=[[]];function s(){r=this.__value,n(0,r)}return e.$$set=l=>{"tabs"in l&&n(1,i=l.tabs),"selected"in l&&n(0,r=l.selected)},[r,i,s,o]}class Ui extends fe{constructor(t){super(),ce(this,t,Ni,Pi,de,{tabs:1,selected:0})}}const Xi=e=>({}),rn=e=>({});function Bi(e){let t;const n=e[2].placeholder,i=xe(n,e,e[1],rn),r=i||Fi();return{c(){r&&r.c()},l(o){r&&r.l(o)},m(o,s){r&&r.m(o,s),t=!0},p(o,s){i&&i.p&&(!t||s&2)&&Je(i,n,o,o[1],t?tt(n,o[1],s,Xi):et(o[1]),rn)},i(o){t||(X(r,o),t=!0)},o(o){O(r,o),t=!1},d(o){r&&r.d(o)}}}function Oi(e){let t,n,i,r;return{c(){t=v("canvas"),this.h()},l(o){t=b(o,"CANVAS",{class:!0,style:!0}),y(t).forEach(g),this.h()},h(){c(t,"class","w-full max-h-96 object-contain shadow-lg"),At(t,"image-rendering","pixelated")},m(o,s){B(o,t,s),i||(r=ze(n=Vi.call(null,t,e[0])),i=!0)},p(o,s){n&&St(n.update)&&s&1&&n.update.call(null,o[0])},i:ae,o:ae,d(o){o&&g(t),i=!1,r()}}}function Fi(e){let t,n;return{c(){t=v("span"),n=H("No Image")},l(i){t=b(i,"SPAN",{});var r=y(t);n=Y(r,"No Image"),r.forEach(g)},m(i,r){B(i,t,r),h(t,n)},p:ae,d(i){i&&g(t)}}}function Wi(e){let t,n,i,r;const o=[Oi,Bi],s=[];function l(a,u){return a[0]?0:1}return n=l(e),i=s[n]=o[n](e),{c(){t=v("div"),i.c(),this.h()},l(a){t=b(a,"DIV",{class:!0});var u=y(t);i.l(u),u.forEach(g),this.h()},h(){c(t,"class","w-full aspect-square rounded-lg bg-gray-100 p-8 grid place-items-center")},m(a,u){B(a,t,u),s[n].m(t,null),r=!0},p(a,[u]){let d=n;n=l(a),n===d?s[n].p(a,u):(nt(),O(s[d],1,1,()=>{s[d]=null}),it(),i=s[n],i?i.p(a,u):(i=s[n]=o[n](a),i.c()),X(i,1),i.m(t,null))},i(a){r||(X(i),r=!0)},o(a){O(i),r=!1},d(a){a&&g(t),s[n].d()}}}function Vi(e,t){const n=e.getContext("2d");if(!n)return;const i=()=>{e.width=t.width,e.height=t.height,n.putImageData(t,0,0)};let r=null;const o=()=>{r||(r=requestAnimationFrame(()=>{r=null,i()}))};return o(),{destroy(){r&&cancelAnimationFrame(r)},update:s=>{t=s,o()}}}function zi(e,t,n){let{$$slots:i={},$$scope:r}=t,{imageData:o}=t;return e.$$set=s=>{"imageData"in s&&n(0,o=s.imageData),"$$scope"in s&&n(1,r=s.$$scope)},[o,r,i]}class Hi extends fe{constructor(t){super(),ce(this,t,zi,Wi,de,{imageData:0})}}function Yi(){return new Worker(""+new URL("../workers/worker-09b3192d.js",import.meta.url).href)}let wt=null;async function ji(e){return wt||(wt=Lt(new Yi)),await wt.generate(e)}function sn(e){let t,n,i;function r(s){e[9](s)}let o={label:"Bayer Level ("+e[4]+")",min:0,max:5,step:1};return e[4]!==void 0&&(o.value=e[4]),t=new at({props:o}),j.push(()=>x(t,"value",r)),{c(){G(t.$$.fragment)},l(s){Z(t.$$.fragment,s)},m(s,l){q(t,s,l),i=!0},p(s,l){const a={};l&16&&(a.label="Bayer Level ("+s[4]+")"),!n&&l&16&&(n=!0,a.value=s[4],J(()=>n=!1)),t.$set(a)},i(s){i||(X(t.$$.fragment,s),i=!0)},o(s){O(t.$$.fragment,s),i=!1},d(s){$(t,s)}}}function on(e){let t,n,i;function r(s){e[10](s)}let o={aspectRatio:1,minWidth:1,minHeight:1,maxHeight:3e3,maxWidth:3e3};return e[5]!==void 0&&(o.width=e[5]),t=new cn({props:o}),j.push(()=>x(t,"width",r)),{c(){G(t.$$.fragment)},l(s){Z(t.$$.fragment,s)},m(s,l){q(t,s,l),i=!0},p(s,l){const a={};!n&&l&32&&(n=!0,a.width=s[5],J(()=>n=!1)),t.$set(a)},i(s){i||(X(t.$$.fragment,s),i=!0)},o(s){O(t.$$.fragment,s),i=!1},d(s){$(t,s)}}}function Gi(e){let t,n;return{c(){t=v("span"),n=H("Loading Threshold Map"),this.h()},l(i){t=b(i,"SPAN",{slot:!0});var r=y(t);n=Y(r,"Loading Threshold Map"),r.forEach(g),this.h()},h(){c(t,"slot","placeholder")},m(i,r){B(i,t,r),h(t,n)},p:ae,d(i){i&&g(t)}}}function Zi(e){let t,n,i,r,o,s,l,a,u,d,f,m,A;function k(p){e[8](p)}let E={label:"Threshold Map",options:e[6]};e[3]!==void 0&&(E.selected=e[3]),t=new wn({props:E}),j.push(()=>x(t,"selected",k));let _=e[3]==="bayer"&&sn(e),I=e[3]==="white_noise"&&on(e);s=new Hi({props:{imageData:e[0],$$slots:{placeholder:[Gi]},$$scope:{ctx:e}}});function P(p){e[11](p)}let T={label:"Threshold ("+e[1]+")",min:0,max:1,step:.01};e[1]!==void 0&&(T.value=e[1]),a=new at({props:T}),j.push(()=>x(a,"value",P));function w(p){e[12](p)}let D={label:"Noise Intensity ("+e[2]+")",min:0,max:1.5,step:.01};return e[2]!==void 0&&(D.value=e[2]),f=new at({props:D}),j.push(()=>x(f,"value",w)),{c(){G(t.$$.fragment),i=R(),_&&_.c(),r=R(),I&&I.c(),o=R(),G(s.$$.fragment),l=R(),G(a.$$.fragment),d=R(),G(f.$$.fragment)},l(p){Z(t.$$.fragment,p),i=C(p),_&&_.l(p),r=C(p),I&&I.l(p),o=C(p),Z(s.$$.fragment,p),l=C(p),Z(a.$$.fragment,p),d=C(p),Z(f.$$.fragment,p)},m(p,L){q(t,p,L),B(p,i,L),_&&_.m(p,L),B(p,r,L),I&&I.m(p,L),B(p,o,L),q(s,p,L),B(p,l,L),q(a,p,L),B(p,d,L),q(f,p,L),A=!0},p(p,[L]){const M={};!n&&L&8&&(n=!0,M.selected=p[3],J(()=>n=!1)),t.$set(M),p[3]==="bayer"?_?(_.p(p,L),L&8&&X(_,1)):(_=sn(p),_.c(),X(_,1),_.m(r.parentNode,r)):_&&(nt(),O(_,1,1,()=>{_=null}),it()),p[3]==="white_noise"?I?(I.p(p,L),L&8&&X(I,1)):(I=on(p),I.c(),X(I,1),I.m(o.parentNode,o)):I&&(nt(),O(I,1,1,()=>{I=null}),it());const W={};L&1&&(W.imageData=p[0]),L&8192&&(W.$$scope={dirty:L,ctx:p}),s.$set(W);const V={};L&2&&(V.label="Threshold ("+p[1]+")"),!u&&L&2&&(u=!0,V.value=p[1],J(()=>u=!1)),a.$set(V);const N={};L&4&&(N.label="Noise Intensity ("+p[2]+")"),!m&&L&4&&(m=!0,N.value=p[2],J(()=>m=!1)),f.$set(N)},i(p){A||(X(t.$$.fragment,p),X(_),X(I),X(s.$$.fragment,p),X(a.$$.fragment,p),X(f.$$.fragment,p),A=!0)},o(p){O(t.$$.fragment,p),O(_),O(I),O(s.$$.fragment,p),O(a.$$.fragment,p),O(f.$$.fragment,p),A=!1},d(p){$(t,p),p&&g(i),_&&_.d(p),p&&g(r),I&&I.d(p),p&&g(o),$(s,p),p&&g(l),$(a,p),p&&g(d),$(f,p)}}}function qi(e,t,n){let i,{thresholdMap:r}=t,{threshold:o}=t,{noiseIntensity:s}=t,l="bayer";const a=[{name:"Bayer",value:"bayer"},{name:"Blue Noise",value:"blue_noise"},{name:"White Noise",value:"white_noise"}];let u=3,d=256;function f(_){l=_,n(3,l)}function m(_){u=_,n(4,u)}function A(_){d=_,n(5,d)}function k(_){o=_,n(1,o)}function E(_){s=_,n(2,s)}return e.$$set=_=>{"thresholdMap"in _&&n(0,r=_.thresholdMap),"threshold"in _&&n(1,o=_.threshold),"noiseIntensity"in _&&n(2,s=_.noiseIntensity)},e.$$.update=()=>{if(e.$$.dirty&32&&n(7,i=d),e.$$.dirty&184&&"ImageData"in globalThis){let _;switch(l){case"bayer":_={mode:"bayer",level:u};break;case"blue_noise":_={mode:"blue_noise"};break;case"white_noise":_={mode:"white_noise",width:d,height:i};break}ji(_).then(I=>n(0,r=I))}},[r,o,s,l,u,d,a,i,f,m,A,k,E]}class $i extends fe{constructor(t){super(),ce(this,t,qi,Zi,de,{thresholdMap:0,threshold:1,noiseIntensity:2})}}function ln(e,t,n){const i=e.slice();return i[37]=t[n],i}function Qi(e){let t,n,i,r,o,s,l,a,u,d,f,m,A,k,E,_,I,P,T=e[16],w=[];for(let D=0;D<T.length;D+=1)w[D]=an(ln(e,T,D));return d=new je({props:{src:zn,class:"w-12 h-12 text-gray-400"}}),{c(){t=v("div"),n=v("div"),i=v("p"),r=H("Select or Drop an Image to Start"),o=R(),s=v("div");for(let D=0;D<w.length;D+=1)w[D].c();l=R(),a=v("label"),u=v("div"),G(d.$$.fragment),f=R(),m=v("span"),A=H("Choose an Image"),k=R(),E=v("input"),this.h()},l(D){t=b(D,"DIV",{class:!0});var p=y(t);n=b(p,"DIV",{class:!0});var L=y(n);i=b(L,"P",{class:!0});var M=y(i);r=Y(M,"Select or Drop an Image to Start"),M.forEach(g),o=C(L),s=b(L,"DIV",{class:!0});var W=y(s);for(let te=0;te<w.length;te+=1)w[te].l(W);l=C(W),a=b(W,"LABEL",{for:!0,class:!0});var V=y(a);u=b(V,"DIV",{class:!0});var N=y(u);Z(d.$$.fragment,N),N.forEach(g),f=C(V),m=b(V,"SPAN",{class:!0});var F=y(m);A=Y(F,"Choose an Image"),F.forEach(g),k=C(V),E=b(V,"INPUT",{type:!0,class:!0,id:!0,accept:!0}),V.forEach(g),W.forEach(g),L.forEach(g),p.forEach(g),this.h()},h(){c(i,"class","text-2xl text-gray-500 text-center"),c(u,"class","grid place-items-center h-full w-full"),c(m,"class","sr-only"),c(E,"type","file"),c(E,"class","sr-only"),c(E,"id","image-input"),c(E,"accept","image/*"),c(a,"for","image-input"),c(a,"class","block spect-square h-24 w-24 object-cover rounded-md shadow-md border-2 border-white bg-white hover:bg-gray-100"),c(s,"class","flex gap-3 justify-center flex-wrap"),c(n,"class","grid gap-4"),c(t,"class","w-full h-full grid place-items-center px-8")},m(D,p){B(D,t,p),h(t,n),h(n,i),h(i,r),h(n,o),h(n,s);for(let L=0;L<w.length;L+=1)w[L]&&w[L].m(s,null);h(s,l),h(s,a),h(a,u),q(d,u,null),h(a,f),h(a,m),h(m,A),h(a,k),h(a,E),_=!0,I||(P=ee(E,"input",e[19]),I=!0)},p(D,p){if(p[0]&1114112){T=D[16];let L;for(L=0;L<T.length;L+=1){const M=ln(D,T,L);w[L]?w[L].p(M,p):(w[L]=an(M),w[L].c(),w[L].m(s,l))}for(;L<w.length;L+=1)w[L].d(1);w.length=T.length}},i(D){_||(X(d.$$.fragment,D),_=!0)},o(D){O(d.$$.fragment,D),_=!1},d(D){D&&g(t),Tt(w,D),$(d),I=!1,P()}}}function Ki(e){let t,n,i,r,o,s,l,a;return n=new ui({props:{$$slots:{right:[nr],left:[xi]},$$scope:{ctx:e}}}),o=new je({props:{src:Hn,class:"w-5 h-5 text-white"}}),{c(){t=v("div"),G(n.$$.fragment),i=R(),r=v("button"),G(o.$$.fragment),this.h()},l(u){t=b(u,"DIV",{class:!0});var d=y(t);Z(n.$$.fragment,d),i=C(d),r=b(d,"BUTTON",{class:!0,title:!0});var f=y(r);Z(o.$$.fragment,f),f.forEach(g),d.forEach(g),this.h()},h(){c(r,"class","absolute top-0 left-0 m-4 p-2 bg-black bg-opacity-40 rounded-full"),c(r,"title","Close Image & Reset"),c(t,"class","w-full h-full relative")},m(u,d){B(u,t,d),q(n,t,null),h(t,i),h(t,r),q(o,r,null),s=!0,l||(a=ee(r,"click",e[23]),l=!0)},p(u,d){const f={};d[0]&65531|d[1]&512&&(f.$$scope={dirty:d,ctx:u}),n.$set(f)},i(u){s||(X(n.$$.fragment,u),X(o.$$.fragment,u),s=!0)},o(u){O(n.$$.fragment,u),O(o.$$.fragment,u),s=!1},d(u){u&&g(t),$(n),$(o),l=!1,a()}}}function an(e){let t,n,i,r,o;function s(){return e[24](e[37])}return{c(){t=v("button"),n=v("img"),this.h()},l(l){t=b(l,"BUTTON",{class:!0});var a=y(t);n=b(a,"IMG",{class:!0,src:!0,alt:!0}),a.forEach(g),this.h()},h(){c(n,"class","aspect-square h-24 w-24 object-cover rounded-md shadow-md border-2 border-white"),He(n.src,i=e[37])||c(n,"src",i),c(n,"alt",""),c(t,"class","hover:opacity-75 transition-opacity")},m(l,a){B(l,t,a),h(t,n),r||(o=ee(t,"click",s),r=!0)},p(l,a){e=l},d(l){l&&g(t),r=!1,o()}}}function xi(e){let t,n,i;return{c(){t=v("img"),this.h()},l(r){t=b(r,"IMG",{slot:!0,src:!0,alt:!0,style:!0,class:!0}),this.h()},h(){c(t,"slot","left"),He(t.src,n=e[1].src)||c(t,"src",n),c(t,"alt",""),c(t,"style",i=`width: ${e[0]}px; height: ${e[15]}px`),c(t,"class","pixelated max-w-none shadow-lg svelte-1tfolzf")},m(r,o){B(r,t,o)},p(r,o){o[0]&2&&!He(t.src,n=r[1].src)&&c(t,"src",n),o[0]&32769&&i!==(i=`width: ${r[0]}px; height: ${r[15]}px`)&&c(t,"style",i)},d(r){r&&g(t)}}}function Ji(e){let t,n,i;return{c(){t=v("img"),this.h()},l(r){t=b(r,"IMG",{src:!0,alt:!0,style:!0,class:!0}),this.h()},h(){He(t.src,n=e[1].src)||c(t,"src",n),c(t,"alt",""),c(t,"style",i=`width: ${e[0]}px; height: ${e[15]}px`),c(t,"class","pixelated max-w-none shadow-lg svelte-1tfolzf")},m(r,o){B(r,t,o)},p(r,o){o[0]&2&&!He(t.src,n=r[1].src)&&c(t,"src",n),o[0]&32769&&i!==(i=`width: ${r[0]}px; height: ${r[15]}px`)&&c(t,"style",i)},d(r){r&&g(t)}}}function er(e){let t,n=e[9]&&un(e);return{c(){n&&n.c(),t=rt()},l(i){n&&n.l(i),t=rt()},m(i,r){n&&n.m(i,r),B(i,t,r)},p(i,r){i[9]?n?n.p(i,r):(n=un(i),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(i){n&&n.d(i),i&&g(t)}}}function tr(e){let t,n,i,r,o;return{c(){t=v("canvas"),this.h()},l(s){t=b(s,"CANVAS",{class:!0,style:!0,width:!0,height:!0}),y(t).forEach(g),this.h()},h(){c(t,"class","pixelated shadow-lg bg-gray-200 svelte-1tfolzf"),c(t,"style",n=`width: ${e[0]}px; height: ${e[15]}px`),c(t,"width",e[0]),c(t,"height",e[15])},m(s,l){B(s,t,l),e[21](t),r||(o=ze(i=Ti.call(null,t,{image:e[7],output_width:e[0],output_height:e[15],monochrome:e[3],colorLight:e[4],colorDark:e[5],diffusionStrength:e[12],diffusionMatrix:e[13],diffusionMatrixOriginX:e[14]})),r=!0)},p(s,l){l[0]&32769&&n!==(n=`width: ${s[0]}px; height: ${s[15]}px`)&&c(t,"style",n),l[0]&1&&c(t,"width",s[0]),l[0]&32768&&c(t,"height",s[15]),i&&St(i.update)&&l[0]&61625&&i.update.call(null,{image:s[7],output_width:s[0],output_height:s[15],monochrome:s[3],colorLight:s[4],colorDark:s[5],diffusionStrength:s[12],diffusionMatrix:s[13],diffusionMatrixOriginX:s[14]})},d(s){s&&g(t),e[21](null),r=!1,o()}}}function un(e){let t,n,i,r,o;return{c(){t=v("canvas"),this.h()},l(s){t=b(s,"CANVAS",{class:!0,style:!0,width:!0,height:!0,"aria-label":!0}),y(t).forEach(g),this.h()},h(){c(t,"class","pixelated shadow-lg svelte-1tfolzf"),c(t,"style",n=`width: ${e[0]}px; height: ${e[15]}px`),c(t,"width",e[0]),c(t,"height",e[15]),c(t,"aria-label","Dithered Image")},m(s,l){B(s,t,l),e[22](t),r||(o=ze(i=Qn.call(null,t,{image:e[7],threshold:e[10],noiseIntensity:e[11],monochrome:e[3],colorLight:e[4],colorDark:e[5],output_width:e[0],output_height:e[15],thresholdMap:e[9]})),r=!0)},p(s,l){l[0]&32769&&n!==(n=`width: ${s[0]}px; height: ${s[15]}px`)&&c(t,"style",n),l[0]&1&&c(t,"width",s[0]),l[0]&32768&&c(t,"height",s[15]),i&&St(i.update)&&l[0]&36537&&i.update.call(null,{image:s[7],threshold:s[10],noiseIntensity:s[11],monochrome:s[3],colorLight:s[4],colorDark:s[5],output_width:s[0],output_height:s[15],thresholdMap:s[9]})},d(s){s&&g(t),e[22](null),r=!1,o()}}}function nr(e){let t;function n(o,s){if(o[8]==="error_diffusion")return tr;if(o[8]==="ordered")return er;if(o[8]==="none")return Ji}let i=n(e),r=i&&i(e);return{c(){r&&r.c(),t=rt()},l(o){r&&r.l(o),t=rt()},m(o,s){r&&r.m(o,s),B(o,t,s)},p(o,s){i===(i=n(o))&&r?r.p(o,s):(r&&r.d(1),r=i&&i(o),r&&(r.c(),r.m(t.parentNode,t)))},d(o){r&&r.d(o),o&&g(t)}}}function ir(e){let t,n,i;return t=new je({props:{src:Vn,class:"w-4 h-4"}}),{c(){G(t.$$.fragment),n=H(`
				Save`)},l(r){Z(t.$$.fragment,r),n=Y(r,`
				Save`)},m(r,o){q(t,r,o),B(r,n,o),i=!0},p:ae,i(r){i||(X(t.$$.fragment,r),i=!0)},o(r){O(t.$$.fragment,r),i=!1},d(r){$(t,r),r&&g(n)}}}function fn(e){let t,n,i,r,o,s,l,a,u,d,f,m,A,k;return{c(){t=v("fieldset"),n=v("div"),i=v("input"),r=R(),o=v("label"),s=H("Light"),l=R(),a=v("div"),u=v("input"),d=R(),f=v("label"),m=H("Dark"),this.h()},l(E){t=b(E,"FIELDSET",{});var _=y(t);n=b(_,"DIV",{class:!0});var I=y(n);i=b(I,"INPUT",{type:!0,name:!0,id:!0}),r=C(I),o=b(I,"LABEL",{for:!0,class:!0});var P=y(o);s=Y(P,"Light"),P.forEach(g),I.forEach(g),l=C(_),a=b(_,"DIV",{class:!0});var T=y(a);u=b(T,"INPUT",{type:!0,name:!0,id:!0}),d=C(T),f=b(T,"LABEL",{for:!0,class:!0});var w=y(f);m=Y(w,"Dark"),w.forEach(g),T.forEach(g),_.forEach(g),this.h()},h(){c(i,"type","color"),c(i,"name","color-light"),c(i,"id","color-light"),c(o,"for","color-light"),c(o,"class","font-medium text-gray-900"),c(n,"class","flex gap-3"),c(u,"type","color"),c(u,"name","color-dark"),c(u,"id","color-dark"),c(f,"for","color-dark"),c(f,"class","font-medium text-gray-900"),c(a,"class","flex gap-3")},m(E,_){B(E,t,_),h(t,n),h(n,i),Fe(i,e[4]),h(n,r),h(n,o),h(o,s),h(t,l),h(t,a),h(a,u),Fe(u,e[5]),h(a,d),h(a,f),h(f,m),A||(k=[ee(i,"input",e[35]),ee(u,"input",e[36])],A=!0)},p(E,_){_[0]&16&&Fe(i,E[4]),_[0]&32&&Fe(u,E[5])},d(E){E&&g(t),A=!1,Ye(k)}}}function rr(e){let t,n,i,r,o,s,l,a,u,d,f,m,A,k,E,_,I,P,T,w,D,p,L,M,W,V,N,F,te,ge,ne,Q,_e,ue,pe,se,ve,he,re,U,ie,be,Me,ct,oe,Re,dt,ht,Ee,Ce,me,mt,Pe,Se,gt,_t,Ne,pt,It;const Dt=[Ki,Qi],we=[];function Mt(S,z){return S[7]&&S[1]?0:1}o=Mt(e),s=we[o]=Dt[o](e),A=new Jn({props:{disabled:!e[1],$$slots:{default:[ir]},$$scope:{ctx:e}}}),A.$on("click",e[17]);function An(S){e[25](S)}function yn(S){e[26](S)}let vt={minWidth:12,minHeight:12,maxHeight:5e3,maxWidth:5e3};e[0]!==void 0&&(vt.width=e[0]),e[2]!==void 0&&(vt.aspectRatio=e[2]),w=new cn({props:vt}),j.push(()=>x(w,"width",An)),j.push(()=>x(w,"aspectRatio",yn));function kn(S){e[27](S)}let Rt={tabs:[{label:"None",value:"none"},{label:"Ordered",value:"ordered"},{label:"Error Diffusion",value:"error_diffusion"}]};e[8]!==void 0&&(Rt.selected=e[8]),F=new Ui({props:Rt}),j.push(()=>x(F,"selected",kn));function Tn(S){e[28](S)}function Sn(S){e[29](S)}function Ln(S){e[30](S)}let Ge={};e[12]!==void 0&&(Ge.diffusionStrength=e[12]),e[13]!==void 0&&(Ge.diffusionMatrix=e[13]),e[14]!==void 0&&(Ge.diffusionOriginX=e[14]),Q=new Ci({props:Ge}),j.push(()=>x(Q,"diffusionStrength",Tn)),j.push(()=>x(Q,"diffusionMatrix",Sn)),j.push(()=>x(Q,"diffusionOriginX",Ln));function In(S){e[31](S)}function Dn(S){e[32](S)}function Mn(S){e[33](S)}let Ze={};e[9]!==void 0&&(Ze.thresholdMap=e[9]),e[11]!==void 0&&(Ze.noiseIntensity=e[11]),e[10]!==void 0&&(Ze.threshold=e[10]),re=new $i({props:Ze}),j.push(()=>x(re,"thresholdMap",In)),j.push(()=>x(re,"noiseIntensity",Dn)),j.push(()=>x(re,"threshold",Mn));let K=e[3]&&fn(e);return{c(){t=R(),n=R(),i=v("main"),r=v("section"),s.c(),l=R(),a=v("aside"),u=v("header"),d=v("h1"),f=H("Dither Studio"),m=R(),G(A.$$.fragment),k=R(),E=v("section"),_=v("div"),I=v("h2"),P=H("Output Options"),T=R(),G(w.$$.fragment),L=R(),M=v("div"),W=v("h2"),V=H("Dithering Options"),N=R(),G(F.$$.fragment),ge=R(),ne=v("div"),G(Q.$$.fragment),ve=R(),he=v("div"),G(re.$$.fragment),ct=R(),oe=v("div"),Re=v("h2"),dt=H("Palette"),ht=R(),Ee=v("div"),Ce=v("div"),me=v("input"),mt=R(),Pe=v("div"),Se=v("label"),gt=H("Monochrome"),_t=R(),K&&K.c(),this.h()},l(S){On("svelte-1hm2pfs",document.head).forEach(g),t=C(S),n=C(S),i=b(S,"MAIN",{class:!0});var Ae=y(i);r=b(Ae,"SECTION",{class:!0});var Ue=y(r);s.l(Ue),Ue.forEach(g),l=C(Ae),a=b(Ae,"ASIDE",{class:!0});var ye=y(a);u=b(ye,"HEADER",{class:!0});var Le=y(u);d=b(Le,"H1",{class:!0});var Ie=y(d);f=Y(Ie,"Dither Studio"),Ie.forEach(g),m=C(Le),Z(A.$$.fragment,Le),Le.forEach(g),k=C(ye),E=b(ye,"SECTION",{class:!0});var le=y(E);_=b(le,"DIV",{});var qe=y(_);I=b(qe,"H2",{class:!0});var Ct=y(I);P=Y(Ct,"Output Options"),Ct.forEach(g),T=C(qe),Z(w.$$.fragment,qe),qe.forEach(g),L=C(le),M=b(le,"DIV",{class:!0});var ke=y(M);W=b(ke,"H2",{class:!0});var Pt=y(W);V=Y(Pt,"Dithering Options"),Pt.forEach(g),N=C(ke),Z(F.$$.fragment,ke),ge=C(ke),ne=b(ke,"DIV",{class:!0});var Nt=y(ne);Z(Q.$$.fragment,Nt),Nt.forEach(g),ve=C(ke),he=b(ke,"DIV",{class:!0});var Ut=y(he);Z(re.$$.fragment,Ut),Ut.forEach(g),ke.forEach(g),ct=C(le),oe=b(le,"DIV",{class:!0});var Xe=y(oe);Re=b(Xe,"H2",{class:!0});var Xt=y(Re);dt=Y(Xt,"Palette"),Xt.forEach(g),ht=C(Xe),Ee=b(Xe,"DIV",{class:!0});var $e=y(Ee);Ce=b($e,"DIV",{class:!0});var Bt=y(Ce);me=b(Bt,"INPUT",{type:!0,id:!0,class:!0}),Bt.forEach(g),mt=C($e),Pe=b($e,"DIV",{class:!0});var Ot=y(Pe);Se=b(Ot,"LABEL",{for:!0,class:!0});var Ft=y(Se);gt=Y(Ft,"Monochrome"),Ft.forEach(g),Ot.forEach(g),$e.forEach(g),_t=C(Xe),K&&K.l(Xe),Xe.forEach(g),le.forEach(g),ye.forEach(g),Ae.forEach(g),this.h()},h(){document.title="Dithering",c(r,"class","flex-1 overflow-hidden select-none"),c(d,"class","font-bold"),c(u,"class","py-4 px-4 flex-shrink-0 shadow-sm z-10 flex gap-2 items-center justify-between"),c(I,"class","text-base font-semibold leading-7 text-black mb-4"),c(W,"class","text-base font-semibold leading-7 text-black mb-2"),c(ne,"class",se=e[8]==="error_diffusion"?"contents":"hidden"),c(he,"class",Me=e[8]==="ordered"?"contents":"hidden"),c(M,"class","grid gap-4"),c(Re,"class","text-base font-semibold leading-7 text-black mb-2"),c(me,"type","checkbox"),c(me,"id","monochrome"),c(me,"class","h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600"),c(Ce,"class","flex h-6 items-center"),c(Se,"for","monochrome"),c(Se,"class","font-medium text-gray-900"),c(Pe,"class","ml-3 text-sm leading-6"),c(Ee,"class","relative flex items-start"),c(oe,"class","grid gap-3"),c(E,"class","grid gap-8 overflow-y-auto overflow-x-visible pt-8 px-4 safe-padding-bottom svelte-1tfolzf"),c(a,"class","bg-white w-full md:max-w-md border-t md:border-t-0 md:border-l border-l-0 border-gray-100 z-50 overflow-y-hidden md:h-full flex-1 shadow-lg flex flex-col divide-y divide-gray-200 justify-start"),c(i,"class","w-screen max-w-screen h-screen max-h-screen flex md:flex-row flex-col bg-gray-300")},m(S,z){B(S,t,z),B(S,n,z),B(S,i,z),h(i,r),we[o].m(r,null),h(i,l),h(i,a),h(a,u),h(u,d),h(d,f),h(u,m),q(A,u,null),h(a,k),h(a,E),h(E,_),h(_,I),h(I,P),h(_,T),q(w,_,null),h(E,L),h(E,M),h(M,W),h(W,V),h(M,N),q(F,M,null),h(M,ge),h(M,ne),q(Q,ne,null),h(M,ve),h(M,he),q(re,he,null),h(E,ct),h(E,oe),h(oe,Re),h(Re,dt),h(oe,ht),h(oe,Ee),h(Ee,Ce),h(Ce,me),me.checked=e[3],h(Ee,mt),h(Ee,Pe),h(Pe,Se),h(Se,gt),h(oe,_t),K&&K.m(oe,null),Ne=!0,pt||(It=[ee(document.body,"drop",yt(e[18])),ee(document.body,"dragover",yt(sr)),ee(me,"change",e[34])],pt=!0)},p(S,z){let Ae=o;o=Mt(S),o===Ae?we[o].p(S,z):(nt(),O(we[Ae],1,1,()=>{we[Ae]=null}),it(),s=we[o],s?s.p(S,z):(s=we[o]=Dt[o](S),s.c()),X(s,1),s.m(r,null));const Ue={};z[0]&2&&(Ue.disabled=!S[1]),z[1]&512&&(Ue.$$scope={dirty:z,ctx:S}),A.$set(Ue);const ye={};!D&&z[0]&1&&(D=!0,ye.width=S[0],J(()=>D=!1)),!p&&z[0]&4&&(p=!0,ye.aspectRatio=S[2],J(()=>p=!1)),w.$set(ye);const Le={};!te&&z[0]&256&&(te=!0,Le.selected=S[8],J(()=>te=!1)),F.$set(Le);const Ie={};!_e&&z[0]&4096&&(_e=!0,Ie.diffusionStrength=S[12],J(()=>_e=!1)),!ue&&z[0]&8192&&(ue=!0,Ie.diffusionMatrix=S[13],J(()=>ue=!1)),!pe&&z[0]&16384&&(pe=!0,Ie.diffusionOriginX=S[14],J(()=>pe=!1)),Q.$set(Ie),(!Ne||z[0]&256&&se!==(se=S[8]==="error_diffusion"?"contents":"hidden"))&&c(ne,"class",se);const le={};!U&&z[0]&512&&(U=!0,le.thresholdMap=S[9],J(()=>U=!1)),!ie&&z[0]&2048&&(ie=!0,le.noiseIntensity=S[11],J(()=>ie=!1)),!be&&z[0]&1024&&(be=!0,le.threshold=S[10],J(()=>be=!1)),re.$set(le),(!Ne||z[0]&256&&Me!==(Me=S[8]==="ordered"?"contents":"hidden"))&&c(he,"class",Me),z[0]&8&&(me.checked=S[3]),S[3]?K?K.p(S,z):(K=fn(S),K.c(),K.m(oe,null)):K&&(K.d(1),K=null)},i(S){Ne||(X(s),X(A.$$.fragment,S),X(w.$$.fragment,S),X(F.$$.fragment,S),X(Q.$$.fragment,S),X(re.$$.fragment,S),Ne=!0)},o(S){O(s),O(A.$$.fragment,S),O(w.$$.fragment,S),O(F.$$.fragment,S),O(Q.$$.fragment,S),O(re.$$.fragment,S),Ne=!1},d(S){S&&g(t),S&&g(n),S&&g(i),we[o].d(),$(A),$(w),$(F),$(Q),$(re),K&&K.d(),pt=!1,Ye(It)}}}const sr=()=>{};function or(e,t,n){let i,r;const o=[fi,ci,di];let s=!1,l="#ede6cc",a="#21263f",u=null,d=300,f=null,m=null;async function A(){u&&await ei(u,"dithered","png")}async function k(U){var be;const ie=(be=U.dataTransfer)==null?void 0:be.files[0];if(ie){if(!ie.type.startsWith("image/")){alert("Please drop an image file");return}try{n(1,f=await Gt(ie))}catch(Me){alert("Failed to load image"),console.error(Me)}}}async function E(U){const ie=U.target.files[0];if(ie)try{n(1,f=await Gt(ie))}catch(be){alert("Failed to load image"),console.error(be)}}async function _(U){const ie=new Image;ie.onload=()=>{n(1,f=ie)},ie.src=U}let I="ordered",P=null,T=.5,w=.3,D=1,p=[[1]],L=0;function M(U){j[U?"unshift":"push"](()=>{u=U,n(6,u)})}function W(U){j[U?"unshift":"push"](()=>{u=U,n(6,u)})}const V=()=>n(1,f=null),N=U=>_(U);function F(U){d=U,n(0,d)}function te(U){r=U,n(2,r),n(1,f)}function ge(U){I=U,n(8,I)}function ne(U){D=U,n(12,D)}function Q(U){p=U,n(13,p)}function _e(U){L=U,n(14,L)}function ue(U){P=U,n(9,P)}function pe(U){w=U,n(11,w)}function se(U){T=U,n(10,T)}function ve(){s=this.checked,n(3,s)}function he(){l=this.value,n(4,l)}function re(){a=this.value,n(5,a)}return e.$$.update=()=>{e.$$.dirty[0]&2&&n(2,r=f!=null&&f.width&&(f!=null&&f.height)?f.width/f.height:1),e.$$.dirty[0]&5&&n(15,i=Math.round(d/r)),e.$$.dirty[0]&2&&(f?n(7,m=ti(f)):n(7,m=null))},[d,f,r,s,l,a,u,m,I,P,T,w,D,p,L,i,o,A,k,E,_,M,W,V,N,F,te,ge,ne,Q,_e,ue,pe,se,ve,he,re]}class fr extends fe{constructor(t){super(),ce(this,t,or,rr,de,{},null,[-1,-1])}}export{fr as component};
