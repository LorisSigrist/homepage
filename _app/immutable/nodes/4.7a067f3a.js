import{S as Be,i as Se,s as ye,k as E,q as V,a as D,y as we,l as b,m as w,r as W,h as d,c as L,z as Re,n as s,b as y,G as m,A as Ue,N as Y,g as ne,d as ae,B as Ie,O as De,P as rt,Q as ke,u as he,H as Ge,R as ot,T as nt,J as st,f as at,o as lt,U as ut,w as Ee,V as be,M as Me,W as ze,X as Z,Y as ct,Z as Te,_ as ft,v as dt,$ as Oe}from"../chunks/index.80d40ec9.js";import{I as ht,L as mt}from"../chunks/Icon.1df6246a.js";function _t(e){let r,i,t,c,n,u,f,h,a,l,p,_,T,N,x,X,k,I,P,A,G,B,H,g,S,F;return T=new ht({props:{src:mt,class:"w-4 h-4",solid:!0}}),{c(){r=E("fieldset"),i=E("div"),t=E("label"),c=V("Width"),n=D(),u=E("div"),f=E("input"),h=D(),a=E("div"),l=V("px"),p=D(),_=E("span"),we(T.$$.fragment),N=D(),x=E("div"),X=E("label"),k=V("Height"),I=D(),P=E("div"),A=E("input"),G=D(),B=E("div"),H=V("px"),this.h()},l(R){r=b(R,"FIELDSET",{class:!0});var U=w(r);i=b(U,"DIV",{class:!0});var J=w(i);t=b(J,"LABEL",{for:!0,class:!0});var $=w(t);c=W($,"Width"),$.forEach(d),n=L(J),u=b(J,"DIV",{class:!0});var K=w(u);f=b(K,"INPUT",{name:!0,id:!0,type:!0,min:!0,max:!0,step:!0,class:!0,placeholder:!0}),h=L(K),a=b(K,"DIV",{class:!0});var z=w(a);l=W(z,"px"),z.forEach(d),K.forEach(d),J.forEach(d),p=L(U),_=b(U,"SPAN",{class:!0});var re=w(_);Re(T.$$.fragment,re),re.forEach(d),N=L(U),x=b(U,"DIV",{class:!0});var j=w(x);X=b(j,"LABEL",{for:!0,class:!0});var ee=w(X);k=W(ee,"Height"),ee.forEach(d),I=L(j),P=b(j,"DIV",{class:!0});var M=w(P);A=b(M,"INPUT",{type:!0,id:!0,name:!0,min:!0,max:!0,step:!0,class:!0,placeholder:!0}),G=L(M),B=b(M,"DIV",{class:!0});var oe=w(B);H=W(oe,"px"),oe.forEach(d),M.forEach(d),j.forEach(d),U.forEach(d),this.h()},h(){s(t,"for","width-"+e[4]),s(t,"class","block text-sm font-medium leading-6 text-gray-900"),s(f,"name","width"),s(f,"id","width-"+e[4]),s(f,"type","number"),s(f,"min","12"),s(f,"max","3000"),s(f,"step","1"),f.value=e[0],s(f,"class","block w-full rounded-md border-0 py-1.5 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"),s(f,"placeholder","600"),s(a,"class","pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400"),s(u,"class","relative mt-2 rounded-md shadow-sm"),s(i,"class","w-full"),s(_,"class","text-gray-500 pb-2"),s(X,"for","height-"+e[5]),s(X,"class","block text-sm font-medium leading-6 text-gray-900"),s(A,"type","number"),s(A,"id","height-"+e[5]),s(A,"name","height"),s(A,"min","12"),s(A,"max","3000"),s(A,"step","1"),A.value=e[1],s(A,"class","block w-full rounded-md border-0 py-1.5 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"),s(A,"placeholder","340"),s(B,"class","pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400"),s(P,"class","relative mt-2 rounded-md shadow-sm"),s(x,"class","w-full"),s(r,"class","flex gap-1 items-end justify-between")},m(R,U){y(R,r,U),m(r,i),m(i,t),m(t,c),m(i,n),m(i,u),m(u,f),m(u,h),m(u,a),m(a,l),m(r,p),m(r,_),Ue(T,_,null),m(r,N),m(r,x),m(x,X),m(X,k),m(x,I),m(x,P),m(P,A),m(P,G),m(P,B),m(B,H),g=!0,S||(F=[Y(f,"input",e[2]),Y(A,"input",e[3])],S=!0)},p(R,[U]){(!g||U&1&&f.value!==R[0])&&(f.value=R[0]),(!g||U&2&&A.value!==R[1])&&(A.value=R[1])},i(R){g||(ne(T.$$.fragment,R),g=!0)},o(R){ae(T.$$.fragment,R),g=!1},d(R){R&&d(r),Ie(T),S=!1,De(F)}}}function Ve(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}function pt(e,r,i){let t,{width:c}=r,{aspectRatio:n}=r;function u(l){const p=l.target.value;p&&i(0,c=p)}function f(l){const p=l.target.value;p&&i(0,c=Math.round(n*p))}let h=Ve(),a=Ve();return e.$$set=l=>{"width"in l&&i(0,c=l.width),"aspectRatio"in l&&i(6,n=l.aspectRatio)},e.$$.update=()=>{e.$$.dirty&65&&i(1,t=Math.round(c/n))},[c,t,u,f,h,a,n]}class gt extends Be{constructor(r){super(),Se(this,r,pt,_t,ye,{width:0,aspectRatio:6})}}function We(e,r,i){const t=e.slice();return t[6]=r[i],t}function Ye(e){let r,i=e[6].name+"",t,c,n;return{c(){r=E("option"),t=V(i),this.h()},l(u){r=b(u,"OPTION",{});var f=w(r);t=W(f,i),f.forEach(d),this.h()},h(){r.__value=c=e[6].value,r.value=r.__value,r.selected=n=e[6].value===e[0]},m(u,f){y(u,r,f),m(r,t)},p(u,f){f&2&&i!==(i=u[6].name+"")&&he(t,i),f&2&&c!==(c=u[6].value)&&(r.__value=c,r.value=r.__value),f&3&&n!==(n=u[6].value===u[0])&&(r.selected=n)},d(u){u&&d(r)}}}function vt(e){let r,i,t,c,n,u,f,h=e[1],a=[];for(let l=0;l<h.length;l+=1)a[l]=Ye(We(e,h,l));return{c(){r=E("div"),i=E("label"),t=V(e[2]),c=D(),n=E("select");for(let l=0;l<a.length;l+=1)a[l].c();this.h()},l(l){r=b(l,"DIV",{});var p=w(r);i=b(p,"LABEL",{for:!0,class:!0});var _=w(i);t=W(_,e[2]),_.forEach(d),c=L(p),n=b(p,"SELECT",{id:!0,name:!0,class:!0});var T=w(n);for(let N=0;N<a.length;N+=1)a[N].l(T);T.forEach(d),p.forEach(d),this.h()},h(){s(i,"for",e[4]),s(i,"class","block text-sm font-medium leading-6 text-gray-900"),s(n,"id",e[4]),s(n,"name",e[3]),s(n,"class","mt-2 block w-full rounded-md border-0 py-1.5 pl-3 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-indigo-600 sm:text-sm sm:leading-6"),e[0]===void 0&&rt(()=>e[5].call(n))},m(l,p){y(l,r,p),m(r,i),m(i,t),m(r,c),m(r,n);for(let _=0;_<a.length;_+=1)a[_]&&a[_].m(n,null);ke(n,e[0],!0),u||(f=Y(n,"change",e[5]),u=!0)},p(l,[p]){if(p&4&&he(t,l[2]),p&3){h=l[1];let _;for(_=0;_<h.length;_+=1){const T=We(l,h,_);a[_]?a[_].p(T,p):(a[_]=Ye(T),a[_].c(),a[_].m(n,null))}for(;_<a.length;_+=1)a[_].d(1);a.length=h.length}p&8&&s(n,"name",l[3]),p&3&&ke(n,l[0])},i:Ge,o:Ge,d(l){l&&d(r),ot(a,l),u=!1,f()}}}function Et(e,r,i){let{options:t}=r,{selected:c}=r,{label:n}=r,{name:u=void 0}=r,f=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);function h(){c=nt(this),i(0,c),i(1,t)}return e.$$set=a=>{"options"in a&&i(1,t=a.options),"selected"in a&&i(0,c=a.selected),"label"in a&&i(2,n=a.label),"name"in a&&i(3,u=a.name)},[c,t,n,u,f,h]}class bt extends Be{constructor(r){super(),Se(this,r,Et,vt,ye,{options:1,selected:0,label:2,name:3})}}const Tt=""+new URL("../assets/img.58b560b7.jpg",import.meta.url).href,At="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAARtJREFUGBkBEAHv/gQAgKB/aX+hf1t/oX9pf6F/BL+Bv4G/gb+Bv4G/gb+Bv4EEcX8xf3F/MX9xfzF/cX8xfwS/gb+Bv4G/gb+Bv4G/gb+BBB1/XX8Nf01/HX9dfw1/TX8Ev4G/gb+Bv4G/gb+Bv4G/gQRxfzF/cX8xf3F/MX9xfzF/BL+Bv4G/gb+Bv4G/gb+Bv4EECH9Ifxh/WH8Ef0R/FH9UfwS/gb+Bv4G/gb+Bv4G/gb+BBHF/MX9xfzF/cX8xf3F/MX8Ev4G/gb+Bv4G/gb+Bv4G/gQQdf11/DX9Nfx1/XX8Nf01/BL+Bv4G/gb+Bv4G/gb+Bv4EEcX8xf3F/MX9xfzF/cX8xfwS/gb+Bv4G/gb+Bv4G/gb+BIZOCkuKxtP8AAAAASUVORK5CYII=",He={width:16,height:16},wt=""+new URL("../assets/blue_noise.b61cfddd.png",import.meta.url).href,Ke={width:470,height:470},Rt=""+new URL("../assets/white_noise.2f37d8a6.png",import.meta.url).href,qe={width:256,height:256},Ut=`precision highp float;

attribute vec2 position;
varying vec2 fragCoord;

// Just a simple vertex shader that passes on the 2d position to the fragment shader
void main() {
    fragCoord.x = position.x * 0.5 + 0.5;
    fragCoord.y = position.y * 0.5 + 0.5;
    
    gl_Position = vec4(position, 0.0, 1.0);
}`,It=`precision highp float;
varying vec2 fragCoord;

uniform sampler2D uSampler;
uniform float uThreshold;
uniform sampler2D uNoiseSampler;
uniform vec2 uNoiseSamplerSize;

uniform float uNoise;
uniform float uMonochrome;

uniform vec2 uSize;

uniform vec3 uDarkColor;
uniform vec3 uLightColor;

void main(void) {
    //Map the current image pixel to the noise texture
    vec2 imgPixel = vec2(fragCoord.x * uSize.x, fragCoord.y * uSize.y);
    vec2 noisePixel = vec2( mod(imgPixel.x, uNoiseSamplerSize.x),  mod(imgPixel.y, uNoiseSamplerSize.y));
    
    vec2 noiseUV = vec2(noisePixel.x / uNoiseSamplerSize.x, noisePixel.y / uNoiseSamplerSize.y);
    float noise = (texture2D(uNoiseSampler, noiseUV).r - 0.5) * 2.0 * uNoise;

    //Get the color of the current pixel from the image
    vec4 color = texture2D(uSampler, fragCoord);

   // Convert to grayscale using the NTSC standard coefficients
    float gray = dot(color.rgb, vec3(0.299, 0.587, 0.114));    

    color.r = color.r * (1.0 - uMonochrome) + gray * uMonochrome;
    color.g = color.g * (1.0 - uMonochrome) + gray * uMonochrome;
    color.b = color.b * (1.0 - uMonochrome) + gray * uMonochrome;

    vec3 thresholds = vec3(
        step(uThreshold, color.r + noise),
        step(uThreshold, color.g + noise),
        step(uThreshold, color.b + noise)
    );

    if(uMonochrome > 0.0) {
        color.rgb = vec3(
            mix(uDarkColor.r, uLightColor.r, thresholds.r),
            mix(uDarkColor.g, uLightColor.g, thresholds.g),
            mix(uDarkColor.b, uLightColor.b, thresholds.b)
        );
    } else {
        color.rgb = thresholds;
    }

    gl_FragColor = color;
}`;function Bt(e,r,i){const t=Qe(e,e.VERTEX_SHADER,r),c=Qe(e,e.FRAGMENT_SHADER,i),n=e.createProgram();if(!n)throw new Error("Failed to create shader program");if(e.attachShader(n,t),e.attachShader(n,c),e.linkProgram(n),!e.getProgramParameter(n,e.LINK_STATUS))throw Error(`Unable to initialize the shader program: ${e.getProgramInfoLog(n)}`);return n}function Qe(e,r,i){const t=e.createShader(r);if(!t)throw new Error("Failed to create shader");if(e.shaderSource(t,i),e.compileShader(t),!e.getShaderParameter(t,e.COMPILE_STATUS))throw Error(`An error occurred compiling the shaders: ${e.getShaderInfoLog(t)}`);return t}function Ae(e,r,i=()=>{}){const t=e.createTexture();if(!t)throw new Error("Failed to create texture");e.bindTexture(e.TEXTURE_2D,t);const c=0,n=e.RGBA,u=1,f=1,h=0,a=e.RGBA,l=e.UNSIGNED_BYTE,p=new Uint8Array([0,0,255,255]);e.texImage2D(e.TEXTURE_2D,c,n,u,f,h,a,l,p);const _=new Image;return _.onload=()=>{e.bindTexture(e.TEXTURE_2D,t),e.texImage2D(e.TEXTURE_2D,c,n,a,l,_),me(_.width)&&me(_.height)?e.generateMipmap(e.TEXTURE_2D):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR)),i()},_.src=r,t}function St(e){const r=e.createTexture();if(!r)throw new Error("Failed to create texture");e.bindTexture(e.TEXTURE_2D,r);const i=0,t=e.RGBA,c=1,n=1,u=0,f=e.RGBA,h=e.UNSIGNED_BYTE,a=new Uint8Array([0,0,255,255]);return e.texImage2D(e.TEXTURE_2D,i,t,c,n,u,f,h,a),r}function yt(e,r,i){const c=e.RGBA,n=e.RGBA,u=e.UNSIGNED_BYTE;e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,c,n,u,i),me(i.width)&&me(i.height)?e.generateMipmap(e.TEXTURE_2D):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR))}function me(e){return(e&e-1)===0}function Dt(e){const r=e.createBuffer(),i=e.createBuffer(),t=[-1,1,-1,-1,1,-1,1,1],c=[3,2,1,3,1,0];return e.bindBuffer(e.ARRAY_BUFFER,r),e.bufferData(e.ARRAY_BUFFER,new Float32Array(t),e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,i),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(c),e.STATIC_DRAW),{vertex_buffer:r,index_buffer:i}}function Lt(e,r){let i=r;const t=e.getContext("webgl",{preserveDrawingBuffer:!0});if(!t){alert("WebGL not supported");return}const c=()=>{yt(t,I,i.image)};t.clearColor(0,0,0,1),t.clear(t.COLOR_BUFFER_BIT);const n=Bt(t,Ut,It),{vertex_buffer:u,index_buffer:f}=Dt(t),h=t.getAttribLocation(n,"position");t.vertexAttribPointer(h,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(h);const a=t.getUniformLocation(n,"uSampler"),l=t.getUniformLocation(n,"uThreshold"),p=t.getUniformLocation(n,"uNoiseSampler"),_=t.getUniformLocation(n,"uNoise"),T=t.getUniformLocation(n,"uSize"),N=t.getUniformLocation(n,"uNoiseSamplerSize"),x=t.getUniformLocation(n,"uMonochrome"),X=t.getUniformLocation(n,"uDarkColor"),k=t.getUniformLocation(n,"uLightColor"),I=St(t);t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!0),c();const P=Ae(t,At,g);t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!0);const A=Ae(t,wt,g);t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!0);const G=Ae(t,Rt,g);t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!0),t.useProgram(n);let B=null;const H=()=>{switch(t.viewport(0,0,i.width,i.height),t.clearColor(0,0,0,1),t.clear(t.COLOR_BUFFER_BIT),t.bindBuffer(t.ARRAY_BUFFER,u),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,f),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,I),t.uniform1i(a,0),i.mode){case"bayer":t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,P),t.uniform1i(p,1),t.uniform2f(N,He.width,He.height);break;case"blue_noise":t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,A),t.uniform1i(p,1),t.uniform2f(N,Ke.width,Ke.height);break;case"white_noise":t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,G),t.uniform1i(p,1),t.uniform2f(N,qe.width,qe.height);break}t.uniform1f(l,i.threshold),t.uniform1f(_,i.noiseIntensity),t.uniform2f(T,i.width,i.height),t.uniform1f(x,i.monochrome?1:0),t.uniform3f(X,...Je(i.colorDark)),t.uniform3f(k,...Je(i.colorLight)),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0)};function g(){B=requestAnimationFrame(()=>{H(),B=null})}return g(),{update(S){const F=i.image!==S.image;i=S,F&&c(),g()},destroy(){B!==null&&cancelAnimationFrame(B)}}}function Je(e){const r=parseInt(e.slice(1,3),16)/255,i=parseInt(e.slice(3,5),16)/255,t=parseInt(e.slice(5,7),16)/255;return[r,i,t]}const{document:je}=ut;function Ze(e){let r,i,t,c,n,u,f,h,a,l,p,_,T,N,x,X,k,I,P,A,G,B,H,g,S,F,R,U,J,$,K,z,re,j,ee,M,oe,le,O,ue,ce,Q,_e,q,pe,Le,C=e[4]&&$e(e);function et(o){e[18](o)}function tt(o){e[19](o)}let ge={};e[0]!==void 0&&(ge.width=e[0]),e[1]!==void 0&&(ge.aspectRatio=e[1]),z=new gt({props:ge}),Ee.push(()=>be(z,"width",et)),Ee.push(()=>be(z,"aspectRatio",tt));function it(o){e[20](o)}let Ne={label:"Dither Mode",options:[{name:"Bayer",value:"bayer"},{name:"Blue Noise",value:"blue_noise"},{name:"White Noise",value:"white_noise"}]};return e[8]!==void 0&&(Ne.selected=e[8]),M=new bt({props:Ne}),Ee.push(()=>be(M,"selected",it)),{c(){r=E("img"),t=D(),c=E("div"),n=E("label"),u=V("Threshold "),f=V(e[2]),h=D(),a=E("div"),l=E("input"),p=D(),_=E("div"),T=E("label"),N=V("Noise Intensity "),x=V(e[3]),X=D(),k=E("div"),I=E("input"),P=D(),A=E("div"),G=E("div"),B=E("input"),H=D(),g=E("div"),S=E("label"),F=V("Monochrome"),R=D(),U=E("p"),J=V("If the dither should be monochrome, or in color"),$=D(),C&&C.c(),K=D(),we(z.$$.fragment),ee=D(),we(M.$$.fragment),le=D(),O=E("canvas"),ce=D(),Q=E("button"),_e=V("Save"),this.h()},l(o){r=b(o,"IMG",{src:!0,alt:!0,class:!0}),t=L(o),c=b(o,"DIV",{});var v=w(c);n=b(v,"LABEL",{for:!0,class:!0});var te=w(n);u=W(te,"Threshold "),f=W(te,e[2]),te.forEach(d),h=L(v),a=b(v,"DIV",{class:!0});var se=w(a);l=b(se,"INPUT",{type:!0,min:!0,id:!0,max:!0,step:!0,class:!0}),se.forEach(d),v.forEach(d),p=L(o),_=b(o,"DIV",{});var ie=w(_);T=b(ie,"LABEL",{for:!0,class:!0});var ve=w(T);N=W(ve,"Noise Intensity "),x=W(ve,e[3]),ve.forEach(d),X=L(ie),k=b(ie,"DIV",{class:!0});var xe=w(k);I=b(xe,"INPUT",{type:!0,min:!0,id:!0,max:!0,step:!0,class:!0}),xe.forEach(d),ie.forEach(d),P=L(o),A=b(o,"DIV",{class:!0});var fe=w(A);G=b(fe,"DIV",{class:!0});var Pe=w(G);B=b(Pe,"INPUT",{type:!0,class:!0}),Pe.forEach(d),H=L(fe),g=b(fe,"DIV",{class:!0});var de=w(g);S=b(de,"LABEL",{for:!0,class:!0});var Fe=w(S);F=W(Fe,"Monochrome"),Fe.forEach(d),R=L(de),U=b(de,"P",{id:!0,class:!0});var Ce=w(U);J=W(Ce,"If the dither should be monochrome, or in color"),Ce.forEach(d),de.forEach(d),fe.forEach(d),$=L(o),C&&C.l(o),K=L(o),Re(z.$$.fragment,o),ee=L(o),Re(M.$$.fragment,o),le=L(o),O=b(o,"CANVAS",{class:!0,width:!0,height:!0}),w(O).forEach(d),ce=L(o),Q=b(o,"BUTTON",{type:!0,class:!0});var Xe=w(Q);_e=W(Xe,"Save"),Xe.forEach(d),this.h()},h(){var o;Me(r.src,i=(o=e[9])==null?void 0:o.src)||s(r,"src",i),s(r,"alt",""),s(r,"class","w-full pixelated svelte-1gkt69q"),s(n,"for","threshold"),s(n,"class","block text-sm font-medium leading-6 text-gray-900"),s(l,"type","range"),s(l,"min","0"),s(l,"id","threshold"),s(l,"max","1"),s(l,"step","0.01"),s(l,"class","block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"),s(a,"class","mt-2"),s(T,"for","noise"),s(T,"class","block text-sm font-medium leading-6 text-gray-900"),s(I,"type","range"),s(I,"min","0"),s(I,"id","noise"),s(I,"max","1.5"),s(I,"step","0.01"),s(I,"class","block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"),s(k,"class","mt-2"),s(B,"type","checkbox"),s(B,"class","h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600"),s(G,"class","flex h-6 items-center"),s(S,"for","comments"),s(S,"class","font-medium text-gray-900"),s(U,"id","comments-description"),s(U,"class","text-gray-500"),s(g,"class","ml-3 text-sm leading-6"),s(A,"class","relative flex items-start"),s(O,"class","w-full svelte-1gkt69q"),s(O,"width",e[0]),s(O,"height",e[10]),ze(O,"pixelated",e[7]),s(Q,"type","button"),s(Q,"class","rounded-md bg-indigo-600 px-2.5 py-1.5 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600")},m(o,v){y(o,r,v),y(o,t,v),y(o,c,v),m(c,n),m(n,u),m(n,f),m(c,h),m(c,a),m(a,l),Z(l,e[2]),y(o,p,v),y(o,_,v),m(_,T),m(T,N),m(T,x),m(_,X),m(_,k),m(k,I),Z(I,e[3]),y(o,P,v),y(o,A,v),m(A,G),m(G,B),B.checked=e[4],m(A,H),m(A,g),m(g,S),m(S,F),m(g,R),m(g,U),m(U,J),y(o,$,v),C&&C.m(o,v),y(o,K,v),Ue(z,o,v),y(o,ee,v),Ue(M,o,v),y(o,le,v),y(o,O,v),y(o,ce,v),y(o,Q,v),m(Q,_e),q=!0,pe||(Le=[Y(l,"change",e[13]),Y(l,"input",e[13]),Y(I,"change",e[14]),Y(I,"input",e[14]),Y(B,"change",e[15]),ct(ue=Lt.call(null,O,{image:e[9],threshold:e[2],noiseIntensity:e[3],monochrome:e[4],colorLight:e[5],colorDark:e[6],mode:e[8],width:e[0],height:e[10]})),Y(Q,"click",e[12])],pe=!0)},p(o,v){var ie;(!q||v&512&&!Me(r.src,i=(ie=o[9])==null?void 0:ie.src))&&s(r,"src",i),(!q||v&4)&&he(f,o[2]),v&4&&Z(l,o[2]),(!q||v&8)&&he(x,o[3]),v&8&&Z(I,o[3]),v&16&&(B.checked=o[4]),o[4]?C?C.p(o,v):(C=$e(o),C.c(),C.m(K.parentNode,K)):C&&(C.d(1),C=null);const te={};!re&&v&1&&(re=!0,te.width=o[0],Te(()=>re=!1)),!j&&v&2&&(j=!0,te.aspectRatio=o[1],Te(()=>j=!1)),z.$set(te);const se={};!oe&&v&256&&(oe=!0,se.selected=o[8],Te(()=>oe=!1)),M.$set(se),(!q||v&1)&&s(O,"width",o[0]),(!q||v&1024)&&s(O,"height",o[10]),ue&&ft(ue.update)&&v&1917&&ue.update.call(null,{image:o[9],threshold:o[2],noiseIntensity:o[3],monochrome:o[4],colorLight:o[5],colorDark:o[6],mode:o[8],width:o[0],height:o[10]}),(!q||v&128)&&ze(O,"pixelated",o[7])},i(o){q||(ne(z.$$.fragment,o),ne(M.$$.fragment,o),q=!0)},o(o){ae(z.$$.fragment,o),ae(M.$$.fragment,o),q=!1},d(o){o&&d(r),o&&d(t),o&&d(c),o&&d(p),o&&d(_),o&&d(P),o&&d(A),o&&d($),C&&C.d(o),o&&d(K),Ie(z,o),o&&d(ee),Ie(M,o),o&&d(le),o&&d(O),o&&d(ce),o&&d(Q),pe=!1,De(Le)}}}function $e(e){let r,i,t,c,n;return{c(){r=E("input"),i=D(),t=E("input"),this.h()},l(u){r=b(u,"INPUT",{type:!0}),i=L(u),t=b(u,"INPUT",{type:!0}),this.h()},h(){s(r,"type","color"),s(t,"type","color")},m(u,f){y(u,r,f),Z(r,e[5]),y(u,i,f),y(u,t,f),Z(t,e[6]),c||(n=[Y(r,"input",e[16]),Y(t,"input",e[17])],c=!0)},p(u,f){f&32&&Z(r,u[5]),f&64&&Z(t,u[6])},d(u){u&&d(r),u&&d(i),u&&d(t),c=!1,De(n)}}}function Nt(e){let r,i,t,c,n,u,f,h=e[9]&&Ze(e);return{c(){r=D(),i=E("div"),t=E("input"),c=D(),h&&h.c(),this.h()},l(a){st("svelte-1hm2pfs",je.head).forEach(d),r=L(a),i=b(a,"DIV",{class:!0});var p=w(i);t=b(p,"INPUT",{type:!0,id:!0,accept:!0}),c=L(p),h&&h.l(p),p.forEach(d),this.h()},h(){je.title="Dithering",s(t,"type","file"),s(t,"id","image-input"),s(t,"accept","image/*"),s(i,"class","max-w-xl mx-auto px-4")},m(a,l){y(a,r,l),y(a,i,l),m(i,t),m(i,c),h&&h.m(i,null),n=!0,u||(f=Y(t,"input",e[11]),u=!0)},p(a,[l]){a[9]?h?(h.p(a,l),l&512&&ne(h,1)):(h=Ze(a),h.c(),ne(h,1),h.m(i,null)):h&&(dt(),ae(h,1,1,()=>{h=null}),at())},i(a){n||(ne(h),n=!0)},o(a){ae(h),n=!1},d(a){a&&d(r),a&&d(i),h&&h.d(),u=!1,f()}}}function xt(e,r,i){let t,c=.33,n=.3,u=!1,f="#ede6cc",h="#21263f",a=!0,l=600,p=1,_="blue_noise",T=null;function N(g){const S=g.target.files[0];if(!S)return;const F=new FileReader;F.onload=R=>{if(typeof F.result!="string")return;const U=new Image;U.onload=()=>{i(9,T=U),i(1,p=T.width/T.height)},U.src=F.result},F.readAsDataURL(S)}lt(()=>{const g=new Image;g.onload=()=>{i(9,T=g),i(1,p=T.width/T.height)},g.src=Tt,i(7,a=Number.isInteger(window.devicePixelRatio))});function x(){const g=document.querySelector("canvas");if(!g)return;const S=document.createElement("canvas");S.width=g.width,S.height=g.height;const F=S.getContext("2d");if(!F)return;F.drawImage(g,0,0,l,t);const R=document.createElement("a");R.download="dithered.png",R.href=S.toDataURL("image/png"),R.click()}function X(){c=Oe(this.value),i(2,c)}function k(){n=Oe(this.value),i(3,n)}function I(){u=this.checked,i(4,u)}function P(){f=this.value,i(5,f)}function A(){h=this.value,i(6,h)}function G(g){l=g,i(0,l)}function B(g){p=g,i(1,p)}function H(g){_=g,i(8,_)}return e.$$.update=()=>{e.$$.dirty&3&&i(10,t=l/p)},[l,p,c,n,u,f,h,a,_,T,t,N,x,X,k,I,P,A,G,B,H]}class Ct extends Be{constructor(r){super(),Se(this,r,xt,Nt,ye,{})}}export{Ct as component};
