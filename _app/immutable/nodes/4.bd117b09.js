var Rn=Object.defineProperty;var Ln=(t,e,n)=>e in t?Rn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var fe=(t,e,n)=>(Ln(t,typeof e!="symbol"?e+"":e,n),n);import{S as ne,i as ie,s as re,k as y,q as K,a as L,y as F,l as k,m as I,r as $,h as v,c as P,z as W,n as m,b as O,G as E,A as z,M as ee,g as T,d as D,O as Ve,B as V,P as rn,L as Pn,C as Re,D as Le,E as Pe,F as Ne,Q as lt,R as ve,p as ce,T as Oe,U as ut,V as ke,o as Nn,w as j,W as et,H as te,v as Be,f as Ue,X as Q,Y as J,e as qe,Z as On,u as ye,_ as Ze,$ as pt,a0 as Bn,a1 as yt,a2 as Un}from"../chunks/index.ac0a233c.js";import{I as pe,P as sn,A as Xn,C as kt,b as It,X as on,L as Fn,c as an,a as Wn}from"../chunks/Icon.f55469f1.js";function zn(){return{title:"Dithering",author:"Loris Sigrist",description:"Dither your Images right in the browser!"}}const es=Object.freeze(Object.defineProperty({__proto__:null,load:zn},Symbol.toStringTag,{value:"Module"}));async function Vn(t,e,n="png"){const i=new OffscreenCanvas(t.width,t.height),s=i.getContext("2d");if(!s)return;s.drawImage(t,0,0,t.width,t.height);const o=await i.convertToBlob({type:"image/"+n,quality:1}),r=URL.createObjectURL(o),a=document.createElement("a");a.download=`${e}.${n}`,a.href=r,a.click(),a.remove(),URL.revokeObjectURL(r)}function ln(t){return new Promise((e,n)=>{t.type.startsWith("image/")||n(new Error("Not an image file"));const i=new FileReader;i.onload=s=>{if(typeof i.result!="string")return;const o=new Image;o.onload=()=>{e(o)},o.onerror=r=>{n(r)},o.src=i.result},i.onerror=s=>{n(s)},i.readAsDataURL(t)})}function St(t){const n=new OffscreenCanvas(t.width,t.height).getContext("2d");if(!n)throw new Error("Could not get canvas context");return n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height)}function ae(t){const e=parseInt(t.slice(1,3),16),n=parseInt(t.slice(3,5),16),i=parseInt(t.slice(5,7),16);return[e,n,i]}function Hn([t,e,n]){const i=s=>{const o=s.toString(16);return o.length==1?"0"+o:o};return"#"+i(t)+i(e)+i(n)}const Yn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAAXNSR0IArs4c6QAAAyNJREFUaEPVWjFW3DAQ/dOyqSEvB6AiTUJITcEtSJ8azkFq+uQUUFADCQ2pOAHbL2l/noy9q9Va1owseZMt4O16JM+fP39Gliwo+zkGcElyX0RAEpH/TyLyFcBNqdvL2IlIfheR0wGnY2D8338A+DLGlzFAmOt853A3Pvie5ZN5EMmFiMxyQSjHvQB4Y2HIAuSQ5H0i9zVpNKSdtfEAPgH4qQGkAkLyF4APHYhu4olAPYjIxxQYDZAXkjslnU5oZOmzp6E/AGZDYFJAsgWt1II6zdr5ov4OAVmQnJVkIgVOwVS0CPQCIXkL4CimiVAjE2vmTkQ+h2nWB+SA5GNNJhSRb0wifcZdeg/gtw9mA4gTxZaqk6l0A1jzfe3LRM0uKnAjU2t6CRlpqlRKA6nrNdMyKBhL/30gzyT3pnBCG/lUEwQwB/DW2S2B+FRoq9UUoBUlu8HQ/CF5JiIXqUGlr2uZGahebopzAN86ICthDPCpZWrivuKqnSyB1EwTbeQVmoiZiJDcFZH5f1atwhL+zjFyRfKkJiOJHN/o4BnMXDtGVPrQTL7NFYFjpPpSPaYRTXC0NlmM/IvVaxJGQo1oo2yxy2LEcoOm675W+eZTuql281VjxG+KVuA59pMzom2O1pKdZCS1ZI9d96Pqp1ZOtDVjHCNXAE40xrk2Q0CskY9o7NoxsktyPrazDzEzASPNEuW1I1b85AAxMrW5+s3VRNgkJ9bIssCfkbyoRUoNjXjV71xEXh+sVr1qdcJUkpmc1DIEdfWo2+rkGcCeYQK1aQ0grYY2Nx9C0VsXhkOoagBp79e7HeSq1yK1fa+mwTO0ADFUq8ENuo1qbGWmr3pZgBgCFd8ybVEcAHg0TJg0rQAkvYndgrkVkaNSfbIwkDsAqmOFJsIl9TIGSKAZ20GP31isGunLszFAgvmyjt46ZlwUdpJCGDAoBGTwvDN1GNqBaY6nc8GMBPIAoMjxdAfmEMB9DpgRQMq+MBA435z2xtZihTRS9RWONR8tzzBGRlTpHgYsa5A/iXvNCcDpyLXWVl9z6vP9mOQlgH3/Yg8jTwCKvnj2F9CvAivl1accAAAAAElFTkSuQmCC",jn=""+new URL("../assets/cat.58b560b7.jpg",import.meta.url).href,Gn="data:image/avif;base64,AAAAHGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZgAAAOptZXRhAAAAAAAAACFoZGxyAAAAAAAAAABwaWN0AAAAAAAAAAAAAAAAAAAAAA5waXRtAAAAAAABAAAAImlsb2MAAAAAREAAAQABAAAAAAEOAAEAAAAAAAAApwAAACNpaW5mAAAAAAABAAAAFWluZmUCAAAAAAEAAGF2MDEAAAAAamlwcnAAAABLaXBjbwAAABNjb2xybmNseAACAAIABoAAAAAMYXYxQ4EEDAAAAAAUaXNwZQAAAAAAAAJyAAACcgAAABBwaXhpAAAAAAMICAgAAAAXaXBtYQAAAAAAAAABAAEEgYIDhAAAAK9tZGF0EgAKChkmZxnHggQEDQgylgERQAEEEEEA9NBi7JFlrqXV1mwMry34uIYK7WRdWYJ/ZZ0EIyWW8aLm92oz5LY0W+l2FiKsHpp4BB3Vrk+iwHuzboac7wmSHHHRWklZdZ2hpEAi4E31lf1tjXnXie8fh4lzApbqjH5Pj7ZN6761WygYVdc2zvJOsflFZstng6rQU/oulDZSO6fQWKvzpO9pseyXBLfms64=",qn=""+new URL("../assets/david.0e7e3b46.png",import.meta.url).href;function Tt(t,e,n){const i=t.slice();return i[5]=e[n],i}function Mt(t){let e,n,i,s,o;function r(){return t[3](t[5])}return{c(){e=y("button"),n=y("img"),this.h()},l(a){e=k(a,"BUTTON",{class:!0});var l=I(e);n=k(l,"IMG",{class:!0,src:!0,alt:!0}),l.forEach(v),this.h()},h(){m(n,"class","aspect-square h-24 w-24 object-cover rounded-md shadow-md border-2 border-white"),Pn(n.src,i=t[5])||m(n,"src",i),m(n,"alt",""),m(e,"class","hover:opacity-75 transition-opacity")},m(a,l){O(a,e,l),E(e,n),s||(o=ee(e,"click",r),s=!0)},p(a,l){t=a},d(a){a&&v(e),s=!1,o()}}}function Zn(t){let e,n,i,s,o,r,a,l,u,f,d,c,g,_,p,w,h,b,A=t[0],S=[];for(let M=0;M<A.length;M+=1)S[M]=Mt(Tt(t,A,M));return f=new pe({props:{src:sn,class:"w-12 h-12 text-gray-400"}}),{c(){e=y("div"),n=y("div"),i=y("p"),s=K("Select or Drop an Image to Start"),o=L(),r=y("div");for(let M=0;M<S.length;M+=1)S[M].c();a=L(),l=y("label"),u=y("div"),F(f.$$.fragment),d=L(),c=y("span"),g=K("Choose an Image"),_=L(),p=y("input"),this.h()},l(M){e=k(M,"DIV",{class:!0});var G=I(e);n=k(G,"DIV",{class:!0});var N=I(n);i=k(N,"P",{class:!0});var B=I(i);s=$(B,"Select or Drop an Image to Start"),B.forEach(v),o=P(N),r=k(N,"DIV",{class:!0});var U=I(r);for(let H=0;H<S.length;H+=1)S[H].l(U);a=P(U),l=k(U,"LABEL",{for:!0,class:!0});var q=I(l);u=k(q,"DIV",{class:!0});var C=I(u);W(f.$$.fragment,C),C.forEach(v),d=P(q),c=k(q,"SPAN",{class:!0});var Z=I(c);g=$(Z,"Choose an Image"),Z.forEach(v),_=P(q),p=k(q,"INPUT",{type:!0,class:!0,id:!0,accept:!0}),q.forEach(v),U.forEach(v),N.forEach(v),G.forEach(v),this.h()},h(){m(i,"class","text-2xl text-gray-500 text-center"),m(u,"class","grid place-items-center h-full w-full"),m(c,"class","sr-only"),m(p,"type","file"),m(p,"class","sr-only"),m(p,"id","image-input"),m(p,"accept","image/*"),m(l,"for","image-input"),m(l,"class","block spect-square h-24 w-24 object-cover rounded-md shadow-md border-2 border-white bg-white hover:bg-gray-100"),m(r,"class","flex gap-3 justify-center flex-wrap"),m(n,"class","grid gap-4"),m(e,"class","w-full h-full grid place-items-center px-8")},m(M,G){O(M,e,G),E(e,n),E(n,i),E(i,s),E(n,o),E(n,r);for(let N=0;N<S.length;N+=1)S[N]&&S[N].m(r,null);E(r,a),E(r,l),E(l,u),z(f,u,null),E(l,d),E(l,c),E(c,g),E(l,_),E(l,p),w=!0,h||(b=ee(p,"input",t[1]),h=!0)},p(M,[G]){if(G&5){A=M[0];let N;for(N=0;N<A.length;N+=1){const B=Tt(M,A,N);S[N]?S[N].p(B,G):(S[N]=Mt(B),S[N].c(),S[N].m(r,a))}for(;N<S.length;N+=1)S[N].d(1);S.length=A.length}},i(M){w||(T(f.$$.fragment,M),w=!0)},o(M){D(f.$$.fragment,M),w=!1},d(M){M&&v(e),Ve(S,M),V(f),h=!1,b()}}}function Qn(t){const e=[jn,Gn,qn],n=rn();async function i(r){const a=r.target.files[0];if(a)try{n("image",await ln(a))}catch(l){alert("Failed to load image"),console.error(l)}}async function s(r){const a=new Image;a.onload=()=>{n("image",a)},a.src=r}return[e,i,s,r=>s(r)]}class Jn extends ne{constructor(e){super(),ie(this,e,Qn,Zn,re,{})}}function Kn(t){let e,n,i,s,o;const r=t[3].default,a=Re(r,t,t[2],null);return{c(){e=y("button"),a&&a.c(),this.h()},l(l){e=k(l,"BUTTON",{type:!0,class:!0});var u=I(e);a&&a.l(u),u.forEach(v),this.h()},h(){e.disabled=t[0],m(e,"type","button"),m(e,"class",n=t[1][t[0]?"disabled":"normal"]+" rounded-md px-2.5 py-1.5 text-sm font-semibold focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 flex items-center justify-center gap-2")},m(l,u){O(l,e,u),a&&a.m(e,null),i=!0,s||(o=ee(e,"click",t[4]),s=!0)},p(l,[u]){a&&a.p&&(!i||u&4)&&Le(a,r,l,l[2],i?Ne(r,l[2],u,null):Pe(l[2]),null),(!i||u&1)&&(e.disabled=l[0]),(!i||u&1&&n!==(n=l[1][l[0]?"disabled":"normal"]+" rounded-md px-2.5 py-1.5 text-sm font-semibold focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 flex items-center justify-center gap-2"))&&m(e,"class",n)},i(l){i||(T(a,l),i=!0)},o(l){D(a,l),i=!1},d(l){l&&v(e),a&&a.d(l),s=!1,o()}}}function $n(t,e,n){let{$$slots:i={},$$scope:s}=e,{disabled:o=!1}=e;const r={normal:"bg-indigo-600 text-white shadow-sm hover:bg-indigo-500",disabled:"bg-gray-200 text-gray-400 shadow-none cursor-not-allowed"};function a(l){lt.call(this,t,l)}return t.$$set=l=>{"disabled"in l&&n(0,o=l.disabled),"$$scope"in l&&n(2,s=l.$$scope)},[o,r,s,i,a]}class un extends ne{constructor(e){super(),ie(this,e,$n,Kn,re,{disabled:0})}}var xn=class extends EventTarget{dispatchTypedEvent(t,e){return super.dispatchEvent(e)}};class be{constructor(e){this.id=-1,this.nativePointer=e,this.pageX=e.pageX,this.pageY=e.pageY,this.clientX=e.clientX,this.clientY=e.clientY,self.Touch&&e instanceof Touch?this.id=e.identifier:We(e)&&(this.id=e.pointerId)}getCoalesced(){if("getCoalescedEvents"in this.nativePointer){const e=this.nativePointer.getCoalescedEvents().map(n=>new be(n));if(e.length>0)return e}return[this]}}const We=t=>"pointerId"in t,it=t=>"changedTouches"in t,Ct=()=>{};class ei{constructor(e,{start:n=()=>!0,move:i=Ct,end:s=Ct,rawUpdates:o=!1,avoidPointerEvents:r=!1}={}){this._element=e,this.startPointers=[],this.currentPointers=[],this._excludeFromButtonsCheck=new Set,this._pointerStart=a=>{if(We(a)&&a.buttons===0)this._excludeFromButtonsCheck.add(a.pointerId);else if(!(a.buttons&1))return;const l=new be(a);this.currentPointers.some(u=>u.id===l.id)||this._triggerPointerStart(l,a)&&(We(a)?((a.target&&"setPointerCapture"in a.target?a.target:this._element).setPointerCapture(a.pointerId),this._element.addEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move),this._element.addEventListener("pointerup",this._pointerEnd),this._element.addEventListener("pointercancel",this._pointerEnd)):(window.addEventListener("mousemove",this._move),window.addEventListener("mouseup",this._pointerEnd)))},this._touchStart=a=>{for(const l of Array.from(a.changedTouches))this._triggerPointerStart(new be(l),a)},this._move=a=>{if(!it(a)&&(!We(a)||!this._excludeFromButtonsCheck.has(a.pointerId))&&a.buttons===0){this._pointerEnd(a);return}const l=this.currentPointers.slice(),u=it(a)?Array.from(a.changedTouches).map(d=>new be(d)):[new be(a)],f=[];for(const d of u){const c=this.currentPointers.findIndex(g=>g.id===d.id);c!==-1&&(f.push(d),this.currentPointers[c]=d)}f.length!==0&&this._moveCallback(l,f,a)},this._triggerPointerEnd=(a,l)=>{if(!it(l)&&l.buttons&1)return!1;const u=this.currentPointers.findIndex(d=>d.id===a.id);if(u===-1)return!1;this.currentPointers.splice(u,1),this.startPointers.splice(u,1),this._excludeFromButtonsCheck.delete(a.id);const f=!(l.type==="mouseup"||l.type==="touchend"||l.type==="pointerup");return this._endCallback(a,l,f),!0},this._pointerEnd=a=>{if(this._triggerPointerEnd(new be(a),a))if(We(a)){if(this.currentPointers.length)return;this._element.removeEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move),this._element.removeEventListener("pointerup",this._pointerEnd),this._element.removeEventListener("pointercancel",this._pointerEnd)}else window.removeEventListener("mousemove",this._move),window.removeEventListener("mouseup",this._pointerEnd)},this._touchEnd=a=>{for(const l of Array.from(a.changedTouches))this._triggerPointerEnd(new be(l),a)},this._startCallback=n,this._moveCallback=i,this._endCallback=s,this._rawUpdates=o&&"onpointerrawupdate"in window,self.PointerEvent&&!r?this._element.addEventListener("pointerdown",this._pointerStart):(this._element.addEventListener("mousedown",this._pointerStart),this._element.addEventListener("touchstart",this._touchStart),this._element.addEventListener("touchmove",this._move),this._element.addEventListener("touchend",this._touchEnd),this._element.addEventListener("touchcancel",this._touchEnd))}stop(){this._element.removeEventListener("pointerdown",this._pointerStart),this._element.removeEventListener("mousedown",this._pointerStart),this._element.removeEventListener("touchstart",this._touchStart),this._element.removeEventListener("touchmove",this._move),this._element.removeEventListener("touchend",this._touchEnd),this._element.removeEventListener("touchcancel",this._touchEnd),this._element.removeEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move),this._element.removeEventListener("pointerup",this._pointerEnd),this._element.removeEventListener("pointercancel",this._pointerEnd),window.removeEventListener("mousemove",this._move),window.removeEventListener("mouseup",this._pointerEnd)}_triggerPointerStart(e,n){return this._startCallback(e,n)?(this.currentPointers.push(e),this.startPointers.push(e),!0):!1}}function ft(t,e,n){return Math.min(Math.max(t,e),n)}function Dt(t,e){return e?Math.sqrt((e.clientX-t.clientX)**2+(e.clientY-t.clientY)**2):0}function Rt(t,e){return e?{clientX:(t.clientX+e.clientX)/2,clientY:(t.clientY+e.clientY)/2}:t}const xe=class extends xn{constructor(n){super();fe(this,"element");fe(this,"transform",new DOMMatrix);fe(this,"pointerTracker");this.element=n,this.element.addEventListener("wheel",this.onWheel.bind(this)),this.pointerTracker=new ei(this.element,{start:(i,s)=>this.pointerTracker.currentPointers.length===2?!1:(s.preventDefault(),!0),move:i=>{this.onPointerMove(i,this.pointerTracker.currentPointers)},avoidPointerEvents:this.isSafari()}),this.element.addEventListener("wheel",this.onWheel.bind(this))}get x(){return this.transform.e}get y(){return this.transform.f}get scale(){return this.transform.a}set x(n){this.transform.e=n}set y(n){this.transform.f=n}set scale(n){this.transform.a=n,this.transform.d=n}onWheel(n){n.preventDefault();const i=this.element.getBoundingClientRect();let{deltaY:s}=n;const{ctrlKey:o,deltaMode:r}=n;r===1&&(s*=15);const a=s>0,l=o?100:300,u=1-(a?-s:s)/l,f=a?1/u:u,d=n.clientX-i.left,c=n.clientY-i.top;this.applyTransformation({scaleDiff:f,originX:d,originY:c})}applyTransformation(n={}){const{panX:i=0,panY:s=0,originX:o=0,originY:r=0,scaleDiff:a=1}=n,l=new DOMMatrix().translate(o,r).scale(a).translate(-o,-r),u=new DOMMatrix().translate(i,s);l.multiplySelf(u),l.multiplySelf(this.transform);const f=l.a,d=l.e,c=l.f;this.updateTransform(f,d,c)}onPointerMove(n,i){const s=this.element.getBoundingClientRect(),o=Rt(n[0],n[1]),r=Rt(i[0],i[1]),a=o.clientX-s.left,l=o.clientY-s.top,u=Dt(n[0],n[1]),f=Dt(i[0],i[1]),d=u?f/u:1;this.applyTransformation({originX:a,originY:l,scaleDiff:d,panX:r.clientX-o.clientX,panY:r.clientY-o.clientY})}updateTransform(n,i,s){if(n<xe.MIN_SCALE||n>xe.MAX_SCALE||n===this.scale&&i===this.x&&s===this.y)return;this.x=i,this.y=s,this.scale=n;const o=new CustomEvent("panzoom:change",{bubbles:!0,detail:{x:this.x,y:this.y,scale:this.scale,matrix:this.transform}});this.dispatchTypedEvent("panzoom:change",o)}isSafari(){return/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)}reset(){this.updateTransform(1,0,0)}destroy(){this.pointerTracker.stop()}};let ze=xe;fe(ze,"MIN_SCALE",.01),fe(ze,"MAX_SCALE",1e5);const ti=t=>({}),Lt=t=>({}),ni=t=>({}),Pt=t=>({});function ii(t){let e,n,i,s,o,r,a,l,u,f,d,c,g,_;const p=t[7].left,w=Re(p,t,t[6],Pt),h=t[7].right,b=Re(h,t,t[6],Lt);return d=new pe({props:{src:Xn,class:"w-6 h-6 text-white"}}),{c(){e=y("div"),n=y("div"),i=y("div"),s=y("div"),w&&w.c(),o=L(),r=y("div"),a=y("div"),b&&b.c(),l=L(),u=y("div"),f=y("div"),F(d.$$.fragment),this.h()},l(A){e=k(A,"DIV",{class:!0});var S=I(e);n=k(S,"DIV",{class:!0});var M=I(n);i=k(M,"DIV",{class:!0});var G=I(i);s=k(G,"DIV",{style:!0,class:!0});var N=I(s);w&&w.l(N),N.forEach(v),G.forEach(v),o=P(M),r=k(M,"DIV",{class:!0});var B=I(r);a=k(B,"DIV",{style:!0,class:!0});var U=I(a);b&&b.l(U),U.forEach(v),B.forEach(v),M.forEach(v),l=P(S),u=k(S,"DIV",{class:!0});var q=I(u);f=k(q,"DIV",{class:!0});var C=I(f);W(d.$$.fragment,C),C.forEach(v),q.forEach(v),S.forEach(v),this.h()},h(){m(s,"style",t[3]),m(s,"class","w-full h-full origin-top-left grid place-items-center"),m(i,"class","mask-left svelte-dzs820"),m(a,"style",t[3]),m(a,"class","w-full h-full origin-top-left grid place-items-center"),m(r,"class","mask-right svelte-dzs820"),m(n,"class","w-full h-full grid place-items-center"),m(f,"class","w-12 h-12 rounded-full bg-black grid place-items-center absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"),ve(f,"rotate-90",t[0]==="vertical"),m(u,"class","handle relative shadow-lg svelte-dzs820"),m(e,"class","pz-container svelte-dzs820"),ve(e,"vertical",t[0]==="vertical"),ce(e,"--split-point",t[1]+"%")},m(A,S){O(A,e,S),E(e,n),E(n,i),E(i,s),w&&w.m(s,null),E(n,o),E(n,r),E(r,a),b&&b.m(a,null),E(e,l),E(e,u),E(u,f),z(d,f,null),t[8](e),c=!0,g||(_=[Oe(t[5].call(null,n)),Oe(t[4].call(null,u)),ee(u,"pointercancel",ut(ri))],g=!0)},p(A,[S]){w&&w.p&&(!c||S&64)&&Le(w,p,A,A[6],c?Ne(p,A[6],S,ni):Pe(A[6]),Pt),(!c||S&8)&&m(s,"style",A[3]),b&&b.p&&(!c||S&64)&&Le(b,h,A,A[6],c?Ne(h,A[6],S,ti):Pe(A[6]),Lt),(!c||S&8)&&m(a,"style",A[3]),(!c||S&1)&&ve(f,"rotate-90",A[0]==="vertical"),(!c||S&1)&&ve(e,"vertical",A[0]==="vertical"),S&2&&ce(e,"--split-point",A[1]+"%")},i(A){c||(T(w,A),T(b,A),T(d.$$.fragment,A),c=!0)},o(A){D(w,A),D(b,A),D(d.$$.fragment,A),c=!1},d(A){A&&v(e),w&&w.d(A),b&&b.d(A),V(d),t[8](null),g=!1,ke(_)}}}const ri=()=>{};function si(t,e,n){let{$$slots:i={},$$scope:s}=e,{direction:o="horizontal"}=e,r=null,{split:a=50}=e;function l(c){return c.addEventListener("pointerdown",g=>{const _=o==="vertical"?g.clientY:g.clientX,p=a,w=document.body.style.cursor;document.body.style.cursor=o==="vertical"?"ns-resize":"ew-resize";const h=A=>{const S=r?r.clientWidth:window.innerWidth,M=r?r.clientHeight:window.innerHeight,G=o==="vertical"?M:S,B=(o==="vertical"?A.clientY:A.clientX)-_,U=p+B/G*100;n(1,a=ft(U,0,100))},b=()=>{document.body.style.cursor=w,window.removeEventListener("pointermove",h),window.removeEventListener("pointerup",b),window.removeEventListener("pointercancel",b)};window.addEventListener("pointermove",h),window.addEventListener("pointerup",b),window.addEventListener("pointercancel",b)}),{destroy(){c.removeEventListener("pointerdown",()=>{})}}}let u="transform: none;";function f(c){const g=new ze(c);function _(p){const{matrix:w}=p.detail;n(3,u=`transform: ${w.toString()};`)}return g.addEventListener("panzoom:change",_),{destroy(){g.removeEventListener("panzoom:change",_),g.destroy()}}}Nn(async()=>{const c=window.matchMedia("(min-width: 768px)");function g(_){n(0,o=_.matches?"horizontal":"vertical")}return c.addEventListener("change",g),g(c),()=>c.removeEventListener("change",g)});function d(c){j[c?"unshift":"push"](()=>{r=c,n(2,r)})}return t.$$set=c=>{"direction"in c&&n(0,o=c.direction),"split"in c&&n(1,a=c.split),"$$scope"in c&&n(6,s=c.$$scope)},[o,a,r,u,l,f,s,i,d]}class oi extends ne{constructor(e){super(),ie(this,e,si,ii,re,{direction:0,split:1})}}const ai=t=>({}),Nt=t=>({});function li(t){let e,n,i,s,o,r,a,l,u,f,d,c;s=new pe({props:{src:t[0]?kt:It,class:"w-6 h-6 text-gray-500"}});const g=t[2].header,_=Re(g,t,t[1],Nt),p=t[2].default,w=Re(p,t,t[1],null);return{c(){e=y("div"),n=y("header"),i=y("button"),F(s.$$.fragment),o=L(),r=y("div"),_&&_.c(),a=L(),l=y("section"),w&&w.c(),this.h()},l(h){e=k(h,"DIV",{class:!0});var b=I(e);n=k(b,"HEADER",{class:!0});var A=I(n);i=k(A,"BUTTON",{class:!0});var S=I(i);W(s.$$.fragment,S),S.forEach(v),o=P(A),r=k(A,"DIV",{class:!0});var M=I(r);_&&_.l(M),M.forEach(v),A.forEach(v),a=P(b),l=k(b,"SECTION",{class:!0});var G=I(l);w&&w.l(G),G.forEach(v),b.forEach(v),this.h()},h(){m(i,"class","contents"),m(r,"class","flex flex-1 items-center justify-between"),m(n,"class","py-4 px-4 flex-shrink-0 shadow-sm z-10 flex gap-2 items-center justify-between bg-white"),m(l,"class","overflow-y-auto overflow-x-visible"),ve(l,"hidden",!t[0]),m(e,"class",u="w-full max-h-full flex-shrink-0 "+(t[0]?"h-full divide-y divide-gray-200 mt-auto":"flex-0")+" bg-gray-50 border border-gray-100 overflow-y-hidden flex-1 shadow-lg rounded-md flex flex-col justify-start pointer-events-auto touch-auto")},m(h,b){O(h,e,b),E(e,n),E(n,i),z(s,i,null),E(n,o),E(n,r),_&&_.m(r,null),E(e,a),E(e,l),w&&w.m(l,null),f=!0,d||(c=ee(i,"click",t[3]),d=!0)},p(h,[b]){const A={};b&1&&(A.src=h[0]?kt:It),s.$set(A),_&&_.p&&(!f||b&2)&&Le(_,g,h,h[1],f?Ne(g,h[1],b,ai):Pe(h[1]),Nt),w&&w.p&&(!f||b&2)&&Le(w,p,h,h[1],f?Ne(p,h[1],b,null):Pe(h[1]),null),(!f||b&1)&&ve(l,"hidden",!h[0]),(!f||b&1&&u!==(u="w-full max-h-full flex-shrink-0 "+(h[0]?"h-full divide-y divide-gray-200 mt-auto":"flex-0")+" bg-gray-50 border border-gray-100 overflow-y-hidden flex-1 shadow-lg rounded-md flex flex-col justify-start pointer-events-auto touch-auto"))&&m(e,"class",u)},i(h){f||(T(s.$$.fragment,h),T(_,h),T(w,h),f=!0)},o(h){D(s.$$.fragment,h),D(_,h),D(w,h),f=!1},d(h){h&&v(e),V(s),_&&_.d(h),w&&w.d(h),d=!1,c()}}}function ui(t,e,n){let{$$slots:i={},$$scope:s}=e,{open:o=!1}=e;const r=()=>n(0,o=!o);return t.$$set=a=>{"open"in a&&n(0,o=a.open),"$$scope"in a&&n(1,s=a.$$scope)},[o,s,i,r]}class Ot extends ne{constructor(e){super(),ie(this,e,ui,li,re,{open:0})}}function fi(t){let e,n,i,s;return{c(){e=y("canvas"),this.h()},l(o){e=k(o,"CANVAS",{style:!0,width:!0,height:!0,class:!0}),I(e).forEach(v),this.h()},h(){m(e,"style","image-rendering: pixelated;"),m(e,"width",t[3]),m(e,"height",t[4]),m(e,"class",t[2])},m(o,r){O(o,e,r),t[6](e),i||(s=Oe(n=t[5].call(null,e,{imageData:t[1],width:t[3],height:t[4]})),i=!0)},p(o,[r]){r&8&&m(e,"width",o[3]),r&16&&m(e,"height",o[4]),r&4&&m(e,"class",o[2]),n&&et(n.update)&&r&26&&n.update.call(null,{imageData:o[1],width:o[3],height:o[4]})},i:te,o:te,d(o){o&&v(e),t[6](null),i=!1,s()}}}function ci(t,e,n){let{data:i}=e,{twClass:s=""}=e,{canvas:o=null}=e,{width:r=300}=e,{height:a=300}=e;function l(f,d){let c;const g=()=>{c=new OffscreenCanvas(i.width,i.height),c.getContext("2d").putImageData(d.imageData,0,0)};g();const _=()=>{f.width=d.width,f.height=d.height,f.getContext("2d").drawImage(c,0,0,d.width,d.height)};return _(),{update:p=>{d=p,g(),requestAnimationFrame(_)}}}function u(f){j[f?"unshift":"push"](()=>{o=f,n(0,o)})}return t.$$set=f=>{"data"in f&&n(1,i=f.data),"twClass"in f&&n(2,s=f.twClass),"canvas"in f&&n(0,o=f.canvas),"width"in f&&n(3,r=f.width),"height"in f&&n(4,a=f.height)},[o,i,s,r,a,l,u]}class di extends ne{constructor(e){super(),ie(this,e,ci,fi,re,{data:1,twClass:2,canvas:0,width:3,height:4})}}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const fn=Symbol("Comlink.proxy"),hi=Symbol("Comlink.endpoint"),mi=Symbol("Comlink.releaseProxy"),rt=Symbol("Comlink.finalizer"),Ge=Symbol("Comlink.thrown"),cn=t=>typeof t=="object"&&t!==null||typeof t=="function",gi={canHandle:t=>cn(t)&&t[fn],serialize(t){const{port1:e,port2:n}=new MessageChannel;return hn(t,e),[n,[n]]},deserialize(t){return t.start(),tt(t)}},_i={canHandle:t=>cn(t)&&Ge in t,serialize({value:t}){let e;return t instanceof Error?e={isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:e={isError:!1,value:t},[e,[]]},deserialize(t){throw t.isError?Object.assign(new Error(t.value.message),t.value):t.value}},dn=new Map([["proxy",gi],["throw",_i]]);function pi(t,e){for(const n of t)if(e===n||n==="*"||n instanceof RegExp&&n.test(e))return!0;return!1}function hn(t,e=globalThis,n=["*"]){e.addEventListener("message",function i(s){if(!s||!s.data)return;if(!pi(n,s.origin)){console.warn(`Invalid origin '${s.origin}' for comlink proxy`);return}const{id:o,type:r,path:a}=Object.assign({path:[]},s.data),l=(s.data.argumentList||[]).map(Ae);let u;try{const f=a.slice(0,-1).reduce((c,g)=>c[g],t),d=a.reduce((c,g)=>c[g],t);switch(r){case"GET":u=d;break;case"SET":f[a.slice(-1)[0]]=Ae(s.data.value),u=!0;break;case"APPLY":u=d.apply(f,l);break;case"CONSTRUCT":{const c=new d(...l);u=Ai(c)}break;case"ENDPOINT":{const{port1:c,port2:g}=new MessageChannel;hn(t,g),u=pn(c,[c])}break;case"RELEASE":u=void 0;break;default:return}}catch(f){u={value:f,[Ge]:0}}Promise.resolve(u).catch(f=>({value:f,[Ge]:0})).then(f=>{const[d,c]=Ke(f);e.postMessage(Object.assign(Object.assign({},d),{id:o}),c),r==="RELEASE"&&(e.removeEventListener("message",i),mn(e),rt in t&&typeof t[rt]=="function"&&t[rt]())}).catch(f=>{const[d,c]=Ke({value:new TypeError("Unserializable return value"),[Ge]:0});e.postMessage(Object.assign(Object.assign({},d),{id:o}),c)})}),e.start&&e.start()}function bi(t){return t.constructor.name==="MessagePort"}function mn(t){bi(t)&&t.close()}function tt(t,e){return ct(t,[],e)}function je(t){if(t)throw new Error("Proxy has been released and is not useable")}function gn(t){return De(t,{type:"RELEASE"}).then(()=>{mn(t)})}const Qe=new WeakMap,Je="FinalizationRegistry"in globalThis&&new FinalizationRegistry(t=>{const e=(Qe.get(t)||0)-1;Qe.set(t,e),e===0&&gn(t)});function vi(t,e){const n=(Qe.get(e)||0)+1;Qe.set(e,n),Je&&Je.register(t,e,t)}function wi(t){Je&&Je.unregister(t)}function ct(t,e=[],n=function(){}){let i=!1;const s=new Proxy(n,{get(o,r){if(je(i),r===mi)return()=>{wi(s),gn(t),i=!0};if(r==="then"){if(e.length===0)return{then:()=>s};const a=De(t,{type:"GET",path:e.map(l=>l.toString())}).then(Ae);return a.then.bind(a)}return ct(t,[...e,r])},set(o,r,a){je(i);const[l,u]=Ke(a);return De(t,{type:"SET",path:[...e,r].map(f=>f.toString()),value:l},u).then(Ae)},apply(o,r,a){je(i);const l=e[e.length-1];if(l===hi)return De(t,{type:"ENDPOINT"}).then(Ae);if(l==="bind")return ct(t,e.slice(0,-1));const[u,f]=Bt(a);return De(t,{type:"APPLY",path:e.map(d=>d.toString()),argumentList:u},f).then(Ae)},construct(o,r){je(i);const[a,l]=Bt(r);return De(t,{type:"CONSTRUCT",path:e.map(u=>u.toString()),argumentList:a},l).then(Ae)}});return vi(s,t),s}function Ei(t){return Array.prototype.concat.apply([],t)}function Bt(t){const e=t.map(Ke);return[e.map(n=>n[0]),Ei(e.map(n=>n[1]))]}const _n=new WeakMap;function pn(t,e){return _n.set(t,e),t}function Ai(t){return Object.assign(t,{[fn]:!0})}function Ke(t){for(const[e,n]of dn)if(n.canHandle(t)){const[i,s]=n.serialize(t);return[{type:"HANDLER",name:e,value:i},s]}return[{type:"RAW",value:t},_n.get(t)||[]]}function Ae(t){switch(t.type){case"HANDLER":return dn.get(t.name).deserialize(t.value);case"RAW":return t.value}}function De(t,e,n){return new Promise(i=>{const s=yi();t.addEventListener("message",function o(r){!r.data||!r.data.id||r.data.id!==s||(t.removeEventListener("message",o),i(r.data))}),t.start&&t.start(),t.postMessage(Object.assign({id:s},e),n)})}function yi(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}function ki(){return new Worker(""+new URL("../workers/renderingWorker-76310ae6.js",import.meta.url).href)}function Ii(t,e){const n=t.transferControlToOffscreen(),i=new ki,s=tt(i);let o=null,r=null,a=()=>{};s.errorDiffusionDithering(pn(n,[n]),e).then(u=>{r=u.update,a=u.destroy,r(o||e)});const l=(u,f)=>{for(const d in u){const c=d;if(u[c]!==f[c])return!0}return!1};return{update:u=>{l&&(r?r(u):o=u)},destroy:()=>{a(),i.terminate()}}}var Si="precision highp float;attribute vec2 position;varying vec2 fragCoord;void main(){fragCoord.x=position.x*0.5+0.5;fragCoord.y=position.y*0.5+0.5;gl_Position=vec4(position,0.0,1.0);}",Ti="precision highp float;varying vec2 fragCoord;uniform sampler2D uSampler;uniform sampler2D uNoiseSampler;uniform sampler2D uPaletteSampler;uniform vec2 uNoiseSamplerSize;uniform float uNoise;uniform vec2 uSize;vec3 samplePalette(vec3 glsl_color){vec3 scaledColor=floor(glsl_color*255.0);vec3 quantized_color=floor(scaledColor/16.0)*16.0;float mappingI=floor((floor(quantized_color.r)+floor(quantized_color.g*16.0)+floor(quantized_color.b*16.0*16.0))/16.0);float mappedX=floor(mappingI/64.0);float mappedY=floor(mod(mappingI,64.0));float halfPixel=0.5/64.0;vec2 uv=vec2((mappedX/64.0)+halfPixel,1.0-(mappedY/64.0)-halfPixel);return texture2D(uPaletteSampler,uv).rgb;}void main(void){vec2 imgPixel=vec2(fragCoord.x*uSize.x,fragCoord.y*uSize.y);vec2 noisePixel=vec2(mod(imgPixel.x,uNoiseSamplerSize.x),mod(imgPixel.y,uNoiseSamplerSize.y));vec2 noiseUV=vec2(noisePixel.x/uNoiseSamplerSize.x,noisePixel.y/uNoiseSamplerSize.y);float noise=(texture2D(uNoiseSampler,noiseUV).r-0.5)*2.0*uNoise;vec4 color=texture2D(uSampler,fragCoord);color.r=clamp(color.r+noise,0.0,1.0);color.g=clamp(color.g+noise,0.0,1.0);color.b=clamp(color.b+noise,0.0,1.0);color.rgb=samplePalette(color.rgb);gl_FragColor=color;}";function Ut(t){return(t&t-1)===0}function Mi(t,e,n){const i=Xt(t,t.VERTEX_SHADER,e),s=Xt(t,t.FRAGMENT_SHADER,n),o=t.createProgram();if(!o)throw new Error("Failed to create shader program");if(t.attachShader(o,i),t.attachShader(o,s),t.linkProgram(o),!t.getProgramParameter(o,t.LINK_STATUS))throw Error(`Unable to initialize the shader program: ${t.getProgramInfoLog(o)}`);return o}function Xt(t,e,n){const i=t.createShader(e);if(!i)throw new Error("Failed to create shader");if(t.shaderSource(i,n),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS))throw Error(`An error occurred compiling the shaders: ${t.getShaderInfoLog(i)}`);return i}function Ci(t){const e=t.createBuffer(),n=t.createBuffer(),i=[-1,1,-1,-1,1,-1,1,1],s=[3,2,1,3,1,0];return t.bindBuffer(t.ARRAY_BUFFER,e),t.bufferData(t.ARRAY_BUFFER,new Float32Array(i),t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(s),t.STATIC_DRAW),{vertex_buffer:e,index_buffer:n}}function st(t,e,n){const i=t.createTexture();if(!i)throw new Error("Failed to create texture");return t.bindTexture(t.TEXTURE_2D,i),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),Ut(e.width)&&Ut(e.height)?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,n)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,n)),i}function Di(t,e){let n=e;const i=t.getContext("webgl",{preserveDrawingBuffer:!0});if(!i){alert("WebGL not supported");return}i.clearColor(0,0,0,1),i.clear(i.COLOR_BUFFER_BIT);const s=Mi(i,Si,Ti),{vertex_buffer:o,index_buffer:r}=Ci(i);i.useProgram(s);const a=i.getAttribLocation(s,"position");i.vertexAttribPointer(a,2,i.FLOAT,!1,0,0),i.enableVertexAttribArray(a);const l=i.getUniformLocation(s,"uSampler"),u=i.getUniformLocation(s,"uNoiseSampler"),f=i.getUniformLocation(s,"uNoise"),d=i.getUniformLocation(s,"uSize"),c=i.getUniformLocation(s,"uNoiseSamplerSize"),g=i.getUniformLocation(s,"uPaletteSampler");let _;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!0);const p=()=>{_&&i.deleteTexture(_),_=st(i,n.image,i.LINEAR)};p();let w,h,b=null;const A=()=>{w&&i.deleteTexture(w),w=st(i,n.thresholdMap,i.NEAREST),h={width:n.thresholdMap.width,height:n.thresholdMap.height}};A();let S;const M=()=>{S&&i.deleteTexture(S),S=st(i,n.palette,i.NEAREST)};M();const G=()=>{i.viewport(0,0,n.output_width,n.output_height),i.clearColor(0,0,0,1),i.clear(i.COLOR_BUFFER_BIT),i.bindBuffer(i.ARRAY_BUFFER,o),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,r),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,_),i.uniform1i(l,0),i.activeTexture(i.TEXTURE1),i.bindTexture(i.TEXTURE_2D,w),i.uniform1i(u,1),i.activeTexture(i.TEXTURE2),i.bindTexture(i.TEXTURE_2D,S),i.uniform1i(g,2),i.uniform2f(c,h.width,h.height),i.uniform1f(f,n.noiseIntensity),i.uniform2f(d,n.output_width,n.output_height),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT),i.drawElements(i.TRIANGLES,6,i.UNSIGNED_SHORT,0)};function N(){b=requestAnimationFrame(()=>{G(),b=null})}return N(),{update(B){const U=n.image!==B.image,q=n.thresholdMap!==B.thresholdMap,C=n.palette!==B.palette;n=B,U&&p(),q&&A(),C&&M(),N()},destroy(){b!==null&&cancelAnimationFrame(b)}}}function Ri(t){let e,n,i;function s(r){t[5](r)}let o={data:t[1],width:t[2].width,height:t[2].height,twClass:"w-full"};return t[0]!==void 0&&(o.canvas=t[0]),e=new di({props:o}),j.push(()=>Q(e,"canvas",s)),{c(){F(e.$$.fragment)},l(r){W(e.$$.fragment,r)},m(r,a){z(e,r,a),i=!0},p(r,a){const l={};a&2&&(l.data=r[1]),a&4&&(l.width=r[2].width),a&4&&(l.height=r[2].height),!n&&a&1&&(n=!0,l.canvas=r[0],J(()=>n=!1)),e.$set(l)},i(r){i||(T(e.$$.fragment,r),i=!0)},o(r){D(e.$$.fragment,r),i=!1},d(r){V(e,r)}}}function Li(t){let e,n=t[2].thresholdMap&&t[2].palette&&Ft(t);return{c(){n&&n.c(),e=qe()},l(i){n&&n.l(i),e=qe()},m(i,s){n&&n.m(i,s),O(i,e,s)},p(i,s){i[2].thresholdMap&&i[2].palette?n?n.p(i,s):(n=Ft(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:te,o:te,d(i){n&&n.d(i),i&&v(e)}}}function Pi(t){let e,n=t[2].palette&&Wt(t);return{c(){n&&n.c(),e=qe()},l(i){n&&n.l(i),e=qe()},m(i,s){n&&n.m(i,s),O(i,e,s)},p(i,s){i[2].palette?n?n.p(i,s):(n=Wt(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:te,o:te,d(i){n&&n.d(i),i&&v(e)}}}function Ft(t){let e,n,i,s,o,r;return{c(){e=y("canvas"),this.h()},l(a){e=k(a,"CANVAS",{class:!0,width:!0,height:!0,"aria-label":!0}),I(e).forEach(v),this.h()},h(){m(e,"class","pixelated w-full svelte-1gkt69q"),m(e,"width",n=t[2].width),m(e,"height",i=t[2].height),m(e,"aria-label","Dithered Image")},m(a,l){O(a,e,l),t[4](e),o||(r=Oe(s=Di.call(null,e,{image:t[1],noiseIntensity:t[2].noiseIntensity,palette:t[2].palette,output_width:t[2].width,output_height:t[2].height,thresholdMap:t[2].thresholdMap})),o=!0)},p(a,l){l&4&&n!==(n=a[2].width)&&m(e,"width",n),l&4&&i!==(i=a[2].height)&&m(e,"height",i),s&&et(s.update)&&l&6&&s.update.call(null,{image:a[1],noiseIntensity:a[2].noiseIntensity,palette:a[2].palette,output_width:a[2].width,output_height:a[2].height,thresholdMap:a[2].thresholdMap})},d(a){a&&v(e),t[4](null),o=!1,r()}}}function Wt(t){let e,n,i,s,o,r;return{c(){e=y("canvas"),this.h()},l(a){e=k(a,"CANVAS",{class:!0,width:!0,height:!0}),I(e).forEach(v),this.h()},h(){m(e,"class","pixelated w-full svelte-1gkt69q"),m(e,"width",n=t[2].width),m(e,"height",i=t[2].height)},m(a,l){O(a,e,l),t[3](e),o||(r=Oe(s=Ii.call(null,e,{image:t[1],output_width:t[2].width,output_height:t[2].height,palette:t[2].palette,diffusionStrength:t[2].diffusionStrength,diffusionMatrix:t[2].diffusionMatrix,diffusionMatrixOriginX:t[2].diffusionMatrixOriginX})),o=!0)},p(a,l){l&4&&n!==(n=a[2].width)&&m(e,"width",n),l&4&&i!==(i=a[2].height)&&m(e,"height",i),s&&et(s.update)&&l&6&&s.update.call(null,{image:a[1],output_width:a[2].width,output_height:a[2].height,palette:a[2].palette,diffusionStrength:a[2].diffusionStrength,diffusionMatrix:a[2].diffusionMatrix,diffusionMatrixOriginX:a[2].diffusionMatrixOriginX})},d(a){a&&v(e),t[3](null),o=!1,r()}}}function Ni(t){let e,n,i,s;const o=[Pi,Li,Ri],r=[];function a(l,u){return l[2].mode==="error_diffusion"?0:l[2].mode==="ordered"?1:l[2].mode==="none"?2:-1}return~(n=a(t))&&(i=r[n]=o[n](t)),{c(){e=y("div"),i&&i.c(),this.h()},l(l){e=k(l,"DIV",{class:!0,style:!0});var u=I(e);i&&i.l(u),u.forEach(v),this.h()},h(){m(e,"class","shadow-lg bg-gray-200"),ce(e,"width","80vmin"),ce(e,"aspect-ratio",t[1].width/t[1].height)},m(l,u){O(l,e,u),~n&&r[n].m(e,null),s=!0},p(l,[u]){let f=n;n=a(l),n===f?~n&&r[n].p(l,u):(i&&(Be(),D(r[f],1,1,()=>{r[f]=null}),Ue()),~n?(i=r[n],i?i.p(l,u):(i=r[n]=o[n](l),i.c()),T(i,1),i.m(e,null)):i=null),(!s||u&2)&&ce(e,"aspect-ratio",l[1].width/l[1].height)},i(l){s||(T(i),s=!0)},o(l){D(i),s=!1},d(l){l&&v(e),~n&&r[n].d()}}}function Oi(t,e,n){let{canvas:i=null}=e,{image_data:s}=e,{config:o}=e;function r(u){j[u?"unshift":"push"](()=>{i=u,n(0,i)})}function a(u){j[u?"unshift":"push"](()=>{i=u,n(0,i)})}function l(u){i=u,n(0,i)}return t.$$set=u=>{"canvas"in u&&n(0,i=u.canvas),"image_data"in u&&n(1,s=u.image_data),"config"in u&&n(2,o=u.config)},[i,s,o,r,a,l]}class bn extends ne{constructor(e){super(),ie(this,e,Oi,Ni,re,{canvas:0,image_data:1,config:2})}}function zt(t,e,n){const i=t.slice();return i[4]=e[n],i}function Vt(t){let e,n,i,s=!1,o,r,a=t[4].label+"",l,u,f,d,c,g;return d=On(t[3][0]),{c(){e=y("label"),n=y("input"),o=L(),r=y("div"),l=K(a),f=L(),this.h()},l(_){e=k(_,"LABEL",{class:!0});var p=I(e);n=k(p,"INPUT",{type:!0,name:!0,class:!0}),o=P(p),r=k(p,"DIV",{class:!0});var w=I(r);l=$(w,a),w.forEach(v),f=P(p),p.forEach(v),this.h()},h(){m(n,"type","radio"),m(n,"name","tabs"),n.__value=i=t[4].value,n.value=n.__value,m(n,"class","sr-only"),m(r,"class",u="flex items-center justify-center py-2 text-sm font-medium text-gray-700 border-b "+(t[4].value===t[0]?"border-indigo-500 border-b-2":"border-gray-300")+" cursor-pointer hover:bg-gray-900 hover:bg-opacity-5"),m(e,"class","flex-1"),d.p(n)},m(_,p){O(_,e,p),E(e,n),n.checked=n.__value===t[0],E(e,o),E(e,r),E(r,l),E(e,f),c||(g=ee(n,"change",t[2]),c=!0)},p(_,p){p&2&&i!==(i=_[4].value)&&(n.__value=i,n.value=n.__value,s=!0),(s||p&3)&&(n.checked=n.__value===_[0]),p&2&&a!==(a=_[4].label+"")&&ye(l,a),p&3&&u!==(u="flex items-center justify-center py-2 text-sm font-medium text-gray-700 border-b "+(_[4].value===_[0]?"border-indigo-500 border-b-2":"border-gray-300")+" cursor-pointer hover:bg-gray-900 hover:bg-opacity-5")&&m(r,"class",u)},d(_){_&&v(e),d.r(),c=!1,g()}}}function Bi(t){let e,n=t[1],i=[];for(let s=0;s<n.length;s+=1)i[s]=Vt(zt(t,n,s));return{c(){e=y("nav");for(let s=0;s<i.length;s+=1)i[s].c();this.h()},l(s){e=k(s,"NAV",{class:!0});var o=I(e);for(let r=0;r<i.length;r+=1)i[r].l(o);o.forEach(v),this.h()},h(){m(e,"class","flex w-full")},m(s,o){O(s,e,o);for(let r=0;r<i.length;r+=1)i[r]&&i[r].m(e,null)},p(s,[o]){if(o&3){n=s[1];let r;for(r=0;r<n.length;r+=1){const a=zt(s,n,r);i[r]?i[r].p(a,o):(i[r]=Vt(a),i[r].c(),i[r].m(e,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=n.length}},i:te,o:te,d(s){s&&v(e),Ve(i,s)}}}function Ui(t,e,n){let{tabs:i}=e,{selected:s}=e;const o=[[]];function r(){s=this.__value,n(0,s)}return t.$$set=a=>{"tabs"in a&&n(1,i=a.tabs),"selected"in a&&n(0,s=a.selected)},[s,i,r,o]}class Xi extends ne{constructor(e){super(),ie(this,e,Ui,Bi,re,{tabs:1,selected:0})}}function Fi(t){let e,n,i,s,o,r,a;return{c(){e=y("div"),n=y("label"),i=K(t[1]),s=L(),o=y("input"),this.h()},l(l){e=k(l,"DIV",{});var u=I(e);n=k(u,"LABEL",{for:!0,class:!0});var f=I(n);i=$(f,t[1]),f.forEach(v),s=P(u),o=k(u,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0,name:!0,class:!0}),u.forEach(v),this.h()},h(){m(n,"for",t[6]),m(n,"class","block mb-2 text-sm font-medium text-gray-900 dark:text-white"),m(o,"id",t[6]),m(o,"type","range"),m(o,"min",t[3]),m(o,"max",t[4]),m(o,"step",t[5]),m(o,"name",t[2]),m(o,"class","w-full h-1.5 mb-6 bg-white ring-1 ring-gray-300 shadow-sm rounded-lg appearance-none cursor-pointer accent-indigo-600 dark:bg-gray-700")},m(l,u){O(l,e,u),E(e,n),E(n,i),E(e,s),E(e,o),Ze(o,t[0]),r||(a=[ee(o,"change",t[7]),ee(o,"input",t[7])],r=!0)},p(l,[u]){u&2&&ye(i,l[1]),u&8&&m(o,"min",l[3]),u&16&&m(o,"max",l[4]),u&32&&m(o,"step",l[5]),u&4&&m(o,"name",l[2]),u&1&&Ze(o,l[0])},i:te,o:te,d(l){l&&v(e),r=!1,ke(a)}}}function Wi(t,e,n){let{label:i}=e,{name:s=void 0}=e,{min:o=null}=e,{max:r=null}=e,{value:a=0}=e,{step:l=1}=e,u=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);function f(){a=pt(this.value),n(0,a)}return t.$$set=d=>{"label"in d&&n(1,i=d.label),"name"in d&&n(2,s=d.name),"min"in d&&n(3,o=d.min),"max"in d&&n(4,r=d.max),"value"in d&&n(0,a=d.value),"step"in d&&n(5,l=d.step)},[a,i,s,o,r,l,u,f]}class bt extends ne{constructor(e){super(),ie(this,e,Wi,Fi,re,{label:1,name:2,min:3,max:4,value:0,step:5})}}function dt(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}function Ht(t,e,n){const i=t.slice();return i[6]=e[n],i}function Yt(t){let e,n=t[6].name+"",i,s,o;return{c(){e=y("option"),i=K(n),this.h()},l(r){e=k(r,"OPTION",{});var a=I(e);i=$(a,n),a.forEach(v),this.h()},h(){e.__value=s=t[6].value,e.value=e.__value,e.selected=o=t[6].value===t[0]},m(r,a){O(r,e,a),E(e,i)},p(r,a){a&2&&n!==(n=r[6].name+"")&&ye(i,n),a&2&&s!==(s=r[6].value)&&(e.__value=s,e.value=e.__value),a&3&&o!==(o=r[6].value===r[0])&&(e.selected=o)},d(r){r&&v(e)}}}function zi(t){let e,n,i,s,o,r,a,l=t[1],u=[];for(let f=0;f<l.length;f+=1)u[f]=Yt(Ht(t,l,f));return{c(){e=y("div"),n=y("label"),i=K(t[2]),s=L(),o=y("select");for(let f=0;f<u.length;f+=1)u[f].c();this.h()},l(f){e=k(f,"DIV",{});var d=I(e);n=k(d,"LABEL",{for:!0,class:!0});var c=I(n);i=$(c,t[2]),c.forEach(v),s=P(d),o=k(d,"SELECT",{id:!0,name:!0,class:!0});var g=I(o);for(let _=0;_<u.length;_+=1)u[_].l(g);g.forEach(v),d.forEach(v),this.h()},h(){m(n,"for",t[4]),m(n,"class","block text-sm font-medium leading-6 text-gray-900"),m(o,"id",t[4]),m(o,"name",t[3]),m(o,"class","mt-2 block w-full rounded-md border-0 py-1.5 pl-3 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-indigo-600 sm:text-sm sm:leading-6"),t[0]===void 0&&Bn(()=>t[5].call(o))},m(f,d){O(f,e,d),E(e,n),E(n,i),E(e,s),E(e,o);for(let c=0;c<u.length;c+=1)u[c]&&u[c].m(o,null);yt(o,t[0],!0),r||(a=ee(o,"change",t[5]),r=!0)},p(f,[d]){if(d&4&&ye(i,f[2]),d&3){l=f[1];let c;for(c=0;c<l.length;c+=1){const g=Ht(f,l,c);u[c]?u[c].p(g,d):(u[c]=Yt(g),u[c].c(),u[c].m(o,null))}for(;c<u.length;c+=1)u[c].d(1);u.length=l.length}d&8&&m(o,"name",f[3]),d&3&&yt(o,f[0])},i:te,o:te,d(f){f&&v(e),Ve(u,f),r=!1,a()}}}function Vi(t,e,n){let{options:i}=e,{selected:s}=e,{label:o}=e,{name:r=void 0}=e;const a=dt();function l(){s=Un(this),n(0,s),n(1,i)}return t.$$set=u=>{"options"in u&&n(1,i=u.options),"selected"in u&&n(0,s=u.selected),"label"in u&&n(2,o=u.label),"name"in u&&n(3,r=u.name)},[s,i,o,r,a,l]}class vn extends ne{constructor(e){super(),ie(this,e,Vi,zi,re,{options:1,selected:0,label:2,name:3})}}function Hi(t){let e,n,i,s,o,r;function a(d){t[5](d)}let l={label:"Diffusion Mode",options:t[2]};t[1]!==void 0&&(l.selected=t[1]),e=new vn({props:l}),j.push(()=>Q(e,"selected",a));function u(d){t[6](d)}let f={label:"Diffusion Strength ("+t[0]+")",min:0,max:2,step:.01};return t[0]!==void 0&&(f.value=t[0]),s=new bt({props:f}),j.push(()=>Q(s,"value",u)),{c(){F(e.$$.fragment),i=L(),F(s.$$.fragment)},l(d){W(e.$$.fragment,d),i=P(d),W(s.$$.fragment,d)},m(d,c){z(e,d,c),O(d,i,c),z(s,d,c),r=!0},p(d,[c]){const g={};!n&&c&2&&(n=!0,g.selected=d[1],J(()=>n=!1)),e.$set(g);const _={};c&1&&(_.label="Diffusion Strength ("+d[0]+")"),!o&&c&1&&(o=!0,_.value=d[0],J(()=>o=!1)),s.$set(_)},i(d){r||(T(e.$$.fragment,d),T(s.$$.fragment,d),r=!0)},o(d){D(e.$$.fragment,d),D(s.$$.fragment,d),r=!1},d(d){V(e,d),d&&v(i),V(s,d)}}}function Yi(t,e,n){let{diffusionStrength:i}=e,{diffusionMatrix:s}=e,{diffusionOriginX:o}=e,r="floyd_steinberg";const a=[{name:"Basic",value:"basic"},{name:"Floyd-Steinberg",value:"floyd_steinberg"},{name:"Atkinson",value:"atkinson"},{name:"Jarvis-Judice-Ninke",value:"jarvis_judice_ninke"}],l={basic:{matrix:[[0,1/2],[1/2,0]],originX:0},floyd_steinberg:{matrix:[[0,0,7/16],[3/16,5/16,1/16]],originX:1},atkinson:{matrix:[[0,0,1/8,1/8],[1/8,1/8,1/8,0],[0,1/8,0,0]],originX:1},jarvis_judice_ninke:{matrix:[[0,0,0,7/48,5/48],[3/48,5/48,7/48,5/48,3/48],[1/48,3/48,5/48,3/48,1/48]],originX:2}};function u(d){r=d,n(1,r)}function f(d){i=d,n(0,i)}return t.$$set=d=>{"diffusionStrength"in d&&n(0,i=d.diffusionStrength),"diffusionMatrix"in d&&n(3,s=d.diffusionMatrix),"diffusionOriginX"in d&&n(4,o=d.diffusionOriginX)},t.$$.update=()=>{if(t.$$.dirty&2){const{matrix:d,originX:c}=l[r];n(3,s=d),n(4,o=c)}},[i,r,a,s,o,u,f]}class ji extends ne{constructor(e){super(),ie(this,e,Yi,Hi,re,{diffusionStrength:0,diffusionMatrix:3,diffusionOriginX:4})}}function jt(t,e,n){const i=t.slice();i[6]=e[n],i[9]=n;const s=Hn(i[6]);return i[7]=s,i}function Gt(t){let e,n,i,s,o,r,a,l,u;function f(...c){return t[4](t[9],...c)}r=new pe({props:{src:on,class:"w-4 h-4 text-white"}});function d(){return t[5](t[9])}return{c(){e=y("li"),n=y("input"),s=L(),o=y("button"),F(r.$$.fragment),this.h()},l(c){e=k(c,"LI",{style:!0,class:!0});var g=I(e);n=k(g,"INPUT",{type:!0,class:!0}),s=P(g),o=k(g,"BUTTON",{class:!0});var _=I(o);W(r.$$.fragment,_),_.forEach(v),g.forEach(v),this.h()},h(){m(n,"type","color"),n.value=i=t[7],m(n,"class","absolute inset-0 w-full h-full opacity-0"),m(o,"class","absolute top-1/2 -translate-y-1/2 right-2 p-1 bg-black bg-opacity-40 rounded-full"),ce(e,"background-color",t[7]),m(e,"class","relative rounded-md h-10")},m(c,g){O(c,e,g),E(e,n),E(e,s),E(e,o),z(r,o,null),a=!0,l||(u=[ee(n,"input",f),ee(o,"click",d)],l=!0)},p(c,g){t=c,(!a||g&1&&i!==(i=t[7]))&&(n.value=i),(!a||g&1)&&ce(e,"background-color",t[7])},i(c){a||(T(r.$$.fragment,c),a=!0)},o(c){D(r.$$.fragment,c),a=!1},d(c){c&&v(e),V(r),l=!1,ke(u)}}}function Gi(t){let e,n,i,s,o,r,a,l,u,f,d,c=t[0],g=[];for(let p=0;p<c.length;p+=1)g[p]=Gt(jt(t,c,p));const _=p=>D(g[p],1,1,()=>{g[p]=null});return o=new pe({props:{src:sn,class:"w-4 h-4"}}),{c(){e=y("ul");for(let p=0;p<g.length;p+=1)g[p].c();n=L(),i=y("li"),s=y("button"),F(o.$$.fragment),r=L(),a=y("span"),l=K("Color"),this.h()},l(p){e=k(p,"UL",{class:!0});var w=I(e);for(let S=0;S<g.length;S+=1)g[S].l(w);n=P(w),i=k(w,"LI",{});var h=I(i);s=k(h,"BUTTON",{class:!0});var b=I(s);W(o.$$.fragment,b),r=P(b),a=k(b,"SPAN",{});var A=I(a);l=$(A,"Color"),A.forEach(v),b.forEach(v),h.forEach(v),w.forEach(v),this.h()},h(){m(s,"class","flex items-center justify-center gap-1 w-full h-10 bg-emerald-500 text-white rounded-md"),m(e,"class","grid gap-2 grid-cols-3")},m(p,w){O(p,e,w);for(let h=0;h<g.length;h+=1)g[h]&&g[h].m(e,null);E(e,n),E(e,i),E(i,s),z(o,s,null),E(s,r),E(s,a),E(a,l),u=!0,f||(d=ee(s,"click",t[1]),f=!0)},p(p,[w]){if(w&13){c=p[0];let h;for(h=0;h<c.length;h+=1){const b=jt(p,c,h);g[h]?(g[h].p(b,w),T(g[h],1)):(g[h]=Gt(b),g[h].c(),T(g[h],1),g[h].m(e,n))}for(Be(),h=c.length;h<g.length;h+=1)_(h);Ue()}},i(p){if(!u){for(let w=0;w<c.length;w+=1)T(g[w]);T(o.$$.fragment,p),u=!0}},o(p){g=g.filter(Boolean);for(let w=0;w<g.length;w+=1)D(g[w]);D(o.$$.fragment,p),u=!1},d(p){p&&v(e),Ve(g,p),V(o),f=!1,d()}}}function qi(){return[Math.random()*255,Math.random()*255,Math.random()*255].map(Math.round)}function Zi(t,e,n){let{colors:i}=e;function s(){n(0,i=[...i,qi()])}function o(u){n(0,i=i.filter((f,d)=>d!==u))}function r(u,f){const c=u.target.value;n(0,i[f]=ae(c),i)}const a=(u,f)=>r(f,u),l=u=>o(u);return t.$$set=u=>{"colors"in u&&n(0,i=u.colors)},[i,s,o,r,a,l]}class Qi extends ne{constructor(e){super(),ie(this,e,Zi,Gi,re,{colors:0})}}const Ji=8,wn=5,qt=1e3,ot=wn,ue=Ji-wn,Ki=.75;function ht(t,e){return t<e?-1:t>e?1:0}class mt{constructor(e){fe(this,"contents",[]);fe(this,"isSorted",!1);this.compareFn=e}sort(){this.isSorted||(this.contents.sort(this.compareFn),this.isSorted=!0)}push(e){this.contents.push(e),this.isSorted=!1}peek(e){return this.sort(),e===void 0&&(e=this.contents.length-1),this.contents[e]}pop(){return this.sort(),this.contents.pop()}size(){return this.contents.length}map(e){return this.contents.map(e)}[Symbol.iterator](){return this.sort(),this.contents[Symbol.iterator]()}}class vt{constructor(e,n,i,s,o,r,a){fe(this,"_count");fe(this,"_avg");this.r1=e,this.r2=n,this.g1=i,this.g2=s,this.b1=o,this.b2=r,this.histogram=a}volume(){return(this.r2-this.r1+1)*(this.g2-this.g1+1)*(this.b2-this.b1+1)}count(e=!1){if(this._count===void 0||e){let n=0;for(const[i,s,o]of this.colors())n+=this.histogram.sampleWithReducedColor(i,s,o);this._count=n}return this._count}copy(){return new vt(this.r1,this.r2,this.g1,this.g2,this.b1,this.b2,this.histogram)}avg(e=!1){if(!this._avg||e){let n=0;const i=1<<ue;let s=0,o=0,r=0;for(const[a,l,u]of this.colors()){let f=this.histogram.sampleWithReducedColor(a,l,u);n+=f,s+=f*(a+.5)*i,o+=f*(l+.5)*i,r+=f*(u+.5)*i}n>0?this._avg=[Math.floor(s/n),Math.floor(o/n),Math.floor(r/n)]:this._avg=[Math.floor(i*(this.r1+this.r2+1)/2),Math.floor(i*(this.g1+this.g2+1)/2),Math.floor(i*(this.b1+this.b2+1)/2)]}return this._avg}contains(e){const n=e[0]>>ue,i=e[1]>>ue,s=e[2]>>ue;return n>=this.r1&&n<=this.r2&&i>=this.g1&&i<=this.g2&&s>=this.b1&&s<=this.b2}*colors(){for(let e=this.r1;e<=this.r2;e++)for(let n=this.g1;n<=this.g2;n++)for(let i=this.b1;i<=this.b2;i++)yield[e,n,i]}}class $i{constructor(){fe(this,"boxes");this.boxes=new mt((e,n)=>ht(e.vbox.count()*e.vbox.volume(),n.vbox.count()*n.vbox.volume()))}push(e){this.boxes.push({vbox:e,color:e.avg()})}palette(){return this.boxes.map(e=>e.color)}size(){return this.boxes.size()}map(e){for(const n of this.boxes)if(n.vbox.contains(e))return n.color;return this.nearest(e)}nearest(e){let n,i,s;for(const o of this.boxes)i=Math.sqrt(Math.pow(e[0]-o.color[0],2)+Math.pow(e[1]-o.color[1],2)+Math.pow(e[2]-o.color[2],2)),(n===void 0||i<n)&&(n=i,s=o.color);return s}}class $e{constructor(e){fe(this,"histogram",new Array(1<<3*ot));for(let n=0;n<e.length;n+=4){let i=e[n]>>ue,s=e[n+1]>>ue,o=e[n+2]>>ue,r=$e.getColorIndex(i,s,o);this.histogram[r]=(this.histogram[r]??0)+1}}sample(e,n,i){const s=e>>ue,o=n>>ue,r=i>>ue;return this.sampleWithReducedColor(s,o,r)}sampleWithReducedColor(e,n,i){const s=$e.getColorIndex(e,n,i);return this.histogram[s]??0}static getColorIndex(e,n,i){return(e<<2*ot)+(n<<ot)+i}}function xi(t,e){let n=1e6,i=0,s=1e6,o=0,r=1e6,a=0;for(let l=0;l<t.length;l+=4){const u=t[l]>>ue,f=t[l+1]>>ue,d=t[l+2]>>ue;u<n?n=u:u>i&&(i=u),f<s?s=f:f>o&&(o=f),d<r?r=d:d>a&&(a=d)}return new vt(n,i,s,o,r,a,e)}function er(t,e,n,i,s){const o=s+"1",r=s+"2";for(let a=t[o];a<=t[r];a++)if(e[a]>i/2){let l=t.copy(),u=t.copy(),f=a-t[o],d=t[r]-a,c,g=0;for(f<=d?c=Math.min(t[r]-1,~~(a+d/2)):c=Math.max(t[o],~~(a-1-f/2));!e[c];)c++;for(g=n[c];!g&&e[c-1];)g=n[--c];return l[r]=c,u[o]=l[r]+1,[l,u]}throw new Error("VBox can't be cut")}function tr(t,e){if(!e.count())return[e.copy(),void 0];const n=e.r2-e.r1+1,i=e.g2-e.g1+1,s=e.b2-e.b1+1,o=Math.max(n,i,s);if(e.count()==1)return[e.copy(),void 0];let r=0;const a=[],l=[];if(o==n)for(let f=e.r1;f<=e.r2;f++){let d=0;for(let c=e.g1;c<=e.g2;c++)for(let g=e.b1;g<=e.b2;g++)d+=t.sampleWithReducedColor(f,c,g);r+=d,a[f]=r}else if(o==i)for(let f=e.g1;f<=e.g2;f++){let d=0;for(let c=e.r1;c<=e.r2;c++)for(let g=e.b1;g<=e.b2;g++)d+=t.sampleWithReducedColor(c,f,g);r+=d,a[f]=r}else if(o==s)for(let f=e.b1;f<=e.b2;f++){let d=0;for(let c=e.r1;c<=e.r2;c++)for(let g=e.g1;g<=e.g2;g++)d+=t.sampleWithReducedColor(c,g,f);r+=d,a[f]=r}else throw new Error("Not Reached");a.forEach(function(f,d){l[d]=r-f});const u=o==n?"r":o==i?"g":"b";return er(e,a,l,r,u)}function nr(t,e){if(t.length<4||e<2||e>256)throw new Error("Invalid Arguments. There must be at least one pixel, and the max color must be between 2 and 256");const n=new $e(t),i=xi(t,n),s=new mt((l,u)=>ht(l.count(),u.count()));s.push(i);const o=(l,u)=>{let f=l.size(),d=0,c;for(;d<qt;){if(f>=u||d++>qt)return;if(c=l.pop(),!c||!c.count()){l.push(c),d++;continue}const[g,_]=tr(n,c);l.push(g),_&&(l.push(_),f++)}};o(s,Ki*e);const r=new mt(function(l,u){return ht(l.count()*l.volume(),u.count()*u.volume())});for(;s.size();)r.push(s.pop());o(r,e);const a=new $i;for(;r.size();)a.push(r.pop());return a}function ir(t,e,n=10){const i=rr(t.data,n),s=nr(i,e);return s?s.palette():null}function rr(t,e){const n=Math.floor(t.length/4),i=Math.max(1,Math.round(n/e)),s=new Uint8ClampedArray(i*4);for(let o=0;o<i;o++){const r=Math.round(o*n/i);s[o*4+0]=t[r*4+0],s[o*4+1]=t[r*4+1],s[o*4+2]=t[r*4+2],s[o*4+3]=t[r*4+3]}return s}function sr(){return new Worker(""+new URL("../workers/worker-b8220752.js",import.meta.url).href)}let Zt=tt(new sr);async function or(t){if(!Zt)throw new Error("Worker not initialized");return await Zt.generatePalette(t)}function Qt(t){let e,n,i,s,o;return{c(){e=y("span"),n=y("span"),i=K(t[2]),s=L(),o=K(t[3]),this.h()},l(r){e=k(r,"SPAN",{id:!0,class:!0});var a=I(e);n=k(a,"SPAN",{class:!0});var l=I(n);i=$(l,t[2]),s=P(l),l.forEach(v),o=$(a,t[3]),a.forEach(v),this.h()},h(){m(n,"class","sr-only"),m(e,"id",t[6]),m(e,"class","text-gray-500")},m(r,a){O(r,e,a),E(e,n),E(n,i),E(n,s),E(e,o)},p(r,a){a&4&&ye(i,r[2]),a&8&&ye(o,r[3])},d(r){r&&v(e)}}}function ar(t){let e,n,i,s,o,r,a,l,u,f,d,c=t[3]&&Qt(t);return{c(){e=y("div"),n=y("div"),i=y("input"),o=L(),r=y("div"),a=y("label"),l=K(t[2]),u=L(),c&&c.c(),this.h()},l(g){e=k(g,"DIV",{class:!0});var _=I(e);n=k(_,"DIV",{class:!0});var p=I(n);i=k(p,"INPUT",{id:!0,"aria-describedby":!0,name:!0,type:!0,class:!0}),p.forEach(v),o=P(_),r=k(_,"DIV",{class:!0});var w=I(r);a=k(w,"LABEL",{for:!0,class:!0});var h=I(a);l=$(h,t[2]),h.forEach(v),u=P(w),c&&c.l(w),w.forEach(v),_.forEach(v),this.h()},h(){m(i,"id",t[5]),m(i,"aria-describedby",s=t[3]?t[6]:void 0),m(i,"name",t[4]),m(i,"type","checkbox"),m(i,"class","h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600"),m(n,"class","flex h-6 items-center"),m(a,"for",t[5]),m(a,"class","font-medium text-gray-900"),m(r,"class","ml-3 text-sm leading-6"),m(e,"class","relative flex items-start")},m(g,_){O(g,e,_),E(e,n),E(n,i),t[9](i),i.checked=t[0],E(e,o),E(e,r),E(r,a),E(a,l),E(r,u),c&&c.m(r,null),f||(d=[ee(i,"input",t[7]),ee(i,"change",t[8]),ee(i,"change",t[10])],f=!0)},p(g,[_]){_&8&&s!==(s=g[3]?g[6]:void 0)&&m(i,"aria-describedby",s),_&16&&m(i,"name",g[4]),_&1&&(i.checked=g[0]),_&4&&ye(l,g[2]),g[3]?c?c.p(g,_):(c=Qt(g),c.c(),c.m(r,null)):c&&(c.d(1),c=null)},i:te,o:te,d(g){g&&v(e),t[9](null),c&&c.d(),f=!1,ke(d)}}}function lr(t,e,n){let{checked:i=!1}=e,{label:s}=e,{description:o=void 0}=e,{name:r=void 0}=e,{input:a=null}=e;const l=dt(),u=dt();function f(_){lt.call(this,t,_)}function d(_){lt.call(this,t,_)}function c(_){j[_?"unshift":"push"](()=>{a=_,n(1,a)})}function g(){i=this.checked,n(0,i)}return t.$$set=_=>{"checked"in _&&n(0,i=_.checked),"label"in _&&n(2,s=_.label),"description"in _&&n(3,o=_.description),"name"in _&&n(4,r=_.name),"input"in _&&n(1,a=_.input)},[i,a,s,o,r,l,u,f,d,c,g]}class En extends ne{constructor(e){super(),ie(this,e,lr,ar,re,{checked:0,label:2,description:3,name:4,input:1})}}function Jt(t,e,n){const i=t.slice();return i[15]=e[n].name,i[16]=e[n].palette,i[18]=n,i}function ur(t){let e,n,i,s,o,r=t[4],a=[];for(let l=0;l<r.length;l+=1)a[l]=Kt(Jt(t,r,l));return{c(){e=y("select"),n=y("option"),i=K("Choose a Preset ");for(let l=0;l<a.length;l+=1)a[l].c();this.h()},l(l){e=k(l,"SELECT",{class:!0});var u=I(e);n=k(u,"OPTION",{});var f=I(n);i=$(f,"Choose a Preset "),f.forEach(v);for(let d=0;d<a.length;d+=1)a[d].l(u);u.forEach(v),this.h()},h(){n.__value=-1,n.value=n.__value,n.selected=!0,n.disabled=!0,m(e,"class","mt-2 block w-full rounded-md border-0 py-1.5 pl-3 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-indigo-600 sm:text-sm sm:leading-6")},m(l,u){O(l,e,u),E(e,n),E(n,i);for(let f=0;f<a.length;f+=1)a[f]&&a[f].m(e,null);s||(o=ee(e,"input",t[5]),s=!0)},p(l,u){if(u&16){r=l[4];let f;for(f=0;f<r.length;f+=1){const d=Jt(l,r,f);a[f]?a[f].p(d,u):(a[f]=Kt(d),a[f].c(),a[f].m(e,null))}for(;f<a.length;f+=1)a[f].d(1);a.length=r.length}},d(l){l&&v(e),Ve(a,l),s=!1,o()}}}function fr(t){let e,n,i,s,o,r,a;return{c(){e=y("label"),n=y("span"),i=K("Number of Colors"),s=L(),o=y("input"),this.h()},l(l){e=k(l,"LABEL",{class:!0});var u=I(e);n=k(u,"SPAN",{class:!0});var f=I(n);i=$(f,"Number of Colors"),f.forEach(v),s=P(u),o=k(u,"INPUT",{type:!0,min:!0,max:!0,class:!0}),u.forEach(v),this.h()},h(){m(n,"class","font-medium text-gray-900 text-sm"),m(o,"type","number"),m(o,"min",_t),m(o,"max",gt),m(o,"class","block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"),m(e,"class","flex justify-between items-center")},m(l,u){O(l,e,u),E(e,n),E(n,i),E(e,s),E(e,o),Ze(o,t[2]),r||(a=[ee(o,"input",t[11]),ee(o,"blur",t[12]),ee(o,"input",t[6])],r=!0)},p(l,u){u&4&&pt(o.value)!==l[2]&&Ze(o,l[2])},d(l){l&&v(e),r=!1,ke(a)}}}function Kt(t){let e,n=t[15]+"",i,s;return{c(){e=y("option"),i=K(n),s=L(),this.h()},l(o){e=k(o,"OPTION",{});var r=I(e);i=$(r,n),s=P(r),r.forEach(v),this.h()},h(){e.__value=t[18],e.value=e.__value},m(o,r){O(o,e,r),E(e,i),E(e,s)},p:te,d(o){o&&v(e)}}}function cr(t){let e,n,i,s,o,r,a,l,u;function f(b){t[9](b)}function d(b){t[10](b)}let c={label:"Extract Colors from Image"};t[1]!==void 0&&(c.checked=t[1]),t[3]!==void 0&&(c.input=t[3]),n=new En({props:c}),j.push(()=>Q(n,"checked",f)),j.push(()=>Q(n,"input",d)),n.$on("input",t[6]);function g(b,A){return b[1]?fr:ur}let _=g(t),p=_(t);function w(b){t[13](b)}let h={};return t[0]!==void 0&&(h.colors=t[0]),a=new Qi({props:h}),j.push(()=>Q(a,"colors",w)),{c(){e=y("fieldset"),F(n.$$.fragment),o=L(),p.c(),r=L(),F(a.$$.fragment),this.h()},l(b){e=k(b,"FIELDSET",{class:!0});var A=I(e);W(n.$$.fragment,A),o=P(A),p.l(A),r=P(A),W(a.$$.fragment,A),A.forEach(v),this.h()},h(){m(e,"class","grid gap-4")},m(b,A){O(b,e,A),z(n,e,null),E(e,o),p.m(e,null),E(e,r),z(a,e,null),u=!0},p(b,[A]){const S={};!i&&A&2&&(i=!0,S.checked=b[1],J(()=>i=!1)),!s&&A&8&&(s=!0,S.input=b[3],J(()=>s=!1)),n.$set(S),_===(_=g(b))&&p?p.p(b,A):(p.d(1),p=_(b),p&&(p.c(),p.m(e,r)));const M={};!l&&A&1&&(l=!0,M.colors=b[0],J(()=>l=!1)),a.$set(M)},i(b){u||(T(n.$$.fragment,b),T(a.$$.fragment,b),u=!0)},o(b){D(n.$$.fragment,b),D(a.$$.fragment,b),u=!1},d(b){b&&v(e),V(n),p.d(),V(a)}}}const gt=256,_t=2;function dr(t,e,n){let{image:i=null}=e,{palette:s=null}=e,o=["#000000","#ffffff"].map(ae);const r=[{name:"Black and White",palette:["#000000","#ffffff"].map(ae)},{name:"3Bit",palette:["#000000","#ffffff","#ff0000","#00ff00","#0000ff","#ffff00","#00ffff","#ff00ff"].map(ae)},{name:"Grayscale",palette:["#000000","#333333","#666666","#999999","#cccccc","#ffffff"].map(ae)},{name:"Red",palette:["#000000","#F46842","#AA2F0D","#ffffff"].map(ae)},{name:"RGBY",palette:["#ff0000","#00ff00","#0000ff","#ffff00"].map(ae)},{name:"Black, White, Red",palette:["#000000","#ffffff","#ff0000"].map(ae)},{name:"Black, White, Yellow",palette:["#000000","#ffffff","#ffff00"].map(ae)},{name:"Macintosh",palette:["#33321A","#E5FEFF"].map(ae)},{name:"IBM 5151",palette:["#00EB61","#25332F"].map(ae)},{name:"Zenith ZVM 1240",palette:["#40291e","#fdca55"].map(ae)},{name:"Commodore 1084",palette:["#423091","#88d7de"].map(ae)},{name:"IBM 8503",palette:["#25332F","#EBE5CE"].map(ae)},{name:"Game Boy DMG-01",palette:["#CADC9F","#0F380F","#306230","#8BAC0F","#9BBC0F"].map(ae)}];async function a(b,A){const S=ir(b,A,5);if(!S)throw new Error("Failed to generate palette");return S}let l=!0,u=16;function f(b){const A=b.target,S=A.value;n(0,o=r[Number(S)].palette),A.value="-1"}let d=null;function c(){n(1,l=(d==null?void 0:d.checked)??!0),i&&l&&a(i,ft(u,_t,gt)).then(b=>n(0,o=b))}i&&c();function g(b){l=b,n(1,l)}function _(b){d=b,n(3,d)}function p(){u=pt(this.value),n(2,u)}const w=b=>{n(2,u=ft(u,_t,gt)),console.log(u)};function h(b){o=b,n(0,o)}return t.$$set=b=>{"image"in b&&n(8,i=b.image),"palette"in b&&n(7,s=b.palette)},t.$$.update=()=>{t.$$.dirty&1&&or(o).then(b=>n(7,s=b))},[o,l,u,d,r,f,c,s,i,g,_,p,w,h]}class hr extends ne{constructor(e){super(),ie(this,e,dr,cr,re,{image:8,palette:7})}}function mr(t){let e,n,i,s,o,r,a,l,u,f,d,c,g,_,p,w,h,b,A,S,M,G,N,B,U,q,C,Z,H,se,oe;return p=new pe({props:{src:Fn,class:"w-4 h-4",solid:!0}}),{c(){e=y("fieldset"),n=y("div"),i=y("label"),s=K("Width"),r=L(),a=y("div"),l=y("input"),u=L(),f=y("div"),d=K("px"),g=L(),_=y("span"),F(p.$$.fragment),h=L(),b=y("div"),A=y("label"),S=K("Height"),G=L(),N=y("div"),B=y("input"),U=L(),q=y("div"),C=K("px"),this.h()},l(X){e=k(X,"FIELDSET",{class:!0});var Y=I(e);n=k(Y,"DIV",{class:!0});var de=I(n);i=k(de,"LABEL",{for:!0,class:!0});var ge=I(i);s=$(ge,"Width"),ge.forEach(v),r=P(de),a=k(de,"DIV",{class:!0});var le=I(a);l=k(le,"INPUT",{name:!0,id:!0,type:!0,min:!0,max:!0,step:!0,class:!0,placeholder:!0}),u=P(le),f=k(le,"DIV",{class:!0});var Ie=I(f);d=$(Ie,"px"),Ie.forEach(v),le.forEach(v),de.forEach(v),g=P(Y),_=k(Y,"SPAN",{class:!0});var me=I(_);W(p.$$.fragment,me),me.forEach(v),h=P(Y),b=k(Y,"DIV",{class:!0});var Se=I(b);A=k(Se,"LABEL",{for:!0,class:!0});var Xe=I(A);S=$(Xe,"Height"),Xe.forEach(v),G=P(Se),N=k(Se,"DIV",{class:!0});var Te=I(N);B=k(Te,"INPUT",{type:!0,id:!0,name:!0,min:!0,max:!0,step:!0,class:!0,placeholder:!0}),U=P(Te),q=k(Te,"DIV",{class:!0});var Fe=I(q);C=$(Fe,"px"),Fe.forEach(v),Te.forEach(v),Se.forEach(v),Y.forEach(v),this.h()},h(){m(i,"for","width-"+t[9]),m(i,"class",o="block text-sm font-medium leading-6 "+(t[5]?"text-gray-400":"text-gray-900")),m(l,"name","width"),m(l,"id","width-"+t[9]),m(l,"type","number"),m(l,"min",t[3]),m(l,"max",t[1]),l.disabled=t[5],m(l,"step","1"),l.value=t[0],m(l,"class","block w-full rounded-md border-0 py-1.5 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 disabled:cursor-not-allowed disabled:bg-white disabled:text-gray-400 disabled:ring-gray-200"),m(l,"placeholder","600"),m(f,"class","pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400"),m(a,"class",c="relative mt-2 rounded-md "+(t[5]?"shadow-none":"shadow-sm")),m(n,"class","w-full"),m(_,"class",w="pb-2 cursor-not-allowed "+(t[5]?"text-gray-300":"text-gray-500")),m(A,"for","height-"+t[10]),m(A,"class",M="block text-sm font-medium leading-6 "+(t[5]?"text-gray-400":"text-gray-900")),m(B,"type","number"),m(B,"id","height-"+t[10]),m(B,"name","height"),m(B,"min",t[4]),m(B,"max",t[2]),m(B,"step","1"),B.value=t[6],B.disabled=t[5],m(B,"class","block w-full rounded-md border-0 py-1.5 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 disabled:cursor-not-allowed disabled:bg-white disabled:text-gray-400 disabled:ring-gray-200"),m(B,"placeholder","340"),m(q,"class","pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400"),m(N,"class",Z="relative mt-2 rounded-md "+(t[5]?"shadow-none":"shadow-sm")),m(b,"class","w-full"),m(e,"class","flex gap-3 items-end justify-between")},m(X,Y){O(X,e,Y),E(e,n),E(n,i),E(i,s),E(n,r),E(n,a),E(a,l),E(a,u),E(a,f),E(f,d),E(e,g),E(e,_),z(p,_,null),E(e,h),E(e,b),E(b,A),E(A,S),E(b,G),E(b,N),E(N,B),E(N,U),E(N,q),E(q,C),H=!0,se||(oe=[ee(l,"input",t[7]),ee(B,"input",t[8])],se=!0)},p(X,[Y]){(!H||Y&32&&o!==(o="block text-sm font-medium leading-6 "+(X[5]?"text-gray-400":"text-gray-900")))&&m(i,"class",o),(!H||Y&8)&&m(l,"min",X[3]),(!H||Y&2)&&m(l,"max",X[1]),(!H||Y&32)&&(l.disabled=X[5]),(!H||Y&1&&l.value!==X[0])&&(l.value=X[0]),(!H||Y&32&&c!==(c="relative mt-2 rounded-md "+(X[5]?"shadow-none":"shadow-sm")))&&m(a,"class",c),(!H||Y&32&&w!==(w="pb-2 cursor-not-allowed "+(X[5]?"text-gray-300":"text-gray-500")))&&m(_,"class",w),(!H||Y&32&&M!==(M="block text-sm font-medium leading-6 "+(X[5]?"text-gray-400":"text-gray-900")))&&m(A,"class",M),(!H||Y&16)&&m(B,"min",X[4]),(!H||Y&4)&&m(B,"max",X[2]),(!H||Y&64&&B.value!==X[6])&&(B.value=X[6]),(!H||Y&32)&&(B.disabled=X[5]),(!H||Y&32&&Z!==(Z="relative mt-2 rounded-md "+(X[5]?"shadow-none":"shadow-sm")))&&m(N,"class",Z)},i(X){H||(T(p.$$.fragment,X),H=!0)},o(X){D(p.$$.fragment,X),H=!1},d(X){X&&v(e),V(p),se=!1,ke(oe)}}}function $t(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}function gr(t,e,n){let i,{width:s}=e,{aspectRatio:o}=e,{maxWidth:r=null}=e,{maxHeight:a=null}=e,{minWidth:l=null}=e,{minHeight:u=null}=e,{disabled:f=!1}=e;function d(p){const w=p.target.value;w&&(l!==null&&w<l||r!==null&&w>r||n(0,s=w))}function c(p){const w=p.target.value;w&&(u!==null&&w<u||a!==null&&w>a||n(0,s=Math.round(o*w)))}let g=$t(),_=$t();return t.$$set=p=>{"width"in p&&n(0,s=p.width),"aspectRatio"in p&&n(11,o=p.aspectRatio),"maxWidth"in p&&n(1,r=p.maxWidth),"maxHeight"in p&&n(2,a=p.maxHeight),"minWidth"in p&&n(3,l=p.minWidth),"minHeight"in p&&n(4,u=p.minHeight),"disabled"in p&&n(5,f=p.disabled)},t.$$.update=()=>{t.$$.dirty&2049&&n(6,i=Math.round(s/o))},[s,r,a,l,u,f,i,d,c,g,_,o]}class An extends ne{constructor(e){super(),ie(this,e,gr,mr,re,{width:0,aspectRatio:11,maxWidth:1,maxHeight:2,minWidth:3,minHeight:4,disabled:5})}}const _r=t=>({}),xt=t=>({});function pr(t){let e;const n=t[2].placeholder,i=Re(n,t,t[1],xt),s=i||vr();return{c(){s&&s.c()},l(o){s&&s.l(o)},m(o,r){s&&s.m(o,r),e=!0},p(o,r){i&&i.p&&(!e||r&2)&&Le(i,n,o,o[1],e?Ne(n,o[1],r,_r):Pe(o[1]),xt)},i(o){e||(T(s,o),e=!0)},o(o){D(s,o),e=!1},d(o){s&&s.d(o)}}}function br(t){let e,n,i,s;return{c(){e=y("canvas"),this.h()},l(o){e=k(o,"CANVAS",{class:!0,style:!0}),I(e).forEach(v),this.h()},h(){m(e,"class","w-full max-h-96 object-contain shadow-lg"),ce(e,"image-rendering","pixelated")},m(o,r){O(o,e,r),i||(s=Oe(n=Er.call(null,e,t[0])),i=!0)},p(o,r){n&&et(n.update)&&r&1&&n.update.call(null,o[0])},i:te,o:te,d(o){o&&v(e),i=!1,s()}}}function vr(t){let e,n;return{c(){e=y("span"),n=K("No Image")},l(i){e=k(i,"SPAN",{});var s=I(e);n=$(s,"No Image"),s.forEach(v)},m(i,s){O(i,e,s),E(e,n)},p:te,d(i){i&&v(e)}}}function wr(t){let e,n,i,s;const o=[br,pr],r=[];function a(l,u){return l[0]?0:1}return n=a(t),i=r[n]=o[n](t),{c(){e=y("div"),i.c(),this.h()},l(l){e=k(l,"DIV",{class:!0});var u=I(e);i.l(u),u.forEach(v),this.h()},h(){m(e,"class","w-full aspect-square rounded-lg bg-gray-100 p-8 grid place-items-center")},m(l,u){O(l,e,u),r[n].m(e,null),s=!0},p(l,[u]){let f=n;n=a(l),n===f?r[n].p(l,u):(Be(),D(r[f],1,1,()=>{r[f]=null}),Ue(),i=r[n],i?i.p(l,u):(i=r[n]=o[n](l),i.c()),T(i,1),i.m(e,null))},i(l){s||(T(i),s=!0)},o(l){D(i),s=!1},d(l){l&&v(e),r[n].d()}}}function Er(t,e){const n=t.getContext("2d");if(!n)return;const i=()=>{t.width=e.width,t.height=e.height,n.putImageData(e,0,0)};let s=null;const o=()=>{s||(s=requestAnimationFrame(()=>{s=null,i()}))};return o(),{destroy(){s&&cancelAnimationFrame(s)},update:r=>{e=r,o()}}}function Ar(t,e,n){let{$$slots:i={},$$scope:s}=e,{imageData:o}=e;return t.$$set=r=>{"imageData"in r&&n(0,o=r.imageData),"$$scope"in r&&n(1,s=r.$$scope)},[o,s,i]}class yr extends ne{constructor(e){super(),ie(this,e,Ar,wr,re,{imageData:0})}}function kr(){return new Worker(""+new URL("../workers/worker-09b3192d.js",import.meta.url).href)}let at=null;async function Ir(t){return at||(at=tt(new kr)),await at.generate(t)}function en(t){let e,n,i;function s(r){t[9](r)}let o={label:"Bayer Level ("+t[3]+")",min:0,max:5,step:1};return t[3]!==void 0&&(o.value=t[3]),e=new bt({props:o}),j.push(()=>Q(e,"value",s)),{c(){F(e.$$.fragment)},l(r){W(e.$$.fragment,r)},m(r,a){z(e,r,a),i=!0},p(r,a){const l={};a&8&&(l.label="Bayer Level ("+r[3]+")"),!n&&a&8&&(n=!0,l.value=r[3],J(()=>n=!1)),e.$set(l)},i(r){i||(T(e.$$.fragment,r),i=!0)},o(r){D(e.$$.fragment,r),i=!1},d(r){V(e,r)}}}function tn(t){let e,n,i;function s(r){t[10](r)}let o={aspectRatio:1,minWidth:1,minHeight:1,maxHeight:3e3,maxWidth:3e3};return t[4]!==void 0&&(o.width=t[4]),e=new An({props:o}),j.push(()=>Q(e,"width",s)),{c(){F(e.$$.fragment)},l(r){W(e.$$.fragment,r)},m(r,a){z(e,r,a),i=!0},p(r,a){const l={};!n&&a&16&&(n=!0,l.width=r[4],J(()=>n=!1)),e.$set(l)},i(r){i||(T(e.$$.fragment,r),i=!0)},o(r){D(e.$$.fragment,r),i=!1},d(r){V(e,r)}}}function Sr(t){let e,n;return{c(){e=y("span"),n=K("Loading Threshold Map"),this.h()},l(i){e=k(i,"SPAN",{slot:!0});var s=I(e);n=$(s,"Loading Threshold Map"),s.forEach(v),this.h()},h(){m(e,"slot","placeholder")},m(i,s){O(i,e,s),E(e,n)},p:te,d(i){i&&v(e)}}}function Tr(t){let e,n,i,s,o,r,a,l,u,f;function d(h){t[7](h)}let c={label:"Noise Intensity ("+t[1]+")",min:0,max:1.5,step:.01};t[1]!==void 0&&(c.value=t[1]),e=new bt({props:c}),j.push(()=>Q(e,"value",d));function g(h){t[8](h)}let _={label:"Threshold Map",options:t[5]};t[2]!==void 0&&(_.selected=t[2]),s=new vn({props:_}),j.push(()=>Q(s,"selected",g));let p=t[2]==="bayer"&&en(t),w=t[2]==="white_noise"&&tn(t);return u=new yr({props:{imageData:t[0],$$slots:{placeholder:[Sr]},$$scope:{ctx:t}}}),{c(){F(e.$$.fragment),i=L(),F(s.$$.fragment),r=L(),p&&p.c(),a=L(),w&&w.c(),l=L(),F(u.$$.fragment)},l(h){W(e.$$.fragment,h),i=P(h),W(s.$$.fragment,h),r=P(h),p&&p.l(h),a=P(h),w&&w.l(h),l=P(h),W(u.$$.fragment,h)},m(h,b){z(e,h,b),O(h,i,b),z(s,h,b),O(h,r,b),p&&p.m(h,b),O(h,a,b),w&&w.m(h,b),O(h,l,b),z(u,h,b),f=!0},p(h,[b]){const A={};b&2&&(A.label="Noise Intensity ("+h[1]+")"),!n&&b&2&&(n=!0,A.value=h[1],J(()=>n=!1)),e.$set(A);const S={};!o&&b&4&&(o=!0,S.selected=h[2],J(()=>o=!1)),s.$set(S),h[2]==="bayer"?p?(p.p(h,b),b&4&&T(p,1)):(p=en(h),p.c(),T(p,1),p.m(a.parentNode,a)):p&&(Be(),D(p,1,1,()=>{p=null}),Ue()),h[2]==="white_noise"?w?(w.p(h,b),b&4&&T(w,1)):(w=tn(h),w.c(),T(w,1),w.m(l.parentNode,l)):w&&(Be(),D(w,1,1,()=>{w=null}),Ue());const M={};b&1&&(M.imageData=h[0]),b&2048&&(M.$$scope={dirty:b,ctx:h}),u.$set(M)},i(h){f||(T(e.$$.fragment,h),T(s.$$.fragment,h),T(p),T(w),T(u.$$.fragment,h),f=!0)},o(h){D(e.$$.fragment,h),D(s.$$.fragment,h),D(p),D(w),D(u.$$.fragment,h),f=!1},d(h){V(e,h),h&&v(i),V(s,h),h&&v(r),p&&p.d(h),h&&v(a),w&&w.d(h),h&&v(l),V(u,h)}}}function Mr(t,e,n){let i,{thresholdMap:s}=e,{noiseIntensity:o}=e,r="bayer";const a=[{name:"Bayer",value:"bayer"},{name:"Blue Noise",value:"blue_noise"},{name:"White Noise",value:"white_noise"}];let l=3,u=256;function f(_){o=_,n(1,o)}function d(_){r=_,n(2,r)}function c(_){l=_,n(3,l)}function g(_){u=_,n(4,u)}return t.$$set=_=>{"thresholdMap"in _&&n(0,s=_.thresholdMap),"noiseIntensity"in _&&n(1,o=_.noiseIntensity)},t.$$.update=()=>{if(t.$$.dirty&16&&n(6,i=u),t.$$.dirty&92&&"ImageData"in globalThis){let _;switch(r){case"bayer":_={mode:"bayer",level:l};break;case"blue_noise":_={mode:"blue_noise"};break;case"white_noise":_={mode:"white_noise",width:u,height:i};break}Ir(_).then(p=>n(0,s=p))}},[s,o,r,l,u,a,i,f,d,c,g]}class Cr extends ne{constructor(e){super(),ie(this,e,Mr,Tr,re,{thresholdMap:0,noiseIntensity:1})}}function Dr(t){let e,n,i,s,o,r,a,l,u,f,d,c,g,_,p,w,h,b,A,S,M,G,N,B,U,q,C,Z,H,se,oe,X,Y,de,ge,le,Ie,me;function Se(R){t[5](R)}let Xe={label:"Original Size"};t[2]!==void 0&&(Xe.checked=t[2]),r=new En({props:Xe}),j.push(()=>Q(r,"checked",Se));function Te(R){t[6](R)}let Fe={aspectRatio:t[4],minWidth:12,minHeight:12,maxHeight:5e3,maxWidth:5e3,disabled:t[2]};t[3]!==void 0&&(Fe.width=t[3]),u=new An({props:Fe}),j.push(()=>Q(u,"width",Te));function kn(R){t[7](R)}let wt={tabs:[{label:"None",value:"none"},{label:"Ordered",value:"ordered"},{label:"Error Diffusion",value:"error_diffusion"}]};t[0].mode!==void 0&&(wt.selected=t[0].mode),w=new Xi({props:wt}),j.push(()=>Q(w,"selected",kn));function In(R){t[8](R)}function Sn(R){t[9](R)}function Tn(R){t[10](R)}let He={};t[0].diffusionStrength!==void 0&&(He.diffusionStrength=t[0].diffusionStrength),t[0].diffusionMatrix!==void 0&&(He.diffusionMatrix=t[0].diffusionMatrix),t[0].diffusionMatrixOriginX!==void 0&&(He.diffusionOriginX=t[0].diffusionMatrixOriginX),S=new ji({props:He}),j.push(()=>Q(S,"diffusionStrength",In)),j.push(()=>Q(S,"diffusionMatrix",Sn)),j.push(()=>Q(S,"diffusionOriginX",Tn));function Mn(R){t[11](R)}function Cn(R){t[12](R)}let nt={};t[0].thresholdMap!==void 0&&(nt.thresholdMap=t[0].thresholdMap),t[0].noiseIntensity!==void 0&&(nt.noiseIntensity=t[0].noiseIntensity),C=new Cr({props:nt}),j.push(()=>Q(C,"thresholdMap",Mn)),j.push(()=>Q(C,"noiseIntensity",Cn));function Dn(R){t[13](R)}let Et={image:t[1]};return t[0].palette!==void 0&&(Et.palette=t[0].palette),le=new hr({props:Et}),j.push(()=>Q(le,"palette",Dn)),{c(){e=y("section"),n=y("div"),i=y("h2"),s=K("Output Options"),o=L(),F(r.$$.fragment),l=L(),F(u.$$.fragment),d=L(),c=y("div"),g=y("h2"),_=K("Dithering Options"),p=L(),F(w.$$.fragment),b=L(),A=y("div"),F(S.$$.fragment),U=L(),q=y("div"),F(C.$$.fragment),oe=L(),X=y("div"),Y=y("h2"),de=K("Palette"),ge=L(),F(le.$$.fragment),this.h()},l(R){e=k(R,"SECTION",{class:!0});var x=I(e);n=k(x,"DIV",{class:!0});var _e=I(n);i=k(_e,"H2",{class:!0});var we=I(i);s=$(we,"Output Options"),we.forEach(v),o=P(_e),W(r.$$.fragment,_e),l=P(_e),W(u.$$.fragment,_e),_e.forEach(v),d=P(x),c=k(x,"DIV",{class:!0});var he=I(c);g=k(he,"H2",{class:!0});var Ee=I(g);_=$(Ee,"Dithering Options"),Ee.forEach(v),p=P(he),W(w.$$.fragment,he),b=P(he),A=k(he,"DIV",{class:!0});var Me=I(A);W(S.$$.fragment,Me),Me.forEach(v),U=P(he),q=k(he,"DIV",{class:!0});var Ce=I(q);W(C.$$.fragment,Ce),Ce.forEach(v),he.forEach(v),oe=P(x),X=k(x,"DIV",{class:!0});var Ye=I(X);Y=k(Ye,"H2",{class:!0});var At=I(Y);de=$(At,"Palette"),At.forEach(v),ge=P(Ye),W(le.$$.fragment,Ye),Ye.forEach(v),x.forEach(v),this.h()},h(){m(i,"class","text-base font-semibold leading-7 text-black"),m(n,"class","grid gap-4"),m(g,"class","text-base font-semibold leading-7 text-black mb-2"),m(A,"class",B=t[0].mode==="error_diffusion"?"contents":"hidden"),m(q,"class",se=t[0].mode==="ordered"?"contents":"hidden"),m(c,"class","grid gap-4"),m(Y,"class","text-base font-semibold leading-7 text-black mb-2"),m(X,"class","grid gap-3"),ve(X,"hidden",t[0].mode==="none"),m(e,"class","grid gap-8 pt-8 px-4 safe-padding-bottom svelte-1hcc44")},m(R,x){O(R,e,x),E(e,n),E(n,i),E(i,s),E(n,o),z(r,n,null),E(n,l),z(u,n,null),E(e,d),E(e,c),E(c,g),E(g,_),E(c,p),z(w,c,null),E(c,b),E(c,A),z(S,A,null),E(c,U),E(c,q),z(C,q,null),E(e,oe),E(e,X),E(X,Y),E(Y,de),E(X,ge),z(le,X,null),me=!0},p(R,[x]){const _e={};!a&&x&4&&(a=!0,_e.checked=R[2],J(()=>a=!1)),r.$set(_e);const we={};x&16&&(we.aspectRatio=R[4]),x&4&&(we.disabled=R[2]),!f&&x&8&&(f=!0,we.width=R[3],J(()=>f=!1)),u.$set(we);const he={};!h&&x&1&&(h=!0,he.selected=R[0].mode,J(()=>h=!1)),w.$set(he);const Ee={};!M&&x&1&&(M=!0,Ee.diffusionStrength=R[0].diffusionStrength,J(()=>M=!1)),!G&&x&1&&(G=!0,Ee.diffusionMatrix=R[0].diffusionMatrix,J(()=>G=!1)),!N&&x&1&&(N=!0,Ee.diffusionOriginX=R[0].diffusionMatrixOriginX,J(()=>N=!1)),S.$set(Ee),(!me||x&1&&B!==(B=R[0].mode==="error_diffusion"?"contents":"hidden"))&&m(A,"class",B);const Me={};!Z&&x&1&&(Z=!0,Me.thresholdMap=R[0].thresholdMap,J(()=>Z=!1)),!H&&x&1&&(H=!0,Me.noiseIntensity=R[0].noiseIntensity,J(()=>H=!1)),C.$set(Me),(!me||x&1&&se!==(se=R[0].mode==="ordered"?"contents":"hidden"))&&m(q,"class",se);const Ce={};x&2&&(Ce.image=R[1]),!Ie&&x&1&&(Ie=!0,Ce.palette=R[0].palette,J(()=>Ie=!1)),le.$set(Ce),(!me||x&1)&&ve(X,"hidden",R[0].mode==="none")},i(R){me||(T(r.$$.fragment,R),T(u.$$.fragment,R),T(w.$$.fragment,R),T(S.$$.fragment,R),T(C.$$.fragment,R),T(le.$$.fragment,R),me=!0)},o(R){D(r.$$.fragment,R),D(u.$$.fragment,R),D(w.$$.fragment,R),D(S.$$.fragment,R),D(C.$$.fragment,R),D(le.$$.fragment,R),me=!1},d(R){R&&v(e),V(r),V(u),V(w),V(S),V(C),V(le)}}}function Rr(t){return t?t.width/t.height:1}function Lr(t,e,n){let i,{image_data:s}=e,{config:o}=e,r=!0,a=s.width;function l(h){r=h,n(2,r)}function u(h){a=h,n(3,a)}function f(h){t.$$.not_equal(o.mode,h)&&(o.mode=h,n(0,o),n(4,i),n(2,r),n(1,s),n(3,a))}function d(h){t.$$.not_equal(o.diffusionStrength,h)&&(o.diffusionStrength=h,n(0,o),n(4,i),n(2,r),n(1,s),n(3,a))}function c(h){t.$$.not_equal(o.diffusionMatrix,h)&&(o.diffusionMatrix=h,n(0,o),n(4,i),n(2,r),n(1,s),n(3,a))}function g(h){t.$$.not_equal(o.diffusionMatrixOriginX,h)&&(o.diffusionMatrixOriginX=h,n(0,o),n(4,i),n(2,r),n(1,s),n(3,a))}function _(h){t.$$.not_equal(o.thresholdMap,h)&&(o.thresholdMap=h,n(0,o),n(4,i),n(2,r),n(1,s),n(3,a))}function p(h){t.$$.not_equal(o.noiseIntensity,h)&&(o.noiseIntensity=h,n(0,o),n(4,i),n(2,r),n(1,s),n(3,a))}function w(h){t.$$.not_equal(o.palette,h)&&(o.palette=h,n(0,o),n(4,i),n(2,r),n(1,s),n(3,a))}return t.$$set=h=>{"image_data"in h&&n(1,s=h.image_data),"config"in h&&n(0,o=h.config)},t.$$.update=()=>{t.$$.dirty&2&&n(4,i=Rr(s)),t.$$.dirty&17&&n(0,o.height=Math.round(o.width/i),o),t.$$.dirty&14&&n(0,o.width=r?s.width:a,o)},[o,s,r,a,i,l,u,f,d,c,g,_,p,w]}class yn extends ne{constructor(e){super(),ie(this,e,Lr,Dr,re,{image_data:1,config:0})}}function Pr(t){let e,n,i;function s(r){t[11](r)}let o={slot:"left",config:t[4],image_data:t[0]};return t[1]!==void 0&&(o.canvas=t[1]),e=new bn({props:o}),j.push(()=>Q(e,"canvas",s)),{c(){F(e.$$.fragment)},l(r){W(e.$$.fragment,r)},m(r,a){z(e,r,a),i=!0},p(r,a){const l={};a&16&&(l.config=r[4]),a&1&&(l.image_data=r[0]),!n&&a&2&&(n=!0,l.canvas=r[1],J(()=>n=!1)),e.$set(l)},i(r){i||(T(e.$$.fragment,r),i=!0)},o(r){D(e.$$.fragment,r),i=!1},d(r){V(e,r)}}}function Nr(t){let e,n,i;function s(r){t[10](r)}let o={slot:"right",config:t[3],image_data:t[0]};return t[2]!==void 0&&(o.canvas=t[2]),e=new bn({props:o}),j.push(()=>Q(e,"canvas",s)),{c(){F(e.$$.fragment)},l(r){W(e.$$.fragment,r)},m(r,a){z(e,r,a),i=!0},p(r,a){const l={};a&8&&(l.config=r[3]),a&1&&(l.image_data=r[0]),!n&&a&4&&(n=!0,l.canvas=r[2],J(()=>n=!1)),e.$set(l)},i(r){i||(T(e.$$.fragment,r),i=!0)},o(r){D(e.$$.fragment,r),i=!1},d(r){V(e,r)}}}function Or(t){let e,n,i,s;function o(l){t[14](l)}function r(l){t[15](l)}let a={};return t[4]!==void 0&&(a.config=t[4]),t[0]!==void 0&&(a.image_data=t[0]),e=new yn({props:a}),j.push(()=>Q(e,"config",o)),j.push(()=>Q(e,"image_data",r)),{c(){F(e.$$.fragment)},l(l){W(e.$$.fragment,l)},m(l,u){z(e,l,u),s=!0},p(l,u){const f={};!n&&u&16&&(n=!0,f.config=l[4],J(()=>n=!1)),!i&&u&1&&(i=!0,f.image_data=l[0],J(()=>i=!1)),e.$set(f)},i(l){s||(T(e.$$.fragment,l),s=!0)},o(l){D(e.$$.fragment,l),s=!1},d(l){V(e,l)}}}function Br(t){let e,n,i;return e=new pe({props:{src:an,class:"w-4 h-4"}}),{c(){F(e.$$.fragment),n=K(`
						Save`)},l(s){W(e.$$.fragment,s),n=$(s,`
						Save`)},m(s,o){z(e,s,o),O(s,n,o),i=!0},p:te,i(s){i||(T(e.$$.fragment,s),i=!0)},o(s){D(e.$$.fragment,s),i=!1},d(s){V(e,s),s&&v(n)}}}function Ur(t){let e,n,i,s,o;return s=new un({props:{disabled:!t[0],$$slots:{default:[Br]},$$scope:{ctx:t}}}),s.$on("click",t[13]),{c(){e=y("h1"),n=K("Options"),i=L(),F(s.$$.fragment),this.h()},l(r){e=k(r,"H1",{class:!0});var a=I(e);n=$(a,"Options"),a.forEach(v),i=P(r),W(s.$$.fragment,r),this.h()},h(){m(e,"class","font-bold")},m(r,a){O(r,e,a),E(e,n),O(r,i,a),z(s,r,a),o=!0},p(r,a){const l={};a&1&&(l.disabled=!r[0]),a&4194304&&(l.$$scope={dirty:a,ctx:r}),s.$set(l)},i(r){o||(T(s.$$.fragment,r),o=!0)},o(r){D(s.$$.fragment,r),o=!1},d(r){r&&v(e),r&&v(i),V(s,r)}}}function Xr(t){let e,n,i,s;function o(l){t[18](l)}function r(l){t[19](l)}let a={};return t[3]!==void 0&&(a.config=t[3]),t[0]!==void 0&&(a.image_data=t[0]),e=new yn({props:a}),j.push(()=>Q(e,"config",o)),j.push(()=>Q(e,"image_data",r)),{c(){F(e.$$.fragment)},l(l){W(e.$$.fragment,l)},m(l,u){z(e,l,u),s=!0},p(l,u){const f={};!n&&u&8&&(n=!0,f.config=l[3],J(()=>n=!1)),!i&&u&1&&(i=!0,f.image_data=l[0],J(()=>i=!1)),e.$set(f)},i(l){s||(T(e.$$.fragment,l),s=!0)},o(l){D(e.$$.fragment,l),s=!1},d(l){V(e,l)}}}function Fr(t){let e,n,i;return e=new pe({props:{src:an,class:"w-4 h-4"}}),{c(){F(e.$$.fragment),n=K(`
						Save`)},l(s){W(e.$$.fragment,s),n=$(s,`
						Save`)},m(s,o){z(e,s,o),O(s,n,o),i=!0},p:te,i(s){i||(T(e.$$.fragment,s),i=!0)},o(s){D(e.$$.fragment,s),i=!1},d(s){V(e,s),s&&v(n)}}}function Wr(t){let e,n,i,s,o;return s=new un({props:{disabled:!t[0],$$slots:{default:[Fr]},$$scope:{ctx:t}}}),s.$on("click",t[17]),{c(){e=y("h1"),n=K("Options"),i=L(),F(s.$$.fragment),this.h()},l(r){e=k(r,"H1",{class:!0});var a=I(e);n=$(a,"Options"),a.forEach(v),i=P(r),W(s.$$.fragment,r),this.h()},h(){m(e,"class","font-bold")},m(r,a){O(r,e,a),E(e,n),O(r,i,a),z(s,r,a),o=!0},p(r,a){const l={};a&1&&(l.disabled=!r[0]),a&4194304&&(l.$$scope={dirty:a,ctx:r}),s.$set(l)},i(r){o||(T(s.$$.fragment,r),o=!0)},o(r){D(s.$$.fragment,r),o=!1},d(r){r&&v(e),r&&v(i),V(s,r)}}}function zr(t){let e,n,i,s,o,r,a,l,u,f,d,c,g,_,p,w,h,b,A,S,M,G;i=new oi({props:{$$slots:{right:[Nr],left:[Pr]},$$scope:{ctx:t}}}),r=new pe({props:{src:on,class:"w-5 h-5 text-white"}});function N(C){t[16](C)}let B={$$slots:{header:[Ur],default:[Or]},$$scope:{ctx:t}};t[5]!==void 0&&(B.open=t[5]),d=new Ot({props:B}),j.push(()=>Q(d,"open",N));function U(C){t[20](C)}let q={$$slots:{header:[Wr],default:[Xr]},$$scope:{ctx:t}};return t[6]!==void 0&&(q.open=t[6]),h=new Ot({props:q}),j.push(()=>Q(h,"open",U)),{c(){e=y("section"),n=y("div"),F(i.$$.fragment),s=L(),o=y("button"),F(r.$$.fragment),a=L(),l=y("section"),u=y("aside"),f=y("div"),F(d.$$.fragment),_=L(),p=y("aside"),w=y("div"),F(h.$$.fragment),this.h()},l(C){e=k(C,"SECTION",{class:!0});var Z=I(e);n=k(Z,"DIV",{class:!0});var H=I(n);W(i.$$.fragment,H),s=P(H),o=k(H,"BUTTON",{class:!0,title:!0});var se=I(o);W(r.$$.fragment,se),se.forEach(v),H.forEach(v),Z.forEach(v),a=P(C),l=k(C,"SECTION",{class:!0});var oe=I(l);u=k(oe,"ASIDE",{style:!0,class:!0});var X=I(u);f=k(X,"DIV",{class:!0,style:!0});var Y=I(f);W(d.$$.fragment,Y),Y.forEach(v),X.forEach(v),_=P(oe),p=k(oe,"ASIDE",{style:!0,class:!0});var de=I(p);w=k(de,"DIV",{class:!0,style:!0});var ge=I(w);W(h.$$.fragment,ge),ge.forEach(v),de.forEach(v),oe.forEach(v),this.h()},h(){m(o,"class","absolute top-0 left-0 m-4 p-2 bg-black bg-opacity-40 rounded-full"),m(o,"title","Close Image & Reset"),m(n,"class","w-full h-full relative"),m(e,"class","overflow-hidden select-none fixed inset-0"),m(f,"class","p-2"),m(f,"style",g=t[5]?"height: 100vh":""),ce(u,"grid-area","left"),ce(u,"align-self","end"),m(u,"class","md:w-96 max-w-full max-h-full overflow-hidden"),m(w,"class","p-2"),m(w,"style",A=t[6]?"height: 100vh":""),ce(p,"grid-area","right"),ce(p,"align-self","end"),m(p,"class","md:w-96 max-w-full max-h-full overflow-hidden"),m(l,"class","gui-container touch-none pointer-events-none svelte-7tg48m")},m(C,Z){O(C,e,Z),E(e,n),z(i,n,null),E(n,s),E(n,o),z(r,o,null),O(C,a,Z),O(C,l,Z),E(l,u),E(u,f),z(d,f,null),E(l,_),E(l,p),E(p,w),z(h,w,null),S=!0,M||(G=ee(o,"click",t[12]),M=!0)},p(C,[Z]){const H={};Z&4194335&&(H.$$scope={dirty:Z,ctx:C}),i.$set(H);const se={};Z&4194323&&(se.$$scope={dirty:Z,ctx:C}),!c&&Z&32&&(c=!0,se.open=C[5],J(()=>c=!1)),d.$set(se),(!S||Z&32&&g!==(g=C[5]?"height: 100vh":""))&&m(f,"style",g);const oe={};Z&4194317&&(oe.$$scope={dirty:Z,ctx:C}),!b&&Z&64&&(b=!0,oe.open=C[6],J(()=>b=!1)),h.$set(oe),(!S||Z&64&&A!==(A=C[6]?"height: 100vh":""))&&m(w,"style",A)},i(C){S||(T(i.$$.fragment,C),T(r.$$.fragment,C),T(d.$$.fragment,C),T(h.$$.fragment,C),S=!0)},o(C){D(i.$$.fragment,C),D(r.$$.fragment,C),D(d.$$.fragment,C),D(h.$$.fragment,C),S=!1},d(C){C&&v(e),V(i),V(r),C&&v(a),C&&v(l),V(d),V(h),M=!1,G()}}}let nn=300;function Vr(t){return t?t.width/t.height:1}function Hr(t,e,n){let i,s;const o=rn();let r=null,a=null,{image_data:l}=e;async function u(U){U&&await Vn(U,"dithered","png")}let f={mode:"ordered",width:nn,height:i,thresholdMap:null,noiseIntensity:.08,palette:null,diffusionStrength:1,diffusionMatrix:[[1]],diffusionMatrixOriginX:0},d={mode:"none",width:l.width,height:l.height,thresholdMap:null,noiseIntensity:.08,palette:null,diffusionStrength:1,diffusionMatrix:[[1]],diffusionMatrixOriginX:0},c=!1,g=!0;function _(U){a=U,n(2,a)}function p(U){r=U,n(1,r)}const w=()=>o("cancel"),h=()=>{r&&u(r)};function b(U){d=U,n(4,d)}function A(U){l=U,n(0,l)}function S(U){c=U,n(5,c)}const M=()=>{a&&u(a)};function G(U){f=U,n(3,f)}function N(U){l=U,n(0,l)}function B(U){g=U,n(6,g)}return t.$$set=U=>{"image_data"in U&&n(0,l=U.image_data)},t.$$.update=()=>{t.$$.dirty&1&&n(9,s=Vr(l)),t.$$.dirty&512&&(i=Math.round(nn/s))},[l,r,a,f,d,c,g,o,u,s,_,p,w,h,b,A,S,M,G,N,B]}class Yr extends ne{constructor(e){super(),ie(this,e,Hr,zr,re,{image_data:0})}}function jr(t){let e,n;return e=new Jn({}),e.$on("image",t[3]),{c(){F(e.$$.fragment)},l(i){W(e.$$.fragment,i)},m(i,s){z(e,i,s),n=!0},p:te,i(i){n||(T(e.$$.fragment,i),n=!0)},o(i){D(e.$$.fragment,i),n=!1},d(i){V(e,i)}}}function Gr(t){let e,n;return e=new Yr({props:{image_data:t[0]}}),e.$on("cancel",t[2]),{c(){F(e.$$.fragment)},l(i){W(e.$$.fragment,i)},m(i,s){z(e,i,s),n=!0},p(i,s){const o={};s&1&&(o.image_data=i[0]),e.$set(o)},i(i){n||(T(e.$$.fragment,i),n=!0)},o(i){D(e.$$.fragment,i),n=!1},d(i){V(e,i)}}}function qr(t){let e,n,i,s,o,r,a,l,u;e=new Wn({props:{icon:Yn,og_image:Zr}});const f=[Gr,jr],d=[];function c(g,_){return g[0]?0:1}return o=c(t),r=d[o]=f[o](t),{c(){F(e.$$.fragment),n=L(),i=L(),s=y("main"),r.c(),this.h()},l(g){W(e.$$.fragment,g),n=P(g),i=P(g),s=k(g,"MAIN",{class:!0});var _=I(s);r.l(_),_.forEach(v),this.h()},h(){m(s,"class","w-screen max-w-screen h-screen max-h-screen relative bg-gray-300")},m(g,_){z(e,g,_),O(g,n,_),O(g,i,_),O(g,s,_),d[o].m(s,null),a=!0,l||(u=[ee(document.body,"drop",ut(t[1])),ee(document.body,"dragover",ut(Qr))],l=!0)},p(g,[_]){let p=o;o=c(g),o===p?d[o].p(g,_):(Be(),D(d[p],1,1,()=>{d[p]=null}),Ue(),r=d[o],r?r.p(g,_):(r=d[o]=f[o](g),r.c()),T(r,1),r.m(s,null))},i(g){a||(T(e.$$.fragment,g),T(r),a=!0)},o(g){D(e.$$.fragment,g),D(r),a=!1},d(g){V(e,g),g&&v(n),g&&v(i),g&&v(s),d[o].d(),l=!1,ke(u)}}}const Zr="/og/dither-studio.webp",Qr=()=>{};function Jr(t,e,n){let i=null;async function s(a){var u;const l=(u=a.dataTransfer)==null?void 0:u.files[0];if(l){if(!l.type.startsWith("image/")){alert("Please drop an image file");return}try{const f=await ln(l);n(0,i=St(f))}catch(f){alert("Failed to load image"),console.error(f)}}}return[i,s,()=>n(0,i=null),a=>n(0,i=St(a.detail))]}class ts extends ne{constructor(e){super(),ie(this,e,Jr,qr,re,{})}}export{ts as component,es as universal};
