import{s as me,n as X}from"../chunks/scheduler.IgQUtjbl.js";import{S as ue,i as fe,g as n,s,H as ge,h as i,C as r,c as o,G as ve,k as U,a,f as l}from"../chunks/index.BUVdxXQj.js";function Ce(de){let p,$='<a href="#building-an-i18n-library-for-the-modern-web">Building an i18n library for the modern Web</a>',A,y,K="Over the last few years we’ve seen the emergence of “partial hydration” patterns across many frameworks. The idea is that most rendering happens on the server, with only the interactive parts of a page actually shipping code to the client. The client and server <em>cooperate</em> to show a user a site. This idea has come in many iterations, be it React Server Components, Astro Islands, or even HTMX.",k,m,N="This has some interesting implications for i18n libraries.",B,u,V='<li><ol><li>Since the server-rendered and client-rendered parts always share the same language, language state is <em>global</em>. The only way to switch languages is to rerender everything, including the server-rendered parts, which  can only be done by fully reloading the page. Thus, any form of message reactivity or language lazy-loading is useless.</li></ol></li> <li><ol start="2"><li>Most Translations are rendered on the server &amp; don’t depend on client side state</li></ol> <ul><li>On the server, any i18n library really serves as a templating helper, so they should excel at doing that!</li> <li>Since only a minority of messages will include client side state, the bundle shipped by an i18n library should only include those messages and the code they require.</li></ul></li>',P,c,Y='<a href="#the-status-quo">The Status Quo</a>',S,f,Z="Most i18n libraries are still conceptualised as monoliths that do all the work in the same place. Language Detection, Message Fallbacks, Lazy Loading &amp; so many more features. However, doing all the work in one place usually means doing it <strong>twice</strong>! Once on the server and again on the client. This has resulted in some truly impressive bundle sizes. <code>i18next</code>, one of the most popular i18n libraries needs over 40kB to render a single message. This is after bundling.",F,g,ee="Clearly there is a lot of room for improvement.",J,h,te='<a href="#a-modern-i18n-library">A modern i18n library</a>',E,v,ae="What would an i18n library look like that embraces the cooperation between Server and Client, that’s built for partial hydration?",j,C,le='That’s exactly what <a href="https://www.inlang.com" rel="noopener noreferrer" target="_blank">we</a> tried to accomplish with <a href="https://inlang.com/m/gerre34r/library-inlang-paraglideJs" rel="noopener noreferrer" target="_blank">ParaglideJS</a>',z,b,ne="Paraglide is a compiler that <em>compiles</em> your messages into JS modules. Each message is it’s own export.",q,D,ye=`<pre class="shiki poimandres" style="background-color:#1b1e28;color:#a6accd" tabindex="0"><code><span class="line"><span style="color:#767C9DB0;font-style:italic">//Paraglide's output</span></span>
<span class="line"></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">/**</span></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic"> * </span><span style="color:#A6ACCD;font-style:italic">@</span><span style="color:#91B4D5;font-style:italic">param</span><span style="color:#A6ACCD;font-style:italic"> &#123;</span><span style="color:#A6ACCDC0;font-style:italic">&#123; name: string &#125;</span><span style="color:#A6ACCD;font-style:italic">&#125;</span><span style="color:#E4F0FB;font-style:italic"> params</span></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic"> */</span></span>
<span class="line"><span style="color:#5DE4C7">export</span><span style="color:#91B4D5"> const</span><span style="color:#ADD7FF"> greeting</span><span style="color:#91B4D5"> =</span><span style="color:#A6ACCD"> (</span><span style="color:#E4F0FB">params</span><span style="color:#A6ACCD">) </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> &#96;</span><span style="color:#5DE4C7">Hello </span><span style="color:#A6ACCD">$&#123;</span><span style="color:#E4F0FB">params</span><span style="color:#A6ACCD">.</span><span style="color:#E4F0FB">name</span><span style="color:#A6ACCD">&#125;&#96;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#5DE4C7">export</span><span style="color:#91B4D5"> const</span><span style="color:#ADD7FF"> my_other_message</span><span style="color:#91B4D5"> =</span><span style="color:#A6ACCD"> () </span><span style="color:#91B4D5">=></span><span style="color:#A6ACCD"> &#96;</span><span style="color:#5DE4C7">My Other Message</span><span style="color:#A6ACCD">&#96;</span></span>
<span class="line"><span style="color:#767C9DB0;font-style:italic">// ...</span></span></code></pre>`,L,w,se="This takes advantage of modern tooling.",O,T,ie="<li>TypeScript. Messages are fully type-safe, including any parameters they take. This makes Paraglide a joy to use for templating.</li> <li>Modern Build tools remove JS code that isn’t used automatically. Because messages are individual JS exports, they can individually be removed if they aren’t used. This automatically only ships messages that are needed on the client. This results in some <em>tiny</em> bundle-sizes, starting as low as 100 bytes.</li>",W,x,re="We can further take advantage of the cooperation between server and client to skip language detection on the client entirely. Because the server already decided which language to render, the client bundle can just read which language was used from the HTML.",G,H,oe='Because <a href="https://inlang.com/m/gerre34r/library-inlang-paraglideJs" rel="noopener noreferrer" target="_blank">ParaglideJS</a>is a compiler, fallback messages can be resolved at build time, so no runtime code is needed for that.',I,_,pe='So far, this approach is working very well in any partial-hydration setting. However, even in frameworks without partial hydration <a href="https://inlang.com/m/gerre34r/library-inlang-paraglideJs" rel="noopener noreferrer" target="_blank">ParaglideJS</a> can still be useful. It still only ships messages that are used on a given <em>page</em> without you needing to manually split messages into namespaces as you usually would.',Q,d,ce='<a href="#conclusion">Conclusion</a>',R,M,he='Going forward, scaling <em>down</em> and integration with modern tooling is going to be increasingly important for i18n libraries. <a href="https://inlang.com/m/gerre34r/library-inlang-paraglideJs" rel="noopener noreferrer" target="_blank">ParaglideJS</a> is one attempt at this which can be used <em>today</em>. Clearly there is a lot of room for innovation in this space &amp; we’re interested in how it will develop over the next few months and years.';return{c(){p=n("h1"),p.innerHTML=$,A=s(),y=n("p"),y.innerHTML=K,k=s(),m=n("p"),m.textContent=N,B=s(),u=n("ul"),u.innerHTML=V,P=s(),c=n("h2"),c.innerHTML=Y,S=s(),f=n("p"),f.innerHTML=Z,F=s(),g=n("p"),g.textContent=ee,J=s(),h=n("h2"),h.innerHTML=te,E=s(),v=n("p"),v.textContent=ae,j=s(),C=n("p"),C.innerHTML=le,z=s(),b=n("p"),b.innerHTML=ne,q=s(),D=new ge(!1),L=s(),w=n("p"),w.textContent=se,O=s(),T=n("ol"),T.innerHTML=ie,W=s(),x=n("p"),x.textContent=re,G=s(),H=n("p"),H.innerHTML=oe,I=s(),_=n("p"),_.innerHTML=pe,Q=s(),d=n("h2"),d.innerHTML=ce,R=s(),M=n("p"),M.innerHTML=he,this.h()},l(e){p=i(e,"H1",{id:!0,"data-svelte-h":!0}),r(p)!=="svelte-nwsd6t"&&(p.innerHTML=$),A=o(e),y=i(e,"P",{"data-svelte-h":!0}),r(y)!=="svelte-1c1bczr"&&(y.innerHTML=K),k=o(e),m=i(e,"P",{"data-svelte-h":!0}),r(m)!=="svelte-j92q2m"&&(m.textContent=N),B=o(e),u=i(e,"UL",{"data-svelte-h":!0}),r(u)!=="svelte-1b02cmv"&&(u.innerHTML=V),P=o(e),c=i(e,"H2",{id:!0,"data-svelte-h":!0}),r(c)!=="svelte-1uw3kpc"&&(c.innerHTML=Y),S=o(e),f=i(e,"P",{"data-svelte-h":!0}),r(f)!=="svelte-8g4jzw"&&(f.innerHTML=Z),F=o(e),g=i(e,"P",{"data-svelte-h":!0}),r(g)!=="svelte-ia1wab"&&(g.textContent=ee),J=o(e),h=i(e,"H2",{id:!0,"data-svelte-h":!0}),r(h)!=="svelte-vrr57j"&&(h.innerHTML=te),E=o(e),v=i(e,"P",{"data-svelte-h":!0}),r(v)!=="svelte-9lzziv"&&(v.textContent=ae),j=o(e),C=i(e,"P",{"data-svelte-h":!0}),r(C)!=="svelte-j89qxe"&&(C.innerHTML=le),z=o(e),b=i(e,"P",{"data-svelte-h":!0}),r(b)!=="svelte-ft7ejr"&&(b.innerHTML=ne),q=o(e),D=ve(e,!1),L=o(e),w=i(e,"P",{"data-svelte-h":!0}),r(w)!=="svelte-1mu4d2v"&&(w.textContent=se),O=o(e),T=i(e,"OL",{"data-svelte-h":!0}),r(T)!=="svelte-1gandop"&&(T.innerHTML=ie),W=o(e),x=i(e,"P",{"data-svelte-h":!0}),r(x)!=="svelte-fcnch1"&&(x.textContent=re),G=o(e),H=i(e,"P",{"data-svelte-h":!0}),r(H)!=="svelte-pfgajt"&&(H.innerHTML=oe),I=o(e),_=i(e,"P",{"data-svelte-h":!0}),r(_)!=="svelte-1tgratn"&&(_.innerHTML=pe),Q=o(e),d=i(e,"H2",{id:!0,"data-svelte-h":!0}),r(d)!=="svelte-kmpttn"&&(d.innerHTML=ce),R=o(e),M=i(e,"P",{"data-svelte-h":!0}),r(M)!=="svelte-kvpqci"&&(M.innerHTML=he),this.h()},h(){U(p,"id","building-an-i18n-library-for-the-modern-web"),U(c,"id","the-status-quo"),U(h,"id","a-modern-i18n-library"),D.a=L,U(d,"id","conclusion")},m(e,t){a(e,p,t),a(e,A,t),a(e,y,t),a(e,k,t),a(e,m,t),a(e,B,t),a(e,u,t),a(e,P,t),a(e,c,t),a(e,S,t),a(e,f,t),a(e,F,t),a(e,g,t),a(e,J,t),a(e,h,t),a(e,E,t),a(e,v,t),a(e,j,t),a(e,C,t),a(e,z,t),a(e,b,t),a(e,q,t),D.m(ye,e,t),a(e,L,t),a(e,w,t),a(e,O,t),a(e,T,t),a(e,W,t),a(e,x,t),a(e,G,t),a(e,H,t),a(e,I,t),a(e,_,t),a(e,Q,t),a(e,d,t),a(e,R,t),a(e,M,t)},p:X,i:X,o:X,d(e){e&&(l(p),l(A),l(y),l(k),l(m),l(B),l(u),l(P),l(c),l(S),l(f),l(F),l(g),l(J),l(h),l(E),l(v),l(j),l(C),l(z),l(b),l(q),D.d(),l(L),l(w),l(O),l(T),l(W),l(x),l(G),l(H),l(I),l(_),l(Q),l(d),l(R),l(M))}}}class Te extends ue{constructor(p){super(),fe(this,p,null,Ce,me,{})}}export{Te as component};
