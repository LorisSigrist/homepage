import{S as He,i as We,s as Ke,k as d,a as U,l as h,m as T,c as B,h as u,n,b as A,G as f,U as k,H as Fe,o as Qe,q as C,r as G,T as Ne,V as qe,W as M,X as Pe,Y as Je,u as Xe,Z as ue,_ as Ze,$ as Ye,a0 as je}from"../chunks/index.e8656bf8.js";/* empty css                          */const $e=""+new URL("../assets/img.58b560b7.jpg",import.meta.url).href,et="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAARtJREFUGBkBEAHv/gQAgKB/aX+hf1t/oX9pf6F/BL+Bv4G/gb+Bv4G/gb+Bv4EEcX8xf3F/MX9xfzF/cX8xfwS/gb+Bv4G/gb+Bv4G/gb+BBB1/XX8Nf01/HX9dfw1/TX8Ev4G/gb+Bv4G/gb+Bv4G/gQRxfzF/cX8xf3F/MX9xfzF/BL+Bv4G/gb+Bv4G/gb+Bv4EECH9Ifxh/WH8Ef0R/FH9UfwS/gb+Bv4G/gb+Bv4G/gb+BBHF/MX9xfzF/cX8xf3F/MX8Ev4G/gb+Bv4G/gb+Bv4G/gQQdf11/DX9Nfx1/XX8Nf01/BL+Bv4G/gb+Bv4G/gb+Bv4EEcX8xf3F/MX9xfzF/cX8xfwS/gb+Bv4G/gb+Bv4G/gb+BIZOCkuKxtP8AAAAASUVORK5CYII=",Ce={width:16,height:16},tt=""+new URL("../assets/blue_noise.b61cfddd.png",import.meta.url).href,Ge={width:470,height:470},rt=`precision highp float;

attribute vec2 position;
varying vec2 fragCoord;

// Just a simple vertex shader that passes on the 2d position to the fragment shader
void main() {
    fragCoord.x = position.x * 0.5 + 0.5;
    fragCoord.y = position.y * 0.5 + 0.5;
    
    gl_Position = vec4(position, 0.0, 1.0);
}`,ot=`precision highp float;
varying vec2 fragCoord;

uniform sampler2D uSampler;
uniform float uThreshold;
uniform sampler2D uNoiseSampler;
uniform vec2 uNoiseSamplerSize;

uniform float uNoise;
uniform float uMonochrome;

uniform vec2 uSize;

uniform vec3 uDarkColor;
uniform vec3 uLightColor;

void main(void) {
    //Map the current image pixel to the noise texture
    vec2 imgPixel = vec2(fragCoord.x * uSize.x, fragCoord.y * uSize.y);
    vec2 noisePixel = vec2( mod(imgPixel.x, uNoiseSamplerSize.x),  mod(imgPixel.y, uNoiseSamplerSize.y));
    
    vec2 noiseUV = vec2(noisePixel.x / uNoiseSamplerSize.x, noisePixel.y / uNoiseSamplerSize.y);
    float noise = (texture2D(uNoiseSampler, noiseUV).r - 0.5) * 2.0 * uNoise;

    //Get the color of the current pixel from the image
    vec4 color = texture2D(uSampler, fragCoord);

   // Convert to grayscale using the NTSC standard coefficients
    float gray = dot(color.rgb, vec3(0.299, 0.587, 0.114));    

    color.r = color.r * (1.0 - uMonochrome) + gray * uMonochrome;
    color.g = color.g * (1.0 - uMonochrome) + gray * uMonochrome;
    color.b = color.b * (1.0 - uMonochrome) + gray * uMonochrome;

    vec3 thresholds = vec3(
        step(uThreshold, color.r + noise),
        step(uThreshold, color.g + noise),
        step(uThreshold, color.b + noise)
    );

    if(uMonochrome > 0.0) {
        color.rgb = vec3(
            mix(uDarkColor.r, uLightColor.r, thresholds.r),
            mix(uDarkColor.g, uLightColor.g, thresholds.g),
            mix(uDarkColor.b, uLightColor.b, thresholds.b)
        );
    } else {
        color.rgb = thresholds;
    }

    gl_FragColor = color;
}`;function it(e,i,o){const l=ke(e,e.VERTEX_SHADER,i),t=ke(e,e.FRAGMENT_SHADER,o),a=e.createProgram();if(!a)throw new Error("Failed to create shader program");if(e.attachShader(a,l),e.attachShader(a,t),e.linkProgram(a),!e.getProgramParameter(a,e.LINK_STATUS))throw Error(`Unable to initialize the shader program: ${e.getProgramInfoLog(a)}`);return a}function ke(e,i,o){const l=e.createShader(i);if(!l)throw new Error("Failed to create shader");if(e.shaderSource(l,o),e.compileShader(l),!e.getShaderParameter(l,e.COMPILE_STATUS))throw Error(`An error occurred compiling the shaders: ${e.getShaderInfoLog(l)}`);return l}function Me(e,i,o=()=>{}){const l=e.createTexture();if(!l)throw new Error("Failed to create texture");e.bindTexture(e.TEXTURE_2D,l);const t=0,a=e.RGBA,s=1,m=1,p=0,v=e.RGBA,E=e.UNSIGNED_BYTE,I=new Uint8Array([0,0,255,255]);e.texImage2D(e.TEXTURE_2D,t,a,s,m,p,v,E,I);const _=new Image;return _.onload=()=>{e.bindTexture(e.TEXTURE_2D,l),e.texImage2D(e.TEXTURE_2D,t,a,v,E,_),ce(_.width)&&ce(_.height)?e.generateMipmap(e.TEXTURE_2D):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR)),o()},_.src=i,l}function nt(e){const i=e.createTexture();if(!i)throw new Error("Failed to create texture");e.bindTexture(e.TEXTURE_2D,i);const o=0,l=e.RGBA,t=1,a=1,s=0,m=e.RGBA,p=e.UNSIGNED_BYTE,v=new Uint8Array([0,0,255,255]);return e.texImage2D(e.TEXTURE_2D,o,l,t,a,s,m,p,v),i}function st(e,i,o){const t=e.RGBA,a=e.RGBA,s=e.UNSIGNED_BYTE;e.bindTexture(e.TEXTURE_2D,i),e.texImage2D(e.TEXTURE_2D,0,t,a,s,o),ce(o.width)&&ce(o.height)?e.generateMipmap(e.TEXTURE_2D):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR))}function ce(e){return(e&e-1)===0}function at(e){const i=e.createBuffer(),o=e.createBuffer(),l=[-1,1,-1,-1,1,-1,1,1],t=[3,2,1,3,1,0];return e.bindBuffer(e.ARRAY_BUFFER,i),e.bufferData(e.ARRAY_BUFFER,new Float32Array(l),e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,o),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(t),e.STATIC_DRAW),{vertex_buffer:i,index_buffer:o}}function lt(e,i){let o=i;function l(){st(t,g,o.image)}const t=e.getContext("webgl");t.clearColor(0,0,0,1),t.clear(t.COLOR_BUFFER_BIT);const a=it(t,rt,ot),{vertex_buffer:s,index_buffer:m}=at(t),p=t.getAttribLocation(a,"position");t.vertexAttribPointer(p,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(p);const v=t.getUniformLocation(a,"uSampler"),E=t.getUniformLocation(a,"uThreshold"),I=t.getUniformLocation(a,"uNoiseSampler"),_=t.getUniformLocation(a,"uNoise"),w=t.getUniformLocation(a,"uSize"),O=t.getUniformLocation(a,"uNoiseSamplerSize"),z=t.getUniformLocation(a,"uMonochrome"),K=t.getUniformLocation(a,"uDarkColor"),X=t.getUniformLocation(a,"uLightColor"),g=nt(t);t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!0),l();const V=Me(t,et,y);t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!0);const S=Me(t,tt,y);t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!0),t.useProgram(a);let b=null;function D(){switch(t.viewport(0,0,e.width,e.height),t.clearColor(0,0,0,1),t.clear(t.COLOR_BUFFER_BIT),t.bindBuffer(t.ARRAY_BUFFER,s),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,m),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,g),t.uniform1i(v,0),o.mode){case"bayer":t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,V),t.uniform1i(I,1),t.uniform2f(O,Ce.width,Ce.height);break;case"blue_noise":t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,S),t.uniform1i(I,1),t.uniform2f(O,Ge.width,Ge.height);break}t.uniform1f(E,o.threshold),t.uniform1f(_,o.noiseIntensity),t.uniform2f(w,e.width,e.height),t.uniform1f(z,o.monochrome?1:0),t.uniform3f(K,...Oe(o.colorDark)),t.uniform3f(X,...Oe(o.colorLight)),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0)}function y(){b=requestAnimationFrame(()=>{D(),b=null})}return y(),{update(x){const L=o.image!==x.image;o=x,L&&l(),y()},destroy(){b!==null&&cancelAnimationFrame(b)}}}function Oe(e){const i=parseInt(e.slice(1,3),16)/255,o=parseInt(e.slice(3,5),16)/255,l=parseInt(e.slice(5,7),16)/255;return[i,o,l]}function ze(e){let i,o,l,t,a,s,m,p,v,E,I,_,w,O,z,K,X,g,V,S,b,D,y,x,L,fe,me,Q,de,ee,J,Y,q,he,_e,Z,F,te,N,H,pe,W,Ee,re,P,oe,ie,j,Te,Ae,be,R=e[3]&&Ve(e);return{c(){i=d("img"),l=U(),t=d("div"),a=d("label"),s=C("Threshold "),m=C(e[1]),p=U(),v=d("div"),E=d("input"),I=U(),_=d("div"),w=d("label"),O=C("Noise Intensity "),z=C(e[2]),K=U(),X=d("div"),g=d("input"),V=U(),S=d("div"),b=d("div"),D=d("input"),y=U(),x=d("div"),L=d("label"),fe=C("Monochrome"),me=U(),Q=d("p"),de=C("If the dither should be monochrome, or in color"),ee=U(),R&&R.c(),J=U(),Y=d("div"),q=d("label"),he=C("Width"),_e=U(),Z=d("div"),F=d("input"),te=U(),N=d("select"),H=d("option"),pe=C("Bayer"),W=d("option"),Ee=C("Blue Noise"),re=U(),P=d("canvas"),ie=U(),j=d("p"),Te=C("Right click and save the image to download it."),this.h()},l(r){i=h(r,"IMG",{src:!0,alt:!0}),l=B(r),t=h(r,"DIV",{});var c=T(t);a=h(c,"LABEL",{for:!0,class:!0});var $=T(a);s=G($,"Threshold "),m=G($,e[1]),$.forEach(u),p=B(c),v=h(c,"DIV",{class:!0});var Re=T(v);E=h(Re,"INPUT",{type:!0,min:!0,id:!0,max:!0,step:!0,class:!0}),Re.forEach(u),c.forEach(u),I=B(r),_=h(r,"DIV",{});var ne=T(_);w=h(ne,"LABEL",{for:!0,class:!0});var ve=T(w);O=G(ve,"Noise Intensity "),z=G(ve,e[2]),ve.forEach(u),K=B(ne),X=h(ne,"DIV",{class:!0});var Ue=T(X);g=h(Ue,"INPUT",{type:!0,min:!0,id:!0,max:!0,step:!0,class:!0}),Ue.forEach(u),ne.forEach(u),V=B(r),S=h(r,"DIV",{class:!0});var se=T(S);b=h(se,"DIV",{class:!0});var Be=T(b);D=h(Be,"INPUT",{type:!0,class:!0}),Be.forEach(u),y=B(se),x=h(se,"DIV",{class:!0});var ae=T(x);L=h(ae,"LABEL",{for:!0,class:!0});var Ie=T(L);fe=G(Ie,"Monochrome"),Ie.forEach(u),me=B(ae),Q=h(ae,"P",{id:!0,class:!0});var Se=T(Q);de=G(Se,"If the dither should be monochrome, or in color"),Se.forEach(u),ae.forEach(u),se.forEach(u),ee=B(r),R&&R.l(r),J=B(r),Y=h(r,"DIV",{});var le=T(Y);q=h(le,"LABEL",{for:!0,class:!0});var De=T(q);he=G(De,"Width"),De.forEach(u),_e=B(le),Z=h(le,"DIV",{class:!0});var ye=T(Z);F=h(ye,"INPUT",{type:!0,min:!0,id:!0,step:!0,class:!0}),ye.forEach(u),le.forEach(u),te=B(r),N=h(r,"SELECT",{});var ge=T(N);H=h(ge,"OPTION",{});var Le=T(H);pe=G(Le,"Bayer"),Le.forEach(u),W=h(ge,"OPTION",{});var we=T(W);Ee=G(we,"Blue Noise"),we.forEach(u),ge.forEach(u),re=B(r),P=h(r,"CANVAS",{class:!0,width:!0,height:!0}),T(P).forEach(u),ie=B(r),j=h(r,"P",{});var xe=T(j);Te=G(xe,"Right click and save the image to download it."),xe.forEach(u),this.h()},h(){var r;Ne(i.src,o=(r=e[7])==null?void 0:r.src)||n(i,"src",o),n(i,"alt",""),n(a,"for","threshold"),n(a,"class","block text-sm font-medium leading-6 text-gray-900"),n(E,"type","range"),n(E,"min","0"),n(E,"id","threshold"),n(E,"max","1"),n(E,"step","0.01"),n(E,"class","block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"),n(v,"class","mt-2"),n(w,"for","noise"),n(w,"class","block text-sm font-medium leading-6 text-gray-900"),n(g,"type","range"),n(g,"min","0"),n(g,"id","noise"),n(g,"max","1.5"),n(g,"step","0.01"),n(g,"class","block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"),n(X,"class","mt-2"),n(D,"type","checkbox"),n(D,"class","h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600"),n(b,"class","flex h-6 items-center"),n(L,"for","comments"),n(L,"class","font-medium text-gray-900"),n(Q,"id","comments-description"),n(Q,"class","text-gray-500"),n(x,"class","ml-3 text-sm leading-6"),n(S,"class","relative flex items-start"),n(q,"for","width"),n(q,"class","block text-sm font-medium leading-6 text-gray-900"),n(F,"type","number"),n(F,"min","10"),n(F,"id","width"),n(F,"step","1"),n(F,"class","block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"),n(Z,"class","mt-2"),H.__value="bayer",H.value=H.__value,W.__value="blue_noise",W.value=W.__value,e[6]===void 0&&qe(()=>e[17].call(N)),n(P,"class","max-w-full w-full pixelated svelte-1gkt69q"),n(P,"width",e[0]),n(P,"height",e[8])},m(r,c){A(r,i,c),A(r,l,c),A(r,t,c),f(t,a),f(a,s),f(a,m),f(t,p),f(t,v),f(v,E),M(E,e[1]),A(r,I,c),A(r,_,c),f(_,w),f(w,O),f(w,z),f(_,K),f(_,X),f(X,g),M(g,e[2]),A(r,V,c),A(r,S,c),f(S,b),f(b,D),D.checked=e[3],f(S,y),f(S,x),f(x,L),f(L,fe),f(x,me),f(x,Q),f(Q,de),A(r,ee,c),R&&R.m(r,c),A(r,J,c),A(r,Y,c),f(Y,q),f(q,he),f(Y,_e),f(Y,Z),f(Z,F),M(F,e[0]),A(r,te,c),A(r,N,c),f(N,H),f(H,pe),f(N,W),f(W,Ee),Pe(N,e[6],!0),A(r,re,c),A(r,P,c),A(r,ie,c),A(r,j,c),f(j,Te),Ae||(be=[k(E,"change",e[11]),k(E,"input",e[11]),k(g,"change",e[12]),k(g,"input",e[12]),k(D,"change",e[13]),k(F,"input",e[16]),k(N,"change",e[17]),Je(oe=lt.call(null,P,{image:e[7],threshold:e[1],noiseIntensity:e[2],monochrome:e[3],colorLight:e[4],colorDark:e[5],mode:e[6]}))],Ae=!0)},p(r,c){var $;c&128&&!Ne(i.src,o=($=r[7])==null?void 0:$.src)&&n(i,"src",o),c&2&&Xe(m,r[1]),c&2&&M(E,r[1]),c&4&&Xe(z,r[2]),c&4&&M(g,r[2]),c&8&&(D.checked=r[3]),r[3]?R?R.p(r,c):(R=Ve(r),R.c(),R.m(J.parentNode,J)):R&&(R.d(1),R=null),c&1&&ue(F.value)!==r[0]&&M(F,r[0]),c&64&&Pe(N,r[6]),c&1&&n(P,"width",r[0]),c&256&&n(P,"height",r[8]),oe&&Ze(oe.update)&&c&254&&oe.update.call(null,{image:r[7],threshold:r[1],noiseIntensity:r[2],monochrome:r[3],colorLight:r[4],colorDark:r[5],mode:r[6]})},d(r){r&&u(i),r&&u(l),r&&u(t),r&&u(I),r&&u(_),r&&u(V),r&&u(S),r&&u(ee),R&&R.d(r),r&&u(J),r&&u(Y),r&&u(te),r&&u(N),r&&u(re),r&&u(P),r&&u(ie),r&&u(j),Ae=!1,Ye(be)}}}function Ve(e){let i,o,l,t,a;return{c(){i=d("input"),o=U(),l=d("input"),this.h()},l(s){i=h(s,"INPUT",{type:!0}),o=B(s),l=h(s,"INPUT",{type:!0}),this.h()},h(){n(i,"type","color"),n(l,"type","color")},m(s,m){A(s,i,m),M(i,e[4]),A(s,o,m),A(s,l,m),M(l,e[5]),t||(a=[k(i,"input",e[14]),k(l,"input",e[15])],t=!0)},p(s,m){m&16&&M(i,s[4]),m&32&&M(l,s[5])},d(s){s&&u(i),s&&u(o),s&&u(l),t=!1,Ye(a)}}}function ut(e){let i,o,l,t,a,s=e[7]&&ze(e);return{c(){i=d("div"),o=d("input"),l=U(),s&&s.c(),this.h()},l(m){i=h(m,"DIV",{class:!0});var p=T(i);o=h(p,"INPUT",{type:!0,id:!0,accept:!0}),l=B(p),s&&s.l(p),p.forEach(u),this.h()},h(){n(o,"type","file"),n(o,"id","image-input"),n(o,"accept","image/*"),n(i,"class","max-w-xl mx-auto px-4")},m(m,p){A(m,i,p),f(i,o),f(i,l),s&&s.m(i,null),t||(a=k(o,"input",e[9]),t=!0)},p(m,[p]){m[7]?s?s.p(m,p):(s=ze(m),s.c(),s.m(i,null)):s&&(s.d(1),s=null)},i:Fe,o:Fe,d(m){m&&u(i),s&&s.d(),t=!1,a()}}}function ct(e,i,o){let l,t=.33,a=.3,s=!1,m="#ede6cc",p="#21263f",v=600,E=1,I="bayer",_=null;function w(b){const D=b.target.files[0];if(!D)return;const y=new FileReader;y.onload=x=>{if(typeof y.result!="string")return;const L=new Image;L.onload=()=>{o(7,_=L),o(10,E=_.width/_.height)},L.src=y.result},y.readAsDataURL(D)}Qe(()=>{const b=new Image;b.onload=()=>{o(7,_=b),o(10,E=_.width/_.height)},b.src=$e});function O(){t=ue(this.value),o(1,t)}function z(){a=ue(this.value),o(2,a)}function K(){s=this.checked,o(3,s)}function X(){m=this.value,o(4,m)}function g(){p=this.value,o(5,p)}function V(){v=ue(this.value),o(0,v)}function S(){I=je(this),o(6,I)}return e.$$.update=()=>{e.$$.dirty&1025&&o(8,l=v/E)},[v,t,a,s,m,p,I,_,l,w,E,O,z,K,X,g,V,S]}class dt extends He{constructor(i){super(),We(this,i,ct,ut,Ke,{})}}export{dt as component};
