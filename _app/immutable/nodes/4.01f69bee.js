import{S as Ze,i as We,s as $e,k as T,q as ae,a as Z,y as de,l as S,m as L,r as ie,h as w,c as W,z as me,n as m,b as oe,G as v,A as he,N as se,g as J,d as ee,B as ve,O as et,P as jr,Q as tr,u as Ft,H as Je,R as kr,T as Hr,U as Oe,V as Kr,C as Rt,D as Lt,E as Bt,F as kt,W as Qr,p as rr,X as Ct,Y as Mt,w as xe,Z as Fe,J as Jr,f as nr,_ as Pe,v as or,M as Nt,$ as en}from"../chunks/index.750437ab.js";import{I as tt,L as tn,A as rn,a as nn,P as on,X as an}from"../chunks/Icon.9f517509.js";import{g as sn}from"../chunks/_commonjsHelpers.725317a4.js";function ln(e){let t,r,n,i,a,o,s,u,l,f,d,h,A,B,D,_,R,k,y,b,I,z,C,U,M,N;return A=new tt({props:{src:tn,class:"w-4 h-4",solid:!0}}),{c(){t=T("fieldset"),r=T("div"),n=T("label"),i=ae("Width"),a=Z(),o=T("div"),s=T("input"),u=Z(),l=T("div"),f=ae("px"),d=Z(),h=T("span"),de(A.$$.fragment),B=Z(),D=T("div"),_=T("label"),R=ae("Height"),k=Z(),y=T("div"),b=T("input"),I=Z(),z=T("div"),C=ae("px"),this.h()},l(F){t=S(F,"FIELDSET",{class:!0});var P=L(t);r=S(P,"DIV",{class:!0});var X=L(r);n=S(X,"LABEL",{for:!0,class:!0});var ue=L(n);i=ie(ue,"Width"),ue.forEach(w),a=W(X),o=S(X,"DIV",{class:!0});var le=L(o);s=S(le,"INPUT",{name:!0,id:!0,type:!0,min:!0,max:!0,step:!0,class:!0,placeholder:!0}),u=W(le),l=S(le,"DIV",{class:!0});var ce=L(l);f=ie(ce,"px"),ce.forEach(w),le.forEach(w),X.forEach(w),d=W(P),h=S(P,"SPAN",{class:!0});var q=L(h);me(A.$$.fragment,q),q.forEach(w),B=W(P),D=S(P,"DIV",{class:!0});var O=L(D);_=S(O,"LABEL",{for:!0,class:!0});var j=L(_);R=ie(j,"Height"),j.forEach(w),k=W(O),y=S(O,"DIV",{class:!0});var te=L(y);b=S(te,"INPUT",{type:!0,id:!0,name:!0,min:!0,max:!0,step:!0,class:!0,placeholder:!0}),I=W(te),z=S(te,"DIV",{class:!0});var Q=L(z);C=ie(Q,"px"),Q.forEach(w),te.forEach(w),O.forEach(w),P.forEach(w),this.h()},h(){m(n,"for","width-"+e[4]),m(n,"class","block text-sm font-medium leading-6 text-gray-900"),m(s,"name","width"),m(s,"id","width-"+e[4]),m(s,"type","number"),m(s,"min","12"),m(s,"max","3000"),m(s,"step","1"),s.value=e[0],m(s,"class","block w-full rounded-md border-0 py-1.5 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"),m(s,"placeholder","600"),m(l,"class","pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400"),m(o,"class","relative mt-2 rounded-md shadow-sm"),m(r,"class","w-full"),m(h,"class","text-gray-500 pb-2 cursor-not-allowed"),m(_,"for","height-"+e[5]),m(_,"class","block text-sm font-medium leading-6 text-gray-900"),m(b,"type","number"),m(b,"id","height-"+e[5]),m(b,"name","height"),m(b,"min","12"),m(b,"max","3000"),m(b,"step","1"),b.value=e[1],m(b,"class","block w-full rounded-md border-0 py-1.5 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"),m(b,"placeholder","340"),m(z,"class","pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400"),m(y,"class","relative mt-2 rounded-md shadow-sm"),m(D,"class","w-full"),m(t,"class","flex gap-3 items-end justify-between")},m(F,P){oe(F,t,P),v(t,r),v(r,n),v(n,i),v(r,a),v(r,o),v(o,s),v(o,u),v(o,l),v(l,f),v(t,d),v(t,h),he(A,h,null),v(t,B),v(t,D),v(D,_),v(_,R),v(D,k),v(D,y),v(y,b),v(y,I),v(y,z),v(z,C),U=!0,M||(N=[se(s,"input",e[2]),se(b,"input",e[3])],M=!0)},p(F,[P]){(!U||P&1&&s.value!==F[0])&&(s.value=F[0]),(!U||P&2&&b.value!==F[1])&&(b.value=F[1])},i(F){U||(J(A.$$.fragment,F),U=!0)},o(F){ee(A.$$.fragment,F),U=!1},d(F){F&&w(t),ve(A),M=!1,et(N)}}}function ar(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}function un(e,t,r){let n,{width:i}=t,{aspectRatio:a}=t;function o(f){const d=f.target.value;d&&r(0,i=d)}function s(f){const d=f.target.value;d&&r(0,i=Math.round(a*d))}let u=ar(),l=ar();return e.$$set=f=>{"width"in f&&r(0,i=f.width),"aspectRatio"in f&&r(6,a=f.aspectRatio)},e.$$.update=()=>{e.$$.dirty&65&&r(1,n=Math.round(i/a))},[i,n,o,s,u,l,a]}class cn extends Ze{constructor(t){super(),We(this,t,un,ln,$e,{width:0,aspectRatio:6})}}function ir(e,t,r){const n=e.slice();return n[6]=t[r],n}function sr(e){let t,r=e[6].name+"",n,i,a;return{c(){t=T("option"),n=ae(r),this.h()},l(o){t=S(o,"OPTION",{});var s=L(t);n=ie(s,r),s.forEach(w),this.h()},h(){t.__value=i=e[6].value,t.value=t.__value,t.selected=a=e[6].value===e[0]},m(o,s){oe(o,t,s),v(t,n)},p(o,s){s&2&&r!==(r=o[6].name+"")&&Ft(n,r),s&2&&i!==(i=o[6].value)&&(t.__value=i,t.value=t.__value),s&3&&a!==(a=o[6].value===o[0])&&(t.selected=a)},d(o){o&&w(t)}}}function fn(e){let t,r,n,i,a,o,s,u=e[1],l=[];for(let f=0;f<u.length;f+=1)l[f]=sr(ir(e,u,f));return{c(){t=T("div"),r=T("label"),n=ae(e[2]),i=Z(),a=T("select");for(let f=0;f<l.length;f+=1)l[f].c();this.h()},l(f){t=S(f,"DIV",{});var d=L(t);r=S(d,"LABEL",{for:!0,class:!0});var h=L(r);n=ie(h,e[2]),h.forEach(w),i=W(d),a=S(d,"SELECT",{id:!0,name:!0,class:!0});var A=L(a);for(let B=0;B<l.length;B+=1)l[B].l(A);A.forEach(w),d.forEach(w),this.h()},h(){m(r,"for",e[4]),m(r,"class","block text-sm font-medium leading-6 text-gray-900"),m(a,"id",e[4]),m(a,"name",e[3]),m(a,"class","mt-2 block w-full rounded-md border-0 py-1.5 pl-3 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-indigo-600 sm:text-sm sm:leading-6"),e[0]===void 0&&jr(()=>e[5].call(a))},m(f,d){oe(f,t,d),v(t,r),v(r,n),v(t,i),v(t,a);for(let h=0;h<l.length;h+=1)l[h]&&l[h].m(a,null);tr(a,e[0],!0),o||(s=se(a,"change",e[5]),o=!0)},p(f,[d]){if(d&4&&Ft(n,f[2]),d&3){u=f[1];let h;for(h=0;h<u.length;h+=1){const A=ir(f,u,h);l[h]?l[h].p(A,d):(l[h]=sr(A),l[h].c(),l[h].m(a,null))}for(;h<l.length;h+=1)l[h].d(1);l.length=u.length}d&8&&m(a,"name",f[3]),d&3&&tr(a,f[0])},i:Je,o:Je,d(f){f&&w(t),kr(l,f),o=!1,s()}}}function dn(e,t,r){let{options:n}=t,{selected:i}=t,{label:a}=t,{name:o=void 0}=t,s=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);function u(){i=Hr(this),r(0,i),r(1,n)}return e.$$set=l=>{"options"in l&&r(1,n=l.options),"selected"in l&&r(0,i=l.selected),"label"in l&&r(2,a=l.label),"name"in l&&r(3,o=l.name)},[i,n,a,o,s,u]}class mn extends Ze{constructor(t){super(),We(this,t,dn,fn,$e,{options:1,selected:0,label:2,name:3})}}function hn(e){let t,r,n,i,a,o,s;return{c(){t=T("div"),r=T("label"),n=ae(e[1]),i=Z(),a=T("input"),this.h()},l(u){t=S(u,"DIV",{});var l=L(t);r=S(l,"LABEL",{for:!0,class:!0});var f=L(r);n=ie(f,e[1]),f.forEach(w),i=W(l),a=S(l,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0,name:!0,class:!0}),l.forEach(w),this.h()},h(){m(r,"for",e[6]),m(r,"class","block mb-2 text-sm font-medium text-gray-900 dark:text-white"),m(a,"id",e[6]),m(a,"type","range"),m(a,"min",e[3]),m(a,"max",e[4]),m(a,"step",e[5]),m(a,"name",e[2]),m(a,"class","w-full h-1.5 mb-6 bg-white ring-1 ring-gray-300 shadow-sm rounded-lg appearance-none cursor-pointer accent-indigo-600 dark:bg-gray-700")},m(u,l){oe(u,t,l),v(t,r),v(r,n),v(t,i),v(t,a),Oe(a,e[0]),o||(s=[se(a,"change",e[7]),se(a,"input",e[7])],o=!0)},p(u,[l]){l&2&&Ft(n,u[1]),l&8&&m(a,"min",u[3]),l&16&&m(a,"max",u[4]),l&32&&m(a,"step",u[5]),l&4&&m(a,"name",u[2]),l&1&&Oe(a,u[0])},i:Je,o:Je,d(u){u&&w(t),o=!1,et(s)}}}function vn(e,t,r){let{label:n}=t,{name:i=void 0}=t,{min:a=null}=t,{max:o=null}=t,{value:s=0}=t,{step:u=1}=t,l=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);function f(){s=Kr(this.value),r(0,s)}return e.$$set=d=>{"label"in d&&r(1,n=d.label),"name"in d&&r(2,i=d.name),"min"in d&&r(3,a=d.min),"max"in d&&r(4,o=d.max),"value"in d&&r(0,s=d.value),"step"in d&&r(5,u=d.step)},[s,n,i,a,o,u,l,f]}class Ut extends Ze{constructor(t){super(),We(this,t,vn,hn,$e,{label:1,name:2,min:3,max:4,value:0,step:5})}}const pn=""+new URL("../assets/blue_noise.b61cfddd.png",import.meta.url).href,gn={width:470,height:470},_n=""+new URL("../assets/white_noise.2f37d8a6.png",import.meta.url).href,bn={width:256,height:256};var wn="precision highp float;attribute vec2 position;varying vec2 fragCoord;void main(){fragCoord.x=position.x*0.5+0.5;fragCoord.y=position.y*0.5+0.5;gl_Position=vec4(position,0.0,1.0);}",An="precision highp float;varying vec2 fragCoord;uniform sampler2D uSampler;uniform float uThreshold;uniform sampler2D uNoiseSampler;uniform vec2 uNoiseSamplerSize;uniform float uNoise;uniform float uMonochrome;uniform vec2 uSize;uniform vec3 uDarkColor;uniform vec3 uLightColor;void main(void){vec2 imgPixel=vec2(fragCoord.x*uSize.x,fragCoord.y*uSize.y);vec2 noisePixel=vec2(mod(imgPixel.x,uNoiseSamplerSize.x),mod(imgPixel.y,uNoiseSamplerSize.y));vec2 noiseUV=vec2(noisePixel.x/uNoiseSamplerSize.x,noisePixel.y/uNoiseSamplerSize.y);float noise=(texture2D(uNoiseSampler,noiseUV).r-0.5)*2.0*uNoise;vec4 color=texture2D(uSampler,fragCoord);float gray=dot(color.rgb,vec3(0.299,0.587,0.114));color.r=color.r*(1.0-uMonochrome)+gray*uMonochrome;color.g=color.g*(1.0-uMonochrome)+gray*uMonochrome;color.b=color.b*(1.0-uMonochrome)+gray*uMonochrome;vec3 thresholds=vec3(step(uThreshold,color.r+noise),step(uThreshold,color.g+noise),step(uThreshold,color.b+noise));if(uMonochrome>0.0){color.rgb=vec3(mix(uDarkColor.r,uLightColor.r,thresholds.r),mix(uDarkColor.g,uLightColor.g,thresholds.g),mix(uDarkColor.b,uLightColor.b,thresholds.b));}else{color.rgb=thresholds;}gl_FragColor=color;}";function yn(e,t,r){const n=lr(e,e.VERTEX_SHADER,t),i=lr(e,e.FRAGMENT_SHADER,r),a=e.createProgram();if(!a)throw new Error("Failed to create shader program");if(e.attachShader(a,n),e.attachShader(a,i),e.linkProgram(a),!e.getProgramParameter(a,e.LINK_STATUS))throw Error(`Unable to initialize the shader program: ${e.getProgramInfoLog(a)}`);return a}function lr(e,t,r){const n=e.createShader(t);if(!n)throw new Error("Failed to create shader");if(e.shaderSource(n,r),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS))throw Error(`An error occurred compiling the shaders: ${e.getShaderInfoLog(n)}`);return n}function ur(e,t,r=()=>{}){const n=e.createTexture();if(!n)throw new Error("Failed to create texture");e.bindTexture(e.TEXTURE_2D,n);const i=0,a=e.RGBA,o=1,s=1,u=0,l=e.RGBA,f=e.UNSIGNED_BYTE,d=new Uint8Array([128,128,128,255]);e.texImage2D(e.TEXTURE_2D,i,a,o,s,u,l,f,d);const h=new Image;return h.onload=()=>{e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,i,a,l,f,h),Xe(h.width)&&Xe(h.height)?e.generateMipmap(e.TEXTURE_2D):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR)),r()},h.src=t,n}function En(e){const t=e.createTexture();if(!t)throw new Error("Failed to create texture");e.bindTexture(e.TEXTURE_2D,t);const r=0,n=e.RGBA,i=1,a=1,o=0,s=e.RGBA,u=e.UNSIGNED_BYTE,l=new Uint8Array([0,0,255,255]);return e.texImage2D(e.TEXTURE_2D,r,n,i,a,o,s,u,l),t}function Tn(e,t,r){const i=e.RGBA,a=e.RGBA,o=e.UNSIGNED_BYTE;e.bindTexture(e.TEXTURE_2D,t),e.texImage2D(e.TEXTURE_2D,0,i,a,o,r),Xe(r.width)&&Xe(r.height)?e.generateMipmap(e.TEXTURE_2D):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR))}function Xe(e){return(e&e-1)===0}function Sn(e){const t=e.createBuffer(),r=e.createBuffer(),n=[-1,1,-1,-1,1,-1,1,1],i=[3,2,1,3,1,0];return e.bindBuffer(e.ARRAY_BUFFER,t),e.bufferData(e.ARRAY_BUFFER,new Float32Array(n),e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(i),e.STATIC_DRAW),{vertex_buffer:t,index_buffer:r}}function xn(e,t){const r=document.createElement("canvas");r.width=Math.pow(2,t+1),r.height=Math.pow(2,t+1);const n=Cr(t),i=Math.pow(2,2*t),a=n.map(s=>s.map(u=>u/i)),o=r.getContext("2d");for(let s=0;s<a.length;s++)for(let u=0;u<a[s].length;u++){const l=a[s][u]*255/4;o.fillStyle=`rgb(${l}, ${l}, ${l})`,o.fillRect(u,s,1,1)}return Dn(e,o)}const St=new Map;function Cr(e){if(St.has(e))return St.get(e);if(e===0)return[[0,2],[3,1]];const t=Cr(e-1),r=new Array(t.length*2).fill(0).map(()=>new Array(t.length*2).fill(0));for(let n=0;n<t.length;n++)for(let i=0;i<t[n].length;i++)r[n][i]=t[n][i]*4,r[n][i+t.length]=t[n][i]*4+2,r[n+t.length][i]=t[n][i]*4+3,r[n+t.length][i+t.length]=t[n][i]*4+1;return St.set(e,r),r}function Dn(e,t){const r=e.createTexture();if(!r)throw new Error("Failed to create texture");return e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t.canvas),Xe(t.canvas.width)&&Xe(t.canvas.height)?e.generateMipmap(e.TEXTURE_2D):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR)),r}function In(e,t){let r=t;const n=e.getContext("webgl",{preserveDrawingBuffer:!0});if(!n){alert("WebGL not supported");return}const i=()=>{Tn(n,k,r.image)};n.clearColor(0,0,0,1),n.clear(n.COLOR_BUFFER_BIT);const a=yn(n,wn,An),{vertex_buffer:o,index_buffer:s}=Sn(n),u=n.getAttribLocation(a,"position");n.vertexAttribPointer(u,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(u);const l=n.getUniformLocation(a,"uSampler"),f=n.getUniformLocation(a,"uThreshold"),d=n.getUniformLocation(a,"uNoiseSampler"),h=n.getUniformLocation(a,"uNoise"),A=n.getUniformLocation(a,"uSize"),B=n.getUniformLocation(a,"uNoiseSamplerSize"),D=n.getUniformLocation(a,"uMonochrome"),_=n.getUniformLocation(a,"uDarkColor"),R=n.getUniformLocation(a,"uLightColor"),k=En(n);n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!0),i();let y,b;n.useProgram(a);let I=null;const z=()=>{if(r.mode==="blue_noise"){const M=ur(n,pn,U);n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!0),y=M,b=gn;return}if(r.mode==="white_noise"){const M=ur(n,_n,U);n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!0),y=M,b=bn;return}if(r.mode.startsWith("bayer_")){const M=Number(r.mode.slice(6));if(isNaN(M))throw new Error(`Invalid bayer level: "${r.mode}"`);const N=xn(n,M),F=Math.pow(2,M+1);y=N,b={width:F,height:F};return}throw new Error(`Unknown mode: "${r.mode}"`)};z();const C=()=>{n.viewport(0,0,r.width,r.height),n.clearColor(0,0,0,1),n.clear(n.COLOR_BUFFER_BIT),n.bindBuffer(n.ARRAY_BUFFER,o),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,s),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,k),n.uniform1i(l,0),n.activeTexture(n.TEXTURE1),n.bindTexture(n.TEXTURE_2D,y),n.uniform1i(d,1),n.uniform2f(B,b.width,b.height),n.uniform1f(f,r.threshold),n.uniform1f(h,r.noiseIntensity),n.uniform2f(A,r.width,r.height),n.uniform1f(D,r.monochrome?1:0),n.uniform3f(_,...cr(r.colorDark)),n.uniform3f(R,...cr(r.colorLight)),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0)};function U(){I=requestAnimationFrame(()=>{C(),I=null})}return U(),{update(M){const N=r.image!==M.image,F=r.mode!==M.mode;r=M,N&&i(),F&&z(),U()},destroy(){I!==null&&cancelAnimationFrame(I)}}}function cr(e){const t=parseInt(e.slice(1,3),16)/255,r=parseInt(e.slice(3,5),16)/255,n=parseInt(e.slice(5,7),16)/255;return[t,r,n]}function Rn(e){let t,r,n,i,a;const o=e[3].default,s=Rt(o,e,e[2],null);return{c(){t=T("button"),s&&s.c(),this.h()},l(u){t=S(u,"BUTTON",{type:!0,class:!0});var l=L(t);s&&s.l(l),l.forEach(w),this.h()},h(){t.disabled=e[0],m(t,"type","button"),m(t,"class",r=e[1][e[0]?"disabled":"normal"]+" rounded-md w-full px-2.5 py-1.5 text-sm font-semibold focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 flex items-center justify-center gap-2")},m(u,l){oe(u,t,l),s&&s.m(t,null),n=!0,i||(a=se(t,"click",e[4]),i=!0)},p(u,[l]){s&&s.p&&(!n||l&4)&&Lt(s,o,u,u[2],n?kt(o,u[2],l,null):Bt(u[2]),null),(!n||l&1)&&(t.disabled=u[0]),(!n||l&1&&r!==(r=u[1][u[0]?"disabled":"normal"]+" rounded-md w-full px-2.5 py-1.5 text-sm font-semibold focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 flex items-center justify-center gap-2"))&&m(t,"class",r)},i(u){n||(J(s,u),n=!0)},o(u){ee(s,u),n=!1},d(u){u&&w(t),s&&s.d(u),i=!1,a()}}}function Ln(e,t,r){let{$$slots:n={},$$scope:i}=t,{disabled:a=!1}=t;const o={normal:"bg-indigo-600 text-white shadow-sm hover:bg-indigo-500",disabled:"bg-gray-200 text-gray-400 shadow-none cursor-not-allowed"};function s(u){Qr.call(this,e,u)}return e.$$set=u=>{"disabled"in u&&r(0,a=u.disabled),"$$scope"in u&&r(2,i=u.$$scope)},[a,o,i,n,s]}class Bn extends Ze{constructor(t){super(),We(this,t,Ln,Rn,$e,{disabled:0})}}async function kn(e,t,r="png"){const n=new OffscreenCanvas(e.width,e.height),i=n.getContext("2d");if(!i)return;i.drawImage(e,0,0,e.width,e.height);const a=await n.convertToBlob({type:"image/"+r,quality:1}),o=URL.createObjectURL(a),s=document.createElement("a");s.download=`${t}.${r}`,s.href=o,s.click(),s.remove(),URL.revokeObjectURL(o)}function fr(e){return new Promise((t,r)=>{e.type.startsWith("image/")||r(new Error("Not an image file"));const n=new FileReader;n.onload=i=>{if(typeof n.result!="string")return;const a=new Image;a.onload=()=>{t(a)},a.onerror=o=>{r(o)},a.src=n.result},n.onerror=i=>{r(i)},n.readAsDataURL(e)})}var _t={exports:{}};_t.exports=Mr;_t.exports.addWheelListener=Mr;_t.exports.removeWheelListener=Cn;function Mr(e,t,r){e.addEventListener("wheel",t,r)}function Cn(e,t,r){e.removeEventListener("wheel",t,r)}var Mn=_t.exports,bt={exports:{}},Nn=4,Un=.001,Fn=1e-7,Pn=10,Qe=11,ht=1/(Qe-1),On=typeof Float32Array=="function";function Nr(e,t){return 1-3*t+3*e}function Ur(e,t){return 3*t-6*e}function Fr(e){return 3*e}function gt(e,t,r){return((Nr(t,r)*e+Ur(t,r))*e+Fr(t))*e}function Pr(e,t,r){return 3*Nr(t,r)*e*e+2*Ur(t,r)*e+Fr(t)}function zn(e,t,r,n,i){var a,o,s=0;do o=t+(r-t)/2,a=gt(o,n,i)-e,a>0?r=o:t=o;while(Math.abs(a)>Fn&&++s<Pn);return o}function Vn(e,t,r,n){for(var i=0;i<Nn;++i){var a=Pr(t,r,n);if(a===0)return t;var o=gt(t,r,n)-e;t-=o/a}return t}function Xn(e){return e}var Zn=function(t,r,n,i){if(!(0<=t&&t<=1&&0<=n&&n<=1))throw new Error("bezier x values must be in [0, 1] range");if(t===r&&n===i)return Xn;for(var a=On?new Float32Array(Qe):new Array(Qe),o=0;o<Qe;++o)a[o]=gt(o*ht,t,n);function s(u){for(var l=0,f=1,d=Qe-1;f!==d&&a[f]<=u;++f)l+=ht;--f;var h=(u-a[f])/(a[f+1]-a[f]),A=l+h*ht,B=Pr(A,t,n);return B>=Un?Vn(u,A,t,n):B===0?A:zn(u,l,l+ht,t,n)}return function(l){return l===0?0:l===1?1:gt(s(l),r,i)}},Ke=Zn,dr={ease:Ke(.25,.1,.25,1),easeIn:Ke(.42,0,1,1),easeOut:Ke(0,0,.58,1),easeInOut:Ke(.42,0,.58,1),linear:Ke(0,0,1,1)};bt.exports=Wn;bt.exports.makeAggregateRaf=Or;bt.exports.sharedScheduler=Or();function Wn(e,t,r){var n=Object.create(null),i=Object.create(null);r=r||{};var a=typeof r.easing=="function"?r.easing:dr[r.easing];a||(r.easing&&console.warn("Unknown easing function in amator: "+r.easing),a=dr.ease);var o=typeof r.step=="function"?r.step:mr,s=typeof r.done=="function"?r.done:mr,u=$n(r.scheduler),l=Object.keys(t);l.forEach(function(R){n[R]=e[R],i[R]=t[R]-e[R]});var f=typeof r.duration=="number"?r.duration:400,d=Math.max(1,f*.06),h,A=0;return h=u.next(D),{cancel:B};function B(){u.cancel(h),h=0}function D(){var R=a(A/d);A+=1,_(R),A<=d?(h=u.next(D),o(e)):(h=0,setTimeout(function(){s(e)},0))}function _(R){l.forEach(function(k){e[k]=i[k]*R+n[k]})}}function mr(){}function $n(e){if(!e){var t=typeof window<"u"&&window.requestAnimationFrame;return t?Gn():qn()}if(typeof e.next!="function")throw new Error("Scheduler is supposed to have next(cb) function");if(typeof e.cancel!="function")throw new Error("Scheduler is supposed to have cancel(handle) function");return e}function Gn(){return{next:window.requestAnimationFrame.bind(window),cancel:window.cancelAnimationFrame.bind(window)}}function qn(){return{next:function(e){return setTimeout(e,1e3/60)},cancel:function(e){return clearTimeout(e)}}}function Or(){var e=new Set,t=new Set,r=0;return{next:i,cancel:i,clearAll:n};function n(){e.clear(),t.clear(),cancelAnimationFrame(r),r=0}function i(s){t.add(s),a()}function a(){r||(r=requestAnimationFrame(o))}function o(){r=0;var s=t;t=e,e=s,e.forEach(function(u){u()}),e.clear()}}var Yn=bt.exports,jn=function(t){Kn(t);var r=Hn(t);return t.on=r.on,t.off=r.off,t.fire=r.fire,t};function Hn(e){var t=Object.create(null);return{on:function(r,n,i){if(typeof n!="function")throw new Error("callback is expected to be a function");var a=t[r];return a||(a=t[r]=[]),a.push({callback:n,ctx:i}),e},off:function(r,n){var i=typeof r>"u";if(i)return t=Object.create(null),e;if(t[r]){var a=typeof n!="function";if(a)delete t[r];else for(var o=t[r],s=0;s<o.length;++s)o[s].callback===n&&o.splice(s,1)}return e},fire:function(r){var n=t[r];if(!n)return e;var i;arguments.length>1&&(i=Array.prototype.splice.call(arguments,1));for(var a=0;a<n.length;++a){var o=n[a];o.callback.apply(o.ctx,i)}return e}}}function Kn(e){if(!e)throw new Error("Eventify cannot use falsy object as events subject");for(var t=["on","fire","off"],r=0;r<t.length;++r)if(e.hasOwnProperty(t[r]))throw new Error("Subject cannot be eventified, since it already has property '"+t[r]+"'")}var Qn=Jn;function Jn(e,t,r){typeof r!="object"&&(r={});var n=typeof r.minVelocity=="number"?r.minVelocity:5,i=typeof r.amplitude=="number"?r.amplitude:.25,a=typeof r.cancelAnimationFrame=="function"?r.cancelAnimationFrame:eo(),o=typeof r.requestAnimationFrame=="function"?r.requestAnimationFrame:to(),s,u,l=342,f,d,h,A,B,D,_,R;return{start:y,stop:I,cancel:k};function k(){a(f),a(R)}function y(){s=e(),A=_=d=B=0,u=new Date,a(f),a(R),f=o(b)}function b(){var C=Date.now(),U=C-u;u=C;var M=e(),N=M.x-s.x,F=M.y-s.y;s=M;var P=1e3/(1+U);d=.8*N*P+.2*d,B=.8*F*P+.2*B,f=o(b)}function I(){a(f),a(R);var C=e();h=C.x,D=C.y,u=Date.now(),(d<-n||d>n)&&(A=i*d,h+=A),(B<-n||B>n)&&(_=i*B,D+=_),R=o(z)}function z(){var C=Date.now()-u,U=!1,M=0,N=0;A&&(M=-A*Math.exp(-C/l),M>.5||M<-.5?U=!0:M=A=0),_&&(N=-_*Math.exp(-C/l),N>.5||N<-.5?U=!0:N=_=0),U&&(t(h+M,D+N),R=o(z))}}function eo(){return typeof cancelAnimationFrame=="function"?cancelAnimationFrame:clearTimeout}function to(){return typeof requestAnimationFrame=="function"?requestAnimationFrame:function(e){return setTimeout(e,16)}}var ro=no;function no(e){if(e)return{capture:vr,release:vr};var t,r,n,i=!1;return{capture:a,release:o};function a(s){i=!0,r=window.document.onselectstart,n=window.document.ondragstart,window.document.onselectstart=hr,t=s,t.ondragstart=hr}function o(){i&&(i=!1,window.document.onselectstart=r,t&&(t.ondragstart=n))}}function hr(e){return e.stopPropagation(),!1}function vr(){}var xt,pr;function oo(){if(pr)return xt;pr=1,xt=e;function e(){this.x=0,this.y=0,this.scale=1}return xt}var vt={exports:{}},gr;function ao(){if(gr)return vt.exports;gr=1,vt.exports=e,vt.exports.canAttach=t;function e(r,n){if(!t(r))throw new Error("svg element is required for svg.panzoom to work");var i=r.ownerSVGElement;if(!i)throw new Error("Do not apply panzoom to the root <svg> element. Use its child instead (e.g. <g></g>). As of March 2016 only FireFox supported transform on the root element");n.disableKeyboardInteraction||i.setAttribute("tabindex",0);var a={getBBox:s,getScreenCTM:u,getOwner:o,applyTransform:f,initTransform:l};return a;function o(){return i}function s(){var d=r.getBBox();return{left:d.x,top:d.y,width:d.width,height:d.height}}function u(){var d=i.getCTM();return d||i.getScreenCTM()}function l(d){var h=r.getCTM();h===null&&(h=document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGMatrix()),d.x=h.e,d.y=h.f,d.scale=h.a,i.removeAttributeNS(null,"viewBox")}function f(d){r.setAttribute("transform","matrix("+d.scale+" 0 0 "+d.scale+" "+d.x+" "+d.y+")")}}function t(r){return r&&r.ownerSVGElement&&r.getCTM}return vt.exports}var pt={exports:{}},_r;function io(){if(_r)return pt.exports;_r=1,pt.exports=e,pt.exports.canAttach=t;function e(r,n){var i=t(r);if(!i)throw new Error("panzoom requires DOM element to be attached to the DOM tree");var a=r.parentElement;r.scrollTop=0,n.disableKeyboardInteraction||a.setAttribute("tabindex",0);var o={getBBox:u,getOwner:s,applyTransform:l};return o;function s(){return a}function u(){return{left:0,top:0,width:r.clientWidth,height:r.clientHeight}}function l(f){r.style.transformOrigin="0 0 0",r.style.transform="matrix("+f.scale+", 0, 0, "+f.scale+", "+f.x+", "+f.y+")"}}function t(r){return r&&r.parentElement&&r.style}return pt.exports}var br=Mn,Dt=Yn,so=jn,lo=Qn,zr=ro,uo=zr(),co=zr(!0),fo=oo(),wr=ao(),Ar=io(),mo=1,ho=1.75,yr=300,Er=200,vo=Vr;function Vr(e,t){t=t||{};var r=t.controller;if(r||(wr.canAttach(e)?r=wr(e,t):Ar.canAttach(e)&&(r=Ar(e,t))),!r)throw new Error("Cannot create panzoom for the current type of dom element");var n=r.getOwner(),i={x:0,y:0},a=!1,o=new fo;r.initTransform&&r.initTransform(o);var s=typeof t.filterKey=="function"?t.filterKey:Ve,u=typeof t.pinchSpeed=="number"?t.pinchSpeed:1,l=t.bounds,f=typeof t.maxZoom=="number"?t.maxZoom:Number.POSITIVE_INFINITY,d=typeof t.minZoom=="number"?t.minZoom:0,h=typeof t.boundsPadding=="number"?t.boundsPadding:.05,A=typeof t.zoomDoubleClickSpeed=="number"?t.zoomDoubleClickSpeed:ho,B=t.beforeWheel||Ve,D=t.beforeMouseDown||Ve,_=typeof t.zoomSpeed=="number"?t.zoomSpeed:mo,R=Tr(t.transformOrigin),k=t.enableTextSelection?co:uo;po(l),t.autocenter&&be();var y,b=0,I=0,z=0,C=null,U=new Date,M,N=!1,F=!1,P,X,ue,le,ce,q;"smoothScroll"in t&&!t.smoothScroll?q=go():q=lo(Et,st,t.smoothScroll);var O,j,te,Q=!1;Ie();var Te={dispose:lt,moveBy:ye,moveTo:qe,smoothMoveTo:Me,centerOn:Se,zoomTo:dt,zoomAbs:H,smoothZoom:ft,smoothZoomAbs:qr,showRectangle:rt,pause:pe,resume:ke,isPaused:Ge,getTransform:nt,getMinZoom:wt,setMinZoom:ot,getMaxZoom:K,setMaxZoom:At,getTransformOrigin:at,setTransformOrigin:yt,getZoomSpeed:it,setZoomSpeed:re};so(Te);var Le=typeof t.initialX=="number"?t.initialX:o.x,Be=typeof t.initialY=="number"?t.initialY:o.y,Ae=typeof t.initialZoom=="number"?t.initialZoom:o.scale;return(Le!=o.x||Be!=o.y||Ae!=o.scale)&&H(Le,Be,Ae),Te;function pe(){Ye(),Q=!0}function ke(){Q&&(Ie(),Q=!1)}function Ge(){return Q}function rt(c){var p=n.getBoundingClientRect(),g=_e(p.width,p.height),E=c.right-c.left,V=c.bottom-c.top;if(!Number.isFinite(E)||!Number.isFinite(V))throw new Error("Invalid rectangle");var $=g.x/E,G=g.y/V,ne=Math.min($,G);o.x=-(c.left+E/2)*ne+g.x/2,o.y=-(c.top+V/2)*ne+g.y/2,o.scale=ne}function _e(c,p){if(r.getScreenCTM){var g=r.getScreenCTM(),E=g.a,V=g.d,$=g.e,G=g.f;i.x=c*E-$,i.y=p*V-G}else i.x=c,i.y=p;return i}function be(){var c,p,g=0,E=0,V=Y();if(V)g=V.left,E=V.top,c=V.right-V.left,p=V.bottom-V.top;else{var $=n.getBoundingClientRect();c=$.width,p=$.height}var G=r.getBBox();if(!(G.width===0||G.height===0)){var ne=p/G.height,Ue=c/G.width,Re=Math.min(Ue,ne);o.x=-(G.left+G.width/2)*Re+c/2+g,o.y=-(G.top+G.height/2)*Re+p/2+E,o.scale=Re}}function nt(){return o}function wt(){return d}function ot(c){d=c}function K(){return f}function At(c){f=c}function at(){return R}function yt(c){R=Tr(c)}function it(){return _}function re(c){if(!Number.isFinite(c))throw new Error("Zoom speed should be a number");_=c}function Et(){return{x:o.x,y:o.y}}function qe(c,p){o.x=c,o.y=p,x(),Ne("pan"),fe()}function Ce(c,p){qe(o.x+c,o.y+p)}function x(){var c=Y();if(c){var p=!1,g=we(),E=c.left-g.right;return E>0&&(o.x+=E,p=!0),E=c.right-g.left,E<0&&(o.x+=E,p=!0),E=c.top-g.bottom,E>0&&(o.y+=E,p=!0),E=c.bottom-g.top,E<0&&(o.y+=E,p=!0),p}}function Y(){if(l){if(typeof l=="boolean"){var c=n.getBoundingClientRect(),p=c.width,g=c.height;return{left:p*h,top:g*h,right:p*(1-h),bottom:g*(1-h)}}return l}}function we(){var c=r.getBBox(),p=De(c.left,c.top);return{left:p.x,top:p.y,right:c.width*o.scale+p.x,bottom:c.height*o.scale+p.y}}function De(c,p){return{x:c*o.scale+o.x,y:p*o.scale+o.y}}function fe(){a=!0,y=window.requestAnimationFrame(ut)}function ge(c,p,g){if(It(c)||It(p)||It(g))throw new Error("zoom requires valid numbers");var E=o.scale*g;if(E<d){if(o.scale===d)return;g=d/o.scale}if(E>f){if(o.scale===f)return;g=f/o.scale}var V=_e(c,p);if(o.x=V.x-g*(V.x-o.x),o.y=V.y-g*(V.y-o.y),l&&h===1&&d===1)o.scale*=g,x();else{var $=x();$||(o.scale*=g)}Ne("zoom"),fe()}function H(c,p,g){var E=g/o.scale;ge(c,p,E)}function Se(c){var p=c.ownerSVGElement;if(!p)throw new Error("ui element is required to be within the scene");var g=c.getBoundingClientRect(),E=g.left+g.width/2,V=g.top+g.height/2,$=p.getBoundingClientRect(),G=$.width/2-E,ne=$.height/2-V;ye(G,ne,!0)}function Me(c,p){ye(c-o.x,p-o.y,!0)}function ye(c,p,g){if(!g)return Ce(c,p);O&&O.cancel();var E={x:0,y:0},V={x:c,y:p},$=0,G=0;O=Dt(E,V,{step:function(ne){Ce(ne.x-$,ne.y-G),$=ne.x,G=ne.y}})}function st(c,p){mt(),qe(c,p)}function lt(){Ye()}function Ie(){n.addEventListener("mousedown",$t,{passive:!1}),n.addEventListener("dblclick",Wt,{passive:!1}),n.addEventListener("touchstart",Ot,{passive:!1}),n.addEventListener("keydown",Pt,{passive:!1}),br.addWheelListener(n,Ht,{passive:!1}),fe()}function Ye(){br.removeWheelListener(n,Ht),n.removeEventListener("mousedown",$t),n.removeEventListener("keydown",Pt),n.removeEventListener("dblclick",Wt),n.removeEventListener("touchstart",Ot),y&&(window.cancelAnimationFrame(y),y=0),q.cancel(),Yt(),jt(),k.release(),Tt()}function ut(){a&&Xr()}function Xr(){a=!1,r.applyTransform(o),Ne("transform"),y=0}function Pt(c){var p=0,g=0,E=0;if(c.keyCode===38?g=1:c.keyCode===40?g=-1:c.keyCode===37?p=1:c.keyCode===39?p=-1:c.keyCode===189||c.keyCode===109?E=1:(c.keyCode===187||c.keyCode===107)&&(E=-1),!s(c,p,g,E)){if(p||g){c.preventDefault(),c.stopPropagation();var V=n.getBoundingClientRect(),$=Math.min(V.width,V.height),G=.05,ne=$*G*p,Ue=$*G*g;ye(ne,Ue)}if(E){var Re=Kt(E*100),$=R?He():Zr();dt($.x,$.y,Re)}}}function Zr(){var c=n.getBoundingClientRect();return{x:c.width/2,y:c.height/2}}function Ot(c){if(Wr(c),je(),c.touches.length===1)return Gr(c,c.touches[0]);c.touches.length===2&&(ce=Zt(c.touches[0],c.touches[1]),te=!0,zt())}function Wr(c){t.onTouch&&!t.onTouch(c)||(c.stopPropagation(),c.preventDefault())}function $r(c){je(),!(t.onDoubleClick&&!t.onDoubleClick(c))&&(c.preventDefault(),c.stopPropagation())}function Gr(c){I=new Date;var p=c.touches[0],g=Ee(p);M=g;var E=_e(g.x,g.y);P=E.x,X=E.y,ue=P,le=X,q.cancel(),zt()}function zt(){N||(N=!0,document.addEventListener("touchmove",Vt),document.addEventListener("touchend",ct),document.addEventListener("touchcancel",ct))}function Vt(c){if(c.touches.length===1){c.stopPropagation();var p=c.touches[0],g=Ee(p),E=_e(g.x,g.y),V=E.x-P,$=E.y-X;V!==0&&$!==0&&Qt(),P=E.x,X=E.y,ye(V,$)}else if(c.touches.length===2){te=!0;var G=c.touches[0],ne=c.touches[1],Ue=Zt(G,ne),Re=1+(Ue/ce-1)*u,Jt=Ee(G),er=Ee(ne);if(P=(Jt.x+er.x)/2,X=(Jt.y+er.y)/2,R){var g=He();P=g.x,X=g.y}dt(P,X,Re),ce=Ue,c.stopPropagation(),c.preventDefault()}}function je(){z&&(clearTimeout(z),z=0)}function Xt(c){if(t.onClick){je();var p=P-ue,g=X-le,E=Math.sqrt(p*p+g*g);E>5||(z=setTimeout(function(){z=0,t.onClick(c)},yr))}}function ct(c){if(je(),c.touches.length>0){var p=Ee(c.touches[0]),g=_e(p.x,p.y);P=g.x,X=g.y}else{var E=new Date;if(E-b<yr)if(R){var p=He();ft(p.x,p.y,A)}else ft(M.x,M.y,A);else E-I<Er&&Xt(c);b=E,Tt(),jt()}}function Zt(c,p){var g=c.clientX-p.clientX,E=c.clientY-p.clientY;return Math.sqrt(g*g+E*E)}function Wt(c){$r(c);var p=Ee(c);R&&(p=He()),ft(p.x,p.y,A)}function $t(c){if(je(),!D(c)){if(C=c,U=new Date,N)return c.stopPropagation(),!1;var p=c.button===1&&window.event!==null||c.button===0;if(p){q.cancel();var g=Ee(c),E=_e(g.x,g.y);return ue=P=E.x,le=X=E.y,document.addEventListener("mousemove",Gt),document.addEventListener("mouseup",qt),k.capture(c.target||c.srcElement),!1}}}function Gt(c){if(!N){Qt();var p=Ee(c),g=_e(p.x,p.y),E=g.x-P,V=g.y-X;P=g.x,X=g.y,ye(E,V)}}function qt(){var c=new Date;c-U<Er&&Xt(C),k.release(),Tt(),Yt()}function Yt(){document.removeEventListener("mousemove",Gt),document.removeEventListener("mouseup",qt),F=!1}function jt(){document.removeEventListener("touchmove",Vt),document.removeEventListener("touchend",ct),document.removeEventListener("touchcancel",ct),F=!1,te=!1,N=!1}function Ht(c){if(!B(c)){q.cancel();var p=c.deltaY;c.deltaMode>0&&(p*=100);var g=Kt(p);if(g!==1){var E=R?He():Ee(c);dt(E.x,E.y,g),c.preventDefault()}}}function Ee(c){var p,g,E=n.getBoundingClientRect();return p=c.clientX-E.left,g=c.clientY-E.top,{x:p,y:g}}function ft(c,p,g){var E=o.scale,V={scale:E},$={scale:g*E};q.cancel(),mt(),j=Dt(V,$,{step:function(G){H(c,p,G.scale)},done:Yr})}function qr(c,p,g){var E=o.scale,V={scale:E},$={scale:g};q.cancel(),mt(),j=Dt(V,$,{step:function(G){H(c,p,G.scale)}})}function He(){var c=n.getBoundingClientRect();return{x:c.width*R.x,y:c.height*R.y}}function dt(c,p,g){return q.cancel(),mt(),ge(c,p,g)}function mt(){j&&(j.cancel(),j=null)}function Kt(c){var p=Math.sign(c),g=Math.min(.25,Math.abs(_*c/128));return 1-p*g}function Qt(){F||(Ne("panstart"),F=!0,q.start())}function Tt(){F&&(te||q.stop(),Ne("panend"))}function Yr(){Ne("zoomend")}function Ne(c){Te.fire(c,Te)}}function Tr(e){if(e){if(typeof e=="object")return(!ze(e.x)||!ze(e.y))&&Sr(e),e;Sr()}}function Sr(e){throw console.error(e),new Error(["Cannot parse transform origin.","Some good examples:",'  "center center" can be achieved with {x: 0.5, y: 0.5}','  "top center" can be achieved with {x: 0.5, y: 0}','  "bottom right" can be achieved with {x: 1, y: 1}'].join(`
`))}function Ve(){}function po(e){var t=typeof e;if(!(t==="undefined"||t==="boolean")){var r=ze(e.left)&&ze(e.top)&&ze(e.bottom)&&ze(e.right);if(!r)throw new Error("Bounds object is not valid. It can be: undefined, boolean (true|false) or an object {left, top, right, bottom}")}}function ze(e){return Number.isFinite(e)}function It(e){return Number.isNaN?Number.isNaN(e):e!==e}function go(){return{start:Ve,stop:Ve,cancel:Ve}}function _o(){if(typeof document>"u")return;var e=document.getElementsByTagName("script");if(!e)return;for(var t,r=0;r<e.length;++r){var n=e[r];if(n.src&&n.src.match(/\bpanzoom(\.min)?\.js/)){t=n;break}}if(!t)return;var i=t.getAttribute("query");if(!i)return;var a=t.getAttribute("name")||"pz",o=Date.now();s();function s(){var f=document.querySelector(i);if(!f){var d=Date.now(),h=d-o;if(h<2e3){setTimeout(s,100);return}console.error("Cannot find the panzoom element",a);return}var A=u(t);console.log(A),window[a]=Vr(f,A)}function u(f){for(var d=f.attributes,h={},A=0;A<d.length;++A){var B=d[A],D=l(B);D&&(h[D.name]=D.value)}return h}function l(f){if(f.name){var d=f.name[0]==="p"&&f.name[1]==="z"&&f.name[2]==="-";if(d){var h=f.name.substr(3),A=JSON.parse(f.value);return{name:h,value:A}}}}}_o();const bo=sn(vo);const wo=e=>({}),xr=e=>({}),Ao=e=>({}),Dr=e=>({});function yo(e){let t,r,n,i,a,o,s,u,l,f,d,h,A,B;const D=e[6].left,_=Rt(D,e,e[5],Dr),R=e[6].right,k=Rt(R,e,e[5],xr);return d=new tt({props:{src:rn,class:"w-6 h-6 text-white"}}),{c(){t=T("div"),r=T("div"),n=T("div"),i=T("div"),_&&_.c(),a=Z(),o=T("div"),s=T("div"),k&&k.c(),u=Z(),l=T("div"),f=T("div"),de(d.$$.fragment),this.h()},l(y){t=S(y,"DIV",{class:!0});var b=L(t);r=S(b,"DIV",{class:!0});var I=L(r);n=S(I,"DIV",{class:!0});var z=L(n);i=S(z,"DIV",{style:!0});var C=L(i);_&&_.l(C),C.forEach(w),z.forEach(w),a=W(I),o=S(I,"DIV",{class:!0});var U=L(o);s=S(U,"DIV",{style:!0});var M=L(s);k&&k.l(M),M.forEach(w),U.forEach(w),I.forEach(w),u=W(b),l=S(b,"DIV",{class:!0});var N=L(l);f=S(N,"DIV",{class:!0});var F=L(f);me(d.$$.fragment,F),F.forEach(w),N.forEach(w),b.forEach(w),this.h()},h(){m(i,"style",e[2]),m(n,"class","left svelte-prhf1h"),m(s,"style",e[2]),m(o,"class","right svelte-prhf1h"),m(r,"class","w-full h-full grid place-items-center"),m(f,"class","w-12 h-12 rounded-full bg-black absolute top-1/2 -translate-x-1/2 left-1/2 grid place-items-center"),m(l,"class","handle relative shadow-lg svelte-prhf1h"),m(t,"class","container svelte-prhf1h"),rr(t,"--split-point",e[1]+"%")},m(y,b){oe(y,t,b),v(t,r),v(r,n),v(n,i),_&&_.m(i,null),v(r,a),v(r,o),v(o,s),k&&k.m(s,null),v(t,u),v(t,l),v(l,f),he(d,f,null),e[7](t),h=!0,A||(B=[Ct(e[4].call(null,r)),Ct(e[3].call(null,l)),se(l,"pointercancel",Mt(To))],A=!0)},p(y,[b]){_&&_.p&&(!h||b&32)&&Lt(_,D,y,y[5],h?kt(D,y[5],b,Ao):Bt(y[5]),Dr),(!h||b&4)&&m(i,"style",y[2]),k&&k.p&&(!h||b&32)&&Lt(k,R,y,y[5],h?kt(R,y[5],b,wo):Bt(y[5]),xr),(!h||b&4)&&m(s,"style",y[2]),b&2&&rr(t,"--split-point",y[1]+"%")},i(y){h||(J(_,y),J(k,y),J(d.$$.fragment,y),h=!0)},o(y){ee(_,y),ee(k,y),ee(d.$$.fragment,y),h=!1},d(y){y&&w(t),_&&_.d(y),k&&k.d(y),ve(d),e[7](null),A=!1,et(B)}}}function Eo(e,t,r){return Math.min(Math.max(e,t),r)}const To=()=>{};function So(e,t,r){let{$$slots:n={},$$scope:i}=t,a=null,o=50;function s(d){d.addEventListener("pointerdown",h=>{const A=h.clientX,B=o,D=document.body.style.cursor;document.body.style.cursor="col-resize";const _=k=>{const y=a?a.clientWidth:window.innerWidth,b=k.clientX-A,I=B+b/y*100;r(1,o=Eo(I,0,100))},R=()=>{document.body.style.cursor=D,window.removeEventListener("pointermove",_),window.removeEventListener("pointerup",R)};window.addEventListener("pointermove",_),window.addEventListener("pointerup",R)})}let u="";function l(d){const h=bo(d,{controller:{applyTransform:A=>{r(2,u=`transform: translate(${A.x}px, ${A.y}px) scale(${A.scale})`)},getOwner:()=>d}});return{destroy:()=>h.dispose()}}function f(d){xe[d?"unshift":"push"](()=>{a=d,r(0,a)})}return e.$$set=d=>{"$$scope"in d&&r(5,i=d.$$scope)},[a,o,u,s,l,i,n,f]}class xo extends Ze{constructor(t){super(),We(this,t,So,yo,$e,{})}}const Do=""+new URL("../assets/cat.58b560b7.jpg",import.meta.url).href,Io="data:image/avif;base64,AAAAHGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZgAAAOptZXRhAAAAAAAAACFoZGxyAAAAAAAAAABwaWN0AAAAAAAAAAAAAAAAAAAAAA5waXRtAAAAAAABAAAAImlsb2MAAAAAREAAAQABAAAAAAEOAAEAAAAAAAAApwAAACNpaW5mAAAAAAABAAAAFWluZmUCAAAAAAEAAGF2MDEAAAAAamlwcnAAAABLaXBjbwAAABNjb2xybmNseAACAAIABoAAAAAMYXYxQ4EEDAAAAAAUaXNwZQAAAAAAAAJyAAACcgAAABBwaXhpAAAAAAMICAgAAAAXaXBtYQAAAAAAAAABAAEEgYIDhAAAAK9tZGF0EgAKChkmZxnHggQEDQgylgERQAEEEEEA9NBi7JFlrqXV1mwMry34uIYK7WRdWYJ/ZZ0EIyWW8aLm92oz5LY0W+l2FiKsHpp4BB3Vrk+iwHuzboac7wmSHHHRWklZdZ2hpEAi4E31lf1tjXnXie8fh4lzApbqjH5Pj7ZN6761WygYVdc2zvJOsflFZstng6rQU/oulDZSO6fQWKvzpO9pseyXBLfms64=";function Ir(e,t,r){const n=e.slice();return n[31]=t[r],n}function Ro(e){let t,r,n,i,a,o,s,u,l,f,d,h,A,B,D,_,R,k,y=e[13],b=[];for(let I=0;I<y.length;I+=1)b[I]=Rr(Ir(e,y,I));return f=new tt({props:{src:on,class:"w-12 h-12 text-gray-400"}}),{c(){t=T("div"),r=T("div"),n=T("p"),i=ae("Select or Drop an Image to Start"),a=Z(),o=T("div");for(let I=0;I<b.length;I+=1)b[I].c();s=Z(),u=T("label"),l=T("div"),de(f.$$.fragment),d=Z(),h=T("span"),A=ae("Choose an Image"),B=Z(),D=T("input"),this.h()},l(I){t=S(I,"DIV",{class:!0});var z=L(t);r=S(z,"DIV",{class:!0});var C=L(r);n=S(C,"P",{class:!0});var U=L(n);i=ie(U,"Select or Drop an Image to Start"),U.forEach(w),a=W(C),o=S(C,"DIV",{class:!0});var M=L(o);for(let X=0;X<b.length;X+=1)b[X].l(M);s=W(M),u=S(M,"LABEL",{for:!0,class:!0});var N=L(u);l=S(N,"DIV",{class:!0});var F=L(l);me(f.$$.fragment,F),F.forEach(w),d=W(N),h=S(N,"SPAN",{class:!0});var P=L(h);A=ie(P,"Choose an Image"),P.forEach(w),B=W(N),D=S(N,"INPUT",{type:!0,class:!0,id:!0,accept:!0}),N.forEach(w),M.forEach(w),C.forEach(w),z.forEach(w),this.h()},h(){m(n,"class","text-2xl text-gray-500"),m(l,"class","grid place-items-center h-full w-full"),m(h,"class","sr-only"),m(D,"type","file"),m(D,"class","sr-only"),m(D,"id","image-input"),m(D,"accept","image/*"),m(u,"for","image-input"),m(u,"class","block spect-square h-24 w-24 object-cover rounded-md shadow-md border-2 border-white bg-white hover:bg-gray-100"),m(o,"class","flex gap-3 justify-center"),m(r,"class","grid gap-4"),m(t,"class","w-full h-full grid place-items-center")},m(I,z){oe(I,t,z),v(t,r),v(r,n),v(n,i),v(r,a),v(r,o);for(let C=0;C<b.length;C+=1)b[C]&&b[C].m(o,null);v(o,s),v(o,u),v(u,l),he(f,l,null),v(u,d),v(u,h),v(h,A),v(u,B),v(u,D),_=!0,R||(k=se(D,"input",e[17]),R=!0)},p(I,z){if(z[0]&270336){y=I[13];let C;for(C=0;C<y.length;C+=1){const U=Ir(I,y,C);b[C]?b[C].p(U,z):(b[C]=Rr(U),b[C].c(),b[C].m(o,s))}for(;C<b.length;C+=1)b[C].d(1);b.length=y.length}},i(I){_||(J(f.$$.fragment,I),_=!0)},o(I){ee(f.$$.fragment,I),_=!1},d(I){I&&w(t),kr(b,I),ve(f),R=!1,k()}}}function Lo(e){let t,r,n,i,a,o,s,u;return r=new xo({props:{$$slots:{right:[ko],left:[Bo]},$$scope:{ctx:e}}}),a=new tt({props:{src:an,class:"w-5 h-5 text-white"}}),{c(){t=T("div"),de(r.$$.fragment),n=Z(),i=T("button"),de(a.$$.fragment),this.h()},l(l){t=S(l,"DIV",{class:!0});var f=L(t);me(r.$$.fragment,f),n=W(f),i=S(f,"BUTTON",{class:!0,title:!0});var d=L(i);me(a.$$.fragment,d),d.forEach(w),f.forEach(w),this.h()},h(){m(i,"class","absolute top-0 right-0 m-4 p-2 bg-black bg-opacity-40 rounded-full"),m(i,"title","Close Image & Reset"),m(t,"class","w-full h-full relative")},m(l,f){oe(l,t,f),he(r,t,null),v(t,n),v(t,i),he(a,i,null),o=!0,s||(u=se(i,"click",e[20]),s=!0)},p(l,f){const d={};f[0]&8169|f[1]&8&&(d.$$scope={dirty:f,ctx:l}),r.$set(d)},i(l){o||(J(r.$$.fragment,l),J(a.$$.fragment,l),o=!0)},o(l){ee(r.$$.fragment,l),ee(a.$$.fragment,l),o=!1},d(l){l&&w(t),ve(r),ve(a),s=!1,u()}}}function Rr(e){let t,r,n,i,a;function o(){return e[21](e[31])}return{c(){t=T("button"),r=T("img"),this.h()},l(s){t=S(s,"BUTTON",{class:!0});var u=L(t);r=S(u,"IMG",{class:!0,src:!0,alt:!0}),u.forEach(w),this.h()},h(){m(r,"class","aspect-square h-24 w-24 object-cover rounded-md shadow-md border-2 border-white"),Nt(r.src,n=e[31])||m(r,"src",n),m(r,"alt",""),m(t,"class","hover:opacity-75 transition-opacity")},m(s,u){oe(s,t,u),v(t,r),i||(a=se(t,"click",o),i=!0)},p(s,u){e=s},d(s){s&&w(t),i=!1,a()}}}function Bo(e){let t,r,n;return{c(){t=T("img"),this.h()},l(i){t=S(i,"IMG",{slot:!0,src:!0,alt:!0,style:!0,class:!0}),this.h()},h(){m(t,"slot","left"),Nt(t.src,r=e[3].src)||m(t,"src",r),m(t,"alt",""),m(t,"style",n=`width: ${e[0]}px; height: ${e[11]}px`),m(t,"class","pixelated max-w-none svelte-1gkt69q")},m(i,a){oe(i,t,a)},p(i,a){a[0]&8&&!Nt(t.src,r=i[3].src)&&m(t,"src",r),a[0]&2049&&n!==(n=`width: ${i[0]}px; height: ${i[11]}px`)&&m(t,"style",n)},d(i){i&&w(t)}}}function ko(e){let t,r,n,i,a;return{c(){t=T("canvas"),this.h()},l(o){t=S(o,"CANVAS",{class:!0,slot:!0,style:!0,width:!0,height:!0,"aria-label":!0}),L(t).forEach(w),this.h()},h(){m(t,"class","pixelated svelte-1gkt69q"),m(t,"slot","right"),m(t,"style",r=`width: ${e[0]}px; height: ${e[11]}px`),m(t,"width",e[0]),m(t,"height",e[11]),m(t,"aria-label","Dithered Image")},m(o,s){oe(o,t,s),e[19](t),i||(a=Ct(n=In.call(null,t,{image:e[3],threshold:e[5],noiseIntensity:e[6],monochrome:e[7],colorLight:e[8],colorDark:e[9],mode:e[12],width:e[0],height:e[11]})),i=!0)},p(o,s){s[0]&2049&&r!==(r=`width: ${o[0]}px; height: ${o[11]}px`)&&m(t,"style",r),s[0]&1&&m(t,"width",o[0]),s[0]&2048&&m(t,"height",o[11]),n&&en(n.update)&&s[0]&7145&&n.update.call(null,{image:o[3],threshold:o[5],noiseIntensity:o[6],monochrome:o[7],colorLight:o[8],colorDark:o[9],mode:o[12],width:o[0],height:o[11]})},d(o){o&&w(t),e[19](null),i=!1,a()}}}function Lr(e){let t,r,n;function i(o){e[23](o)}let a={label:"Bayer Level ("+e[2]+")",min:0,max:5,step:1};return e[2]!==void 0&&(a.value=e[2]),t=new Ut({props:a}),xe.push(()=>Fe(t,"value",i)),{c(){de(t.$$.fragment)},l(o){me(t.$$.fragment,o)},m(o,s){he(t,o,s),n=!0},p(o,s){const u={};s[0]&4&&(u.label="Bayer Level ("+o[2]+")"),!r&&s[0]&4&&(r=!0,u.value=o[2],Pe(()=>r=!1)),t.$set(u)},i(o){n||(J(t.$$.fragment,o),n=!0)},o(o){ee(t.$$.fragment,o),n=!1},d(o){ve(t,o)}}}function Br(e){let t,r,n,i,a,o,s,u,l,f,d,h,A,B;return{c(){t=T("fieldset"),r=T("div"),n=T("input"),i=Z(),a=T("label"),o=ae("Light"),s=Z(),u=T("div"),l=T("input"),f=Z(),d=T("label"),h=ae("Dark"),this.h()},l(D){t=S(D,"FIELDSET",{});var _=L(t);r=S(_,"DIV",{class:!0});var R=L(r);n=S(R,"INPUT",{type:!0,name:!0,id:!0}),i=W(R),a=S(R,"LABEL",{for:!0,class:!0});var k=L(a);o=ie(k,"Light"),k.forEach(w),R.forEach(w),s=W(_),u=S(_,"DIV",{class:!0});var y=L(u);l=S(y,"INPUT",{type:!0,name:!0,id:!0}),f=W(y),d=S(y,"LABEL",{for:!0,class:!0});var b=L(d);h=ie(b,"Dark"),b.forEach(w),y.forEach(w),_.forEach(w),this.h()},h(){m(n,"type","color"),m(n,"name","color-light"),m(n,"id","color-light"),m(a,"for","color-light"),m(a,"class","font-medium text-gray-900"),m(r,"class","flex gap-3"),m(l,"type","color"),m(l,"name","color-dark"),m(l,"id","color-dark"),m(d,"for","color-dark"),m(d,"class","font-medium text-gray-900"),m(u,"class","flex gap-3")},m(D,_){oe(D,t,_),v(t,r),v(r,n),Oe(n,e[8]),v(r,i),v(r,a),v(a,o),v(t,s),v(t,u),v(u,l),Oe(l,e[9]),v(u,f),v(u,d),v(d,h),A||(B=[se(n,"input",e[27]),se(l,"input",e[28])],A=!0)},p(D,_){_[0]&256&&Oe(n,D[8]),_[0]&512&&Oe(l,D[9])},d(D){D&&w(t),A=!1,et(B)}}}function Co(e){let t,r,n;return t=new tt({props:{src:nn,class:"w-4 h-4"}}),{c(){de(t.$$.fragment),r=ae(`
				Save`)},l(i){me(t.$$.fragment,i),r=ie(i,`
				Save`)},m(i,a){he(t,i,a),oe(i,r,a),n=!0},p:Je,i(i){n||(J(t.$$.fragment,i),n=!0)},o(i){ee(t.$$.fragment,i),n=!1},d(i){ve(t,i),i&&w(r)}}}function Mo(e){let t,r,n,i,a,o,s,u,l,f,d,h,A,B,D,_,R,k,y,b,I,z,C,U,M,N,F,P,X,ue,le,ce,q,O,j,te,Q,Te,Le,Be,Ae,pe,ke,Ge,rt;const _e=[Lo,Ro],be=[];function nt(x,Y){return x[3]?0:1}a=nt(e),o=be[a]=_e[a](e);function wt(x){e[22](x)}let ot={label:"Dither Mode",options:e[15]};e[1]!==void 0&&(ot.selected=e[1]),B=new mn({props:ot}),xe.push(()=>Fe(B,"selected",wt));let K=e[1]==="bayer"&&Lr(e);function At(x){e[24](x)}let at={label:"Threshold ("+e[5]+")",min:0,max:1,step:.01};e[5]!==void 0&&(at.value=e[5]),k=new Ut({props:at}),xe.push(()=>Fe(k,"value",At));function yt(x){e[25](x)}let it={label:"Noise Intensity ("+e[6]+")",min:0,max:1.5,step:.01};e[6]!==void 0&&(it.value=e[6]),I=new Ut({props:it}),xe.push(()=>Fe(I,"value",yt));let re=e[7]&&Br(e);function Et(x){e[29](x)}function qe(x){e[30](x)}let Ce={};return e[0]!==void 0&&(Ce.width=e[0]),e[4]!==void 0&&(Ce.aspectRatio=e[4]),Q=new cn({props:Ce}),xe.push(()=>Fe(Q,"width",Et)),xe.push(()=>Fe(Q,"aspectRatio",qe)),pe=new Bn({props:{disabled:!e[3],$$slots:{default:[Co]},$$scope:{ctx:e}}}),pe.$on("click",e[14]),{c(){t=Z(),r=Z(),n=T("main"),i=T("section"),o.c(),s=Z(),u=T("aside"),l=T("section"),f=T("div"),d=T("h2"),h=ae("Dithering Options"),A=Z(),de(B.$$.fragment),_=Z(),K&&K.c(),R=Z(),de(k.$$.fragment),b=Z(),de(I.$$.fragment),C=Z(),U=T("div"),M=T("div"),N=T("input"),F=Z(),P=T("div"),X=T("label"),ue=ae("Monochrome"),le=Z(),re&&re.c(),ce=Z(),q=T("div"),O=T("h2"),j=ae("Output Options"),te=Z(),de(Q.$$.fragment),Be=Z(),Ae=T("footer"),de(pe.$$.fragment),this.h()},l(x){Jr("svelte-1hm2pfs",document.head).forEach(w),t=W(x),r=W(x),n=S(x,"MAIN",{class:!0});var we=L(n);i=S(we,"SECTION",{class:!0});var De=L(i);o.l(De),De.forEach(w),s=W(we),u=S(we,"ASIDE",{class:!0});var fe=L(u);l=S(fe,"SECTION",{class:!0});var ge=L(l);f=S(ge,"DIV",{class:!0});var H=L(f);d=S(H,"H2",{class:!0});var Se=L(d);h=ie(Se,"Dithering Options"),Se.forEach(w),A=W(H),me(B.$$.fragment,H),_=W(H),K&&K.l(H),R=W(H),me(k.$$.fragment,H),b=W(H),me(I.$$.fragment,H),C=W(H),U=S(H,"DIV",{class:!0});var Me=L(U);M=S(Me,"DIV",{class:!0});var ye=L(M);N=S(ye,"INPUT",{type:!0,id:!0,class:!0}),ye.forEach(w),F=W(Me),P=S(Me,"DIV",{class:!0});var st=L(P);X=S(st,"LABEL",{for:!0,class:!0});var lt=L(X);ue=ie(lt,"Monochrome"),lt.forEach(w),st.forEach(w),Me.forEach(w),le=W(H),re&&re.l(H),H.forEach(w),ce=W(ge),q=S(ge,"DIV",{class:!0});var Ie=L(q);O=S(Ie,"H2",{class:!0});var Ye=L(O);j=ie(Ye,"Output Options"),Ye.forEach(w),te=W(Ie),me(Q.$$.fragment,Ie),Ie.forEach(w),ge.forEach(w),Be=W(fe),Ae=S(fe,"FOOTER",{class:!0});var ut=L(Ae);me(pe.$$.fragment,ut),ut.forEach(w),fe.forEach(w),we.forEach(w),this.h()},h(){document.title="Dithering",m(i,"class","flex-1 overflow-hidden select-none"),m(d,"class","text-base font-semibold leading-7 text-black mb-2"),m(N,"type","checkbox"),m(N,"id","monochrome"),m(N,"class","h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600"),m(M,"class","flex h-6 items-center"),m(X,"for","monochrome"),m(X,"class","font-medium text-gray-900"),m(P,"class","ml-3 text-sm leading-6"),m(U,"class","relative flex items-start"),m(f,"class","grid gap-3"),m(O,"class","text-base font-semibold leading-7 text-black mb-4"),m(q,"class","border-t border-gray-100 py-4"),m(l,"class","grid gap-5 overflow-y-auto overflow-x-visible py-8 px-4"),m(Ae,"class","py-4 px-4 flex-shrink-0"),m(u,"class","bg-white w-full md:max-w-md border-t md:border-t-0 md:border-l border-l-0 border-gray-100 z-50 overflow-y-hidden md:h-full flex-1 shadow-lg flex flex-col divide-y divide-gray-200 justify-between"),m(n,"class","w-screen max-w-screen h-screen max-h-screen flex md:flex-row flex-col bg-gray-300")},m(x,Y){oe(x,t,Y),oe(x,r,Y),oe(x,n,Y),v(n,i),be[a].m(i,null),v(n,s),v(n,u),v(u,l),v(l,f),v(f,d),v(d,h),v(f,A),he(B,f,null),v(f,_),K&&K.m(f,null),v(f,R),he(k,f,null),v(f,b),he(I,f,null),v(f,C),v(f,U),v(U,M),v(M,N),N.checked=e[7],v(U,F),v(U,P),v(P,X),v(X,ue),v(f,le),re&&re.m(f,null),v(l,ce),v(l,q),v(q,O),v(O,j),v(q,te),he(Q,q,null),v(u,Be),v(u,Ae),he(pe,Ae,null),ke=!0,Ge||(rt=[se(document.body,"drop",Mt(e[16])),se(document.body,"dragover",Mt(No)),se(N,"change",e[26])],Ge=!0)},p(x,Y){let we=a;a=nt(x),a===we?be[a].p(x,Y):(or(),ee(be[we],1,1,()=>{be[we]=null}),nr(),o=be[a],o?o.p(x,Y):(o=be[a]=_e[a](x),o.c()),J(o,1),o.m(i,null));const De={};!D&&Y[0]&2&&(D=!0,De.selected=x[1],Pe(()=>D=!1)),B.$set(De),x[1]==="bayer"?K?(K.p(x,Y),Y[0]&2&&J(K,1)):(K=Lr(x),K.c(),J(K,1),K.m(f,R)):K&&(or(),ee(K,1,1,()=>{K=null}),nr());const fe={};Y[0]&32&&(fe.label="Threshold ("+x[5]+")"),!y&&Y[0]&32&&(y=!0,fe.value=x[5],Pe(()=>y=!1)),k.$set(fe);const ge={};Y[0]&64&&(ge.label="Noise Intensity ("+x[6]+")"),!z&&Y[0]&64&&(z=!0,ge.value=x[6],Pe(()=>z=!1)),I.$set(ge),Y[0]&128&&(N.checked=x[7]),x[7]?re?re.p(x,Y):(re=Br(x),re.c(),re.m(f,null)):re&&(re.d(1),re=null);const H={};!Te&&Y[0]&1&&(Te=!0,H.width=x[0],Pe(()=>Te=!1)),!Le&&Y[0]&16&&(Le=!0,H.aspectRatio=x[4],Pe(()=>Le=!1)),Q.$set(H);const Se={};Y[0]&8&&(Se.disabled=!x[3]),Y[1]&8&&(Se.$$scope={dirty:Y,ctx:x}),pe.$set(Se)},i(x){ke||(J(o),J(B.$$.fragment,x),J(K),J(k.$$.fragment,x),J(I.$$.fragment,x),J(Q.$$.fragment,x),J(pe.$$.fragment,x),ke=!0)},o(x){ee(o),ee(B.$$.fragment,x),ee(K),ee(k.$$.fragment,x),ee(I.$$.fragment,x),ee(Q.$$.fragment,x),ee(pe.$$.fragment,x),ke=!1},d(x){x&&w(t),x&&w(r),x&&w(n),be[a].d(),ve(B),K&&K.d(),ve(k),ve(I),re&&re.d(),ve(Q),ve(pe),Ge=!1,et(rt)}}}const No=()=>{};function Uo(e,t,r){let n,i,a;const o=[Do,Io];let s=.5,u=.3,l=!1,f="#ede6cc",d="#21263f",h=null,A=600,B="blue_noise",D=3,_=null;async function R(){h&&await kn(h,"dithered","png")}const k=[{name:"Bayer",value:"bayer"},{name:"Blue Noise",value:"blue_noise"},{name:"White Noise",value:"white_noise"}];async function y(O){var te;const j=(te=O.dataTransfer)==null?void 0:te.files[0];if(j){if(!j.type.startsWith("image/")){alert("Please drop an image file");return}try{r(3,_=await fr(j))}catch(Q){alert("Failed to load image"),console.error(Q)}}}async function b(O){const j=O.target.files[0];if(j)try{r(3,_=await fr(j))}catch(te){alert("Failed to load image"),console.error(te)}}async function I(O){const j=new Image;j.onload=()=>{r(3,_=j)},j.src=O}function z(O){xe[O?"unshift":"push"](()=>{h=O,r(10,h)})}const C=()=>r(3,_=null),U=O=>I(O);function M(O){B=O,r(1,B)}function N(O){D=O,r(2,D)}function F(O){s=O,r(5,s)}function P(O){u=O,r(6,u)}function X(){l=this.checked,r(7,l)}function ue(){f=this.value,r(8,f)}function le(){d=this.value,r(9,d)}function ce(O){A=O,r(0,A)}function q(O){a=O,r(4,a),r(3,_)}return e.$$.update=()=>{e.$$.dirty[0]&6&&r(12,n=B==="bayer"?`bayer_${D}`:B),e.$$.dirty[0]&8&&r(4,a=_!=null&&_.width&&(_!=null&&_.height)?_.width/_.height:1),e.$$.dirty[0]&17&&r(11,i=A/a)},[A,B,D,_,a,s,u,l,f,d,h,i,n,o,R,k,y,b,I,z,C,U,M,N,F,P,X,ue,le,ce,q]}class zo extends Ze{constructor(t){super(),We(this,t,Uo,Mo,$e,{},null,[-1,-1])}}export{zo as component};
