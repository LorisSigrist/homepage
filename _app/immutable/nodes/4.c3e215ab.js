var xt=Object.defineProperty;var en=(t,e,n)=>e in t?xt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var be=(t,e,n)=>(en(t,typeof e!="symbol"?e+"":e,n),n);import{S as le,i as ae,s as ue,k as y,q as $,a as P,y as W,l as T,m as k,r as q,h as g,c as C,z as V,n as d,b as N,G as v,A as H,M as Q,g as M,d as O,B as Y,O as Ce,C as we,D as Ee,E as ye,F as Te,P as tn,Q as ge,p as et,R as Me,T as tt,w as Z,U as Be,u as je,H as oe,V as nn,W as rn,X as ut,Y as Ge,Z as sn,_ as ee,$ as te,a0 as on,v as Fe,f as ze,a1 as it,o as ln,L as Pe,e as ke}from"../chunks/index.22137adf.js";import{I as Se,L as an,A as un,C as ft,b as ct,a as fn,P as cn,X as dn,c as hn}from"../chunks/Icon.4b54971e.js";function mn(){return{title:"Dithering",author:"Loris Sigrist",description:"Dither your Images right in the browser!"}}const Qi=Object.freeze(Object.defineProperty({__proto__:null,load:mn},Symbol.toStringTag,{value:"Module"}));function pn(t){let e,n,i,r,o,s,l,a,u,f,c,m,b,p,E,S,h,_,w,A,I,X,R,U,F,G;return b=new Se({props:{src:an,class:"w-4 h-4",solid:!0}}),{c(){e=y("fieldset"),n=y("div"),i=y("label"),r=$("Width"),o=P(),s=y("div"),l=y("input"),a=P(),u=y("div"),f=$("px"),c=P(),m=y("span"),W(b.$$.fragment),p=P(),E=y("div"),S=y("label"),h=$("Height"),_=P(),w=y("div"),A=y("input"),I=P(),X=y("div"),R=$("px"),this.h()},l(B){e=T(B,"FIELDSET",{class:!0});var z=k(e);n=T(z,"DIV",{class:!0});var ne=k(n);i=T(ne,"LABEL",{for:!0,class:!0});var x=k(i);r=q(x,"Width"),x.forEach(g),o=C(ne),s=T(ne,"DIV",{class:!0});var re=k(s);l=T(re,"INPUT",{name:!0,id:!0,type:!0,min:!0,max:!0,step:!0,class:!0,placeholder:!0}),a=C(re),u=T(re,"DIV",{class:!0});var ce=k(u);f=q(ce,"px"),ce.forEach(g),re.forEach(g),ne.forEach(g),c=C(z),m=T(z,"SPAN",{class:!0});var de=k(m);V(b.$$.fragment,de),de.forEach(g),p=C(z),E=T(z,"DIV",{class:!0});var J=k(E);S=T(J,"LABEL",{for:!0,class:!0});var he=k(S);h=q(he,"Height"),he.forEach(g),_=C(J),w=T(J,"DIV",{class:!0});var ie=k(w);A=T(ie,"INPUT",{type:!0,id:!0,name:!0,min:!0,max:!0,step:!0,class:!0,placeholder:!0}),I=C(ie),X=T(ie,"DIV",{class:!0});var L=k(X);R=q(L,"px"),L.forEach(g),ie.forEach(g),J.forEach(g),z.forEach(g),this.h()},h(){d(i,"for","width-"+t[8]),d(i,"class","block text-sm font-medium leading-6 text-gray-900"),d(l,"name","width"),d(l,"id","width-"+t[8]),d(l,"type","number"),d(l,"min",t[3]),d(l,"max",t[1]),d(l,"step","1"),l.value=t[0],d(l,"class","block w-full rounded-md border-0 py-1.5 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"),d(l,"placeholder","600"),d(u,"class","pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400"),d(s,"class","relative mt-2 rounded-md shadow-sm"),d(n,"class","w-full"),d(m,"class","text-gray-500 pb-2 cursor-not-allowed"),d(S,"for","height-"+t[9]),d(S,"class","block text-sm font-medium leading-6 text-gray-900"),d(A,"type","number"),d(A,"id","height-"+t[9]),d(A,"name","height"),d(A,"min",t[4]),d(A,"max",t[2]),d(A,"step","1"),A.value=t[5],d(A,"class","block w-full rounded-md border-0 py-1.5 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"),d(A,"placeholder","340"),d(X,"class","pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400"),d(w,"class","relative mt-2 rounded-md shadow-sm"),d(E,"class","w-full"),d(e,"class","flex gap-3 items-end justify-between")},m(B,z){N(B,e,z),v(e,n),v(n,i),v(i,r),v(n,o),v(n,s),v(s,l),v(s,a),v(s,u),v(u,f),v(e,c),v(e,m),H(b,m,null),v(e,p),v(e,E),v(E,S),v(S,h),v(E,_),v(E,w),v(w,A),v(w,I),v(w,X),v(X,R),U=!0,F||(G=[Q(l,"input",t[6]),Q(A,"input",t[7])],F=!0)},p(B,[z]){(!U||z&8)&&d(l,"min",B[3]),(!U||z&2)&&d(l,"max",B[1]),(!U||z&1&&l.value!==B[0])&&(l.value=B[0]),(!U||z&16)&&d(A,"min",B[4]),(!U||z&4)&&d(A,"max",B[2]),(!U||z&32&&A.value!==B[5])&&(A.value=B[5])},i(B){U||(M(b.$$.fragment,B),U=!0)},o(B){O(b.$$.fragment,B),U=!1},d(B){B&&g(e),Y(b),F=!1,Ce(G)}}}function dt(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}function gn(t,e,n){let i,{width:r}=e,{aspectRatio:o}=e,{maxWidth:s=null}=e,{maxHeight:l=null}=e,{minWidth:a=null}=e,{minHeight:u=null}=e;function f(p){const E=p.target.value;E&&(a!==null&&E<a||s!==null&&E>s||n(0,r=E))}function c(p){const E=p.target.value;E&&(u!==null&&E<u||l!==null&&E>l||n(0,r=Math.round(o*E)))}let m=dt(),b=dt();return t.$$set=p=>{"width"in p&&n(0,r=p.width),"aspectRatio"in p&&n(10,o=p.aspectRatio),"maxWidth"in p&&n(1,s=p.maxWidth),"maxHeight"in p&&n(2,l=p.maxHeight),"minWidth"in p&&n(3,a=p.minWidth),"minHeight"in p&&n(4,u=p.minHeight)},t.$$.update=()=>{t.$$.dirty&1025&&n(5,i=Math.round(r/o))},[r,s,l,a,u,i,f,c,m,b,o]}class Xt extends le{constructor(e){super(),ae(this,e,gn,pn,ue,{width:0,aspectRatio:10,maxWidth:1,maxHeight:2,minWidth:3,minHeight:4})}}var _n="precision highp float;attribute vec2 position;varying vec2 fragCoord;void main(){fragCoord.x=position.x*0.5+0.5;fragCoord.y=position.y*0.5+0.5;gl_Position=vec4(position,0.0,1.0);}",vn="precision highp float;varying vec2 fragCoord;uniform sampler2D uSampler;uniform sampler2D uNoiseSampler;uniform sampler2D uPaletteSampler;uniform vec2 uNoiseSamplerSize;uniform float uNoise;uniform vec2 uSize;vec3 samplePalette(vec3 og_color){vec3 scaledColor=floor(og_color*255.0);vec3 quantized_color=floor(scaledColor/16.0)*16.0;float mappingI=floor((floor(quantized_color.r)+floor(quantized_color.g*16.0)+floor(quantized_color.b*16.0*16.0))/16.0);float mappedX=floor(mappingI/64.0);float mappedY=floor(mod(mappingI,64.0));float halfPixel=0.5/64.0;vec2 uv=vec2((mappedX/64.0)+halfPixel,1.0-(mappedY/64.0)-halfPixel);return texture2D(uPaletteSampler,uv).rgb;}void main(void){vec2 imgPixel=vec2(fragCoord.x*uSize.x,fragCoord.y*uSize.y);vec2 noisePixel=vec2(mod(imgPixel.x,uNoiseSamplerSize.x),mod(imgPixel.y,uNoiseSamplerSize.y));vec2 noiseUV=vec2(noisePixel.x/uNoiseSamplerSize.x,noisePixel.y/uNoiseSamplerSize.y);float noise=(texture2D(uNoiseSampler,noiseUV).r-0.5)*2.0*uNoise;vec4 color=texture2D(uSampler,fragCoord);color.r=clamp(color.r+noise,0.0,1.0);color.g=clamp(color.g+noise,0.0,1.0);color.b=clamp(color.b+noise,0.0,1.0);color.rgb=samplePalette(color.rgb);gl_FragColor=color;}";function ht(t){return(t&t-1)===0}function bn(t,e,n){const i=mt(t,t.VERTEX_SHADER,e),r=mt(t,t.FRAGMENT_SHADER,n),o=t.createProgram();if(!o)throw new Error("Failed to create shader program");if(t.attachShader(o,i),t.attachShader(o,r),t.linkProgram(o),!t.getProgramParameter(o,t.LINK_STATUS))throw Error(`Unable to initialize the shader program: ${t.getProgramInfoLog(o)}`);return o}function mt(t,e,n){const i=t.createShader(e);if(!i)throw new Error("Failed to create shader");if(t.shaderSource(i,n),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS))throw Error(`An error occurred compiling the shaders: ${t.getShaderInfoLog(i)}`);return i}function An(t){const e=t.createBuffer(),n=t.createBuffer(),i=[-1,1,-1,-1,1,-1,1,1],r=[3,2,1,3,1,0];return t.bindBuffer(t.ARRAY_BUFFER,e),t.bufferData(t.ARRAY_BUFFER,new Float32Array(i),t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(r),t.STATIC_DRAW),{vertex_buffer:e,index_buffer:n}}function Qe(t,e,n){const i=t.createTexture();if(!i)throw new Error("Failed to create texture");return t.bindTexture(t.TEXTURE_2D,i),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),ht(e.width)&&ht(e.height)?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,n)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,n)),i}function wn(t,e){let n=e;const i=t.getContext("webgl",{preserveDrawingBuffer:!0});if(!i){alert("WebGL not supported");return}i.clearColor(0,0,0,1),i.clear(i.COLOR_BUFFER_BIT);const r=bn(i,_n,vn),{vertex_buffer:o,index_buffer:s}=An(i);i.useProgram(r);const l=i.getAttribLocation(r,"position");i.vertexAttribPointer(l,2,i.FLOAT,!1,0,0),i.enableVertexAttribArray(l);const a=i.getUniformLocation(r,"uSampler"),u=i.getUniformLocation(r,"uNoiseSampler"),f=i.getUniformLocation(r,"uNoise"),c=i.getUniformLocation(r,"uSize"),m=i.getUniformLocation(r,"uNoiseSamplerSize"),b=i.getUniformLocation(r,"uPaletteSampler");let p;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!0);const E=()=>{p&&i.deleteTexture(p),p=Qe(i,n.image,i.LINEAR)};E();let S,h,_=null;const w=()=>{S&&i.deleteTexture(S),S=Qe(i,n.thresholdMap,i.NEAREST),h={width:n.thresholdMap.width,height:n.thresholdMap.height}};w();let A;const I=()=>{A&&i.deleteTexture(A),A=Qe(i,n.palette,i.NEAREST)};I();const X=()=>{i.viewport(0,0,n.output_width,n.output_height),i.clearColor(0,0,0,1),i.clear(i.COLOR_BUFFER_BIT),i.bindBuffer(i.ARRAY_BUFFER,o),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,s),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,p),i.uniform1i(a,0),i.activeTexture(i.TEXTURE1),i.bindTexture(i.TEXTURE_2D,S),i.uniform1i(u,1),i.activeTexture(i.TEXTURE2),i.bindTexture(i.TEXTURE_2D,A),i.uniform1i(b,2),i.uniform2f(m,h.width,h.height),i.uniform1f(f,n.noiseIntensity),i.uniform2f(c,n.output_width,n.output_height),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT),i.drawElements(i.TRIANGLES,6,i.UNSIGNED_SHORT,0)};function R(){_=requestAnimationFrame(()=>{X(),_=null})}return R(),{update(U){const F=n.image!==U.image,G=n.thresholdMap!==U.thresholdMap,B=n.palette!==U.palette;n=U,F&&E(),G&&w(),B&&I(),R()},destroy(){_!==null&&cancelAnimationFrame(_)}}}function En(t){let e,n,i,r,o;const s=t[3].default,l=we(s,t,t[2],null);return{c(){e=y("button"),l&&l.c(),this.h()},l(a){e=T(a,"BUTTON",{type:!0,class:!0});var u=k(e);l&&l.l(u),u.forEach(g),this.h()},h(){e.disabled=t[0],d(e,"type","button"),d(e,"class",n=t[1][t[0]?"disabled":"normal"]+" rounded-md px-2.5 py-1.5 text-sm font-semibold focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 flex items-center justify-center gap-2")},m(a,u){N(a,e,u),l&&l.m(e,null),i=!0,r||(o=Q(e,"click",t[4]),r=!0)},p(a,[u]){l&&l.p&&(!i||u&4)&&Ee(l,s,a,a[2],i?Te(s,a[2],u,null):ye(a[2]),null),(!i||u&1)&&(e.disabled=a[0]),(!i||u&1&&n!==(n=a[1][a[0]?"disabled":"normal"]+" rounded-md px-2.5 py-1.5 text-sm font-semibold focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 flex items-center justify-center gap-2"))&&d(e,"class",n)},i(a){i||(M(l,a),i=!0)},o(a){O(l,a),i=!1},d(a){a&&g(e),l&&l.d(a),r=!1,o()}}}function yn(t,e,n){let{$$slots:i={},$$scope:r}=e,{disabled:o=!1}=e;const s={normal:"bg-indigo-600 text-white shadow-sm hover:bg-indigo-500",disabled:"bg-gray-200 text-gray-400 shadow-none cursor-not-allowed"};function l(a){tn.call(this,t,a)}return t.$$set=a=>{"disabled"in a&&n(0,o=a.disabled),"$$scope"in a&&n(2,r=a.$$scope)},[o,s,r,i,l]}class Tn extends le{constructor(e){super(),ae(this,e,yn,En,ue,{disabled:0})}}async function kn(t,e,n="png"){const i=new OffscreenCanvas(t.width,t.height),r=i.getContext("2d");if(!r)return;r.drawImage(t,0,0,t.width,t.height);const o=await i.convertToBlob({type:"image/"+n,quality:1}),s=URL.createObjectURL(o),l=document.createElement("a");l.download=`${e}.${n}`,l.href=s,l.click(),l.remove(),URL.revokeObjectURL(s)}function pt(t){return new Promise((e,n)=>{t.type.startsWith("image/")||n(new Error("Not an image file"));const i=new FileReader;i.onload=r=>{if(typeof i.result!="string")return;const o=new Image;o.onload=()=>{e(o)},o.onerror=s=>{n(s)},o.src=i.result},i.onerror=r=>{n(r)},i.readAsDataURL(t)})}function Sn(t){const n=new OffscreenCanvas(t.width,t.height).getContext("2d");if(!n)throw new Error("Could not get canvas context");return n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height)}function In(t){const e=parseInt(t.slice(1,3),16),n=parseInt(t.slice(3,5),16),i=parseInt(t.slice(5,7),16);return[e,n,i]}var Dn=class extends EventTarget{dispatchTypedEvent(t,e){return super.dispatchEvent(e)}};class pe{constructor(e){this.id=-1,this.nativePointer=e,this.pageX=e.pageX,this.pageY=e.pageY,this.clientX=e.clientX,this.clientY=e.clientY,self.Touch&&e instanceof Touch?this.id=e.identifier:Le(e)&&(this.id=e.pointerId)}getCoalesced(){if("getCoalescedEvents"in this.nativePointer){const e=this.nativePointer.getCoalescedEvents().map(n=>new pe(n));if(e.length>0)return e}return[this]}}const Le=t=>"pointerId"in t,Je=t=>"changedTouches"in t,gt=()=>{};class Ln{constructor(e,{start:n=()=>!0,move:i=gt,end:r=gt,rawUpdates:o=!1,avoidPointerEvents:s=!1}={}){this._element=e,this.startPointers=[],this.currentPointers=[],this._excludeFromButtonsCheck=new Set,this._pointerStart=l=>{if(Le(l)&&l.buttons===0)this._excludeFromButtonsCheck.add(l.pointerId);else if(!(l.buttons&1))return;const a=new pe(l);this.currentPointers.some(u=>u.id===a.id)||this._triggerPointerStart(a,l)&&(Le(l)?((l.target&&"setPointerCapture"in l.target?l.target:this._element).setPointerCapture(l.pointerId),this._element.addEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move),this._element.addEventListener("pointerup",this._pointerEnd),this._element.addEventListener("pointercancel",this._pointerEnd)):(window.addEventListener("mousemove",this._move),window.addEventListener("mouseup",this._pointerEnd)))},this._touchStart=l=>{for(const a of Array.from(l.changedTouches))this._triggerPointerStart(new pe(a),l)},this._move=l=>{if(!Je(l)&&(!Le(l)||!this._excludeFromButtonsCheck.has(l.pointerId))&&l.buttons===0){this._pointerEnd(l);return}const a=this.currentPointers.slice(),u=Je(l)?Array.from(l.changedTouches).map(c=>new pe(c)):[new pe(l)],f=[];for(const c of u){const m=this.currentPointers.findIndex(b=>b.id===c.id);m!==-1&&(f.push(c),this.currentPointers[m]=c)}f.length!==0&&this._moveCallback(a,f,l)},this._triggerPointerEnd=(l,a)=>{if(!Je(a)&&a.buttons&1)return!1;const u=this.currentPointers.findIndex(c=>c.id===l.id);if(u===-1)return!1;this.currentPointers.splice(u,1),this.startPointers.splice(u,1),this._excludeFromButtonsCheck.delete(l.id);const f=!(a.type==="mouseup"||a.type==="touchend"||a.type==="pointerup");return this._endCallback(l,a,f),!0},this._pointerEnd=l=>{if(this._triggerPointerEnd(new pe(l),l))if(Le(l)){if(this.currentPointers.length)return;this._element.removeEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move),this._element.removeEventListener("pointerup",this._pointerEnd),this._element.removeEventListener("pointercancel",this._pointerEnd)}else window.removeEventListener("mousemove",this._move),window.removeEventListener("mouseup",this._pointerEnd)},this._touchEnd=l=>{for(const a of Array.from(l.changedTouches))this._triggerPointerEnd(new pe(a),l)},this._startCallback=n,this._moveCallback=i,this._endCallback=r,this._rawUpdates=o&&"onpointerrawupdate"in window,self.PointerEvent&&!s?this._element.addEventListener("pointerdown",this._pointerStart):(this._element.addEventListener("mousedown",this._pointerStart),this._element.addEventListener("touchstart",this._touchStart),this._element.addEventListener("touchmove",this._move),this._element.addEventListener("touchend",this._touchEnd),this._element.addEventListener("touchcancel",this._touchEnd))}stop(){this._element.removeEventListener("pointerdown",this._pointerStart),this._element.removeEventListener("mousedown",this._pointerStart),this._element.removeEventListener("touchstart",this._touchStart),this._element.removeEventListener("touchmove",this._move),this._element.removeEventListener("touchend",this._touchEnd),this._element.removeEventListener("touchcancel",this._touchEnd),this._element.removeEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move),this._element.removeEventListener("pointerup",this._pointerEnd),this._element.removeEventListener("pointercancel",this._pointerEnd),window.removeEventListener("mousemove",this._move),window.removeEventListener("mouseup",this._pointerEnd)}_triggerPointerStart(e,n){return this._startCallback(e,n)?(this.currentPointers.push(e),this.startPointers.push(e),!0):!1}}function Rn(t,e,n){return Math.min(Math.max(t,e),n)}function _t(t,e){return e?Math.sqrt((e.clientX-t.clientX)**2+(e.clientY-t.clientY)**2):0}function vt(t,e){return e?{clientX:(t.clientX+e.clientX)/2,clientY:(t.clientY+e.clientY)/2}:t}const Ye=class extends Dn{constructor(n){super();be(this,"element");be(this,"transform",new DOMMatrix);be(this,"pointerTracker");this.element=n,this.element.addEventListener("wheel",this.onWheel.bind(this)),this.pointerTracker=new Ln(this.element,{start:(i,r)=>this.pointerTracker.currentPointers.length===2?!1:(r.preventDefault(),!0),move:i=>{this.onPointerMove(i,this.pointerTracker.currentPointers)},avoidPointerEvents:this.isSafari()}),this.element.addEventListener("wheel",this.onWheel.bind(this))}get x(){return this.transform.e}get y(){return this.transform.f}get scale(){return this.transform.a}set x(n){this.transform.e=n}set y(n){this.transform.f=n}set scale(n){this.transform.a=n,this.transform.d=n}onWheel(n){n.preventDefault();const i=this.element.getBoundingClientRect();let{deltaY:r}=n;const{ctrlKey:o,deltaMode:s}=n;s===1&&(r*=15);const l=r>0,a=o?100:300,u=1-(l?-r:r)/a,f=l?1/u:u,c=n.clientX-i.left,m=n.clientY-i.top;this.applyTransformation({scaleDiff:f,originX:c,originY:m})}applyTransformation(n={}){const{panX:i=0,panY:r=0,originX:o=0,originY:s=0,scaleDiff:l=1}=n,a=new DOMMatrix().translate(o,s).scale(l).translate(-o,-s),u=new DOMMatrix().translate(i,r);a.multiplySelf(u),a.multiplySelf(this.transform);const f=a.a,c=a.e,m=a.f;this.updateTransform(f,c,m)}onPointerMove(n,i){const r=this.element.getBoundingClientRect(),o=vt(n[0],n[1]),s=vt(i[0],i[1]),l=o.clientX-r.left,a=o.clientY-r.top,u=_t(n[0],n[1]),f=_t(i[0],i[1]),c=u?f/u:1;this.applyTransformation({originX:l,originY:a,scaleDiff:c,panX:s.clientX-o.clientX,panY:s.clientY-o.clientY})}updateTransform(n,i,r){if(n<Ye.MIN_SCALE||n>Ye.MAX_SCALE||n===this.scale&&i===this.x&&r===this.y)return;this.x=i,this.y=r,this.scale=n;const o=new CustomEvent("panzoom:change",{bubbles:!0,detail:{x:this.x,y:this.y,scale:this.scale,matrix:this.transform}});this.dispatchTypedEvent("panzoom:change",o)}isSafari(){return/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)}reset(){this.updateTransform(1,0,0)}destroy(){this.pointerTracker.stop()}};let Re=Ye;be(Re,"MIN_SCALE",.01),be(Re,"MAX_SCALE",1e5);const Mn=t=>({}),bt=t=>({}),Pn=t=>({}),At=t=>({});function Cn(t){let e,n,i,r,o,s,l,a,u,f,c,m,b,p;const E=t[7].left,S=we(E,t,t[6],At),h=t[7].right,_=we(h,t,t[6],bt);return c=new Se({props:{src:un,class:"w-6 h-6 text-white"}}),{c(){e=y("div"),n=y("div"),i=y("div"),r=y("div"),S&&S.c(),o=P(),s=y("div"),l=y("div"),_&&_.c(),a=P(),u=y("div"),f=y("div"),W(c.$$.fragment),this.h()},l(w){e=T(w,"DIV",{class:!0});var A=k(e);n=T(A,"DIV",{class:!0});var I=k(n);i=T(I,"DIV",{class:!0});var X=k(i);r=T(X,"DIV",{style:!0,class:!0});var R=k(r);S&&S.l(R),R.forEach(g),X.forEach(g),o=C(I),s=T(I,"DIV",{class:!0});var U=k(s);l=T(U,"DIV",{style:!0,class:!0});var F=k(l);_&&_.l(F),F.forEach(g),U.forEach(g),I.forEach(g),a=C(A),u=T(A,"DIV",{class:!0});var G=k(u);f=T(G,"DIV",{class:!0});var B=k(f);V(c.$$.fragment,B),B.forEach(g),G.forEach(g),A.forEach(g),this.h()},h(){d(r,"style",t[3]),d(r,"class","w-full h-full origin-top-left grid place-items-center"),d(i,"class","mask-left svelte-dzs820"),d(l,"style",t[3]),d(l,"class","w-full h-full origin-top-left grid place-items-center"),d(s,"class","mask-right svelte-dzs820"),d(n,"class","w-full h-full grid place-items-center"),d(f,"class","w-12 h-12 rounded-full bg-black grid place-items-center absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"),ge(f,"rotate-90",t[1]==="vertical"),d(u,"class","handle relative shadow-lg svelte-dzs820"),d(e,"class","pz-container svelte-dzs820"),ge(e,"vertical",t[1]==="vertical"),et(e,"--split-point",t[0]+"%")},m(w,A){N(w,e,A),v(e,n),v(n,i),v(i,r),S&&S.m(r,null),v(n,o),v(n,s),v(s,l),_&&_.m(l,null),v(e,a),v(e,u),v(u,f),H(c,f,null),t[8](e),m=!0,b||(p=[Me(t[5].call(null,n)),Me(t[4].call(null,u)),Q(u,"pointercancel",tt(Nn))],b=!0)},p(w,[A]){S&&S.p&&(!m||A&64)&&Ee(S,E,w,w[6],m?Te(E,w[6],A,Pn):ye(w[6]),At),(!m||A&8)&&d(r,"style",w[3]),_&&_.p&&(!m||A&64)&&Ee(_,h,w,w[6],m?Te(h,w[6],A,Mn):ye(w[6]),bt),(!m||A&8)&&d(l,"style",w[3]),(!m||A&2)&&ge(f,"rotate-90",w[1]==="vertical"),(!m||A&2)&&ge(e,"vertical",w[1]==="vertical"),A&1&&et(e,"--split-point",w[0]+"%")},i(w){m||(M(S,w),M(_,w),M(c.$$.fragment,w),m=!0)},o(w){O(S,w),O(_,w),O(c.$$.fragment,w),m=!1},d(w){w&&g(e),S&&S.d(w),_&&_.d(w),Y(c),t[8](null),b=!1,Ce(p)}}}const Nn=()=>{};function Un(t,e,n){let{$$slots:i={},$$scope:r}=e,{direction:o="horizontal"}=e,s=null,{split:l=50}=e;function a(m){return m.addEventListener("pointerdown",b=>{const p=o==="vertical"?b.clientY:b.clientX,E=l,S=document.body.style.cursor;document.body.style.cursor=o==="vertical"?"ns-resize":"ew-resize";const h=w=>{const A=s?s.clientWidth:window.innerWidth,I=s?s.clientHeight:window.innerHeight,X=o==="vertical"?I:A,U=(o==="vertical"?w.clientY:w.clientX)-p,F=E+U/X*100;n(0,l=Rn(F,0,100))},_=()=>{document.body.style.cursor=S,window.removeEventListener("pointermove",h),window.removeEventListener("pointerup",_),window.removeEventListener("pointercancel",_)};window.addEventListener("pointermove",h),window.addEventListener("pointerup",_),window.addEventListener("pointercancel",_)}),{destroy(){m.removeEventListener("pointerdown",()=>{})}}}let u="transform: none;";function f(m){const b=new Re(m);function p(E){const{matrix:S}=E.detail;n(3,u=`transform: ${S.toString()};`)}return b.addEventListener("panzoom:change",p),{destroy(){b.removeEventListener("panzoom:change",p),b.destroy()}}}function c(m){Z[m?"unshift":"push"](()=>{s=m,n(2,s)})}return t.$$set=m=>{"direction"in m&&n(1,o=m.direction),"split"in m&&n(0,l=m.split),"$$scope"in m&&n(6,r=m.$$scope)},[l,o,s,u,a,f,r,i,c]}class On extends le{constructor(e){super(),ae(this,e,Un,Cn,ue,{direction:1,split:0})}}const Xn=""+new URL("../assets/cat.58b560b7.jpg",import.meta.url).href,Bn="data:image/avif;base64,AAAAHGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZgAAAOptZXRhAAAAAAAAACFoZGxyAAAAAAAAAABwaWN0AAAAAAAAAAAAAAAAAAAAAA5waXRtAAAAAAABAAAAImlsb2MAAAAAREAAAQABAAAAAAEOAAEAAAAAAAAApwAAACNpaW5mAAAAAAABAAAAFWluZmUCAAAAAAEAAGF2MDEAAAAAamlwcnAAAABLaXBjbwAAABNjb2xybmNseAACAAIABoAAAAAMYXYxQ4EEDAAAAAAUaXNwZQAAAAAAAAJyAAACcgAAABBwaXhpAAAAAAMICAgAAAAXaXBtYQAAAAAAAAABAAEEgYIDhAAAAK9tZGF0EgAKChkmZxnHggQEDQgylgERQAEEEEEA9NBi7JFlrqXV1mwMry34uIYK7WRdWYJ/ZZ0EIyWW8aLm92oz5LY0W+l2FiKsHpp4BB3Vrk+iwHuzboac7wmSHHHRWklZdZ2hpEAi4E31lf1tjXnXie8fh4lzApbqjH5Pj7ZN6761WygYVdc2zvJOsflFZstng6rQU/oulDZSO6fQWKvzpO9pseyXBLfms64=",Fn=""+new URL("../assets/david.0e7e3b46.png",import.meta.url).href;/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Bt=Symbol("Comlink.proxy"),zn=Symbol("Comlink.endpoint"),Wn=Symbol("Comlink.releaseProxy"),Ke=Symbol("Comlink.finalizer"),Xe=Symbol("Comlink.thrown"),Ft=t=>typeof t=="object"&&t!==null||typeof t=="function",Vn={canHandle:t=>Ft(t)&&t[Bt],serialize(t){const{port1:e,port2:n}=new MessageChannel;return Wt(t,e),[n,[n]]},deserialize(t){return t.start(),$e(t)}},Hn={canHandle:t=>Ft(t)&&Xe in t,serialize({value:t}){let e;return t instanceof Error?e={isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:e={isError:!1,value:t},[e,[]]},deserialize(t){throw t.isError?Object.assign(new Error(t.value.message),t.value):t.value}},zt=new Map([["proxy",Vn],["throw",Hn]]);function Yn(t,e){for(const n of t)if(e===n||n==="*"||n instanceof RegExp&&n.test(e))return!0;return!1}function Wt(t,e=globalThis,n=["*"]){e.addEventListener("message",function i(r){if(!r||!r.data)return;if(!Yn(n,r.origin)){console.warn(`Invalid origin '${r.origin}' for comlink proxy`);return}const{id:o,type:s,path:l}=Object.assign({path:[]},r.data),a=(r.data.argumentList||[]).map(_e);let u;try{const f=l.slice(0,-1).reduce((m,b)=>m[b],t),c=l.reduce((m,b)=>m[b],t);switch(s){case"GET":u=c;break;case"SET":f[l.slice(-1)[0]]=_e(r.data.value),u=!0;break;case"APPLY":u=c.apply(f,a);break;case"CONSTRUCT":{const m=new c(...a);u=Zn(m)}break;case"ENDPOINT":{const{port1:m,port2:b}=new MessageChannel;Wt(t,b),u=jt(m,[m])}break;case"RELEASE":u=void 0;break;default:return}}catch(f){u={value:f,[Xe]:0}}Promise.resolve(u).catch(f=>({value:f,[Xe]:0})).then(f=>{const[c,m]=He(f);e.postMessage(Object.assign(Object.assign({},c),{id:o}),m),s==="RELEASE"&&(e.removeEventListener("message",i),Vt(e),Ke in t&&typeof t[Ke]=="function"&&t[Ke]())}).catch(f=>{const[c,m]=He({value:new TypeError("Unserializable return value"),[Xe]:0});e.postMessage(Object.assign(Object.assign({},c),{id:o}),m)})}),e.start&&e.start()}function jn(t){return t.constructor.name==="MessagePort"}function Vt(t){jn(t)&&t.close()}function $e(t,e){return nt(t,[],e)}function Oe(t){if(t)throw new Error("Proxy has been released and is not useable")}function Ht(t){return Ae(t,{type:"RELEASE"}).then(()=>{Vt(t)})}const We=new WeakMap,Ve="FinalizationRegistry"in globalThis&&new FinalizationRegistry(t=>{const e=(We.get(t)||0)-1;We.set(t,e),e===0&&Ht(t)});function Gn(t,e){const n=(We.get(e)||0)+1;We.set(e,n),Ve&&Ve.register(t,e,t)}function $n(t){Ve&&Ve.unregister(t)}function nt(t,e=[],n=function(){}){let i=!1;const r=new Proxy(n,{get(o,s){if(Oe(i),s===Wn)return()=>{$n(r),Ht(t),i=!0};if(s==="then"){if(e.length===0)return{then:()=>r};const l=Ae(t,{type:"GET",path:e.map(a=>a.toString())}).then(_e);return l.then.bind(l)}return nt(t,[...e,s])},set(o,s,l){Oe(i);const[a,u]=He(l);return Ae(t,{type:"SET",path:[...e,s].map(f=>f.toString()),value:a},u).then(_e)},apply(o,s,l){Oe(i);const a=e[e.length-1];if(a===zn)return Ae(t,{type:"ENDPOINT"}).then(_e);if(a==="bind")return nt(t,e.slice(0,-1));const[u,f]=wt(l);return Ae(t,{type:"APPLY",path:e.map(c=>c.toString()),argumentList:u},f).then(_e)},construct(o,s){Oe(i);const[l,a]=wt(s);return Ae(t,{type:"CONSTRUCT",path:e.map(u=>u.toString()),argumentList:l},a).then(_e)}});return Gn(r,t),r}function qn(t){return Array.prototype.concat.apply([],t)}function wt(t){const e=t.map(He);return[e.map(n=>n[0]),qn(e.map(n=>n[1]))]}const Yt=new WeakMap;function jt(t,e){return Yt.set(t,e),t}function Zn(t){return Object.assign(t,{[Bt]:!0})}function He(t){for(const[e,n]of zt)if(n.canHandle(t)){const[i,r]=n.serialize(t);return[{type:"HANDLER",name:e,value:i},r]}return[{type:"RAW",value:t},Yt.get(t)||[]]}function _e(t){switch(t.type){case"HANDLER":return zt.get(t.name).deserialize(t.value);case"RAW":return t.value}}function Ae(t,e,n){return new Promise(i=>{const r=Qn();t.addEventListener("message",function o(s){!s.data||!s.data.id||s.data.id!==r||(t.removeEventListener("message",o),i(s.data))}),t.start&&t.start(),t.postMessage(Object.assign({id:r},e),n)})}function Qn(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}function Jn(){return new Worker(""+new URL("../workers/renderingWorker-5dfdb634.js",import.meta.url).href)}function Kn(t,e){const n=t.transferControlToOffscreen(),i=new Jn,r=$e(i);let o=null,s=null,l=()=>{};return r.errorDiffusionDithering(jt(n,[n]),e).then(a=>{s=a.update,l=a.destroy,s(o||e)}),{update:a=>{s?s(a):o=a},destroy:()=>{l(),i.terminate()}}}function xn(t){let e,n,i,r,o,s,l;return{c(){e=y("div"),n=y("label"),i=$(t[1]),r=P(),o=y("input"),this.h()},l(a){e=T(a,"DIV",{});var u=k(e);n=T(u,"LABEL",{for:!0,class:!0});var f=k(n);i=q(f,t[1]),f.forEach(g),r=C(u),o=T(u,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0,name:!0,class:!0}),u.forEach(g),this.h()},h(){d(n,"for",t[6]),d(n,"class","block mb-2 text-sm font-medium text-gray-900 dark:text-white"),d(o,"id",t[6]),d(o,"type","range"),d(o,"min",t[3]),d(o,"max",t[4]),d(o,"step",t[5]),d(o,"name",t[2]),d(o,"class","w-full h-1.5 mb-6 bg-white ring-1 ring-gray-300 shadow-sm rounded-lg appearance-none cursor-pointer accent-indigo-600 dark:bg-gray-700")},m(a,u){N(a,e,u),v(e,n),v(n,i),v(e,r),v(e,o),Be(o,t[0]),s||(l=[Q(o,"change",t[7]),Q(o,"input",t[7])],s=!0)},p(a,[u]){u&2&&je(i,a[1]),u&8&&d(o,"min",a[3]),u&16&&d(o,"max",a[4]),u&32&&d(o,"step",a[5]),u&4&&d(o,"name",a[2]),u&1&&Be(o,a[0])},i:oe,o:oe,d(a){a&&g(e),s=!1,Ce(l)}}}function ei(t,e,n){let{label:i}=e,{name:r=void 0}=e,{min:o=null}=e,{max:s=null}=e,{value:l=0}=e,{step:a=1}=e,u=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);function f(){l=nn(this.value),n(0,l)}return t.$$set=c=>{"label"in c&&n(1,i=c.label),"name"in c&&n(2,r=c.name),"min"in c&&n(3,o=c.min),"max"in c&&n(4,s=c.max),"value"in c&&n(0,l=c.value),"step"in c&&n(5,a=c.step)},[l,i,r,o,s,a,u,f]}class rt extends le{constructor(e){super(),ae(this,e,ei,xn,ue,{label:1,name:2,min:3,max:4,value:0,step:5})}}function Et(t,e,n){const i=t.slice();return i[6]=e[n],i}function yt(t){let e,n=t[6].name+"",i,r,o;return{c(){e=y("option"),i=$(n),this.h()},l(s){e=T(s,"OPTION",{});var l=k(e);i=q(l,n),l.forEach(g),this.h()},h(){e.__value=r=t[6].value,e.value=e.__value,e.selected=o=t[6].value===t[0]},m(s,l){N(s,e,l),v(e,i)},p(s,l){l&2&&n!==(n=s[6].name+"")&&je(i,n),l&2&&r!==(r=s[6].value)&&(e.__value=r,e.value=e.__value),l&3&&o!==(o=s[6].value===s[0])&&(e.selected=o)},d(s){s&&g(e)}}}function ti(t){let e,n,i,r,o,s,l,a=t[1],u=[];for(let f=0;f<a.length;f+=1)u[f]=yt(Et(t,a,f));return{c(){e=y("div"),n=y("label"),i=$(t[2]),r=P(),o=y("select");for(let f=0;f<u.length;f+=1)u[f].c();this.h()},l(f){e=T(f,"DIV",{});var c=k(e);n=T(c,"LABEL",{for:!0,class:!0});var m=k(n);i=q(m,t[2]),m.forEach(g),r=C(c),o=T(c,"SELECT",{id:!0,name:!0,class:!0});var b=k(o);for(let p=0;p<u.length;p+=1)u[p].l(b);b.forEach(g),c.forEach(g),this.h()},h(){d(n,"for",t[4]),d(n,"class","block text-sm font-medium leading-6 text-gray-900"),d(o,"id",t[4]),d(o,"name",t[3]),d(o,"class","mt-2 block w-full rounded-md border-0 py-1.5 pl-3 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-indigo-600 sm:text-sm sm:leading-6"),t[0]===void 0&&rn(()=>t[5].call(o))},m(f,c){N(f,e,c),v(e,n),v(n,i),v(e,r),v(e,o);for(let m=0;m<u.length;m+=1)u[m]&&u[m].m(o,null);ut(o,t[0],!0),s||(l=Q(o,"change",t[5]),s=!0)},p(f,[c]){if(c&4&&je(i,f[2]),c&3){a=f[1];let m;for(m=0;m<a.length;m+=1){const b=Et(f,a,m);u[m]?u[m].p(b,c):(u[m]=yt(b),u[m].c(),u[m].m(o,null))}for(;m<u.length;m+=1)u[m].d(1);u.length=a.length}c&8&&d(o,"name",f[3]),c&3&&ut(o,f[0])},i:oe,o:oe,d(f){f&&g(e),Ge(u,f),s=!1,l()}}}function ni(t,e,n){let{options:i}=e,{selected:r}=e,{label:o}=e,{name:s=void 0}=e,l=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);function a(){r=sn(this),n(0,r),n(1,i)}return t.$$set=u=>{"options"in u&&n(1,i=u.options),"selected"in u&&n(0,r=u.selected),"label"in u&&n(2,o=u.label),"name"in u&&n(3,s=u.name)},[r,i,o,s,l,a]}class Gt extends le{constructor(e){super(),ae(this,e,ni,ti,ue,{options:1,selected:0,label:2,name:3})}}function ii(t){let e,n,i,r,o,s;function l(c){t[5](c)}let a={label:"Diffusion Mode",options:t[2]};t[1]!==void 0&&(a.selected=t[1]),e=new Gt({props:a}),Z.push(()=>ee(e,"selected",l));function u(c){t[6](c)}let f={label:"Diffusion Strength ("+t[0]+")",min:0,max:2,step:.01};return t[0]!==void 0&&(f.value=t[0]),r=new rt({props:f}),Z.push(()=>ee(r,"value",u)),{c(){W(e.$$.fragment),i=P(),W(r.$$.fragment)},l(c){V(e.$$.fragment,c),i=C(c),V(r.$$.fragment,c)},m(c,m){H(e,c,m),N(c,i,m),H(r,c,m),s=!0},p(c,[m]){const b={};!n&&m&2&&(n=!0,b.selected=c[1],te(()=>n=!1)),e.$set(b);const p={};m&1&&(p.label="Diffusion Strength ("+c[0]+")"),!o&&m&1&&(o=!0,p.value=c[0],te(()=>o=!1)),r.$set(p)},i(c){s||(M(e.$$.fragment,c),M(r.$$.fragment,c),s=!0)},o(c){O(e.$$.fragment,c),O(r.$$.fragment,c),s=!1},d(c){Y(e,c),c&&g(i),Y(r,c)}}}function ri(t,e,n){let{diffusionStrength:i}=e,{diffusionMatrix:r}=e,{diffusionOriginX:o}=e,s="floyd_steinberg";const l=[{name:"Basic",value:"basic"},{name:"Floyd-Steinberg",value:"floyd_steinberg"},{name:"Atkinson",value:"atkinson"},{name:"Jarvis-Judice-Ninke",value:"jarvis_judice_ninke"}],a={basic:{matrix:[[0,1/2],[1/2,0]],originX:0},floyd_steinberg:{matrix:[[0,0,7/16],[3/16,5/16,1/16]],originX:1},atkinson:{matrix:[[0,0,1/8,1/8],[1/8,1/8,1/8,0],[0,1/8,0,0]],originX:1},jarvis_judice_ninke:{matrix:[[0,0,0,7/48,5/48],[3/48,5/48,7/48,5/48,3/48],[1/48,3/48,5/48,3/48,1/48]],originX:2}};function u(c){s=c,n(1,s)}function f(c){i=c,n(0,i)}return t.$$set=c=>{"diffusionStrength"in c&&n(0,i=c.diffusionStrength),"diffusionMatrix"in c&&n(3,r=c.diffusionMatrix),"diffusionOriginX"in c&&n(4,o=c.diffusionOriginX)},t.$$.update=()=>{if(t.$$.dirty&2){const{matrix:c,originX:m}=a[s];n(3,r=c),n(4,o=m)}},[i,s,l,r,o,u,f]}class si extends le{constructor(e){super(),ae(this,e,ri,ii,ue,{diffusionStrength:0,diffusionMatrix:3,diffusionOriginX:4})}}function Tt(t,e,n){const i=t.slice();return i[4]=e[n],i}function kt(t){let e,n,i,r=!1,o,s,l=t[4].label+"",a,u,f,c,m,b;return c=on(t[3][0]),{c(){e=y("label"),n=y("input"),o=P(),s=y("div"),a=$(l),f=P(),this.h()},l(p){e=T(p,"LABEL",{class:!0});var E=k(e);n=T(E,"INPUT",{type:!0,name:!0,class:!0}),o=C(E),s=T(E,"DIV",{class:!0});var S=k(s);a=q(S,l),S.forEach(g),f=C(E),E.forEach(g),this.h()},h(){d(n,"type","radio"),d(n,"name","tabs"),n.__value=i=t[4].value,n.value=n.__value,d(n,"class","sr-only"),d(s,"class",u="flex items-center justify-center py-2 text-sm font-medium text-gray-700 border-b "+(t[4].value===t[0]?"border-indigo-500 border-b-2":"border-gray-300")+" cursor-pointer hover:bg-gray-900 hover:bg-opacity-5"),d(e,"class","flex-1"),c.p(n)},m(p,E){N(p,e,E),v(e,n),n.checked=n.__value===t[0],v(e,o),v(e,s),v(s,a),v(e,f),m||(b=Q(n,"change",t[2]),m=!0)},p(p,E){E&2&&i!==(i=p[4].value)&&(n.__value=i,n.value=n.__value,r=!0),(r||E&3)&&(n.checked=n.__value===p[0]),E&2&&l!==(l=p[4].label+"")&&je(a,l),E&3&&u!==(u="flex items-center justify-center py-2 text-sm font-medium text-gray-700 border-b "+(p[4].value===p[0]?"border-indigo-500 border-b-2":"border-gray-300")+" cursor-pointer hover:bg-gray-900 hover:bg-opacity-5")&&d(s,"class",u)},d(p){p&&g(e),c.r(),m=!1,b()}}}function oi(t){let e,n=t[1],i=[];for(let r=0;r<n.length;r+=1)i[r]=kt(Tt(t,n,r));return{c(){e=y("nav");for(let r=0;r<i.length;r+=1)i[r].c();this.h()},l(r){e=T(r,"NAV",{class:!0});var o=k(e);for(let s=0;s<i.length;s+=1)i[s].l(o);o.forEach(g),this.h()},h(){d(e,"class","flex w-full")},m(r,o){N(r,e,o);for(let s=0;s<i.length;s+=1)i[s]&&i[s].m(e,null)},p(r,[o]){if(o&3){n=r[1];let s;for(s=0;s<n.length;s+=1){const l=Tt(r,n,s);i[s]?i[s].p(l,o):(i[s]=kt(l),i[s].c(),i[s].m(e,null))}for(;s<i.length;s+=1)i[s].d(1);i.length=n.length}},i:oe,o:oe,d(r){r&&g(e),Ge(i,r)}}}function li(t,e,n){let{tabs:i}=e,{selected:r}=e;const o=[[]];function s(){r=this.__value,n(0,r)}return t.$$set=l=>{"tabs"in l&&n(1,i=l.tabs),"selected"in l&&n(0,r=l.selected)},[r,i,s,o]}class ai extends le{constructor(e){super(),ae(this,e,li,oi,ue,{tabs:1,selected:0})}}const ui=t=>({}),St=t=>({});function fi(t){let e;const n=t[2].placeholder,i=we(n,t,t[1],St),r=i||di();return{c(){r&&r.c()},l(o){r&&r.l(o)},m(o,s){r&&r.m(o,s),e=!0},p(o,s){i&&i.p&&(!e||s&2)&&Ee(i,n,o,o[1],e?Te(n,o[1],s,ui):ye(o[1]),St)},i(o){e||(M(r,o),e=!0)},o(o){O(r,o),e=!1},d(o){r&&r.d(o)}}}function ci(t){let e,n,i,r;return{c(){e=y("canvas"),this.h()},l(o){e=T(o,"CANVAS",{class:!0,style:!0}),k(e).forEach(g),this.h()},h(){d(e,"class","w-full max-h-96 object-contain shadow-lg"),et(e,"image-rendering","pixelated")},m(o,s){N(o,e,s),i||(r=Me(n=mi.call(null,e,t[0])),i=!0)},p(o,s){n&&it(n.update)&&s&1&&n.update.call(null,o[0])},i:oe,o:oe,d(o){o&&g(e),i=!1,r()}}}function di(t){let e,n;return{c(){e=y("span"),n=$("No Image")},l(i){e=T(i,"SPAN",{});var r=k(e);n=q(r,"No Image"),r.forEach(g)},m(i,r){N(i,e,r),v(e,n)},p:oe,d(i){i&&g(e)}}}function hi(t){let e,n,i,r;const o=[ci,fi],s=[];function l(a,u){return a[0]?0:1}return n=l(t),i=s[n]=o[n](t),{c(){e=y("div"),i.c(),this.h()},l(a){e=T(a,"DIV",{class:!0});var u=k(e);i.l(u),u.forEach(g),this.h()},h(){d(e,"class","w-full aspect-square rounded-lg bg-gray-100 p-8 grid place-items-center")},m(a,u){N(a,e,u),s[n].m(e,null),r=!0},p(a,[u]){let f=n;n=l(a),n===f?s[n].p(a,u):(Fe(),O(s[f],1,1,()=>{s[f]=null}),ze(),i=s[n],i?i.p(a,u):(i=s[n]=o[n](a),i.c()),M(i,1),i.m(e,null))},i(a){r||(M(i),r=!0)},o(a){O(i),r=!1},d(a){a&&g(e),s[n].d()}}}function mi(t,e){const n=t.getContext("2d");if(!n)return;const i=()=>{t.width=e.width,t.height=e.height,n.putImageData(e,0,0)};let r=null;const o=()=>{r||(r=requestAnimationFrame(()=>{r=null,i()}))};return o(),{destroy(){r&&cancelAnimationFrame(r)},update:s=>{e=s,o()}}}function pi(t,e,n){let{$$slots:i={},$$scope:r}=e,{imageData:o}=e;return t.$$set=s=>{"imageData"in s&&n(0,o=s.imageData),"$$scope"in s&&n(1,r=s.$$scope)},[o,r,i]}class gi extends le{constructor(e){super(),ae(this,e,pi,hi,ue,{imageData:0})}}function _i(){return new Worker(""+new URL("../workers/worker-09b3192d.js",import.meta.url).href)}let xe=null;async function vi(t){return xe||(xe=$e(new _i)),await xe.generate(t)}function It(t){let e,n,i;function r(s){t[8](s)}let o={label:"Bayer Level ("+t[3]+")",min:0,max:5,step:1};return t[3]!==void 0&&(o.value=t[3]),e=new rt({props:o}),Z.push(()=>ee(e,"value",r)),{c(){W(e.$$.fragment)},l(s){V(e.$$.fragment,s)},m(s,l){H(e,s,l),i=!0},p(s,l){const a={};l&8&&(a.label="Bayer Level ("+s[3]+")"),!n&&l&8&&(n=!0,a.value=s[3],te(()=>n=!1)),e.$set(a)},i(s){i||(M(e.$$.fragment,s),i=!0)},o(s){O(e.$$.fragment,s),i=!1},d(s){Y(e,s)}}}function Dt(t){let e,n,i;function r(s){t[9](s)}let o={aspectRatio:1,minWidth:1,minHeight:1,maxHeight:3e3,maxWidth:3e3};return t[4]!==void 0&&(o.width=t[4]),e=new Xt({props:o}),Z.push(()=>ee(e,"width",r)),{c(){W(e.$$.fragment)},l(s){V(e.$$.fragment,s)},m(s,l){H(e,s,l),i=!0},p(s,l){const a={};!n&&l&16&&(n=!0,a.width=s[4],te(()=>n=!1)),e.$set(a)},i(s){i||(M(e.$$.fragment,s),i=!0)},o(s){O(e.$$.fragment,s),i=!1},d(s){Y(e,s)}}}function bi(t){let e,n;return{c(){e=y("span"),n=$("Loading Threshold Map"),this.h()},l(i){e=T(i,"SPAN",{slot:!0});var r=k(e);n=q(r,"Loading Threshold Map"),r.forEach(g),this.h()},h(){d(e,"slot","placeholder")},m(i,r){N(i,e,r),v(e,n)},p:oe,d(i){i&&g(e)}}}function Ai(t){let e,n,i,r,o,s,l,a,u,f;function c(h){t[7](h)}let m={label:"Threshold Map",options:t[5]};t[2]!==void 0&&(m.selected=t[2]),e=new Gt({props:m}),Z.push(()=>ee(e,"selected",c));let b=t[2]==="bayer"&&It(t),p=t[2]==="white_noise"&&Dt(t);s=new gi({props:{imageData:t[0],$$slots:{placeholder:[bi]},$$scope:{ctx:t}}});function E(h){t[10](h)}let S={label:"Noise Intensity ("+t[1]+")",min:0,max:1.5,step:.01};return t[1]!==void 0&&(S.value=t[1]),a=new rt({props:S}),Z.push(()=>ee(a,"value",E)),{c(){W(e.$$.fragment),i=P(),b&&b.c(),r=P(),p&&p.c(),o=P(),W(s.$$.fragment),l=P(),W(a.$$.fragment)},l(h){V(e.$$.fragment,h),i=C(h),b&&b.l(h),r=C(h),p&&p.l(h),o=C(h),V(s.$$.fragment,h),l=C(h),V(a.$$.fragment,h)},m(h,_){H(e,h,_),N(h,i,_),b&&b.m(h,_),N(h,r,_),p&&p.m(h,_),N(h,o,_),H(s,h,_),N(h,l,_),H(a,h,_),f=!0},p(h,[_]){const w={};!n&&_&4&&(n=!0,w.selected=h[2],te(()=>n=!1)),e.$set(w),h[2]==="bayer"?b?(b.p(h,_),_&4&&M(b,1)):(b=It(h),b.c(),M(b,1),b.m(r.parentNode,r)):b&&(Fe(),O(b,1,1,()=>{b=null}),ze()),h[2]==="white_noise"?p?(p.p(h,_),_&4&&M(p,1)):(p=Dt(h),p.c(),M(p,1),p.m(o.parentNode,o)):p&&(Fe(),O(p,1,1,()=>{p=null}),ze());const A={};_&1&&(A.imageData=h[0]),_&2048&&(A.$$scope={dirty:_,ctx:h}),s.$set(A);const I={};_&2&&(I.label="Noise Intensity ("+h[1]+")"),!u&&_&2&&(u=!0,I.value=h[1],te(()=>u=!1)),a.$set(I)},i(h){f||(M(e.$$.fragment,h),M(b),M(p),M(s.$$.fragment,h),M(a.$$.fragment,h),f=!0)},o(h){O(e.$$.fragment,h),O(b),O(p),O(s.$$.fragment,h),O(a.$$.fragment,h),f=!1},d(h){Y(e,h),h&&g(i),b&&b.d(h),h&&g(r),p&&p.d(h),h&&g(o),Y(s,h),h&&g(l),Y(a,h)}}}function wi(t,e,n){let i,{thresholdMap:r}=e,{noiseIntensity:o}=e,s="bayer";const l=[{name:"Bayer",value:"bayer"},{name:"Blue Noise",value:"blue_noise"},{name:"White Noise",value:"white_noise"}];let a=3,u=256;function f(p){s=p,n(2,s)}function c(p){a=p,n(3,a)}function m(p){u=p,n(4,u)}function b(p){o=p,n(1,o)}return t.$$set=p=>{"thresholdMap"in p&&n(0,r=p.thresholdMap),"noiseIntensity"in p&&n(1,o=p.noiseIntensity)},t.$$.update=()=>{if(t.$$.dirty&16&&n(6,i=u),t.$$.dirty&92&&"ImageData"in globalThis){let p;switch(s){case"bayer":p={mode:"bayer",level:a};break;case"blue_noise":p={mode:"blue_noise"};break;case"white_noise":p={mode:"white_noise",width:u,height:i};break}vi(p).then(E=>n(0,r=E))}},[r,o,s,a,u,l,i,f,c,m,b]}class Ei extends le{constructor(e){super(),ae(this,e,wi,Ai,ue,{thresholdMap:0,noiseIntensity:1})}}const yi=t=>({}),Lt=t=>({});function Ti(t){let e,n,i,r,o,s,l,a,u,f,c,m;r=new Se({props:{src:t[0]?ft:ct,class:"w-6 h-6 text-gray-500"}});const b=t[2].header,p=we(b,t,t[1],Lt),E=t[2].default,S=we(E,t,t[1],null);return{c(){e=y("div"),n=y("header"),i=y("button"),W(r.$$.fragment),o=P(),s=y("div"),p&&p.c(),l=P(),a=y("section"),S&&S.c(),this.h()},l(h){e=T(h,"DIV",{class:!0});var _=k(e);n=T(_,"HEADER",{class:!0});var w=k(n);i=T(w,"BUTTON",{class:!0});var A=k(i);V(r.$$.fragment,A),A.forEach(g),o=C(w),s=T(w,"DIV",{class:!0});var I=k(s);p&&p.l(I),I.forEach(g),w.forEach(g),l=C(_),a=T(_,"SECTION",{class:!0});var X=k(a);S&&S.l(X),X.forEach(g),_.forEach(g),this.h()},h(){d(i,"class","contents"),d(s,"class","flex flex-1 items-center justify-between"),d(n,"class","py-4 px-4 flex-shrink-0 shadow-sm z-10 flex gap-2 items-center justify-between bg-white"),d(a,"class","overflow-y-auto overflow-x-visible"),ge(a,"hidden",!t[0]),d(e,"class",u="w-full max-h-full "+(t[0]?"h-full divide-y divide-gray-200 mt-auto":"")+" bg-white bg-opacity-95 border border-gray-100 overflow-y-hidden flex-1 shadow-lg rounded-md flex flex-col justify-start pointer-events-auto touch-auto")},m(h,_){N(h,e,_),v(e,n),v(n,i),H(r,i,null),v(n,o),v(n,s),p&&p.m(s,null),v(e,l),v(e,a),S&&S.m(a,null),f=!0,c||(m=Q(i,"click",t[3]),c=!0)},p(h,[_]){const w={};_&1&&(w.src=h[0]?ft:ct),r.$set(w),p&&p.p&&(!f||_&2)&&Ee(p,b,h,h[1],f?Te(b,h[1],_,yi):ye(h[1]),Lt),S&&S.p&&(!f||_&2)&&Ee(S,E,h,h[1],f?Te(E,h[1],_,null):ye(h[1]),null),(!f||_&1)&&ge(a,"hidden",!h[0]),(!f||_&1&&u!==(u="w-full max-h-full "+(h[0]?"h-full divide-y divide-gray-200 mt-auto":"")+" bg-white bg-opacity-95 border border-gray-100 overflow-y-hidden flex-1 shadow-lg rounded-md flex flex-col justify-start pointer-events-auto touch-auto"))&&d(e,"class",u)},i(h){f||(M(r.$$.fragment,h),M(p,h),M(S,h),f=!0)},o(h){O(r.$$.fragment,h),O(p,h),O(S,h),f=!1},d(h){h&&g(e),Y(r),p&&p.d(h),S&&S.d(h),c=!1,m()}}}function ki(t,e,n){let{$$slots:i={},$$scope:r}=e,{open:o=!1}=e;const s=()=>n(0,o=!o);return t.$$set=l=>{"open"in l&&n(0,o=l.open),"$$scope"in l&&n(1,r=l.$$scope)},[o,r,i,s]}class Si extends le{constructor(e){super(),ae(this,e,ki,Ti,ue,{open:0})}}const Ii="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAAXNSR0IArs4c6QAAAyNJREFUaEPVWjFW3DAQ/dOyqSEvB6AiTUJITcEtSJ8azkFq+uQUUFADCQ2pOAHbL2l/noy9q9Va1owseZMt4O16JM+fP39Gliwo+zkGcElyX0RAEpH/TyLyFcBNqdvL2IlIfheR0wGnY2D8338A+DLGlzFAmOt853A3Pvie5ZN5EMmFiMxyQSjHvQB4Y2HIAuSQ5H0i9zVpNKSdtfEAPgH4qQGkAkLyF4APHYhu4olAPYjIxxQYDZAXkjslnU5oZOmzp6E/AGZDYFJAsgWt1II6zdr5ov4OAVmQnJVkIgVOwVS0CPQCIXkL4CimiVAjE2vmTkQ+h2nWB+SA5GNNJhSRb0wifcZdeg/gtw9mA4gTxZaqk6l0A1jzfe3LRM0uKnAjU2t6CRlpqlRKA6nrNdMyKBhL/30gzyT3pnBCG/lUEwQwB/DW2S2B+FRoq9UUoBUlu8HQ/CF5JiIXqUGlr2uZGahebopzAN86ICthDPCpZWrivuKqnSyB1EwTbeQVmoiZiJDcFZH5f1atwhL+zjFyRfKkJiOJHN/o4BnMXDtGVPrQTL7NFYFjpPpSPaYRTXC0NlmM/IvVaxJGQo1oo2yxy2LEcoOm675W+eZTuql281VjxG+KVuA59pMzom2O1pKdZCS1ZI9d96Pqp1ZOtDVjHCNXAE40xrk2Q0CskY9o7NoxsktyPrazDzEzASPNEuW1I1b85AAxMrW5+s3VRNgkJ9bIssCfkbyoRUoNjXjV71xEXh+sVr1qdcJUkpmc1DIEdfWo2+rkGcCeYQK1aQ0grYY2Nx9C0VsXhkOoagBp79e7HeSq1yK1fa+mwTO0ADFUq8ENuo1qbGWmr3pZgBgCFd8ybVEcAHg0TJg0rQAkvYndgrkVkaNSfbIwkDsAqmOFJsIl9TIGSKAZ20GP31isGunLszFAgvmyjt46ZlwUdpJCGDAoBGTwvDN1GNqBaY6nc8GMBPIAoMjxdAfmEMB9DpgRQMq+MBA435z2xtZihTRS9RWONR8tzzBGRlTpHgYsa5A/iXvNCcDpyLXWVl9z6vP9mOQlgH3/Yg8jTwCKvnj2F9CvAivl1accAAAAAElFTkSuQmCC";function Di(){return new Worker(""+new URL("../workers/worker-42328657.js",import.meta.url).href)}let Rt=$e(new Di);async function Li(t){if(!Rt)throw new Error("Worker not initialized");return await Rt.generatePalette(t)}function Mt(t,e,n){const i=t.slice();return i[5]=e[n],i[6]=e,i[7]=n,i}function Pt(t){let e,n,i,r,o,s,l;function a(){t[3].call(n,t[6],t[7])}function u(){return t[4](t[7])}return{c(){e=y("li"),n=y("input"),i=P(),r=y("button"),o=$("Remove"),this.h()},l(f){e=T(f,"LI",{});var c=k(e);n=T(c,"INPUT",{type:!0}),i=C(c),r=T(c,"BUTTON",{});var m=k(r);o=q(m,"Remove"),m.forEach(g),c.forEach(g),this.h()},h(){d(n,"type","color")},m(f,c){N(f,e,c),v(e,n),Be(n,t[5]),v(e,i),v(e,r),v(r,o),s||(l=[Q(n,"input",a),Q(r,"click",u)],s=!0)},p(f,c){t=f,c&1&&Be(n,t[5])},d(f){f&&g(e),s=!1,Ce(l)}}}function Ri(t){let e,n,i,r,o,s,l,a=t[0],u=[];for(let f=0;f<a.length;f+=1)u[f]=Pt(Mt(t,a,f));return{c(){e=y("ul");for(let f=0;f<u.length;f+=1)u[f].c();n=P(),i=y("li"),r=y("button"),o=$("Add")},l(f){e=T(f,"UL",{});var c=k(e);for(let p=0;p<u.length;p+=1)u[p].l(c);n=C(c),i=T(c,"LI",{});var m=k(i);r=T(m,"BUTTON",{});var b=k(r);o=q(b,"Add"),b.forEach(g),m.forEach(g),c.forEach(g)},m(f,c){N(f,e,c);for(let m=0;m<u.length;m+=1)u[m]&&u[m].m(e,null);v(e,n),v(e,i),v(i,r),v(r,o),s||(l=Q(r,"click",t[1]),s=!0)},p(f,[c]){if(c&5){a=f[0];let m;for(m=0;m<a.length;m+=1){const b=Mt(f,a,m);u[m]?u[m].p(b,c):(u[m]=Pt(b),u[m].c(),u[m].m(e,n))}for(;m<u.length;m+=1)u[m].d(1);u.length=a.length}},i:oe,o:oe,d(f){f&&g(e),Ge(u,f),s=!1,l()}}}function Mi(t,e,n){let{palette:i=[]}=e;function r(){n(0,i=[...i,"#000000"])}function o(a){n(0,i=i.filter((u,f)=>f!==a))}function s(a,u){a[u]=this.value,n(0,i)}const l=a=>o(a);return t.$$set=a=>{"palette"in a&&n(0,i=a.palette)},[i,r,o,s,l]}class Pi extends le{constructor(e){super(),ae(this,e,Mi,Ri,ue,{palette:0})}}function Ct(t,e,n){const i=t.slice();return i[34]=e[n],i}function Ci(t){let e,n,i,r,o,s,l,a,u,f,c,m,b,p,E,S,h,_,w=t[16],A=[];for(let I=0;I<w.length;I+=1)A[I]=Nt(Ct(t,w,I));return f=new Se({props:{src:cn,class:"w-12 h-12 text-gray-400"}}),{c(){e=y("div"),n=y("div"),i=y("p"),r=$("Select or Drop an Image to Start"),o=P(),s=y("div");for(let I=0;I<A.length;I+=1)A[I].c();l=P(),a=y("label"),u=y("div"),W(f.$$.fragment),c=P(),m=y("span"),b=$("Choose an Image"),p=P(),E=y("input"),this.h()},l(I){e=T(I,"DIV",{class:!0});var X=k(e);n=T(X,"DIV",{class:!0});var R=k(n);i=T(R,"P",{class:!0});var U=k(i);r=q(U,"Select or Drop an Image to Start"),U.forEach(g),o=C(R),s=T(R,"DIV",{class:!0});var F=k(s);for(let ne=0;ne<A.length;ne+=1)A[ne].l(F);l=C(F),a=T(F,"LABEL",{for:!0,class:!0});var G=k(a);u=T(G,"DIV",{class:!0});var B=k(u);V(f.$$.fragment,B),B.forEach(g),c=C(G),m=T(G,"SPAN",{class:!0});var z=k(m);b=q(z,"Choose an Image"),z.forEach(g),p=C(G),E=T(G,"INPUT",{type:!0,class:!0,id:!0,accept:!0}),G.forEach(g),F.forEach(g),R.forEach(g),X.forEach(g),this.h()},h(){d(i,"class","text-2xl text-gray-500 text-center"),d(u,"class","grid place-items-center h-full w-full"),d(m,"class","sr-only"),d(E,"type","file"),d(E,"class","sr-only"),d(E,"id","image-input"),d(E,"accept","image/*"),d(a,"for","image-input"),d(a,"class","block spect-square h-24 w-24 object-cover rounded-md shadow-md border-2 border-white bg-white hover:bg-gray-100"),d(s,"class","flex gap-3 justify-center flex-wrap"),d(n,"class","grid gap-4"),d(e,"class","w-full h-full grid place-items-center px-8")},m(I,X){N(I,e,X),v(e,n),v(n,i),v(i,r),v(n,o),v(n,s);for(let R=0;R<A.length;R+=1)A[R]&&A[R].m(s,null);v(s,l),v(s,a),v(a,u),H(f,u,null),v(a,c),v(a,m),v(m,b),v(a,p),v(a,E),S=!0,h||(_=Q(E,"input",t[19]),h=!0)},p(I,X){if(X[0]&1114112){w=I[16];let R;for(R=0;R<w.length;R+=1){const U=Ct(I,w,R);A[R]?A[R].p(U,X):(A[R]=Nt(U),A[R].c(),A[R].m(s,l))}for(;R<A.length;R+=1)A[R].d(1);A.length=w.length}},i(I){S||(M(f.$$.fragment,I),S=!0)},o(I){O(f.$$.fragment,I),S=!1},d(I){I&&g(e),Ge(A,I),Y(f),h=!1,_()}}}function Ni(t){let e,n,i,r,o,s,l,a;return n=new On({props:{direction:t[12],$$slots:{right:[Fi],left:[Ui]},$$scope:{ctx:t}}}),o=new Se({props:{src:dn,class:"w-5 h-5 text-white"}}),{c(){e=y("div"),W(n.$$.fragment),i=P(),r=y("button"),W(o.$$.fragment),this.h()},l(u){e=T(u,"DIV",{class:!0});var f=k(e);V(n.$$.fragment,f),i=C(f),r=T(f,"BUTTON",{class:!0,title:!0});var c=k(r);V(o.$$.fragment,c),c.forEach(g),f.forEach(g),this.h()},h(){d(r,"class","absolute top-0 left-0 m-4 p-2 bg-black bg-opacity-40 rounded-full"),d(r,"title","Close Image & Reset"),d(e,"class","w-full h-full relative")},m(u,f){N(u,e,f),H(n,e,null),v(e,i),v(e,r),H(o,r,null),s=!0,l||(a=Q(r,"click",t[23]),l=!0)},p(u,f){const c={};f[0]&4096&&(c.direction=u[12]),f[0]&53235|f[1]&64&&(c.$$scope={dirty:f,ctx:u}),n.$set(c)},i(u){s||(M(n.$$.fragment,u),M(o.$$.fragment,u),s=!0)},o(u){O(n.$$.fragment,u),O(o.$$.fragment,u),s=!1},d(u){u&&g(e),Y(n),Y(o),l=!1,a()}}}function Nt(t){let e,n,i,r,o;function s(){return t[24](t[34])}return{c(){e=y("button"),n=y("img"),this.h()},l(l){e=T(l,"BUTTON",{class:!0});var a=k(e);n=T(a,"IMG",{class:!0,src:!0,alt:!0}),a.forEach(g),this.h()},h(){d(n,"class","aspect-square h-24 w-24 object-cover rounded-md shadow-md border-2 border-white"),Pe(n.src,i=t[34])||d(n,"src",i),d(n,"alt",""),d(e,"class","hover:opacity-75 transition-opacity")},m(l,a){N(l,e,a),v(e,n),r||(o=Q(e,"click",s),r=!0)},p(l,a){t=l},d(l){l&&g(e),r=!1,o()}}}function Ui(t){let e,n,i;return{c(){e=y("img"),this.h()},l(r){e=T(r,"IMG",{slot:!0,src:!0,alt:!0,style:!0,class:!0}),this.h()},h(){d(e,"slot","left"),Pe(e.src,n=t[1].src)||d(e,"src",n),d(e,"alt",""),d(e,"style",i=`width: ${t[0]}px; height: ${t[15]}px`),d(e,"class","pixelated max-w-none shadow-lg bg-gray-200 svelte-1b7r98h")},m(r,o){N(r,e,o)},p(r,o){o[0]&2&&!Pe(e.src,n=r[1].src)&&d(e,"src",n),o[0]&32769&&i!==(i=`width: ${r[0]}px; height: ${r[15]}px`)&&d(e,"style",i)},d(r){r&&g(e)}}}function Oi(t){let e,n,i;return{c(){e=y("img"),this.h()},l(r){e=T(r,"IMG",{src:!0,alt:!0,style:!0,class:!0}),this.h()},h(){Pe(e.src,n=t[1].src)||d(e,"src",n),d(e,"alt",""),d(e,"style",i=`width: ${t[0]}px; height: ${t[15]}px`),d(e,"class","pixelated max-w-none shadow-lg svelte-1b7r98h")},m(r,o){N(r,e,o)},p(r,o){o[0]&2&&!Pe(e.src,n=r[1].src)&&d(e,"src",n),o[0]&32769&&i!==(i=`width: ${r[0]}px; height: ${r[15]}px`)&&d(e,"style",i)},d(r){r&&g(e)}}}function Xi(t){let e,n=t[7]&&t[14]&&Ut(t);return{c(){n&&n.c(),e=ke()},l(i){n&&n.l(i),e=ke()},m(i,r){n&&n.m(i,r),N(i,e,r)},p(i,r){i[7]&&i[14]?n?n.p(i,r):(n=Ut(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(i){n&&n.d(i),i&&g(e)}}}function Bi(t){let e,n=t[14]&&Ot(t);return{c(){n&&n.c(),e=ke()},l(i){n&&n.l(i),e=ke()},m(i,r){n&&n.m(i,r),N(i,e,r)},p(i,r){i[14]?n?n.p(i,r):(n=Ot(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(i){n&&n.d(i),i&&g(e)}}}function Ut(t){let e,n,i,r,o;return{c(){e=y("canvas"),this.h()},l(s){e=T(s,"CANVAS",{class:!0,style:!0,width:!0,height:!0,"aria-label":!0}),k(e).forEach(g),this.h()},h(){d(e,"class","pixelated shadow-lg bg-gray-200 svelte-1b7r98h"),d(e,"style",n=`width: ${t[0]}px; height: ${t[15]}px`),d(e,"width",t[0]),d(e,"height",t[15]),d(e,"aria-label","Dithered Image")},m(s,l){N(s,e,l),t[22](e),r||(o=Me(i=wn.call(null,e,{image:t[5],noiseIntensity:t[8],palette:t[14],output_width:t[0],output_height:t[15],thresholdMap:t[7]})),r=!0)},p(s,l){l[0]&32769&&n!==(n=`width: ${s[0]}px; height: ${s[15]}px`)&&d(e,"style",n),l[0]&1&&d(e,"width",s[0]),l[0]&32768&&d(e,"height",s[15]),i&&it(i.update)&&l[0]&49569&&i.update.call(null,{image:s[5],noiseIntensity:s[8],palette:s[14],output_width:s[0],output_height:s[15],thresholdMap:s[7]})},d(s){s&&g(e),t[22](null),r=!1,o()}}}function Ot(t){let e,n,i,r,o;return{c(){e=y("canvas"),this.h()},l(s){e=T(s,"CANVAS",{class:!0,style:!0,width:!0,height:!0}),k(e).forEach(g),this.h()},h(){d(e,"class","pixelated shadow-lg bg-gray-200 svelte-1b7r98h"),d(e,"style",n=`width: ${t[0]}px; height: ${t[15]}px`),d(e,"width",t[0]),d(e,"height",t[15])},m(s,l){N(s,e,l),t[21](e),r||(o=Me(i=Kn.call(null,e,{image:t[5],output_width:t[0],output_height:t[15],palette:t[14],diffusionStrength:t[9],diffusionMatrix:t[10],diffusionMatrixOriginX:t[11]})),r=!0)},p(s,l){l[0]&32769&&n!==(n=`width: ${s[0]}px; height: ${s[15]}px`)&&d(e,"style",n),l[0]&1&&d(e,"width",s[0]),l[0]&32768&&d(e,"height",s[15]),i&&it(i.update)&&l[0]&52769&&i.update.call(null,{image:s[5],output_width:s[0],output_height:s[15],palette:s[14],diffusionStrength:s[9],diffusionMatrix:s[10],diffusionMatrixOriginX:s[11]})},d(s){s&&g(e),t[21](null),r=!1,o()}}}function Fi(t){let e;function n(o,s){if(o[6]==="error_diffusion")return Bi;if(o[6]==="ordered")return Xi;if(o[6]==="none")return Oi}let i=n(t),r=i&&i(t);return{c(){r&&r.c(),e=ke()},l(o){r&&r.l(o),e=ke()},m(o,s){r&&r.m(o,s),N(o,e,s)},p(o,s){i===(i=n(o))&&r?r.p(o,s):(r&&r.d(1),r=i&&i(o),r&&(r.c(),r.m(e.parentNode,e)))},d(o){r&&r.d(o),o&&g(e)}}}function zi(t){let e,n,i,r,o,s,l,a,u,f,c,m,b,p,E,S,h,_,w,A,I,X,R,U,F,G,B,z,ne,x,re,ce,de,J,he,ie;function L(D){t[25](D)}function K(D){t[26](D)}let fe={minWidth:12,minHeight:12,maxHeight:5e3,maxWidth:5e3};t[0]!==void 0&&(fe.width=t[0]),t[3]!==void 0&&(fe.aspectRatio=t[3]),s=new Xt({props:fe}),Z.push(()=>ee(s,"width",L)),Z.push(()=>ee(s,"aspectRatio",K));function qe(D){t[27](D)}let st={tabs:[{label:"None",value:"none"},{label:"Ordered",value:"ordered"},{label:"Error Diffusion",value:"error_diffusion"}]};t[6]!==void 0&&(st.selected=t[6]),p=new ai({props:st}),Z.push(()=>ee(p,"selected",qe));function $t(D){t[28](D)}function qt(D){t[29](D)}function Zt(D){t[30](D)}let Ne={};t[9]!==void 0&&(Ne.diffusionStrength=t[9]),t[10]!==void 0&&(Ne.diffusionMatrix=t[10]),t[11]!==void 0&&(Ne.diffusionOriginX=t[11]),_=new si({props:Ne}),Z.push(()=>ee(_,"diffusionStrength",$t)),Z.push(()=>ee(_,"diffusionMatrix",qt)),Z.push(()=>ee(_,"diffusionOriginX",Zt));function Qt(D){t[31](D)}function Jt(D){t[32](D)}let Ze={};t[7]!==void 0&&(Ze.thresholdMap=t[7]),t[8]!==void 0&&(Ze.noiseIntensity=t[8]),F=new Ei({props:Ze}),Z.push(()=>ee(F,"thresholdMap",Qt)),Z.push(()=>ee(F,"noiseIntensity",Jt));function Kt(D){t[33](D)}let ot={};return t[2]!==void 0&&(ot.palette=t[2]),J=new Pi({props:ot}),Z.push(()=>ee(J,"palette",Kt)),{c(){e=y("section"),n=y("div"),i=y("h2"),r=$("Output Options"),o=P(),W(s.$$.fragment),u=P(),f=y("div"),c=y("h2"),m=$("Dithering Options"),b=P(),W(p.$$.fragment),S=P(),h=y("div"),W(_.$$.fragment),R=P(),U=y("div"),W(F.$$.fragment),ne=P(),x=y("div"),re=y("h2"),ce=$("Palette"),de=P(),W(J.$$.fragment),this.h()},l(D){e=T(D,"SECTION",{class:!0});var j=k(e);n=T(j,"DIV",{});var me=k(n);i=T(me,"H2",{class:!0});var Ie=k(i);r=q(Ie,"Output Options"),Ie.forEach(g),o=C(me),V(s.$$.fragment,me),me.forEach(g),u=C(j),f=T(j,"DIV",{class:!0});var se=k(f);c=T(se,"H2",{class:!0});var ve=k(c);m=q(ve,"Dithering Options"),ve.forEach(g),b=C(se),V(p.$$.fragment,se),S=C(se),h=T(se,"DIV",{class:!0});var De=k(h);V(_.$$.fragment,De),De.forEach(g),R=C(se),U=T(se,"DIV",{class:!0});var lt=k(U);V(F.$$.fragment,lt),lt.forEach(g),se.forEach(g),ne=C(j),x=T(j,"DIV",{class:!0});var Ue=k(x);re=T(Ue,"H2",{class:!0});var at=k(re);ce=q(at,"Palette"),at.forEach(g),de=C(Ue),V(J.$$.fragment,Ue),Ue.forEach(g),j.forEach(g),this.h()},h(){d(i,"class","text-base font-semibold leading-7 text-black mb-4"),d(c,"class","text-base font-semibold leading-7 text-black mb-2"),d(h,"class",X=t[6]==="error_diffusion"?"contents":"hidden"),d(U,"class",z=t[6]==="ordered"?"contents":"hidden"),d(f,"class","grid gap-4"),d(re,"class","text-base font-semibold leading-7 text-black mb-2"),d(x,"class","grid gap-3"),ge(x,"hidden",t[6]==="none"),d(e,"class","grid gap-8 pt-8 px-4 safe-padding-bottom svelte-1b7r98h")},m(D,j){N(D,e,j),v(e,n),v(n,i),v(i,r),v(n,o),H(s,n,null),v(e,u),v(e,f),v(f,c),v(c,m),v(f,b),H(p,f,null),v(f,S),v(f,h),H(_,h,null),v(f,R),v(f,U),H(F,U,null),v(e,ne),v(e,x),v(x,re),v(re,ce),v(x,de),H(J,x,null),ie=!0},p(D,j){const me={};!l&&j[0]&1&&(l=!0,me.width=D[0],te(()=>l=!1)),!a&&j[0]&8&&(a=!0,me.aspectRatio=D[3],te(()=>a=!1)),s.$set(me);const Ie={};!E&&j[0]&64&&(E=!0,Ie.selected=D[6],te(()=>E=!1)),p.$set(Ie);const se={};!w&&j[0]&512&&(w=!0,se.diffusionStrength=D[9],te(()=>w=!1)),!A&&j[0]&1024&&(A=!0,se.diffusionMatrix=D[10],te(()=>A=!1)),!I&&j[0]&2048&&(I=!0,se.diffusionOriginX=D[11],te(()=>I=!1)),_.$set(se),(!ie||j[0]&64&&X!==(X=D[6]==="error_diffusion"?"contents":"hidden"))&&d(h,"class",X);const ve={};!G&&j[0]&128&&(G=!0,ve.thresholdMap=D[7],te(()=>G=!1)),!B&&j[0]&256&&(B=!0,ve.noiseIntensity=D[8],te(()=>B=!1)),F.$set(ve),(!ie||j[0]&64&&z!==(z=D[6]==="ordered"?"contents":"hidden"))&&d(U,"class",z);const De={};!he&&j[0]&4&&(he=!0,De.palette=D[2],te(()=>he=!1)),J.$set(De),(!ie||j[0]&64)&&ge(x,"hidden",D[6]==="none")},i(D){ie||(M(s.$$.fragment,D),M(p.$$.fragment,D),M(_.$$.fragment,D),M(F.$$.fragment,D),M(J.$$.fragment,D),ie=!0)},o(D){O(s.$$.fragment,D),O(p.$$.fragment,D),O(_.$$.fragment,D),O(F.$$.fragment,D),O(J.$$.fragment,D),ie=!1},d(D){D&&g(e),Y(s),Y(p),Y(_),Y(F),Y(J)}}}function Wi(t){let e,n,i;return e=new Se({props:{src:hn,class:"w-4 h-4"}}),{c(){W(e.$$.fragment),n=$(`
					Save`)},l(r){V(e.$$.fragment,r),n=q(r,`
					Save`)},m(r,o){H(e,r,o),N(r,n,o),i=!0},p:oe,i(r){i||(M(e.$$.fragment,r),i=!0)},o(r){O(e.$$.fragment,r),i=!1},d(r){Y(e,r),r&&g(n)}}}function Vi(t){let e,n,i,r,o;return r=new Tn({props:{disabled:!t[1],$$slots:{default:[Wi]},$$scope:{ctx:t}}}),r.$on("click",t[17]),{c(){e=y("h1"),n=$("Options"),i=P(),W(r.$$.fragment),this.h()},l(s){e=T(s,"H1",{class:!0});var l=k(e);n=q(l,"Options"),l.forEach(g),i=C(s),V(r.$$.fragment,s),this.h()},h(){d(e,"class","font-bold")},m(s,l){N(s,e,l),v(e,n),N(s,i,l),H(r,s,l),o=!0},p(s,l){const a={};l[0]&2&&(a.disabled=!s[1]),l[1]&64&&(a.$$scope={dirty:l,ctx:s}),r.$set(a)},i(s){o||(M(r.$$.fragment,s),o=!0)},o(s){O(r.$$.fragment,s),o=!1},d(s){s&&g(e),s&&g(i),Y(r,s)}}}function Hi(t){let e,n,i,r,o,s,l,a,u,f,c,m,b;e=new fn({props:{icon:Ii,og_image:Yi}});const p=[Ni,Ci],E=[];function S(h,_){return h[5]&&h[1]?0:1}return s=S(t),l=E[s]=p[s](t),f=new Si({props:{open:t[13],$$slots:{header:[Vi],default:[zi]},$$scope:{ctx:t}}}),{c(){W(e.$$.fragment),n=P(),i=P(),r=y("main"),o=y("section"),l.c(),a=P(),u=y("aside"),W(f.$$.fragment),this.h()},l(h){V(e.$$.fragment,h),n=C(h),i=C(h),r=T(h,"MAIN",{class:!0});var _=k(r);o=T(_,"SECTION",{class:!0});var w=k(o);l.l(w),w.forEach(g),a=C(_),u=T(_,"ASIDE",{class:!0});var A=k(u);V(f.$$.fragment,A),A.forEach(g),_.forEach(g),this.h()},h(){d(o,"class","overflow-hidden select-none fixed inset-0"),d(u,"class","md:w-96 w-full max-h-full absolute bottom-0 left-0 right-0 top-0 md:left-auto z-50 p-2 grid place-items-end touch-none pointer-events-none"),d(r,"class","w-screen max-w-screen h-screen max-h-screen relative bg-gray-300")},m(h,_){H(e,h,_),N(h,n,_),N(h,i,_),N(h,r,_),v(r,o),E[s].m(o,null),v(r,a),v(r,u),H(f,u,null),c=!0,m||(b=[Q(document.body,"drop",tt(t[18])),Q(document.body,"dragover",tt(ji))],m=!0)},p(h,_){let w=s;s=S(h),s===w?E[s].p(h,_):(Fe(),O(E[w],1,1,()=>{E[w]=null}),ze(),l=E[s],l?l.p(h,_):(l=E[s]=p[s](h),l.c()),M(l,1),l.m(o,null));const A={};_[0]&8192&&(A.open=h[13]),_[0]&4047|_[1]&64&&(A.$$scope={dirty:_,ctx:h}),f.$set(A)},i(h){c||(M(e.$$.fragment,h),M(l),M(f.$$.fragment,h),c=!0)},o(h){O(e.$$.fragment,h),O(l),O(f.$$.fragment,h),c=!1},d(h){Y(e,h),h&&g(n),h&&g(i),h&&g(r),E[s].d(),Y(f),m=!1,Ce(b)}}}const Yi="/og/dither-studio.webp",ji=()=>{};function Gi(t,e,n){let i,r;const o=[Xn,Bn,Fn];let s=null,l=300,a=null,u=null;async function f(){s&&await kn(s,"dithered","png")}async function c(L){var fe;const K=(fe=L.dataTransfer)==null?void 0:fe.files[0];if(K){if(!K.type.startsWith("image/")){alert("Please drop an image file");return}try{n(1,a=await pt(K))}catch(qe){alert("Failed to load image"),console.error(qe)}}}async function m(L){const K=L.target.files[0];if(K)try{n(1,a=await pt(K))}catch(fe){alert("Failed to load image"),console.error(fe)}}async function b(L){const K=new Image;K.onload=()=>{n(1,a=K)},K.src=L}let p="ordered",E=null,S=.3,h=1,_=[[1]],w=0,A="horizontal",I=!1,X=["#000000","#ffffff"],R;ln(async()=>{const L=window.matchMedia("(min-width: 768px)");function K(fe){n(12,A=fe.matches?"horizontal":"vertical"),n(13,I=L.matches)}return L.addEventListener("change",K),K(L),()=>L.removeEventListener("change",K)});function U(L){Z[L?"unshift":"push"](()=>{s=L,n(4,s)})}function F(L){Z[L?"unshift":"push"](()=>{s=L,n(4,s)})}const G=()=>n(1,a=null),B=L=>b(L);function z(L){l=L,n(0,l)}function ne(L){r=L,n(3,r),n(1,a)}function x(L){p=L,n(6,p)}function re(L){h=L,n(9,h)}function ce(L){_=L,n(10,_)}function de(L){w=L,n(11,w)}function J(L){E=L,n(7,E)}function he(L){S=L,n(8,S)}function ie(L){X=L,n(2,X)}return t.$$.update=()=>{t.$$.dirty[0]&2&&n(3,r=a!=null&&a.width&&(a!=null&&a.height)?a.width/a.height:1),t.$$.dirty[0]&9&&n(15,i=Math.round(l/r)),t.$$.dirty[0]&2&&n(5,u=a?Sn(a):null),t.$$.dirty[0]&4&&Li(X.map(In)).then(L=>n(14,R=L))},[l,a,X,r,s,u,p,E,S,h,_,w,A,I,R,i,o,f,c,m,b,U,F,G,B,z,ne,x,re,ce,de,J,he,ie]}class Ji extends le{constructor(e){super(),ae(this,e,Gi,Hi,ue,{},null,[-1,-1])}}export{Ji as component,Qi as universal};
