var dn=Object.defineProperty;var hn=(t,e,n)=>e in t?dn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ke=(t,e,n)=>(hn(t,typeof e!="symbol"?e+"":e,n),n);import{S as ue,i as fe,s as ce,k as y,q,a as M,y as H,l as k,m as S,r as Z,h as _,c as P,z as Y,n as f,b as U,G as g,A as j,M as J,g as N,d as O,B as G,O as We,C as Ie,D as De,E as Le,F as Re,P as mn,Q as Ae,p as ot,R as Xe,T as lt,w as $,U as Se,u as $e,H as ae,V as pn,W as gn,X as bt,Y as ut,Z as _n,_ as ie,$ as re,a0 as vn,v as je,f as Ge,a1 as ft,o as bn,L as Fe,e as Me}from"../chunks/index.22137adf.js";import{I as Pe,L as An,A as wn,C as At,b as wt,a as En,P as yn,X as kn,c as Tn}from"../chunks/Icon.288a6aa7.js";function Sn(){return{title:"Dithering",author:"Loris Sigrist",description:"Dither your Images right in the browser!"}}const ir=Object.freeze(Object.defineProperty({__proto__:null,load:Sn},Symbol.toStringTag,{value:"Module"}));function In(t){let e,n,i,s,o,r,l,a,u,d,c,p,b,m,A,T,h,v,E,w,I,B,R,C,F,V;return b=new Pe({props:{src:An,class:"w-4 h-4",solid:!0}}),{c(){e=y("fieldset"),n=y("div"),i=y("label"),s=q("Width"),o=M(),r=y("div"),l=y("input"),a=M(),u=y("div"),d=q("px"),c=M(),p=y("span"),H(b.$$.fragment),m=M(),A=y("div"),T=y("label"),h=q("Height"),v=M(),E=y("div"),w=y("input"),I=M(),B=y("div"),R=q("px"),this.h()},l(X){e=k(X,"FIELDSET",{class:!0});var W=S(e);n=k(W,"DIV",{class:!0});var ne=S(n);i=k(ne,"LABEL",{for:!0,class:!0});var Q=S(i);s=Z(Q,"Width"),Q.forEach(_),o=P(ne),r=k(ne,"DIV",{class:!0});var se=S(r);l=k(se,"INPUT",{name:!0,id:!0,type:!0,min:!0,max:!0,step:!0,class:!0,placeholder:!0}),a=P(se),u=k(se,"DIV",{class:!0});var me=S(u);d=Z(me,"px"),me.forEach(_),se.forEach(_),ne.forEach(_),c=P(W),p=k(W,"SPAN",{class:!0});var pe=S(p);Y(b.$$.fragment,pe),pe.forEach(_),m=P(W),A=k(W,"DIV",{class:!0});var te=S(A);T=k(te,"LABEL",{for:!0,class:!0});var le=S(T);h=Z(le,"Height"),le.forEach(_),v=P(te),E=k(te,"DIV",{class:!0});var K=S(E);w=k(K,"INPUT",{type:!0,id:!0,name:!0,min:!0,max:!0,step:!0,class:!0,placeholder:!0}),I=P(K),B=k(K,"DIV",{class:!0});var ge=S(B);R=Z(ge,"px"),ge.forEach(_),K.forEach(_),te.forEach(_),W.forEach(_),this.h()},h(){f(i,"for","width-"+t[8]),f(i,"class","block text-sm font-medium leading-6 text-gray-900"),f(l,"name","width"),f(l,"id","width-"+t[8]),f(l,"type","number"),f(l,"min",t[3]),f(l,"max",t[1]),f(l,"step","1"),l.value=t[0],f(l,"class","block w-full rounded-md border-0 py-1.5 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"),f(l,"placeholder","600"),f(u,"class","pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400"),f(r,"class","relative mt-2 rounded-md shadow-sm"),f(n,"class","w-full"),f(p,"class","text-gray-500 pb-2 cursor-not-allowed"),f(T,"for","height-"+t[9]),f(T,"class","block text-sm font-medium leading-6 text-gray-900"),f(w,"type","number"),f(w,"id","height-"+t[9]),f(w,"name","height"),f(w,"min",t[4]),f(w,"max",t[2]),f(w,"step","1"),w.value=t[5],f(w,"class","block w-full rounded-md border-0 py-1.5 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"),f(w,"placeholder","340"),f(B,"class","pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400"),f(E,"class","relative mt-2 rounded-md shadow-sm"),f(A,"class","w-full"),f(e,"class","flex gap-3 items-end justify-between")},m(X,W){U(X,e,W),g(e,n),g(n,i),g(i,s),g(n,o),g(n,r),g(r,l),g(r,a),g(r,u),g(u,d),g(e,c),g(e,p),j(b,p,null),g(e,m),g(e,A),g(A,T),g(T,h),g(A,v),g(A,E),g(E,w),g(E,I),g(E,B),g(B,R),C=!0,F||(V=[J(l,"input",t[6]),J(w,"input",t[7])],F=!0)},p(X,[W]){(!C||W&8)&&f(l,"min",X[3]),(!C||W&2)&&f(l,"max",X[1]),(!C||W&1&&l.value!==X[0])&&(l.value=X[0]),(!C||W&16)&&f(w,"min",X[4]),(!C||W&4)&&f(w,"max",X[2]),(!C||W&32&&w.value!==X[5])&&(w.value=X[5])},i(X){C||(N(b.$$.fragment,X),C=!0)},o(X){O(b.$$.fragment,X),C=!1},d(X){X&&_(e),G(b),F=!1,We(V)}}}function Et(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}function Dn(t,e,n){let i,{width:s}=e,{aspectRatio:o}=e,{maxWidth:r=null}=e,{maxHeight:l=null}=e,{minWidth:a=null}=e,{minHeight:u=null}=e;function d(m){const A=m.target.value;A&&(a!==null&&A<a||r!==null&&A>r||n(0,s=A))}function c(m){const A=m.target.value;A&&(u!==null&&A<u||l!==null&&A>l||n(0,s=Math.round(o*A)))}let p=Et(),b=Et();return t.$$set=m=>{"width"in m&&n(0,s=m.width),"aspectRatio"in m&&n(10,o=m.aspectRatio),"maxWidth"in m&&n(1,r=m.maxWidth),"maxHeight"in m&&n(2,l=m.maxHeight),"minWidth"in m&&n(3,a=m.minWidth),"minHeight"in m&&n(4,u=m.minHeight)},t.$$.update=()=>{t.$$.dirty&1025&&n(5,i=Math.round(s/o))},[s,r,l,a,u,i,d,c,p,b,o]}class Zt extends ue{constructor(e){super(),fe(this,e,Dn,In,ce,{width:0,aspectRatio:10,maxWidth:1,maxHeight:2,minWidth:3,minHeight:4})}}var Ln="precision highp float;attribute vec2 position;varying vec2 fragCoord;void main(){fragCoord.x=position.x*0.5+0.5;fragCoord.y=position.y*0.5+0.5;gl_Position=vec4(position,0.0,1.0);}",Rn="precision highp float;varying vec2 fragCoord;uniform sampler2D uSampler;uniform sampler2D uNoiseSampler;uniform sampler2D uPaletteSampler;uniform vec2 uNoiseSamplerSize;uniform float uNoise;uniform vec2 uSize;vec3 samplePalette(vec3 og_color){vec3 scaledColor=floor(og_color*255.0);vec3 quantized_color=floor(scaledColor/16.0)*16.0;float mappingI=floor((floor(quantized_color.r)+floor(quantized_color.g*16.0)+floor(quantized_color.b*16.0*16.0))/16.0);float mappedX=floor(mappingI/64.0);float mappedY=floor(mod(mappingI,64.0));float halfPixel=0.5/64.0;vec2 uv=vec2((mappedX/64.0)+halfPixel,1.0-(mappedY/64.0)-halfPixel);return texture2D(uPaletteSampler,uv).rgb;}void main(void){vec2 imgPixel=vec2(fragCoord.x*uSize.x,fragCoord.y*uSize.y);vec2 noisePixel=vec2(mod(imgPixel.x,uNoiseSamplerSize.x),mod(imgPixel.y,uNoiseSamplerSize.y));vec2 noiseUV=vec2(noisePixel.x/uNoiseSamplerSize.x,noisePixel.y/uNoiseSamplerSize.y);float noise=(texture2D(uNoiseSampler,noiseUV).r-0.5)*2.0*uNoise;vec4 color=texture2D(uSampler,fragCoord);color.r=clamp(color.r+noise,0.0,1.0);color.g=clamp(color.g+noise,0.0,1.0);color.b=clamp(color.b+noise,0.0,1.0);color.rgb=samplePalette(color.rgb);gl_FragColor=color;}";function yt(t){return(t&t-1)===0}function Mn(t,e,n){const i=kt(t,t.VERTEX_SHADER,e),s=kt(t,t.FRAGMENT_SHADER,n),o=t.createProgram();if(!o)throw new Error("Failed to create shader program");if(t.attachShader(o,i),t.attachShader(o,s),t.linkProgram(o),!t.getProgramParameter(o,t.LINK_STATUS))throw Error(`Unable to initialize the shader program: ${t.getProgramInfoLog(o)}`);return o}function kt(t,e,n){const i=t.createShader(e);if(!i)throw new Error("Failed to create shader");if(t.shaderSource(i,n),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS))throw Error(`An error occurred compiling the shaders: ${t.getShaderInfoLog(i)}`);return i}function Pn(t){const e=t.createBuffer(),n=t.createBuffer(),i=[-1,1,-1,-1,1,-1,1,1],s=[3,2,1,3,1,0];return t.bindBuffer(t.ARRAY_BUFFER,e),t.bufferData(t.ARRAY_BUFFER,new Float32Array(i),t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(s),t.STATIC_DRAW),{vertex_buffer:e,index_buffer:n}}function nt(t,e,n){const i=t.createTexture();if(!i)throw new Error("Failed to create texture");return t.bindTexture(t.TEXTURE_2D,i),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),yt(e.width)&&yt(e.height)?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,n)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,n)),i}function Cn(t,e){let n=e;const i=t.getContext("webgl",{preserveDrawingBuffer:!0});if(!i){alert("WebGL not supported");return}i.clearColor(0,0,0,1),i.clear(i.COLOR_BUFFER_BIT);const s=Mn(i,Ln,Rn),{vertex_buffer:o,index_buffer:r}=Pn(i);i.useProgram(s);const l=i.getAttribLocation(s,"position");i.vertexAttribPointer(l,2,i.FLOAT,!1,0,0),i.enableVertexAttribArray(l);const a=i.getUniformLocation(s,"uSampler"),u=i.getUniformLocation(s,"uNoiseSampler"),d=i.getUniformLocation(s,"uNoise"),c=i.getUniformLocation(s,"uSize"),p=i.getUniformLocation(s,"uNoiseSamplerSize"),b=i.getUniformLocation(s,"uPaletteSampler");let m;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!0);const A=()=>{m&&i.deleteTexture(m),m=nt(i,n.image,i.LINEAR)};A();let T,h,v=null;const E=()=>{T&&i.deleteTexture(T),T=nt(i,n.thresholdMap,i.NEAREST),h={width:n.thresholdMap.width,height:n.thresholdMap.height}};E();let w;const I=()=>{w&&i.deleteTexture(w),w=nt(i,n.palette,i.NEAREST)};I();const B=()=>{i.viewport(0,0,n.output_width,n.output_height),i.clearColor(0,0,0,1),i.clear(i.COLOR_BUFFER_BIT),i.bindBuffer(i.ARRAY_BUFFER,o),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,r),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,m),i.uniform1i(a,0),i.activeTexture(i.TEXTURE1),i.bindTexture(i.TEXTURE_2D,T),i.uniform1i(u,1),i.activeTexture(i.TEXTURE2),i.bindTexture(i.TEXTURE_2D,w),i.uniform1i(b,2),i.uniform2f(p,h.width,h.height),i.uniform1f(d,n.noiseIntensity),i.uniform2f(c,n.output_width,n.output_height),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT),i.drawElements(i.TRIANGLES,6,i.UNSIGNED_SHORT,0)};function R(){v=requestAnimationFrame(()=>{B(),v=null})}return R(),{update(C){const F=n.image!==C.image,V=n.thresholdMap!==C.thresholdMap,X=n.palette!==C.palette;n=C,F&&A(),V&&E(),X&&I(),R()},destroy(){v!==null&&cancelAnimationFrame(v)}}}function Nn(t){let e,n,i,s,o;const r=t[3].default,l=Ie(r,t,t[2],null);return{c(){e=y("button"),l&&l.c(),this.h()},l(a){e=k(a,"BUTTON",{type:!0,class:!0});var u=S(e);l&&l.l(u),u.forEach(_),this.h()},h(){e.disabled=t[0],f(e,"type","button"),f(e,"class",n=t[1][t[0]?"disabled":"normal"]+" rounded-md px-2.5 py-1.5 text-sm font-semibold focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 flex items-center justify-center gap-2")},m(a,u){U(a,e,u),l&&l.m(e,null),i=!0,s||(o=J(e,"click",t[4]),s=!0)},p(a,[u]){l&&l.p&&(!i||u&4)&&De(l,r,a,a[2],i?Re(r,a[2],u,null):Le(a[2]),null),(!i||u&1)&&(e.disabled=a[0]),(!i||u&1&&n!==(n=a[1][a[0]?"disabled":"normal"]+" rounded-md px-2.5 py-1.5 text-sm font-semibold focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 flex items-center justify-center gap-2"))&&f(e,"class",n)},i(a){i||(N(l,a),i=!0)},o(a){O(l,a),i=!1},d(a){a&&_(e),l&&l.d(a),s=!1,o()}}}function Un(t,e,n){let{$$slots:i={},$$scope:s}=e,{disabled:o=!1}=e;const r={normal:"bg-indigo-600 text-white shadow-sm hover:bg-indigo-500",disabled:"bg-gray-200 text-gray-400 shadow-none cursor-not-allowed"};function l(a){mn.call(this,t,a)}return t.$$set=a=>{"disabled"in a&&n(0,o=a.disabled),"$$scope"in a&&n(2,s=a.$$scope)},[o,r,s,i,l]}class On extends ue{constructor(e){super(),fe(this,e,Un,Nn,ce,{disabled:0})}}async function Bn(t,e,n="png"){const i=new OffscreenCanvas(t.width,t.height),s=i.getContext("2d");if(!s)return;s.drawImage(t,0,0,t.width,t.height);const o=await i.convertToBlob({type:"image/"+n,quality:1}),r=URL.createObjectURL(o),l=document.createElement("a");l.download=`${e}.${n}`,l.href=r,l.click(),l.remove(),URL.revokeObjectURL(r)}function Tt(t){return new Promise((e,n)=>{t.type.startsWith("image/")||n(new Error("Not an image file"));const i=new FileReader;i.onload=s=>{if(typeof i.result!="string")return;const o=new Image;o.onload=()=>{e(o)},o.onerror=r=>{n(r)},o.src=i.result},i.onerror=s=>{n(s)},i.readAsDataURL(t)})}function Xn(t){const n=new OffscreenCanvas(t.width,t.height).getContext("2d");if(!n)throw new Error("Could not get canvas context");return n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height)}function St(t){const e=parseInt(t.slice(1,3),16),n=parseInt(t.slice(3,5),16),i=parseInt(t.slice(5,7),16);return[e,n,i]}var Fn=class extends EventTarget{dispatchTypedEvent(t,e){return super.dispatchEvent(e)}};class be{constructor(e){this.id=-1,this.nativePointer=e,this.pageX=e.pageX,this.pageY=e.pageY,this.clientX=e.clientX,this.clientY=e.clientY,self.Touch&&e instanceof Touch?this.id=e.identifier:Oe(e)&&(this.id=e.pointerId)}getCoalesced(){if("getCoalescedEvents"in this.nativePointer){const e=this.nativePointer.getCoalescedEvents().map(n=>new be(n));if(e.length>0)return e}return[this]}}const Oe=t=>"pointerId"in t,it=t=>"changedTouches"in t,It=()=>{};class Wn{constructor(e,{start:n=()=>!0,move:i=It,end:s=It,rawUpdates:o=!1,avoidPointerEvents:r=!1}={}){this._element=e,this.startPointers=[],this.currentPointers=[],this._excludeFromButtonsCheck=new Set,this._pointerStart=l=>{if(Oe(l)&&l.buttons===0)this._excludeFromButtonsCheck.add(l.pointerId);else if(!(l.buttons&1))return;const a=new be(l);this.currentPointers.some(u=>u.id===a.id)||this._triggerPointerStart(a,l)&&(Oe(l)?((l.target&&"setPointerCapture"in l.target?l.target:this._element).setPointerCapture(l.pointerId),this._element.addEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move),this._element.addEventListener("pointerup",this._pointerEnd),this._element.addEventListener("pointercancel",this._pointerEnd)):(window.addEventListener("mousemove",this._move),window.addEventListener("mouseup",this._pointerEnd)))},this._touchStart=l=>{for(const a of Array.from(l.changedTouches))this._triggerPointerStart(new be(a),l)},this._move=l=>{if(!it(l)&&(!Oe(l)||!this._excludeFromButtonsCheck.has(l.pointerId))&&l.buttons===0){this._pointerEnd(l);return}const a=this.currentPointers.slice(),u=it(l)?Array.from(l.changedTouches).map(c=>new be(c)):[new be(l)],d=[];for(const c of u){const p=this.currentPointers.findIndex(b=>b.id===c.id);p!==-1&&(d.push(c),this.currentPointers[p]=c)}d.length!==0&&this._moveCallback(a,d,l)},this._triggerPointerEnd=(l,a)=>{if(!it(a)&&a.buttons&1)return!1;const u=this.currentPointers.findIndex(c=>c.id===l.id);if(u===-1)return!1;this.currentPointers.splice(u,1),this.startPointers.splice(u,1),this._excludeFromButtonsCheck.delete(l.id);const d=!(a.type==="mouseup"||a.type==="touchend"||a.type==="pointerup");return this._endCallback(l,a,d),!0},this._pointerEnd=l=>{if(this._triggerPointerEnd(new be(l),l))if(Oe(l)){if(this.currentPointers.length)return;this._element.removeEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move),this._element.removeEventListener("pointerup",this._pointerEnd),this._element.removeEventListener("pointercancel",this._pointerEnd)}else window.removeEventListener("mousemove",this._move),window.removeEventListener("mouseup",this._pointerEnd)},this._touchEnd=l=>{for(const a of Array.from(l.changedTouches))this._triggerPointerEnd(new be(a),l)},this._startCallback=n,this._moveCallback=i,this._endCallback=s,this._rawUpdates=o&&"onpointerrawupdate"in window,self.PointerEvent&&!r?this._element.addEventListener("pointerdown",this._pointerStart):(this._element.addEventListener("mousedown",this._pointerStart),this._element.addEventListener("touchstart",this._touchStart),this._element.addEventListener("touchmove",this._move),this._element.addEventListener("touchend",this._touchEnd),this._element.addEventListener("touchcancel",this._touchEnd))}stop(){this._element.removeEventListener("pointerdown",this._pointerStart),this._element.removeEventListener("mousedown",this._pointerStart),this._element.removeEventListener("touchstart",this._touchStart),this._element.removeEventListener("touchmove",this._move),this._element.removeEventListener("touchend",this._touchEnd),this._element.removeEventListener("touchcancel",this._touchEnd),this._element.removeEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move),this._element.removeEventListener("pointerup",this._pointerEnd),this._element.removeEventListener("pointercancel",this._pointerEnd),window.removeEventListener("mousemove",this._move),window.removeEventListener("mouseup",this._pointerEnd)}_triggerPointerStart(e,n){return this._startCallback(e,n)?(this.currentPointers.push(e),this.startPointers.push(e),!0):!1}}function Vn(t,e,n){return Math.min(Math.max(t,e),n)}function Dt(t,e){return e?Math.sqrt((e.clientX-t.clientX)**2+(e.clientY-t.clientY)**2):0}function Lt(t,e){return e?{clientX:(t.clientX+e.clientX)/2,clientY:(t.clientY+e.clientY)/2}:t}const xe=class extends Fn{constructor(n){super();ke(this,"element");ke(this,"transform",new DOMMatrix);ke(this,"pointerTracker");this.element=n,this.element.addEventListener("wheel",this.onWheel.bind(this)),this.pointerTracker=new Wn(this.element,{start:(i,s)=>this.pointerTracker.currentPointers.length===2?!1:(s.preventDefault(),!0),move:i=>{this.onPointerMove(i,this.pointerTracker.currentPointers)},avoidPointerEvents:this.isSafari()}),this.element.addEventListener("wheel",this.onWheel.bind(this))}get x(){return this.transform.e}get y(){return this.transform.f}get scale(){return this.transform.a}set x(n){this.transform.e=n}set y(n){this.transform.f=n}set scale(n){this.transform.a=n,this.transform.d=n}onWheel(n){n.preventDefault();const i=this.element.getBoundingClientRect();let{deltaY:s}=n;const{ctrlKey:o,deltaMode:r}=n;r===1&&(s*=15);const l=s>0,a=o?100:300,u=1-(l?-s:s)/a,d=l?1/u:u,c=n.clientX-i.left,p=n.clientY-i.top;this.applyTransformation({scaleDiff:d,originX:c,originY:p})}applyTransformation(n={}){const{panX:i=0,panY:s=0,originX:o=0,originY:r=0,scaleDiff:l=1}=n,a=new DOMMatrix().translate(o,r).scale(l).translate(-o,-r),u=new DOMMatrix().translate(i,s);a.multiplySelf(u),a.multiplySelf(this.transform);const d=a.a,c=a.e,p=a.f;this.updateTransform(d,c,p)}onPointerMove(n,i){const s=this.element.getBoundingClientRect(),o=Lt(n[0],n[1]),r=Lt(i[0],i[1]),l=o.clientX-s.left,a=o.clientY-s.top,u=Dt(n[0],n[1]),d=Dt(i[0],i[1]),c=u?d/u:1;this.applyTransformation({originX:l,originY:a,scaleDiff:c,panX:r.clientX-o.clientX,panY:r.clientY-o.clientY})}updateTransform(n,i,s){if(n<xe.MIN_SCALE||n>xe.MAX_SCALE||n===this.scale&&i===this.x&&s===this.y)return;this.x=i,this.y=s,this.scale=n;const o=new CustomEvent("panzoom:change",{bubbles:!0,detail:{x:this.x,y:this.y,scale:this.scale,matrix:this.transform}});this.dispatchTypedEvent("panzoom:change",o)}isSafari(){return/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)}reset(){this.updateTransform(1,0,0)}destroy(){this.pointerTracker.stop()}};let Be=xe;ke(Be,"MIN_SCALE",.01),ke(Be,"MAX_SCALE",1e5);const zn=t=>({}),Rt=t=>({}),Hn=t=>({}),Mt=t=>({});function Yn(t){let e,n,i,s,o,r,l,a,u,d,c,p,b,m;const A=t[7].left,T=Ie(A,t,t[6],Mt),h=t[7].right,v=Ie(h,t,t[6],Rt);return c=new Pe({props:{src:wn,class:"w-6 h-6 text-white"}}),{c(){e=y("div"),n=y("div"),i=y("div"),s=y("div"),T&&T.c(),o=M(),r=y("div"),l=y("div"),v&&v.c(),a=M(),u=y("div"),d=y("div"),H(c.$$.fragment),this.h()},l(E){e=k(E,"DIV",{class:!0});var w=S(e);n=k(w,"DIV",{class:!0});var I=S(n);i=k(I,"DIV",{class:!0});var B=S(i);s=k(B,"DIV",{style:!0,class:!0});var R=S(s);T&&T.l(R),R.forEach(_),B.forEach(_),o=P(I),r=k(I,"DIV",{class:!0});var C=S(r);l=k(C,"DIV",{style:!0,class:!0});var F=S(l);v&&v.l(F),F.forEach(_),C.forEach(_),I.forEach(_),a=P(w),u=k(w,"DIV",{class:!0});var V=S(u);d=k(V,"DIV",{class:!0});var X=S(d);Y(c.$$.fragment,X),X.forEach(_),V.forEach(_),w.forEach(_),this.h()},h(){f(s,"style",t[3]),f(s,"class","w-full h-full origin-top-left grid place-items-center"),f(i,"class","mask-left svelte-u41rvx"),f(l,"style",t[3]),f(l,"class","w-full h-full origin-top-left grid place-items-center"),f(r,"class","mask-right svelte-u41rvx"),f(n,"class","w-full h-full grid place-items-center"),f(d,"class","w-12 h-12 rounded-full bg-black grid place-items-center absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"),Ae(d,"rotate-90",t[1]==="vertical"),f(u,"class","handle relative shadow-lg svelte-u41rvx"),f(e,"class","pz-container svelte-u41rvx"),Ae(e,"vertical",t[1]==="vertical"),ot(e,"--split-point",t[0]+"%")},m(E,w){U(E,e,w),g(e,n),g(n,i),g(i,s),T&&T.m(s,null),g(n,o),g(n,r),g(r,l),v&&v.m(l,null),g(e,a),g(e,u),g(u,d),j(c,d,null),t[8](e),p=!0,b||(m=[Xe(t[5].call(null,n)),Xe(t[4].call(null,u)),J(u,"pointercancel",lt(jn))],b=!0)},p(E,[w]){T&&T.p&&(!p||w&64)&&De(T,A,E,E[6],p?Re(A,E[6],w,Hn):Le(E[6]),Mt),(!p||w&8)&&f(s,"style",E[3]),v&&v.p&&(!p||w&64)&&De(v,h,E,E[6],p?Re(h,E[6],w,zn):Le(E[6]),Rt),(!p||w&8)&&f(l,"style",E[3]),(!p||w&2)&&Ae(d,"rotate-90",E[1]==="vertical"),(!p||w&2)&&Ae(e,"vertical",E[1]==="vertical"),w&1&&ot(e,"--split-point",E[0]+"%")},i(E){p||(N(T,E),N(v,E),N(c.$$.fragment,E),p=!0)},o(E){O(T,E),O(v,E),O(c.$$.fragment,E),p=!1},d(E){E&&_(e),T&&T.d(E),v&&v.d(E),G(c),t[8](null),b=!1,We(m)}}}const jn=()=>{};function Gn(t,e,n){let{$$slots:i={},$$scope:s}=e,{direction:o="horizontal"}=e,r=null,{split:l=50}=e;function a(p){return p.addEventListener("pointerdown",b=>{const m=o==="vertical"?b.clientY:b.clientX,A=l,T=document.body.style.cursor;document.body.style.cursor=o==="vertical"?"row-resize":"col-resize";const h=E=>{const w=r?r.clientWidth:window.innerWidth,I=r?r.clientHeight:window.innerHeight,B=o==="vertical"?I:w,C=(o==="vertical"?E.clientY:E.clientX)-m,F=A+C/B*100;n(0,l=Vn(F,0,100))},v=()=>{document.body.style.cursor=T,window.removeEventListener("pointermove",h),window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",v)};window.addEventListener("pointermove",h),window.addEventListener("pointerup",v),window.addEventListener("pointercancel",v)}),{destroy(){p.removeEventListener("pointerdown",()=>{})}}}let u="transform: none;";function d(p){const b=new Be(p);function m(A){const{matrix:T}=A.detail;n(3,u=`transform: ${T.toString()};`)}return b.addEventListener("panzoom:change",m),{destroy(){b.removeEventListener("panzoom:change",m),b.destroy()}}}function c(p){$[p?"unshift":"push"](()=>{r=p,n(2,r)})}return t.$$set=p=>{"direction"in p&&n(1,o=p.direction),"split"in p&&n(0,l=p.split),"$$scope"in p&&n(6,s=p.$$scope)},[l,o,r,u,a,d,s,i,c]}class qn extends ue{constructor(e){super(),fe(this,e,Gn,Yn,ce,{direction:1,split:0})}}const Zn=""+new URL("../assets/cat.58b560b7.jpg",import.meta.url).href,Qn="data:image/avif;base64,AAAAHGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZgAAAOptZXRhAAAAAAAAACFoZGxyAAAAAAAAAABwaWN0AAAAAAAAAAAAAAAAAAAAAA5waXRtAAAAAAABAAAAImlsb2MAAAAAREAAAQABAAAAAAEOAAEAAAAAAAAApwAAACNpaW5mAAAAAAABAAAAFWluZmUCAAAAAAEAAGF2MDEAAAAAamlwcnAAAABLaXBjbwAAABNjb2xybmNseAACAAIABoAAAAAMYXYxQ4EEDAAAAAAUaXNwZQAAAAAAAAJyAAACcgAAABBwaXhpAAAAAAMICAgAAAAXaXBtYQAAAAAAAAABAAEEgYIDhAAAAK9tZGF0EgAKChkmZxnHggQEDQgylgERQAEEEEEA9NBi7JFlrqXV1mwMry34uIYK7WRdWYJ/ZZ0EIyWW8aLm92oz5LY0W+l2FiKsHpp4BB3Vrk+iwHuzboac7wmSHHHRWklZdZ2hpEAi4E31lf1tjXnXie8fh4lzApbqjH5Pj7ZN6761WygYVdc2zvJOsflFZstng6rQU/oulDZSO6fQWKvzpO9pseyXBLfms64=",xn=""+new URL("../assets/david.0e7e3b46.png",import.meta.url).href;/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Qt=Symbol("Comlink.proxy"),$n=Symbol("Comlink.endpoint"),Jn=Symbol("Comlink.releaseProxy"),rt=Symbol("Comlink.finalizer"),Ye=Symbol("Comlink.thrown"),xt=t=>typeof t=="object"&&t!==null||typeof t=="function",Kn={canHandle:t=>xt(t)&&t[Qt],serialize(t){const{port1:e,port2:n}=new MessageChannel;return Jt(t,e),[n,[n]]},deserialize(t){return t.start(),Je(t)}},ei={canHandle:t=>xt(t)&&Ye in t,serialize({value:t}){let e;return t instanceof Error?e={isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:e={isError:!1,value:t},[e,[]]},deserialize(t){throw t.isError?Object.assign(new Error(t.value.message),t.value):t.value}},$t=new Map([["proxy",Kn],["throw",ei]]);function ti(t,e){for(const n of t)if(e===n||n==="*"||n instanceof RegExp&&n.test(e))return!0;return!1}function Jt(t,e=globalThis,n=["*"]){e.addEventListener("message",function i(s){if(!s||!s.data)return;if(!ti(n,s.origin)){console.warn(`Invalid origin '${s.origin}' for comlink proxy`);return}const{id:o,type:r,path:l}=Object.assign({path:[]},s.data),a=(s.data.argumentList||[]).map(we);let u;try{const d=l.slice(0,-1).reduce((p,b)=>p[b],t),c=l.reduce((p,b)=>p[b],t);switch(r){case"GET":u=c;break;case"SET":d[l.slice(-1)[0]]=we(s.data.value),u=!0;break;case"APPLY":u=c.apply(d,a);break;case"CONSTRUCT":{const p=new c(...a);u=oi(p)}break;case"ENDPOINT":{const{port1:p,port2:b}=new MessageChannel;Jt(t,b),u=nn(p,[p])}break;case"RELEASE":u=void 0;break;default:return}}catch(d){u={value:d,[Ye]:0}}Promise.resolve(u).catch(d=>({value:d,[Ye]:0})).then(d=>{const[c,p]=Qe(d);e.postMessage(Object.assign(Object.assign({},c),{id:o}),p),r==="RELEASE"&&(e.removeEventListener("message",i),Kt(e),rt in t&&typeof t[rt]=="function"&&t[rt]())}).catch(d=>{const[c,p]=Qe({value:new TypeError("Unserializable return value"),[Ye]:0});e.postMessage(Object.assign(Object.assign({},c),{id:o}),p)})}),e.start&&e.start()}function ni(t){return t.constructor.name==="MessagePort"}function Kt(t){ni(t)&&t.close()}function Je(t,e){return at(t,[],e)}function He(t){if(t)throw new Error("Proxy has been released and is not useable")}function en(t){return Te(t,{type:"RELEASE"}).then(()=>{Kt(t)})}const qe=new WeakMap,Ze="FinalizationRegistry"in globalThis&&new FinalizationRegistry(t=>{const e=(qe.get(t)||0)-1;qe.set(t,e),e===0&&en(t)});function ii(t,e){const n=(qe.get(e)||0)+1;qe.set(e,n),Ze&&Ze.register(t,e,t)}function ri(t){Ze&&Ze.unregister(t)}function at(t,e=[],n=function(){}){let i=!1;const s=new Proxy(n,{get(o,r){if(He(i),r===Jn)return()=>{ri(s),en(t),i=!0};if(r==="then"){if(e.length===0)return{then:()=>s};const l=Te(t,{type:"GET",path:e.map(a=>a.toString())}).then(we);return l.then.bind(l)}return at(t,[...e,r])},set(o,r,l){He(i);const[a,u]=Qe(l);return Te(t,{type:"SET",path:[...e,r].map(d=>d.toString()),value:a},u).then(we)},apply(o,r,l){He(i);const a=e[e.length-1];if(a===$n)return Te(t,{type:"ENDPOINT"}).then(we);if(a==="bind")return at(t,e.slice(0,-1));const[u,d]=Pt(l);return Te(t,{type:"APPLY",path:e.map(c=>c.toString()),argumentList:u},d).then(we)},construct(o,r){He(i);const[l,a]=Pt(r);return Te(t,{type:"CONSTRUCT",path:e.map(u=>u.toString()),argumentList:l},a).then(we)}});return ii(s,t),s}function si(t){return Array.prototype.concat.apply([],t)}function Pt(t){const e=t.map(Qe);return[e.map(n=>n[0]),si(e.map(n=>n[1]))]}const tn=new WeakMap;function nn(t,e){return tn.set(t,e),t}function oi(t){return Object.assign(t,{[Qt]:!0})}function Qe(t){for(const[e,n]of $t)if(n.canHandle(t)){const[i,s]=n.serialize(t);return[{type:"HANDLER",name:e,value:i},s]}return[{type:"RAW",value:t},tn.get(t)||[]]}function we(t){switch(t.type){case"HANDLER":return $t.get(t.name).deserialize(t.value);case"RAW":return t.value}}function Te(t,e,n){return new Promise(i=>{const s=li();t.addEventListener("message",function o(r){!r.data||!r.data.id||r.data.id!==s||(t.removeEventListener("message",o),i(r.data))}),t.start&&t.start(),t.postMessage(Object.assign({id:s},e),n)})}function li(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}function ai(){return new Worker(""+new URL("../workers/renderingWorker-5dfdb634.js",import.meta.url).href)}function ui(t,e){const n=t.transferControlToOffscreen(),i=new ai,s=Je(i);let o=null,r=null,l=()=>{};return s.errorDiffusionDithering(nn(n,[n]),e).then(a=>{r=a.update,l=a.destroy,r(o||e)}),{update:a=>{r?r(a):o=a},destroy:()=>{l(),i.terminate()}}}function fi(t){let e,n,i,s,o,r,l;return{c(){e=y("div"),n=y("label"),i=q(t[1]),s=M(),o=y("input"),this.h()},l(a){e=k(a,"DIV",{});var u=S(e);n=k(u,"LABEL",{for:!0,class:!0});var d=S(n);i=Z(d,t[1]),d.forEach(_),s=P(u),o=k(u,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0,name:!0,class:!0}),u.forEach(_),this.h()},h(){f(n,"for",t[6]),f(n,"class","block mb-2 text-sm font-medium text-gray-900 dark:text-white"),f(o,"id",t[6]),f(o,"type","range"),f(o,"min",t[3]),f(o,"max",t[4]),f(o,"step",t[5]),f(o,"name",t[2]),f(o,"class","w-full h-1.5 mb-6 bg-white ring-1 ring-gray-300 shadow-sm rounded-lg appearance-none cursor-pointer accent-indigo-600 dark:bg-gray-700")},m(a,u){U(a,e,u),g(e,n),g(n,i),g(e,s),g(e,o),Se(o,t[0]),r||(l=[J(o,"change",t[7]),J(o,"input",t[7])],r=!0)},p(a,[u]){u&2&&$e(i,a[1]),u&8&&f(o,"min",a[3]),u&16&&f(o,"max",a[4]),u&32&&f(o,"step",a[5]),u&4&&f(o,"name",a[2]),u&1&&Se(o,a[0])},i:ae,o:ae,d(a){a&&_(e),r=!1,We(l)}}}function ci(t,e,n){let{label:i}=e,{name:s=void 0}=e,{min:o=null}=e,{max:r=null}=e,{value:l=0}=e,{step:a=1}=e,u=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);function d(){l=pn(this.value),n(0,l)}return t.$$set=c=>{"label"in c&&n(1,i=c.label),"name"in c&&n(2,s=c.name),"min"in c&&n(3,o=c.min),"max"in c&&n(4,r=c.max),"value"in c&&n(0,l=c.value),"step"in c&&n(5,a=c.step)},[l,i,s,o,r,a,u,d]}class ct extends ue{constructor(e){super(),fe(this,e,ci,fi,ce,{label:1,name:2,min:3,max:4,value:0,step:5})}}function Ct(t,e,n){const i=t.slice();return i[6]=e[n],i}function Nt(t){let e,n=t[6].name+"",i,s,o;return{c(){e=y("option"),i=q(n),this.h()},l(r){e=k(r,"OPTION",{});var l=S(e);i=Z(l,n),l.forEach(_),this.h()},h(){e.__value=s=t[6].value,e.value=e.__value,e.selected=o=t[6].value===t[0]},m(r,l){U(r,e,l),g(e,i)},p(r,l){l&2&&n!==(n=r[6].name+"")&&$e(i,n),l&2&&s!==(s=r[6].value)&&(e.__value=s,e.value=e.__value),l&3&&o!==(o=r[6].value===r[0])&&(e.selected=o)},d(r){r&&_(e)}}}function di(t){let e,n,i,s,o,r,l,a=t[1],u=[];for(let d=0;d<a.length;d+=1)u[d]=Nt(Ct(t,a,d));return{c(){e=y("div"),n=y("label"),i=q(t[2]),s=M(),o=y("select");for(let d=0;d<u.length;d+=1)u[d].c();this.h()},l(d){e=k(d,"DIV",{});var c=S(e);n=k(c,"LABEL",{for:!0,class:!0});var p=S(n);i=Z(p,t[2]),p.forEach(_),s=P(c),o=k(c,"SELECT",{id:!0,name:!0,class:!0});var b=S(o);for(let m=0;m<u.length;m+=1)u[m].l(b);b.forEach(_),c.forEach(_),this.h()},h(){f(n,"for",t[4]),f(n,"class","block text-sm font-medium leading-6 text-gray-900"),f(o,"id",t[4]),f(o,"name",t[3]),f(o,"class","mt-2 block w-full rounded-md border-0 py-1.5 pl-3 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-indigo-600 sm:text-sm sm:leading-6"),t[0]===void 0&&gn(()=>t[5].call(o))},m(d,c){U(d,e,c),g(e,n),g(n,i),g(e,s),g(e,o);for(let p=0;p<u.length;p+=1)u[p]&&u[p].m(o,null);bt(o,t[0],!0),r||(l=J(o,"change",t[5]),r=!0)},p(d,[c]){if(c&4&&$e(i,d[2]),c&3){a=d[1];let p;for(p=0;p<a.length;p+=1){const b=Ct(d,a,p);u[p]?u[p].p(b,c):(u[p]=Nt(b),u[p].c(),u[p].m(o,null))}for(;p<u.length;p+=1)u[p].d(1);u.length=a.length}c&8&&f(o,"name",d[3]),c&3&&bt(o,d[0])},i:ae,o:ae,d(d){d&&_(e),ut(u,d),r=!1,l()}}}function hi(t,e,n){let{options:i}=e,{selected:s}=e,{label:o}=e,{name:r=void 0}=e,l=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);function a(){s=_n(this),n(0,s),n(1,i)}return t.$$set=u=>{"options"in u&&n(1,i=u.options),"selected"in u&&n(0,s=u.selected),"label"in u&&n(2,o=u.label),"name"in u&&n(3,r=u.name)},[s,i,o,r,l,a]}class rn extends ue{constructor(e){super(),fe(this,e,hi,di,ce,{options:1,selected:0,label:2,name:3})}}function mi(t){let e,n,i,s,o,r;function l(c){t[5](c)}let a={label:"Diffusion Mode",options:t[2]};t[1]!==void 0&&(a.selected=t[1]),e=new rn({props:a}),$.push(()=>ie(e,"selected",l));function u(c){t[6](c)}let d={label:"Diffusion Strength ("+t[0]+")",min:0,max:2,step:.01};return t[0]!==void 0&&(d.value=t[0]),s=new ct({props:d}),$.push(()=>ie(s,"value",u)),{c(){H(e.$$.fragment),i=M(),H(s.$$.fragment)},l(c){Y(e.$$.fragment,c),i=P(c),Y(s.$$.fragment,c)},m(c,p){j(e,c,p),U(c,i,p),j(s,c,p),r=!0},p(c,[p]){const b={};!n&&p&2&&(n=!0,b.selected=c[1],re(()=>n=!1)),e.$set(b);const m={};p&1&&(m.label="Diffusion Strength ("+c[0]+")"),!o&&p&1&&(o=!0,m.value=c[0],re(()=>o=!1)),s.$set(m)},i(c){r||(N(e.$$.fragment,c),N(s.$$.fragment,c),r=!0)},o(c){O(e.$$.fragment,c),O(s.$$.fragment,c),r=!1},d(c){G(e,c),c&&_(i),G(s,c)}}}function pi(t,e,n){let{diffusionStrength:i}=e,{diffusionMatrix:s}=e,{diffusionOriginX:o}=e,r="floyd_steinberg";const l=[{name:"Basic",value:"basic"},{name:"Floyd-Steinberg",value:"floyd_steinberg"},{name:"Atkinson",value:"atkinson"},{name:"Jarvis-Judice-Ninke",value:"jarvis_judice_ninke"}],a={basic:{matrix:[[0,1/2],[1/2,0]],originX:0},floyd_steinberg:{matrix:[[0,0,7/16],[3/16,5/16,1/16]],originX:1},atkinson:{matrix:[[0,0,1/8,1/8],[1/8,1/8,1/8,0],[0,1/8,0,0]],originX:1},jarvis_judice_ninke:{matrix:[[0,0,0,7/48,5/48],[3/48,5/48,7/48,5/48,3/48],[1/48,3/48,5/48,3/48,1/48]],originX:2}};function u(c){r=c,n(1,r)}function d(c){i=c,n(0,i)}return t.$$set=c=>{"diffusionStrength"in c&&n(0,i=c.diffusionStrength),"diffusionMatrix"in c&&n(3,s=c.diffusionMatrix),"diffusionOriginX"in c&&n(4,o=c.diffusionOriginX)},t.$$.update=()=>{if(t.$$.dirty&2){const{matrix:c,originX:p}=a[r];n(3,s=c),n(4,o=p)}},[i,r,l,s,o,u,d]}class gi extends ue{constructor(e){super(),fe(this,e,pi,mi,ce,{diffusionStrength:0,diffusionMatrix:3,diffusionOriginX:4})}}function Ut(t,e,n){const i=t.slice();return i[4]=e[n],i}function Ot(t){let e,n,i,s=!1,o,r,l=t[4].label+"",a,u,d,c,p,b;return c=vn(t[3][0]),{c(){e=y("label"),n=y("input"),o=M(),r=y("div"),a=q(l),d=M(),this.h()},l(m){e=k(m,"LABEL",{class:!0});var A=S(e);n=k(A,"INPUT",{type:!0,name:!0,class:!0}),o=P(A),r=k(A,"DIV",{class:!0});var T=S(r);a=Z(T,l),T.forEach(_),d=P(A),A.forEach(_),this.h()},h(){f(n,"type","radio"),f(n,"name","tabs"),n.__value=i=t[4].value,n.value=n.__value,f(n,"class","sr-only"),f(r,"class",u="flex items-center justify-center py-2 text-sm font-medium text-gray-700 border-b "+(t[4].value===t[0]?"border-indigo-500 border-b-2":"border-gray-300")+" cursor-pointer hover:bg-gray-900 hover:bg-opacity-5"),f(e,"class","flex-1"),c.p(n)},m(m,A){U(m,e,A),g(e,n),n.checked=n.__value===t[0],g(e,o),g(e,r),g(r,a),g(e,d),p||(b=J(n,"change",t[2]),p=!0)},p(m,A){A&2&&i!==(i=m[4].value)&&(n.__value=i,n.value=n.__value,s=!0),(s||A&3)&&(n.checked=n.__value===m[0]),A&2&&l!==(l=m[4].label+"")&&$e(a,l),A&3&&u!==(u="flex items-center justify-center py-2 text-sm font-medium text-gray-700 border-b "+(m[4].value===m[0]?"border-indigo-500 border-b-2":"border-gray-300")+" cursor-pointer hover:bg-gray-900 hover:bg-opacity-5")&&f(r,"class",u)},d(m){m&&_(e),c.r(),p=!1,b()}}}function _i(t){let e,n=t[1],i=[];for(let s=0;s<n.length;s+=1)i[s]=Ot(Ut(t,n,s));return{c(){e=y("nav");for(let s=0;s<i.length;s+=1)i[s].c();this.h()},l(s){e=k(s,"NAV",{class:!0});var o=S(e);for(let r=0;r<i.length;r+=1)i[r].l(o);o.forEach(_),this.h()},h(){f(e,"class","flex w-full")},m(s,o){U(s,e,o);for(let r=0;r<i.length;r+=1)i[r]&&i[r].m(e,null)},p(s,[o]){if(o&3){n=s[1];let r;for(r=0;r<n.length;r+=1){const l=Ut(s,n,r);i[r]?i[r].p(l,o):(i[r]=Ot(l),i[r].c(),i[r].m(e,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=n.length}},i:ae,o:ae,d(s){s&&_(e),ut(i,s)}}}function vi(t,e,n){let{tabs:i}=e,{selected:s}=e;const o=[[]];function r(){s=this.__value,n(0,s)}return t.$$set=l=>{"tabs"in l&&n(1,i=l.tabs),"selected"in l&&n(0,s=l.selected)},[s,i,r,o]}class bi extends ue{constructor(e){super(),fe(this,e,vi,_i,ce,{tabs:1,selected:0})}}const Ai=t=>({}),Bt=t=>({});function wi(t){let e;const n=t[2].placeholder,i=Ie(n,t,t[1],Bt),s=i||yi();return{c(){s&&s.c()},l(o){s&&s.l(o)},m(o,r){s&&s.m(o,r),e=!0},p(o,r){i&&i.p&&(!e||r&2)&&De(i,n,o,o[1],e?Re(n,o[1],r,Ai):Le(o[1]),Bt)},i(o){e||(N(s,o),e=!0)},o(o){O(s,o),e=!1},d(o){s&&s.d(o)}}}function Ei(t){let e,n,i,s;return{c(){e=y("canvas"),this.h()},l(o){e=k(o,"CANVAS",{class:!0,style:!0}),S(e).forEach(_),this.h()},h(){f(e,"class","w-full max-h-96 object-contain shadow-lg"),ot(e,"image-rendering","pixelated")},m(o,r){U(o,e,r),i||(s=Xe(n=Ti.call(null,e,t[0])),i=!0)},p(o,r){n&&ft(n.update)&&r&1&&n.update.call(null,o[0])},i:ae,o:ae,d(o){o&&_(e),i=!1,s()}}}function yi(t){let e,n;return{c(){e=y("span"),n=q("No Image")},l(i){e=k(i,"SPAN",{});var s=S(e);n=Z(s,"No Image"),s.forEach(_)},m(i,s){U(i,e,s),g(e,n)},p:ae,d(i){i&&_(e)}}}function ki(t){let e,n,i,s;const o=[Ei,wi],r=[];function l(a,u){return a[0]?0:1}return n=l(t),i=r[n]=o[n](t),{c(){e=y("div"),i.c(),this.h()},l(a){e=k(a,"DIV",{class:!0});var u=S(e);i.l(u),u.forEach(_),this.h()},h(){f(e,"class","w-full aspect-square rounded-lg bg-gray-100 p-8 grid place-items-center")},m(a,u){U(a,e,u),r[n].m(e,null),s=!0},p(a,[u]){let d=n;n=l(a),n===d?r[n].p(a,u):(je(),O(r[d],1,1,()=>{r[d]=null}),Ge(),i=r[n],i?i.p(a,u):(i=r[n]=o[n](a),i.c()),N(i,1),i.m(e,null))},i(a){s||(N(i),s=!0)},o(a){O(i),s=!1},d(a){a&&_(e),r[n].d()}}}function Ti(t,e){const n=t.getContext("2d");if(!n)return;const i=()=>{t.width=e.width,t.height=e.height,n.putImageData(e,0,0)};let s=null;const o=()=>{s||(s=requestAnimationFrame(()=>{s=null,i()}))};return o(),{destroy(){s&&cancelAnimationFrame(s)},update:r=>{e=r,o()}}}function Si(t,e,n){let{$$slots:i={},$$scope:s}=e,{imageData:o}=e;return t.$$set=r=>{"imageData"in r&&n(0,o=r.imageData),"$$scope"in r&&n(1,s=r.$$scope)},[o,s,i]}class Ii extends ue{constructor(e){super(),fe(this,e,Si,ki,ce,{imageData:0})}}function Di(){return new Worker(""+new URL("../workers/worker-09b3192d.js",import.meta.url).href)}let st=null;async function Li(t){return st||(st=Je(new Di)),await st.generate(t)}function Xt(t){let e,n,i;function s(r){t[8](r)}let o={label:"Bayer Level ("+t[3]+")",min:0,max:5,step:1};return t[3]!==void 0&&(o.value=t[3]),e=new ct({props:o}),$.push(()=>ie(e,"value",s)),{c(){H(e.$$.fragment)},l(r){Y(e.$$.fragment,r)},m(r,l){j(e,r,l),i=!0},p(r,l){const a={};l&8&&(a.label="Bayer Level ("+r[3]+")"),!n&&l&8&&(n=!0,a.value=r[3],re(()=>n=!1)),e.$set(a)},i(r){i||(N(e.$$.fragment,r),i=!0)},o(r){O(e.$$.fragment,r),i=!1},d(r){G(e,r)}}}function Ft(t){let e,n,i;function s(r){t[9](r)}let o={aspectRatio:1,minWidth:1,minHeight:1,maxHeight:3e3,maxWidth:3e3};return t[4]!==void 0&&(o.width=t[4]),e=new Zt({props:o}),$.push(()=>ie(e,"width",s)),{c(){H(e.$$.fragment)},l(r){Y(e.$$.fragment,r)},m(r,l){j(e,r,l),i=!0},p(r,l){const a={};!n&&l&16&&(n=!0,a.width=r[4],re(()=>n=!1)),e.$set(a)},i(r){i||(N(e.$$.fragment,r),i=!0)},o(r){O(e.$$.fragment,r),i=!1},d(r){G(e,r)}}}function Ri(t){let e,n;return{c(){e=y("span"),n=q("Loading Threshold Map"),this.h()},l(i){e=k(i,"SPAN",{slot:!0});var s=S(e);n=Z(s,"Loading Threshold Map"),s.forEach(_),this.h()},h(){f(e,"slot","placeholder")},m(i,s){U(i,e,s),g(e,n)},p:ae,d(i){i&&_(e)}}}function Mi(t){let e,n,i,s,o,r,l,a,u,d;function c(h){t[7](h)}let p={label:"Threshold Map",options:t[5]};t[2]!==void 0&&(p.selected=t[2]),e=new rn({props:p}),$.push(()=>ie(e,"selected",c));let b=t[2]==="bayer"&&Xt(t),m=t[2]==="white_noise"&&Ft(t);r=new Ii({props:{imageData:t[0],$$slots:{placeholder:[Ri]},$$scope:{ctx:t}}});function A(h){t[10](h)}let T={label:"Noise Intensity ("+t[1]+")",min:0,max:1.5,step:.01};return t[1]!==void 0&&(T.value=t[1]),a=new ct({props:T}),$.push(()=>ie(a,"value",A)),{c(){H(e.$$.fragment),i=M(),b&&b.c(),s=M(),m&&m.c(),o=M(),H(r.$$.fragment),l=M(),H(a.$$.fragment)},l(h){Y(e.$$.fragment,h),i=P(h),b&&b.l(h),s=P(h),m&&m.l(h),o=P(h),Y(r.$$.fragment,h),l=P(h),Y(a.$$.fragment,h)},m(h,v){j(e,h,v),U(h,i,v),b&&b.m(h,v),U(h,s,v),m&&m.m(h,v),U(h,o,v),j(r,h,v),U(h,l,v),j(a,h,v),d=!0},p(h,[v]){const E={};!n&&v&4&&(n=!0,E.selected=h[2],re(()=>n=!1)),e.$set(E),h[2]==="bayer"?b?(b.p(h,v),v&4&&N(b,1)):(b=Xt(h),b.c(),N(b,1),b.m(s.parentNode,s)):b&&(je(),O(b,1,1,()=>{b=null}),Ge()),h[2]==="white_noise"?m?(m.p(h,v),v&4&&N(m,1)):(m=Ft(h),m.c(),N(m,1),m.m(o.parentNode,o)):m&&(je(),O(m,1,1,()=>{m=null}),Ge());const w={};v&1&&(w.imageData=h[0]),v&2048&&(w.$$scope={dirty:v,ctx:h}),r.$set(w);const I={};v&2&&(I.label="Noise Intensity ("+h[1]+")"),!u&&v&2&&(u=!0,I.value=h[1],re(()=>u=!1)),a.$set(I)},i(h){d||(N(e.$$.fragment,h),N(b),N(m),N(r.$$.fragment,h),N(a.$$.fragment,h),d=!0)},o(h){O(e.$$.fragment,h),O(b),O(m),O(r.$$.fragment,h),O(a.$$.fragment,h),d=!1},d(h){G(e,h),h&&_(i),b&&b.d(h),h&&_(s),m&&m.d(h),h&&_(o),G(r,h),h&&_(l),G(a,h)}}}function Pi(t,e,n){let i,{thresholdMap:s}=e,{noiseIntensity:o}=e,r="bayer";const l=[{name:"Bayer",value:"bayer"},{name:"Blue Noise",value:"blue_noise"},{name:"White Noise",value:"white_noise"}];let a=3,u=256;function d(m){r=m,n(2,r)}function c(m){a=m,n(3,a)}function p(m){u=m,n(4,u)}function b(m){o=m,n(1,o)}return t.$$set=m=>{"thresholdMap"in m&&n(0,s=m.thresholdMap),"noiseIntensity"in m&&n(1,o=m.noiseIntensity)},t.$$.update=()=>{if(t.$$.dirty&16&&n(6,i=u),t.$$.dirty&92&&"ImageData"in globalThis){let m;switch(r){case"bayer":m={mode:"bayer",level:a};break;case"blue_noise":m={mode:"blue_noise"};break;case"white_noise":m={mode:"white_noise",width:u,height:i};break}Li(m).then(A=>n(0,s=A))}},[s,o,r,a,u,l,i,d,c,p,b]}class Ci extends ue{constructor(e){super(),fe(this,e,Pi,Mi,ce,{thresholdMap:0,noiseIntensity:1})}}const Ni=t=>({}),Wt=t=>({});function Ui(t){let e,n,i,s,o,r,l,a,u,d,c,p;s=new Pe({props:{src:t[0]?At:wt,class:"w-6 h-6 text-gray-500"}});const b=t[2].header,m=Ie(b,t,t[1],Wt),A=t[2].default,T=Ie(A,t,t[1],null);return{c(){e=y("div"),n=y("header"),i=y("button"),H(s.$$.fragment),o=M(),r=y("div"),m&&m.c(),l=M(),a=y("section"),T&&T.c(),this.h()},l(h){e=k(h,"DIV",{class:!0});var v=S(e);n=k(v,"HEADER",{class:!0});var E=S(n);i=k(E,"BUTTON",{class:!0});var w=S(i);Y(s.$$.fragment,w),w.forEach(_),o=P(E),r=k(E,"DIV",{class:!0});var I=S(r);m&&m.l(I),I.forEach(_),E.forEach(_),l=P(v),a=k(v,"SECTION",{class:!0});var B=S(a);T&&T.l(B),B.forEach(_),v.forEach(_),this.h()},h(){f(i,"class","contents"),f(r,"class","flex flex-1 items-center justify-between"),f(n,"class","py-4 px-4 flex-shrink-0 shadow-sm z-10 flex gap-2 items-center justify-between bg-white"),f(a,"class","overflow-y-auto overflow-x-visible"),Ae(a,"hidden",!t[0]),f(e,"class",u="w-full max-h-full "+(t[0]?"h-full divide-y divide-gray-200 mt-auto":"")+" bg-white bg-opacity-95 border border-gray-100 overflow-y-hidden flex-1 shadow-lg rounded-md flex flex-col justify-start pointer-events-auto touch-auto")},m(h,v){U(h,e,v),g(e,n),g(n,i),j(s,i,null),g(n,o),g(n,r),m&&m.m(r,null),g(e,l),g(e,a),T&&T.m(a,null),d=!0,c||(p=J(i,"click",t[3]),c=!0)},p(h,[v]){const E={};v&1&&(E.src=h[0]?At:wt),s.$set(E),m&&m.p&&(!d||v&2)&&De(m,b,h,h[1],d?Re(b,h[1],v,Ni):Le(h[1]),Wt),T&&T.p&&(!d||v&2)&&De(T,A,h,h[1],d?Re(A,h[1],v,null):Le(h[1]),null),(!d||v&1)&&Ae(a,"hidden",!h[0]),(!d||v&1&&u!==(u="w-full max-h-full "+(h[0]?"h-full divide-y divide-gray-200 mt-auto":"")+" bg-white bg-opacity-95 border border-gray-100 overflow-y-hidden flex-1 shadow-lg rounded-md flex flex-col justify-start pointer-events-auto touch-auto"))&&f(e,"class",u)},i(h){d||(N(s.$$.fragment,h),N(m,h),N(T,h),d=!0)},o(h){O(s.$$.fragment,h),O(m,h),O(T,h),d=!1},d(h){h&&_(e),G(s),m&&m.d(h),T&&T.d(h),c=!1,p()}}}function Oi(t,e,n){let{$$slots:i={},$$scope:s}=e,{open:o=!1}=e;const r=()=>n(0,o=!o);return t.$$set=l=>{"open"in l&&n(0,o=l.open),"$$scope"in l&&n(1,s=l.$$scope)},[o,s,i,r]}class Bi extends ue{constructor(e){super(),fe(this,e,Oi,Ui,ce,{open:0})}}const Xi="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAAXNSR0IArs4c6QAAAyNJREFUaEPVWjFW3DAQ/dOyqSEvB6AiTUJITcEtSJ8azkFq+uQUUFADCQ2pOAHbL2l/noy9q9Va1owseZMt4O16JM+fP39Gliwo+zkGcElyX0RAEpH/TyLyFcBNqdvL2IlIfheR0wGnY2D8338A+DLGlzFAmOt853A3Pvie5ZN5EMmFiMxyQSjHvQB4Y2HIAuSQ5H0i9zVpNKSdtfEAPgH4qQGkAkLyF4APHYhu4olAPYjIxxQYDZAXkjslnU5oZOmzp6E/AGZDYFJAsgWt1II6zdr5ov4OAVmQnJVkIgVOwVS0CPQCIXkL4CimiVAjE2vmTkQ+h2nWB+SA5GNNJhSRb0wifcZdeg/gtw9mA4gTxZaqk6l0A1jzfe3LRM0uKnAjU2t6CRlpqlRKA6nrNdMyKBhL/30gzyT3pnBCG/lUEwQwB/DW2S2B+FRoq9UUoBUlu8HQ/CF5JiIXqUGlr2uZGahebopzAN86ICthDPCpZWrivuKqnSyB1EwTbeQVmoiZiJDcFZH5f1atwhL+zjFyRfKkJiOJHN/o4BnMXDtGVPrQTL7NFYFjpPpSPaYRTXC0NlmM/IvVaxJGQo1oo2yxy2LEcoOm675W+eZTuql281VjxG+KVuA59pMzom2O1pKdZCS1ZI9d96Pqp1ZOtDVjHCNXAE40xrk2Q0CskY9o7NoxsktyPrazDzEzASPNEuW1I1b85AAxMrW5+s3VRNgkJ9bIssCfkbyoRUoNjXjV71xEXh+sVr1qdcJUkpmc1DIEdfWo2+rkGcCeYQK1aQ0grYY2Nx9C0VsXhkOoagBp79e7HeSq1yK1fa+mwTO0ADFUq8ENuo1qbGWmr3pZgBgCFd8ybVEcAHg0TJg0rQAkvYndgrkVkaNSfbIwkDsAqmOFJsIl9TIGSKAZ20GP31isGunLszFAgvmyjt46ZlwUdpJCGDAoBGTwvDN1GNqBaY6nc8GMBPIAoMjxdAfmEMB9DpgRQMq+MBA435z2xtZihTRS9RWONR8tzzBGRlTpHgYsa5A/iXvNCcDpyLXWVl9z6vP9mOQlgH3/Yg8jTwCKvnj2F9CvAivl1accAAAAAElFTkSuQmCC";function Fi(){return new Worker(""+new URL("../workers/worker-5ce4b9d2.js",import.meta.url).href)}let Vt=Je(new Fi);async function zt(t){if(!Vt)throw new Error("Worker not initialized");return await Vt.generatePalette(t)}function Ht(t,e,n){const i=t.slice();return i[39]=e[n],i}function Wi(t){let e,n,i,s,o,r,l,a,u,d,c,p,b,m,A,T,h,v,E=t[18],w=[];for(let I=0;I<E.length;I+=1)w[I]=Yt(Ht(t,E,I));return d=new Pe({props:{src:yn,class:"w-12 h-12 text-gray-400"}}),{c(){e=y("div"),n=y("div"),i=y("p"),s=q("Select or Drop an Image to Start"),o=M(),r=y("div");for(let I=0;I<w.length;I+=1)w[I].c();l=M(),a=y("label"),u=y("div"),H(d.$$.fragment),c=M(),p=y("span"),b=q("Choose an Image"),m=M(),A=y("input"),this.h()},l(I){e=k(I,"DIV",{class:!0});var B=S(e);n=k(B,"DIV",{class:!0});var R=S(n);i=k(R,"P",{class:!0});var C=S(i);s=Z(C,"Select or Drop an Image to Start"),C.forEach(_),o=P(R),r=k(R,"DIV",{class:!0});var F=S(r);for(let ne=0;ne<w.length;ne+=1)w[ne].l(F);l=P(F),a=k(F,"LABEL",{for:!0,class:!0});var V=S(a);u=k(V,"DIV",{class:!0});var X=S(u);Y(d.$$.fragment,X),X.forEach(_),c=P(V),p=k(V,"SPAN",{class:!0});var W=S(p);b=Z(W,"Choose an Image"),W.forEach(_),m=P(V),A=k(V,"INPUT",{type:!0,class:!0,id:!0,accept:!0}),V.forEach(_),F.forEach(_),R.forEach(_),B.forEach(_),this.h()},h(){f(i,"class","text-2xl text-gray-500 text-center"),f(u,"class","grid place-items-center h-full w-full"),f(p,"class","sr-only"),f(A,"type","file"),f(A,"class","sr-only"),f(A,"id","image-input"),f(A,"accept","image/*"),f(a,"for","image-input"),f(a,"class","block spect-square h-24 w-24 object-cover rounded-md shadow-md border-2 border-white bg-white hover:bg-gray-100"),f(r,"class","flex gap-3 justify-center flex-wrap"),f(n,"class","grid gap-4"),f(e,"class","w-full h-full grid place-items-center px-8")},m(I,B){U(I,e,B),g(e,n),g(n,i),g(i,s),g(n,o),g(n,r);for(let R=0;R<w.length;R+=1)w[R]&&w[R].m(r,null);g(r,l),g(r,a),g(a,u),j(d,u,null),g(a,c),g(a,p),g(p,b),g(a,m),g(a,A),T=!0,h||(v=J(A,"input",t[21]),h=!0)},p(I,B){if(B[0]&4456448){E=I[18];let R;for(R=0;R<E.length;R+=1){const C=Ht(I,E,R);w[R]?w[R].p(C,B):(w[R]=Yt(C),w[R].c(),w[R].m(r,l))}for(;R<w.length;R+=1)w[R].d(1);w.length=E.length}},i(I){T||(N(d.$$.fragment,I),T=!0)},o(I){O(d.$$.fragment,I),T=!1},d(I){I&&_(e),ut(w,I),G(d),h=!1,v()}}}function Vi(t){let e,n,i,s,o,r,l,a;return n=new qn({props:{direction:t[14],$$slots:{right:[Gi],left:[zi]},$$scope:{ctx:t}}}),o=new Pe({props:{src:kn,class:"w-5 h-5 text-white"}}),{c(){e=y("div"),H(n.$$.fragment),i=M(),s=y("button"),H(o.$$.fragment),this.h()},l(u){e=k(u,"DIV",{class:!0});var d=S(e);Y(n.$$.fragment,d),i=P(d),s=k(d,"BUTTON",{class:!0,title:!0});var c=S(s);Y(o.$$.fragment,c),c.forEach(_),d.forEach(_),this.h()},h(){f(s,"class","absolute top-0 left-0 m-4 p-2 bg-black bg-opacity-40 rounded-full"),f(s,"title","Close Image & Reset"),f(e,"class","w-full h-full relative")},m(u,d){U(u,e,d),j(n,e,null),g(e,i),g(e,s),j(o,s,null),r=!0,l||(a=J(s,"click",t[26]),l=!0)},p(u,d){const c={};d[0]&16384&&(c.direction=u[14]),d[0]&212931|d[1]&2048&&(c.$$scope={dirty:d,ctx:u}),n.$set(c)},i(u){r||(N(n.$$.fragment,u),N(o.$$.fragment,u),r=!0)},o(u){O(n.$$.fragment,u),O(o.$$.fragment,u),r=!1},d(u){u&&_(e),G(n),G(o),l=!1,a()}}}function Yt(t){let e,n,i,s,o;function r(){return t[27](t[39])}return{c(){e=y("button"),n=y("img"),this.h()},l(l){e=k(l,"BUTTON",{class:!0});var a=S(e);n=k(a,"IMG",{class:!0,src:!0,alt:!0}),a.forEach(_),this.h()},h(){f(n,"class","aspect-square h-24 w-24 object-cover rounded-md shadow-md border-2 border-white"),Fe(n.src,i=t[39])||f(n,"src",i),f(n,"alt",""),f(e,"class","hover:opacity-75 transition-opacity")},m(l,a){U(l,e,a),g(e,n),s||(o=J(e,"click",r),s=!0)},p(l,a){t=l},d(l){l&&_(e),s=!1,o()}}}function zi(t){let e,n,i;return{c(){e=y("img"),this.h()},l(s){e=k(s,"IMG",{slot:!0,src:!0,alt:!0,style:!0,class:!0}),this.h()},h(){f(e,"slot","left"),Fe(e.src,n=t[1].src)||f(e,"src",n),f(e,"alt",""),f(e,"style",i=`width: ${t[0]}px; height: ${t[17]}px`),f(e,"class","pixelated max-w-none shadow-lg bg-gray-200 svelte-1b7r98h")},m(s,o){U(s,e,o)},p(s,o){o[0]&2&&!Fe(e.src,n=s[1].src)&&f(e,"src",n),o[0]&131073&&i!==(i=`width: ${s[0]}px; height: ${s[17]}px`)&&f(e,"style",i)},d(s){s&&_(e)}}}function Hi(t){let e,n,i;return{c(){e=y("img"),this.h()},l(s){e=k(s,"IMG",{src:!0,alt:!0,style:!0,class:!0}),this.h()},h(){Fe(e.src,n=t[1].src)||f(e,"src",n),f(e,"alt",""),f(e,"style",i=`width: ${t[0]}px; height: ${t[17]}px`),f(e,"class","pixelated max-w-none shadow-lg svelte-1b7r98h")},m(s,o){U(s,e,o)},p(s,o){o[0]&2&&!Fe(e.src,n=s[1].src)&&f(e,"src",n),o[0]&131073&&i!==(i=`width: ${s[0]}px; height: ${s[17]}px`)&&f(e,"style",i)},d(s){s&&_(e)}}}function Yi(t){let e,n=t[9]&&t[16]&&jt(t);return{c(){n&&n.c(),e=Me()},l(i){n&&n.l(i),e=Me()},m(i,s){n&&n.m(i,s),U(i,e,s)},p(i,s){i[9]&&i[16]?n?n.p(i,s):(n=jt(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(i){n&&n.d(i),i&&_(e)}}}function ji(t){let e,n=t[16]&&Gt(t);return{c(){n&&n.c(),e=Me()},l(i){n&&n.l(i),e=Me()},m(i,s){n&&n.m(i,s),U(i,e,s)},p(i,s){i[16]?n?n.p(i,s):(n=Gt(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(i){n&&n.d(i),i&&_(e)}}}function jt(t){let e,n,i,s,o;return{c(){e=y("canvas"),this.h()},l(r){e=k(r,"CANVAS",{class:!0,style:!0,width:!0,height:!0,"aria-label":!0}),S(e).forEach(_),this.h()},h(){f(e,"class","pixelated shadow-lg bg-gray-200 svelte-1b7r98h"),f(e,"style",n=`width: ${t[0]}px; height: ${t[17]}px`),f(e,"width",t[0]),f(e,"height",t[17]),f(e,"aria-label","Dithered Image")},m(r,l){U(r,e,l),t[25](e),s||(o=Xe(i=Cn.call(null,e,{image:t[7],noiseIntensity:t[10],palette:t[16],output_width:t[0],output_height:t[17],thresholdMap:t[9]})),s=!0)},p(r,l){l[0]&131073&&n!==(n=`width: ${r[0]}px; height: ${r[17]}px`)&&f(e,"style",n),l[0]&1&&f(e,"width",r[0]),l[0]&131072&&f(e,"height",r[17]),i&&ft(i.update)&&l[0]&198273&&i.update.call(null,{image:r[7],noiseIntensity:r[10],palette:r[16],output_width:r[0],output_height:r[17],thresholdMap:r[9]})},d(r){r&&_(e),t[25](null),s=!1,o()}}}function Gt(t){let e,n,i,s,o;return{c(){e=y("canvas"),this.h()},l(r){e=k(r,"CANVAS",{class:!0,style:!0,width:!0,height:!0}),S(e).forEach(_),this.h()},h(){f(e,"class","pixelated shadow-lg bg-gray-200 svelte-1b7r98h"),f(e,"style",n=`width: ${t[0]}px; height: ${t[17]}px`),f(e,"width",t[0]),f(e,"height",t[17])},m(r,l){U(r,e,l),t[24](e),s||(o=Xe(i=ui.call(null,e,{image:t[7],output_width:t[0],output_height:t[17],palette:t[16],diffusionStrength:t[11],diffusionMatrix:t[12],diffusionMatrixOriginX:t[13]})),s=!0)},p(r,l){l[0]&131073&&n!==(n=`width: ${r[0]}px; height: ${r[17]}px`)&&f(e,"style",n),l[0]&1&&f(e,"width",r[0]),l[0]&131072&&f(e,"height",r[17]),i&&ft(i.update)&&l[0]&211073&&i.update.call(null,{image:r[7],output_width:r[0],output_height:r[17],palette:r[16],diffusionStrength:r[11],diffusionMatrix:r[12],diffusionMatrixOriginX:r[13]})},d(r){r&&_(e),t[24](null),s=!1,o()}}}function Gi(t){let e;function n(o,r){if(o[8]==="error_diffusion")return ji;if(o[8]==="ordered")return Yi;if(o[8]==="none")return Hi}let i=n(t),s=i&&i(t);return{c(){s&&s.c(),e=Me()},l(o){s&&s.l(o),e=Me()},m(o,r){s&&s.m(o,r),U(o,e,r)},p(o,r){i===(i=n(o))&&s?s.p(o,r):(s&&s.d(1),s=i&&i(o),s&&(s.c(),s.m(e.parentNode,e)))},d(o){s&&s.d(o),o&&_(e)}}}function qt(t){let e,n,i,s,o,r,l,a,u,d,c,p,b,m;return{c(){e=y("fieldset"),n=y("div"),i=y("input"),s=M(),o=y("label"),r=q("Light"),l=M(),a=y("div"),u=y("input"),d=M(),c=y("label"),p=q("Dark"),this.h()},l(A){e=k(A,"FIELDSET",{});var T=S(e);n=k(T,"DIV",{class:!0});var h=S(n);i=k(h,"INPUT",{type:!0,name:!0,id:!0}),s=P(h),o=k(h,"LABEL",{for:!0,class:!0});var v=S(o);r=Z(v,"Light"),v.forEach(_),h.forEach(_),l=P(T),a=k(T,"DIV",{class:!0});var E=S(a);u=k(E,"INPUT",{type:!0,name:!0,id:!0}),d=P(E),c=k(E,"LABEL",{for:!0,class:!0});var w=S(c);p=Z(w,"Dark"),w.forEach(_),E.forEach(_),T.forEach(_),this.h()},h(){f(i,"type","color"),f(i,"name","color-light"),f(i,"id","color-light"),f(o,"for","color-light"),f(o,"class","font-medium text-gray-900"),f(n,"class","flex gap-3"),f(u,"type","color"),f(u,"name","color-dark"),f(u,"id","color-dark"),f(c,"for","color-dark"),f(c,"class","font-medium text-gray-900"),f(a,"class","flex gap-3")},m(A,T){U(A,e,T),g(e,n),g(n,i),Se(i,t[3]),g(n,s),g(n,o),g(o,r),g(e,l),g(e,a),g(a,u),Se(u,t[4]),g(a,d),g(a,c),g(c,p),b||(m=[J(i,"input",t[37]),J(u,"input",t[38])],b=!0)},p(A,T){T[0]&8&&Se(i,A[3]),T[0]&16&&Se(u,A[4])},d(A){A&&_(e),b=!1,We(m)}}}function qi(t){let e,n,i,s,o,r,l,a,u,d,c,p,b,m,A,T,h,v,E,w,I,B,R,C,F,V,X,W,ne,Q,se,me,pe,te,le,K,ge,_e,de,Ce,Ne,L,x,he;function Ke(D){t[28](D)}function sn(D){t[29](D)}let et={minWidth:12,minHeight:12,maxHeight:5e3,maxWidth:5e3};t[0]!==void 0&&(et.width=t[0]),t[5]!==void 0&&(et.aspectRatio=t[5]),r=new Zt({props:et}),$.push(()=>ie(r,"width",Ke)),$.push(()=>ie(r,"aspectRatio",sn));function on(D){t[30](D)}let dt={tabs:[{label:"None",value:"none"},{label:"Ordered",value:"ordered"},{label:"Error Diffusion",value:"error_diffusion"}]};t[8]!==void 0&&(dt.selected=t[8]),m=new bi({props:dt}),$.push(()=>ie(m,"selected",on));function ln(D){t[31](D)}function an(D){t[32](D)}function un(D){t[33](D)}let Ve={};t[11]!==void 0&&(Ve.diffusionStrength=t[11]),t[12]!==void 0&&(Ve.diffusionMatrix=t[12]),t[13]!==void 0&&(Ve.diffusionOriginX=t[13]),v=new gi({props:Ve}),$.push(()=>ie(v,"diffusionStrength",ln)),$.push(()=>ie(v,"diffusionMatrix",an)),$.push(()=>ie(v,"diffusionOriginX",un));function fn(D){t[34](D)}function cn(D){t[35](D)}let tt={};t[9]!==void 0&&(tt.thresholdMap=t[9]),t[10]!==void 0&&(tt.noiseIntensity=t[10]),F=new Ci({props:tt}),$.push(()=>ie(F,"thresholdMap",fn)),$.push(()=>ie(F,"noiseIntensity",cn));let ee=t[2]&&qt(t);return{c(){e=y("section"),n=y("div"),i=y("h2"),s=q("Output Options"),o=M(),H(r.$$.fragment),u=M(),d=y("div"),c=y("h2"),p=q("Dithering Options"),b=M(),H(m.$$.fragment),T=M(),h=y("div"),H(v.$$.fragment),R=M(),C=y("div"),H(F.$$.fragment),ne=M(),Q=y("div"),se=y("h2"),me=q("Palette"),pe=M(),te=y("div"),le=y("div"),K=y("input"),ge=M(),_e=y("div"),de=y("label"),Ce=q("Monochrome"),Ne=M(),ee&&ee.c(),this.h()},l(D){e=k(D,"SECTION",{class:!0});var z=S(e);n=k(z,"DIV",{});var ve=S(n);i=k(ve,"H2",{class:!0});var Ue=S(i);s=Z(Ue,"Output Options"),Ue.forEach(_),o=P(ve),Y(r.$$.fragment,ve),ve.forEach(_),u=P(z),d=k(z,"DIV",{class:!0});var oe=S(d);c=k(oe,"H2",{class:!0});var Ee=S(c);p=Z(Ee,"Dithering Options"),Ee.forEach(_),b=P(oe),Y(m.$$.fragment,oe),T=P(oe),h=k(oe,"DIV",{class:!0});var ht=S(h);Y(v.$$.fragment,ht),ht.forEach(_),R=P(oe),C=k(oe,"DIV",{class:!0});var mt=S(C);Y(F.$$.fragment,mt),mt.forEach(_),oe.forEach(_),ne=P(z),Q=k(z,"DIV",{class:!0});var ye=S(Q);se=k(ye,"H2",{class:!0});var pt=S(se);me=Z(pt,"Palette"),pt.forEach(_),pe=P(ye),te=k(ye,"DIV",{class:!0});var ze=S(te);le=k(ze,"DIV",{class:!0});var gt=S(le);K=k(gt,"INPUT",{type:!0,id:!0,class:!0}),gt.forEach(_),ge=P(ze),_e=k(ze,"DIV",{class:!0});var _t=S(_e);de=k(_t,"LABEL",{for:!0,class:!0});var vt=S(de);Ce=Z(vt,"Monochrome"),vt.forEach(_),_t.forEach(_),ze.forEach(_),Ne=P(ye),ee&&ee.l(ye),ye.forEach(_),z.forEach(_),this.h()},h(){f(i,"class","text-base font-semibold leading-7 text-black mb-4"),f(c,"class","text-base font-semibold leading-7 text-black mb-2"),f(h,"class",B=t[8]==="error_diffusion"?"contents":"hidden"),f(C,"class",W=t[8]==="ordered"?"contents":"hidden"),f(d,"class","grid gap-4"),f(se,"class","text-base font-semibold leading-7 text-black mb-2"),f(K,"type","checkbox"),f(K,"id","monochrome"),f(K,"class","h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600"),f(le,"class","flex h-6 items-center"),f(de,"for","monochrome"),f(de,"class","font-medium text-gray-900"),f(_e,"class","ml-3 text-sm leading-6"),f(te,"class","relative flex items-start"),f(Q,"class","grid gap-3"),Ae(Q,"hidden",t[8]==="none"),f(e,"class","grid gap-8 pt-8 px-4 safe-padding-bottom svelte-1b7r98h")},m(D,z){U(D,e,z),g(e,n),g(n,i),g(i,s),g(n,o),j(r,n,null),g(e,u),g(e,d),g(d,c),g(c,p),g(d,b),j(m,d,null),g(d,T),g(d,h),j(v,h,null),g(d,R),g(d,C),j(F,C,null),g(e,ne),g(e,Q),g(Q,se),g(se,me),g(Q,pe),g(Q,te),g(te,le),g(le,K),K.checked=t[2],g(te,ge),g(te,_e),g(_e,de),g(de,Ce),g(Q,Ne),ee&&ee.m(Q,null),L=!0,x||(he=J(K,"change",t[36]),x=!0)},p(D,z){const ve={};!l&&z[0]&1&&(l=!0,ve.width=D[0],re(()=>l=!1)),!a&&z[0]&32&&(a=!0,ve.aspectRatio=D[5],re(()=>a=!1)),r.$set(ve);const Ue={};!A&&z[0]&256&&(A=!0,Ue.selected=D[8],re(()=>A=!1)),m.$set(Ue);const oe={};!E&&z[0]&2048&&(E=!0,oe.diffusionStrength=D[11],re(()=>E=!1)),!w&&z[0]&4096&&(w=!0,oe.diffusionMatrix=D[12],re(()=>w=!1)),!I&&z[0]&8192&&(I=!0,oe.diffusionOriginX=D[13],re(()=>I=!1)),v.$set(oe),(!L||z[0]&256&&B!==(B=D[8]==="error_diffusion"?"contents":"hidden"))&&f(h,"class",B);const Ee={};!V&&z[0]&512&&(V=!0,Ee.thresholdMap=D[9],re(()=>V=!1)),!X&&z[0]&1024&&(X=!0,Ee.noiseIntensity=D[10],re(()=>X=!1)),F.$set(Ee),(!L||z[0]&256&&W!==(W=D[8]==="ordered"?"contents":"hidden"))&&f(C,"class",W),z[0]&4&&(K.checked=D[2]),D[2]?ee?ee.p(D,z):(ee=qt(D),ee.c(),ee.m(Q,null)):ee&&(ee.d(1),ee=null),(!L||z[0]&256)&&Ae(Q,"hidden",D[8]==="none")},i(D){L||(N(r.$$.fragment,D),N(m.$$.fragment,D),N(v.$$.fragment,D),N(F.$$.fragment,D),L=!0)},o(D){O(r.$$.fragment,D),O(m.$$.fragment,D),O(v.$$.fragment,D),O(F.$$.fragment,D),L=!1},d(D){D&&_(e),G(r),G(m),G(v),G(F),ee&&ee.d(),x=!1,he()}}}function Zi(t){let e,n,i;return e=new Pe({props:{src:Tn,class:"w-4 h-4"}}),{c(){H(e.$$.fragment),n=q(`
					Save`)},l(s){Y(e.$$.fragment,s),n=Z(s,`
					Save`)},m(s,o){j(e,s,o),U(s,n,o),i=!0},p:ae,i(s){i||(N(e.$$.fragment,s),i=!0)},o(s){O(e.$$.fragment,s),i=!1},d(s){G(e,s),s&&_(n)}}}function Qi(t){let e,n,i,s,o;return s=new On({props:{disabled:!t[1],$$slots:{default:[Zi]},$$scope:{ctx:t}}}),s.$on("click",t[19]),{c(){e=y("h1"),n=q("Options"),i=M(),H(s.$$.fragment),this.h()},l(r){e=k(r,"H1",{class:!0});var l=S(e);n=Z(l,"Options"),l.forEach(_),i=P(r),Y(s.$$.fragment,r),this.h()},h(){f(e,"class","font-bold")},m(r,l){U(r,e,l),g(e,n),U(r,i,l),j(s,r,l),o=!0},p(r,l){const a={};l[0]&2&&(a.disabled=!r[1]),l[1]&2048&&(a.$$scope={dirty:l,ctx:r}),s.$set(a)},i(r){o||(N(s.$$.fragment,r),o=!0)},o(r){O(s.$$.fragment,r),o=!1},d(r){r&&_(e),r&&_(i),G(s,r)}}}function xi(t){let e,n,i,s,o,r,l,a,u,d,c,p,b;e=new En({props:{icon:Xi,og_image:$i}});const m=[Vi,Wi],A=[];function T(h,v){return h[7]&&h[1]?0:1}return r=T(t),l=A[r]=m[r](t),d=new Bi({props:{open:t[15],$$slots:{header:[Qi],default:[qi]},$$scope:{ctx:t}}}),{c(){H(e.$$.fragment),n=M(),i=M(),s=y("main"),o=y("section"),l.c(),a=M(),u=y("aside"),H(d.$$.fragment),this.h()},l(h){Y(e.$$.fragment,h),n=P(h),i=P(h),s=k(h,"MAIN",{class:!0});var v=S(s);o=k(v,"SECTION",{class:!0});var E=S(o);l.l(E),E.forEach(_),a=P(v),u=k(v,"ASIDE",{class:!0});var w=S(u);Y(d.$$.fragment,w),w.forEach(_),v.forEach(_),this.h()},h(){f(o,"class","overflow-hidden select-none fixed inset-0"),f(u,"class","md:w-96 w-full max-h-full absolute bottom-0 left-0 right-0 top-0 md:left-auto z-50 p-2 grid place-items-end touch-none pointer-events-none"),f(s,"class","w-screen max-w-screen h-screen max-h-screen relative bg-gray-300")},m(h,v){j(e,h,v),U(h,n,v),U(h,i,v),U(h,s,v),g(s,o),A[r].m(o,null),g(s,a),g(s,u),j(d,u,null),c=!0,p||(b=[J(document.body,"drop",lt(t[20])),J(document.body,"dragover",lt(Ji))],p=!0)},p(h,v){let E=r;r=T(h),r===E?A[r].p(h,v):(je(),O(A[E],1,1,()=>{A[E]=null}),Ge(),l=A[r],l?l.p(h,v):(l=A[r]=m[r](h),l.c()),N(l,1),l.m(o,null));const w={};v[0]&32768&&(w.open=h[15]),v[0]&16191|v[1]&2048&&(w.$$scope={dirty:v,ctx:h}),d.$set(w)},i(h){c||(N(e.$$.fragment,h),N(l),N(d.$$.fragment,h),c=!0)},o(h){O(e.$$.fragment,h),O(l),O(d.$$.fragment,h),c=!1},d(h){G(e,h),h&&_(n),h&&_(i),h&&_(s),A[r].d(),G(d),p=!1,We(b)}}}const $i="/og/dither-studio.webp",Ji=()=>{};function Ki(t,e,n){let i,s;const o=[Zn,Qn,xn];let r=null,l=300,a=null,u=null;async function d(){r&&await Bn(r,"dithered","png")}async function c(L){var he;const x=(he=L.dataTransfer)==null?void 0:he.files[0];if(x){if(!x.type.startsWith("image/")){alert("Please drop an image file");return}try{n(1,a=await Tt(x))}catch(Ke){alert("Failed to load image"),console.error(Ke)}}}async function p(L){const x=L.target.files[0];if(x)try{n(1,a=await Tt(x))}catch(he){alert("Failed to load image"),console.error(he)}}async function b(L){const x=new Image;x.onload=()=>{n(1,a=x)},x.src=L}let m="ordered",A=null,T=.3,h=1,v=[[1]],E=0,w=!1,I="#ffffff",B="#000000",R="horizontal",C=!1,F="3bit",V;bn(async()=>{const L=window.matchMedia("(min-width: 768px)");function x(he){n(14,R=he.matches?"horizontal":"vertical"),n(15,C=L.matches)}return L.addEventListener("change",x),x(L),()=>L.removeEventListener("change",x)});function X(L){$[L?"unshift":"push"](()=>{r=L,n(6,r)})}function W(L){$[L?"unshift":"push"](()=>{r=L,n(6,r)})}const ne=()=>n(1,a=null),Q=L=>b(L);function se(L){l=L,n(0,l)}function me(L){s=L,n(5,s),n(1,a)}function pe(L){m=L,n(8,m)}function te(L){h=L,n(11,h)}function le(L){v=L,n(12,v)}function K(L){E=L,n(13,E)}function ge(L){A=L,n(9,A)}function _e(L){T=L,n(10,T)}function de(){w=this.checked,n(2,w)}function Ce(){I=this.value,n(3,I)}function Ne(){B=this.value,n(4,B)}return t.$$.update=()=>{if(t.$$.dirty[0]&2&&n(5,s=a!=null&&a.width&&(a!=null&&a.height)?a.width/a.height:1),t.$$.dirty[0]&33&&n(17,i=Math.round(l/s)),t.$$.dirty[0]&2&&n(7,u=a?Xn(a):null),t.$$.dirty[0]&4&&n(23,F=w?"black_white":"3bit"),t.$$.dirty[0]&8388632)switch(F){case"3bit":{zt([[0,0,0],[255,0,0],[0,255,0],[0,0,255],[255,255,0],[255,0,255],[0,255,255],[255,255,255]]).then(L=>n(16,V=L));break}case"black_white":zt([St(B),St(I)]).then(L=>n(16,V=L))}},[l,a,w,I,B,s,r,u,m,A,T,h,v,E,R,C,V,i,o,d,c,p,b,F,X,W,ne,Q,se,me,pe,te,le,K,ge,_e,de,Ce,Ne]}class rr extends ue{constructor(e){super(),fe(this,e,Ki,xi,ce,{},null,[-1,-1])}}export{rr as component,ir as universal};
