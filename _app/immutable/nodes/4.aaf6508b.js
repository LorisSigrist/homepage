var Cn=Object.defineProperty;var Dn=(t,e,n)=>e in t?Cn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var fe=(t,e,n)=>(Dn(t,typeof e!="symbol"?e+"":e,n),n);import{S as ie,i as re,s as se,k as E,q as j,a as P,y as F,l as y,m as S,r as q,h as b,c as N,z,n as _,b as O,G as v,A as W,M as Z,g as M,d as C,O as Fe,B as V,P as tn,L as Rn,C as Te,D as Me,E as Ce,F as De,Q as ot,R as be,p as ce,T as Re,U as at,V as ye,o as Ln,w as Y,W as $e,H as K,v as Ae,f as Ee,X as G,Y as Q,e as je,Z as Pn,u as ve,_ as qe,$ as dt,a0 as Nn,a1 as wt,a2 as On}from"../chunks/index.ac0a233c.js";import{I as _e,P as nn,A as Un,C as At,b as Et,X as rn,L as Xn,c as sn,a as Bn}from"../chunks/Icon.9568da89.js";function Fn(){return{title:"Dithering",author:"Loris Sigrist",description:"Dither your Images right in the browser!"}}const $r=Object.freeze(Object.defineProperty({__proto__:null,load:Fn},Symbol.toStringTag,{value:"Module"}));async function zn(t,e,n="png"){const i=new OffscreenCanvas(t.width,t.height),s=i.getContext("2d");if(!s)return;s.drawImage(t,0,0,t.width,t.height);const o=await i.convertToBlob({type:"image/"+n,quality:1}),r=URL.createObjectURL(o),a=document.createElement("a");a.download=`${e}.${n}`,a.href=r,a.click(),a.remove(),URL.revokeObjectURL(r)}function on(t){return new Promise((e,n)=>{t.type.startsWith("image/")||n(new Error("Not an image file"));const i=new FileReader;i.onload=s=>{if(typeof i.result!="string")return;const o=new Image;o.onload=()=>{e(o)},o.onerror=r=>{n(r)},o.src=i.result},i.onerror=s=>{n(s)},i.readAsDataURL(t)})}function yt(t){const n=new OffscreenCanvas(t.width,t.height).getContext("2d");if(!n)throw new Error("Could not get canvas context");return n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height)}function Pe(t){const e=parseInt(t.slice(1,3),16),n=parseInt(t.slice(3,5),16),i=parseInt(t.slice(5,7),16);return[e,n,i]}function Wn([t,e,n]){const i=s=>{const o=s.toString(16);return o.length==1?"0"+o:o};return"#"+i(t)+i(e)+i(n)}const Vn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAAXNSR0IArs4c6QAAAyNJREFUaEPVWjFW3DAQ/dOyqSEvB6AiTUJITcEtSJ8azkFq+uQUUFADCQ2pOAHbL2l/noy9q9Va1owseZMt4O16JM+fP39Gliwo+zkGcElyX0RAEpH/TyLyFcBNqdvL2IlIfheR0wGnY2D8338A+DLGlzFAmOt853A3Pvie5ZN5EMmFiMxyQSjHvQB4Y2HIAuSQ5H0i9zVpNKSdtfEAPgH4qQGkAkLyF4APHYhu4olAPYjIxxQYDZAXkjslnU5oZOmzp6E/AGZDYFJAsgWt1II6zdr5ov4OAVmQnJVkIgVOwVS0CPQCIXkL4CimiVAjE2vmTkQ+h2nWB+SA5GNNJhSRb0wifcZdeg/gtw9mA4gTxZaqk6l0A1jzfe3LRM0uKnAjU2t6CRlpqlRKA6nrNdMyKBhL/30gzyT3pnBCG/lUEwQwB/DW2S2B+FRoq9UUoBUlu8HQ/CF5JiIXqUGlr2uZGahebopzAN86ICthDPCpZWrivuKqnSyB1EwTbeQVmoiZiJDcFZH5f1atwhL+zjFyRfKkJiOJHN/o4BnMXDtGVPrQTL7NFYFjpPpSPaYRTXC0NlmM/IvVaxJGQo1oo2yxy2LEcoOm675W+eZTuql281VjxG+KVuA59pMzom2O1pKdZCS1ZI9d96Pqp1ZOtDVjHCNXAE40xrk2Q0CskY9o7NoxsktyPrazDzEzASPNEuW1I1b85AAxMrW5+s3VRNgkJ9bIssCfkbyoRUoNjXjV71xEXh+sVr1qdcJUkpmc1DIEdfWo2+rkGcCeYQK1aQ0grYY2Nx9C0VsXhkOoagBp79e7HeSq1yK1fa+mwTO0ADFUq8ENuo1qbGWmr3pZgBgCFd8ybVEcAHg0TJg0rQAkvYndgrkVkaNSfbIwkDsAqmOFJsIl9TIGSKAZ20GP31isGunLszFAgvmyjt46ZlwUdpJCGDAoBGTwvDN1GNqBaY6nc8GMBPIAoMjxdAfmEMB9DpgRQMq+MBA435z2xtZihTRS9RWONR8tzzBGRlTpHgYsa5A/iXvNCcDpyLXWVl9z6vP9mOQlgH3/Yg8jTwCKvnj2F9CvAivl1accAAAAAElFTkSuQmCC",Hn=""+new URL("../assets/cat.58b560b7.jpg",import.meta.url).href,Yn="data:image/avif;base64,AAAAHGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZgAAAOptZXRhAAAAAAAAACFoZGxyAAAAAAAAAABwaWN0AAAAAAAAAAAAAAAAAAAAAA5waXRtAAAAAAABAAAAImlsb2MAAAAAREAAAQABAAAAAAEOAAEAAAAAAAAApwAAACNpaW5mAAAAAAABAAAAFWluZmUCAAAAAAEAAGF2MDEAAAAAamlwcnAAAABLaXBjbwAAABNjb2xybmNseAACAAIABoAAAAAMYXYxQ4EEDAAAAAAUaXNwZQAAAAAAAAJyAAACcgAAABBwaXhpAAAAAAMICAgAAAAXaXBtYQAAAAAAAAABAAEEgYIDhAAAAK9tZGF0EgAKChkmZxnHggQEDQgylgERQAEEEEEA9NBi7JFlrqXV1mwMry34uIYK7WRdWYJ/ZZ0EIyWW8aLm92oz5LY0W+l2FiKsHpp4BB3Vrk+iwHuzboac7wmSHHHRWklZdZ2hpEAi4E31lf1tjXnXie8fh4lzApbqjH5Pj7ZN6761WygYVdc2zvJOsflFZstng6rQU/oulDZSO6fQWKvzpO9pseyXBLfms64=",jn=""+new URL("../assets/david.0e7e3b46.png",import.meta.url).href;function kt(t,e,n){const i=t.slice();return i[5]=e[n],i}function It(t){let e,n,i,s,o;function r(){return t[3](t[5])}return{c(){e=E("button"),n=E("img"),this.h()},l(a){e=y(a,"BUTTON",{class:!0});var l=S(e);n=y(l,"IMG",{class:!0,src:!0,alt:!0}),l.forEach(b),this.h()},h(){_(n,"class","aspect-square h-24 w-24 object-cover rounded-md shadow-md border-2 border-white"),Rn(n.src,i=t[5])||_(n,"src",i),_(n,"alt",""),_(e,"class","hover:opacity-75 transition-opacity")},m(a,l){O(a,e,l),v(e,n),s||(o=Z(e,"click",r),s=!0)},p(a,l){t=a},d(a){a&&b(e),s=!1,o()}}}function qn(t){let e,n,i,s,o,r,a,l,u,f,c,d,m,g,p,A,h,w,I=t[0],k=[];for(let D=0;D<I.length;D+=1)k[D]=It(kt(t,I,D));return f=new _e({props:{src:nn,class:"w-12 h-12 text-gray-400"}}),{c(){e=E("div"),n=E("div"),i=E("p"),s=j("Select or Drop an Image to Start"),o=P(),r=E("div");for(let D=0;D<k.length;D+=1)k[D].c();a=P(),l=E("label"),u=E("div"),F(f.$$.fragment),c=P(),d=E("span"),m=j("Choose an Image"),g=P(),p=E("input"),this.h()},l(D){e=y(D,"DIV",{class:!0});var H=S(e);n=y(H,"DIV",{class:!0});var U=S(n);i=y(U,"P",{class:!0});var B=S(i);s=q(B,"Select or Drop an Image to Start"),B.forEach(b),o=N(U),r=y(U,"DIV",{class:!0});var R=S(r);for(let x=0;x<k.length;x+=1)k[x].l(R);a=N(R),l=y(R,"LABEL",{for:!0,class:!0});var $=S(l);u=y($,"DIV",{class:!0});var T=S(u);z(f.$$.fragment,T),T.forEach(b),c=N($),d=y($,"SPAN",{class:!0});var X=S(d);m=q(X,"Choose an Image"),X.forEach(b),g=N($),p=y($,"INPUT",{type:!0,class:!0,id:!0,accept:!0}),$.forEach(b),R.forEach(b),U.forEach(b),H.forEach(b),this.h()},h(){_(i,"class","text-2xl text-gray-500 text-center"),_(u,"class","grid place-items-center h-full w-full"),_(d,"class","sr-only"),_(p,"type","file"),_(p,"class","sr-only"),_(p,"id","image-input"),_(p,"accept","image/*"),_(l,"for","image-input"),_(l,"class","block spect-square h-24 w-24 object-cover rounded-md shadow-md border-2 border-white bg-white hover:bg-gray-100"),_(r,"class","flex gap-3 justify-center flex-wrap"),_(n,"class","grid gap-4"),_(e,"class","w-full h-full grid place-items-center px-8")},m(D,H){O(D,e,H),v(e,n),v(n,i),v(i,s),v(n,o),v(n,r);for(let U=0;U<k.length;U+=1)k[U]&&k[U].m(r,null);v(r,a),v(r,l),v(l,u),W(f,u,null),v(l,c),v(l,d),v(d,m),v(l,g),v(l,p),A=!0,h||(w=Z(p,"input",t[1]),h=!0)},p(D,[H]){if(H&5){I=D[0];let U;for(U=0;U<I.length;U+=1){const B=kt(D,I,U);k[U]?k[U].p(B,H):(k[U]=It(B),k[U].c(),k[U].m(r,a))}for(;U<k.length;U+=1)k[U].d(1);k.length=I.length}},i(D){A||(M(f.$$.fragment,D),A=!0)},o(D){C(f.$$.fragment,D),A=!1},d(D){D&&b(e),Fe(k,D),V(f),h=!1,w()}}}function Gn(t){const e=[Hn,Yn,jn],n=tn();async function i(r){const a=r.target.files[0];if(a)try{n("image",await on(a))}catch(l){alert("Failed to load image"),console.error(l)}}async function s(r){const a=new Image;a.onload=()=>{n("image",a)},a.src=r}return[e,i,s,r=>s(r)]}class Qn extends ie{constructor(e){super(),re(this,e,Gn,qn,se,{})}}function Zn(t){let e,n,i,s,o;const r=t[3].default,a=Te(r,t,t[2],null);return{c(){e=E("button"),a&&a.c(),this.h()},l(l){e=y(l,"BUTTON",{type:!0,class:!0});var u=S(e);a&&a.l(u),u.forEach(b),this.h()},h(){e.disabled=t[0],_(e,"type","button"),_(e,"class",n=t[1][t[0]?"disabled":"normal"]+" rounded-md px-2.5 py-1.5 text-sm font-semibold focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 flex items-center justify-center gap-2")},m(l,u){O(l,e,u),a&&a.m(e,null),i=!0,s||(o=Z(e,"click",t[4]),s=!0)},p(l,[u]){a&&a.p&&(!i||u&4)&&Me(a,r,l,l[2],i?De(r,l[2],u,null):Ce(l[2]),null),(!i||u&1)&&(e.disabled=l[0]),(!i||u&1&&n!==(n=l[1][l[0]?"disabled":"normal"]+" rounded-md px-2.5 py-1.5 text-sm font-semibold focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 flex items-center justify-center gap-2"))&&_(e,"class",n)},i(l){i||(M(a,l),i=!0)},o(l){C(a,l),i=!1},d(l){l&&b(e),a&&a.d(l),s=!1,o()}}}function Jn(t,e,n){let{$$slots:i={},$$scope:s}=e,{disabled:o=!1}=e;const r={normal:"bg-indigo-600 text-white shadow-sm hover:bg-indigo-500",disabled:"bg-gray-200 text-gray-400 shadow-none cursor-not-allowed"};function a(l){ot.call(this,t,l)}return t.$$set=l=>{"disabled"in l&&n(0,o=l.disabled),"$$scope"in l&&n(2,s=l.$$scope)},[o,r,s,i,a]}class an extends ie{constructor(e){super(),re(this,e,Jn,Zn,se,{disabled:0})}}var Kn=class extends EventTarget{dispatchTypedEvent(t,e){return super.dispatchEvent(e)}};class pe{constructor(e){this.id=-1,this.nativePointer=e,this.pageX=e.pageX,this.pageY=e.pageY,this.clientX=e.clientX,this.clientY=e.clientY,self.Touch&&e instanceof Touch?this.id=e.identifier:Ne(e)&&(this.id=e.pointerId)}getCoalesced(){if("getCoalescedEvents"in this.nativePointer){const e=this.nativePointer.getCoalescedEvents().map(n=>new pe(n));if(e.length>0)return e}return[this]}}const Ne=t=>"pointerId"in t,tt=t=>"changedTouches"in t,St=()=>{};class $n{constructor(e,{start:n=()=>!0,move:i=St,end:s=St,rawUpdates:o=!1,avoidPointerEvents:r=!1}={}){this._element=e,this.startPointers=[],this.currentPointers=[],this._excludeFromButtonsCheck=new Set,this._pointerStart=a=>{if(Ne(a)&&a.buttons===0)this._excludeFromButtonsCheck.add(a.pointerId);else if(!(a.buttons&1))return;const l=new pe(a);this.currentPointers.some(u=>u.id===l.id)||this._triggerPointerStart(l,a)&&(Ne(a)?((a.target&&"setPointerCapture"in a.target?a.target:this._element).setPointerCapture(a.pointerId),this._element.addEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move),this._element.addEventListener("pointerup",this._pointerEnd),this._element.addEventListener("pointercancel",this._pointerEnd)):(window.addEventListener("mousemove",this._move),window.addEventListener("mouseup",this._pointerEnd)))},this._touchStart=a=>{for(const l of Array.from(a.changedTouches))this._triggerPointerStart(new pe(l),a)},this._move=a=>{if(!tt(a)&&(!Ne(a)||!this._excludeFromButtonsCheck.has(a.pointerId))&&a.buttons===0){this._pointerEnd(a);return}const l=this.currentPointers.slice(),u=tt(a)?Array.from(a.changedTouches).map(c=>new pe(c)):[new pe(a)],f=[];for(const c of u){const d=this.currentPointers.findIndex(m=>m.id===c.id);d!==-1&&(f.push(c),this.currentPointers[d]=c)}f.length!==0&&this._moveCallback(l,f,a)},this._triggerPointerEnd=(a,l)=>{if(!tt(l)&&l.buttons&1)return!1;const u=this.currentPointers.findIndex(c=>c.id===a.id);if(u===-1)return!1;this.currentPointers.splice(u,1),this.startPointers.splice(u,1),this._excludeFromButtonsCheck.delete(a.id);const f=!(l.type==="mouseup"||l.type==="touchend"||l.type==="pointerup");return this._endCallback(a,l,f),!0},this._pointerEnd=a=>{if(this._triggerPointerEnd(new pe(a),a))if(Ne(a)){if(this.currentPointers.length)return;this._element.removeEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move),this._element.removeEventListener("pointerup",this._pointerEnd),this._element.removeEventListener("pointercancel",this._pointerEnd)}else window.removeEventListener("mousemove",this._move),window.removeEventListener("mouseup",this._pointerEnd)},this._touchEnd=a=>{for(const l of Array.from(a.changedTouches))this._triggerPointerEnd(new pe(l),a)},this._startCallback=n,this._moveCallback=i,this._endCallback=s,this._rawUpdates=o&&"onpointerrawupdate"in window,self.PointerEvent&&!r?this._element.addEventListener("pointerdown",this._pointerStart):(this._element.addEventListener("mousedown",this._pointerStart),this._element.addEventListener("touchstart",this._touchStart),this._element.addEventListener("touchmove",this._move),this._element.addEventListener("touchend",this._touchEnd),this._element.addEventListener("touchcancel",this._touchEnd))}stop(){this._element.removeEventListener("pointerdown",this._pointerStart),this._element.removeEventListener("mousedown",this._pointerStart),this._element.removeEventListener("touchstart",this._touchStart),this._element.removeEventListener("touchmove",this._move),this._element.removeEventListener("touchend",this._touchEnd),this._element.removeEventListener("touchcancel",this._touchEnd),this._element.removeEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move),this._element.removeEventListener("pointerup",this._pointerEnd),this._element.removeEventListener("pointercancel",this._pointerEnd),window.removeEventListener("mousemove",this._move),window.removeEventListener("mouseup",this._pointerEnd)}_triggerPointerStart(e,n){return this._startCallback(e,n)?(this.currentPointers.push(e),this.startPointers.push(e),!0):!1}}function Be(t,e,n){return Math.min(Math.max(t,e),n)}function Tt(t,e){return e?Math.sqrt((e.clientX-t.clientX)**2+(e.clientY-t.clientY)**2):0}function Mt(t,e){return e?{clientX:(t.clientX+e.clientX)/2,clientY:(t.clientY+e.clientY)/2}:t}const Ke=class extends Kn{constructor(n){super();fe(this,"element");fe(this,"transform",new DOMMatrix);fe(this,"pointerTracker");this.element=n,this.element.addEventListener("wheel",this.onWheel.bind(this)),this.pointerTracker=new $n(this.element,{start:(i,s)=>this.pointerTracker.currentPointers.length===2?!1:(s.preventDefault(),!0),move:i=>{this.onPointerMove(i,this.pointerTracker.currentPointers)},avoidPointerEvents:this.isSafari()}),this.element.addEventListener("wheel",this.onWheel.bind(this))}get x(){return this.transform.e}get y(){return this.transform.f}get scale(){return this.transform.a}set x(n){this.transform.e=n}set y(n){this.transform.f=n}set scale(n){this.transform.a=n,this.transform.d=n}onWheel(n){n.preventDefault();const i=this.element.getBoundingClientRect();let{deltaY:s}=n;const{ctrlKey:o,deltaMode:r}=n;r===1&&(s*=15);const a=s>0,l=o?100:300,u=1-(a?-s:s)/l,f=a?1/u:u,c=n.clientX-i.left,d=n.clientY-i.top;this.applyTransformation({scaleDiff:f,originX:c,originY:d})}applyTransformation(n={}){const{panX:i=0,panY:s=0,originX:o=0,originY:r=0,scaleDiff:a=1}=n,l=new DOMMatrix().translate(o,r).scale(a).translate(-o,-r),u=new DOMMatrix().translate(i,s);l.multiplySelf(u),l.multiplySelf(this.transform);const f=l.a,c=l.e,d=l.f;this.updateTransform(f,c,d)}onPointerMove(n,i){const s=this.element.getBoundingClientRect(),o=Mt(n[0],n[1]),r=Mt(i[0],i[1]),a=o.clientX-s.left,l=o.clientY-s.top,u=Tt(n[0],n[1]),f=Tt(i[0],i[1]),c=u?f/u:1;this.applyTransformation({originX:a,originY:l,scaleDiff:c,panX:r.clientX-o.clientX,panY:r.clientY-o.clientY})}updateTransform(n,i,s){if(n<Ke.MIN_SCALE||n>Ke.MAX_SCALE||n===this.scale&&i===this.x&&s===this.y)return;this.x=i,this.y=s,this.scale=n;const o=new CustomEvent("panzoom:change",{bubbles:!0,detail:{x:this.x,y:this.y,scale:this.scale,matrix:this.transform}});this.dispatchTypedEvent("panzoom:change",o)}isSafari(){return/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)}reset(){this.updateTransform(1,0,0)}destroy(){this.pointerTracker.stop()}};let Oe=Ke;fe(Oe,"MIN_SCALE",.01),fe(Oe,"MAX_SCALE",1e5);const xn=t=>({}),Ct=t=>({}),ei=t=>({}),Dt=t=>({});function ti(t){let e,n,i,s,o,r,a,l,u,f,c,d,m,g;const p=t[7].left,A=Te(p,t,t[6],Dt),h=t[7].right,w=Te(h,t,t[6],Ct);return c=new _e({props:{src:Un,class:"w-6 h-6 text-white"}}),{c(){e=E("div"),n=E("div"),i=E("div"),s=E("div"),A&&A.c(),o=P(),r=E("div"),a=E("div"),w&&w.c(),l=P(),u=E("div"),f=E("div"),F(c.$$.fragment),this.h()},l(I){e=y(I,"DIV",{class:!0});var k=S(e);n=y(k,"DIV",{class:!0});var D=S(n);i=y(D,"DIV",{class:!0});var H=S(i);s=y(H,"DIV",{style:!0,class:!0});var U=S(s);A&&A.l(U),U.forEach(b),H.forEach(b),o=N(D),r=y(D,"DIV",{class:!0});var B=S(r);a=y(B,"DIV",{style:!0,class:!0});var R=S(a);w&&w.l(R),R.forEach(b),B.forEach(b),D.forEach(b),l=N(k),u=y(k,"DIV",{class:!0});var $=S(u);f=y($,"DIV",{class:!0});var T=S(f);z(c.$$.fragment,T),T.forEach(b),$.forEach(b),k.forEach(b),this.h()},h(){_(s,"style",t[3]),_(s,"class","w-full h-full origin-top-left grid place-items-center"),_(i,"class","mask-left svelte-dzs820"),_(a,"style",t[3]),_(a,"class","w-full h-full origin-top-left grid place-items-center"),_(r,"class","mask-right svelte-dzs820"),_(n,"class","w-full h-full grid place-items-center"),_(f,"class","w-12 h-12 rounded-full bg-black grid place-items-center absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"),be(f,"rotate-90",t[0]==="vertical"),_(u,"class","handle relative shadow-lg svelte-dzs820"),_(e,"class","pz-container svelte-dzs820"),be(e,"vertical",t[0]==="vertical"),ce(e,"--split-point",t[1]+"%")},m(I,k){O(I,e,k),v(e,n),v(n,i),v(i,s),A&&A.m(s,null),v(n,o),v(n,r),v(r,a),w&&w.m(a,null),v(e,l),v(e,u),v(u,f),W(c,f,null),t[8](e),d=!0,m||(g=[Re(t[5].call(null,n)),Re(t[4].call(null,u)),Z(u,"pointercancel",at(ni))],m=!0)},p(I,[k]){A&&A.p&&(!d||k&64)&&Me(A,p,I,I[6],d?De(p,I[6],k,ei):Ce(I[6]),Dt),(!d||k&8)&&_(s,"style",I[3]),w&&w.p&&(!d||k&64)&&Me(w,h,I,I[6],d?De(h,I[6],k,xn):Ce(I[6]),Ct),(!d||k&8)&&_(a,"style",I[3]),(!d||k&1)&&be(f,"rotate-90",I[0]==="vertical"),(!d||k&1)&&be(e,"vertical",I[0]==="vertical"),k&2&&ce(e,"--split-point",I[1]+"%")},i(I){d||(M(A,I),M(w,I),M(c.$$.fragment,I),d=!0)},o(I){C(A,I),C(w,I),C(c.$$.fragment,I),d=!1},d(I){I&&b(e),A&&A.d(I),w&&w.d(I),V(c),t[8](null),m=!1,ye(g)}}}const ni=()=>{};function ii(t,e,n){let{$$slots:i={},$$scope:s}=e,{direction:o="horizontal"}=e,r=null,{split:a=50}=e;function l(d){return d.addEventListener("pointerdown",m=>{const g=o==="vertical"?m.clientY:m.clientX,p=a,A=document.body.style.cursor;document.body.style.cursor=o==="vertical"?"ns-resize":"ew-resize";const h=I=>{const k=r?r.clientWidth:window.innerWidth,D=r?r.clientHeight:window.innerHeight,H=o==="vertical"?D:k,B=(o==="vertical"?I.clientY:I.clientX)-g,R=p+B/H*100;n(1,a=Be(R,0,100))},w=()=>{document.body.style.cursor=A,window.removeEventListener("pointermove",h),window.removeEventListener("pointerup",w),window.removeEventListener("pointercancel",w)};window.addEventListener("pointermove",h),window.addEventListener("pointerup",w),window.addEventListener("pointercancel",w)}),{destroy(){d.removeEventListener("pointerdown",()=>{})}}}let u="transform: none;";function f(d){const m=new Oe(d);function g(p){const{matrix:A}=p.detail;n(3,u=`transform: ${A.toString()};`)}return m.addEventListener("panzoom:change",g),{destroy(){m.removeEventListener("panzoom:change",g),m.destroy()}}}Ln(async()=>{const d=window.matchMedia("(min-width: 768px)");function m(g){n(0,o=g.matches?"horizontal":"vertical")}return d.addEventListener("change",m),m(d),()=>d.removeEventListener("change",m)});function c(d){Y[d?"unshift":"push"](()=>{r=d,n(2,r)})}return t.$$set=d=>{"direction"in d&&n(0,o=d.direction),"split"in d&&n(1,a=d.split),"$$scope"in d&&n(6,s=d.$$scope)},[o,a,r,u,l,f,s,i,c]}class ri extends ie{constructor(e){super(),re(this,e,ii,ti,se,{direction:0,split:1})}}const si=t=>({}),Rt=t=>({});function oi(t){let e,n,i,s,o,r,a,l,u,f,c,d;s=new _e({props:{src:t[0]?At:Et,class:"w-6 h-6 text-gray-500"}});const m=t[2].header,g=Te(m,t,t[1],Rt),p=t[2].default,A=Te(p,t,t[1],null);return{c(){e=E("div"),n=E("header"),i=E("button"),F(s.$$.fragment),o=P(),r=E("div"),g&&g.c(),a=P(),l=E("section"),A&&A.c(),this.h()},l(h){e=y(h,"DIV",{class:!0});var w=S(e);n=y(w,"HEADER",{class:!0});var I=S(n);i=y(I,"BUTTON",{class:!0});var k=S(i);z(s.$$.fragment,k),k.forEach(b),o=N(I),r=y(I,"DIV",{class:!0});var D=S(r);g&&g.l(D),D.forEach(b),I.forEach(b),a=N(w),l=y(w,"SECTION",{class:!0});var H=S(l);A&&A.l(H),H.forEach(b),w.forEach(b),this.h()},h(){_(i,"class","contents"),_(r,"class","flex flex-1 items-center justify-between"),_(n,"class","py-4 px-4 flex-shrink-0 shadow-sm z-10 flex gap-2 items-center justify-between bg-white"),_(l,"class","overflow-y-auto overflow-x-visible"),be(l,"hidden",!t[0]),_(e,"class",u="w-full max-h-full flex-shrink-0 "+(t[0]?"h-full divide-y divide-gray-200 mt-auto":"flex-0")+" bg-white bg-opacity-95 border border-gray-100 overflow-y-hidden flex-1 shadow-lg rounded-md flex flex-col justify-start pointer-events-auto touch-auto")},m(h,w){O(h,e,w),v(e,n),v(n,i),W(s,i,null),v(n,o),v(n,r),g&&g.m(r,null),v(e,a),v(e,l),A&&A.m(l,null),f=!0,c||(d=Z(i,"click",t[3]),c=!0)},p(h,[w]){const I={};w&1&&(I.src=h[0]?At:Et),s.$set(I),g&&g.p&&(!f||w&2)&&Me(g,m,h,h[1],f?De(m,h[1],w,si):Ce(h[1]),Rt),A&&A.p&&(!f||w&2)&&Me(A,p,h,h[1],f?De(p,h[1],w,null):Ce(h[1]),null),(!f||w&1)&&be(l,"hidden",!h[0]),(!f||w&1&&u!==(u="w-full max-h-full flex-shrink-0 "+(h[0]?"h-full divide-y divide-gray-200 mt-auto":"flex-0")+" bg-white bg-opacity-95 border border-gray-100 overflow-y-hidden flex-1 shadow-lg rounded-md flex flex-col justify-start pointer-events-auto touch-auto"))&&_(e,"class",u)},i(h){f||(M(s.$$.fragment,h),M(g,h),M(A,h),f=!0)},o(h){C(s.$$.fragment,h),C(g,h),C(A,h),f=!1},d(h){h&&b(e),V(s),g&&g.d(h),A&&A.d(h),c=!1,d()}}}function ai(t,e,n){let{$$slots:i={},$$scope:s}=e,{open:o=!1}=e;const r=()=>n(0,o=!o);return t.$$set=a=>{"open"in a&&n(0,o=a.open),"$$scope"in a&&n(1,s=a.$$scope)},[o,s,i,r]}class Lt extends ie{constructor(e){super(),re(this,e,ai,oi,se,{open:0})}}function li(t){let e,n,i,s;return{c(){e=E("canvas"),this.h()},l(o){e=y(o,"CANVAS",{style:!0,width:!0,height:!0,class:!0}),S(e).forEach(b),this.h()},h(){_(e,"style","image-rendering: pixelated;"),_(e,"width",t[3]),_(e,"height",t[4]),_(e,"class",t[2])},m(o,r){O(o,e,r),t[6](e),i||(s=Re(n=t[5].call(null,e,{imageData:t[1],width:t[3],height:t[4]})),i=!0)},p(o,[r]){r&8&&_(e,"width",o[3]),r&16&&_(e,"height",o[4]),r&4&&_(e,"class",o[2]),n&&$e(n.update)&&r&26&&n.update.call(null,{imageData:o[1],width:o[3],height:o[4]})},i:K,o:K,d(o){o&&b(e),t[6](null),i=!1,s()}}}function ui(t,e,n){let{data:i}=e,{twClass:s=""}=e,{canvas:o=null}=e,{width:r=300}=e,{height:a=300}=e;function l(f,c){let d;const m=()=>{d=new OffscreenCanvas(i.width,i.height),d.getContext("2d").putImageData(c.imageData,0,0)};m();const g=()=>{f.width=c.width,f.height=c.height,f.getContext("2d").drawImage(d,0,0,c.width,c.height)};return g(),{update:p=>{c=p,m(),requestAnimationFrame(g)}}}function u(f){Y[f?"unshift":"push"](()=>{o=f,n(0,o)})}return t.$$set=f=>{"data"in f&&n(1,i=f.data),"twClass"in f&&n(2,s=f.twClass),"canvas"in f&&n(0,o=f.canvas),"width"in f&&n(3,r=f.width),"height"in f&&n(4,a=f.height)},[o,i,s,r,a,l,u]}class fi extends ie{constructor(e){super(),re(this,e,ui,li,se,{data:1,twClass:2,canvas:0,width:3,height:4})}}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ln=Symbol("Comlink.proxy"),ci=Symbol("Comlink.endpoint"),di=Symbol("Comlink.releaseProxy"),nt=Symbol("Comlink.finalizer"),Ye=Symbol("Comlink.thrown"),un=t=>typeof t=="object"&&t!==null||typeof t=="function",hi={canHandle:t=>un(t)&&t[ln],serialize(t){const{port1:e,port2:n}=new MessageChannel;return cn(t,e),[n,[n]]},deserialize(t){return t.start(),xe(t)}},mi={canHandle:t=>un(t)&&Ye in t,serialize({value:t}){let e;return t instanceof Error?e={isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:e={isError:!1,value:t},[e,[]]},deserialize(t){throw t.isError?Object.assign(new Error(t.value.message),t.value):t.value}},fn=new Map([["proxy",hi],["throw",mi]]);function gi(t,e){for(const n of t)if(e===n||n==="*"||n instanceof RegExp&&n.test(e))return!0;return!1}function cn(t,e=globalThis,n=["*"]){e.addEventListener("message",function i(s){if(!s||!s.data)return;if(!gi(n,s.origin)){console.warn(`Invalid origin '${s.origin}' for comlink proxy`);return}const{id:o,type:r,path:a}=Object.assign({path:[]},s.data),l=(s.data.argumentList||[]).map(we);let u;try{const f=a.slice(0,-1).reduce((d,m)=>d[m],t),c=a.reduce((d,m)=>d[m],t);switch(r){case"GET":u=c;break;case"SET":f[a.slice(-1)[0]]=we(s.data.value),u=!0;break;case"APPLY":u=c.apply(f,l);break;case"CONSTRUCT":{const d=new c(...l);u=wi(d)}break;case"ENDPOINT":{const{port1:d,port2:m}=new MessageChannel;cn(t,m),u=gn(d,[d])}break;case"RELEASE":u=void 0;break;default:return}}catch(f){u={value:f,[Ye]:0}}Promise.resolve(u).catch(f=>({value:f,[Ye]:0})).then(f=>{const[c,d]=Ze(f);e.postMessage(Object.assign(Object.assign({},c),{id:o}),d),r==="RELEASE"&&(e.removeEventListener("message",i),dn(e),nt in t&&typeof t[nt]=="function"&&t[nt]())}).catch(f=>{const[c,d]=Ze({value:new TypeError("Unserializable return value"),[Ye]:0});e.postMessage(Object.assign(Object.assign({},c),{id:o}),d)})}),e.start&&e.start()}function _i(t){return t.constructor.name==="MessagePort"}function dn(t){_i(t)&&t.close()}function xe(t,e){return lt(t,[],e)}function He(t){if(t)throw new Error("Proxy has been released and is not useable")}function hn(t){return Se(t,{type:"RELEASE"}).then(()=>{dn(t)})}const Ge=new WeakMap,Qe="FinalizationRegistry"in globalThis&&new FinalizationRegistry(t=>{const e=(Ge.get(t)||0)-1;Ge.set(t,e),e===0&&hn(t)});function pi(t,e){const n=(Ge.get(e)||0)+1;Ge.set(e,n),Qe&&Qe.register(t,e,t)}function bi(t){Qe&&Qe.unregister(t)}function lt(t,e=[],n=function(){}){let i=!1;const s=new Proxy(n,{get(o,r){if(He(i),r===di)return()=>{bi(s),hn(t),i=!0};if(r==="then"){if(e.length===0)return{then:()=>s};const a=Se(t,{type:"GET",path:e.map(l=>l.toString())}).then(we);return a.then.bind(a)}return lt(t,[...e,r])},set(o,r,a){He(i);const[l,u]=Ze(a);return Se(t,{type:"SET",path:[...e,r].map(f=>f.toString()),value:l},u).then(we)},apply(o,r,a){He(i);const l=e[e.length-1];if(l===ci)return Se(t,{type:"ENDPOINT"}).then(we);if(l==="bind")return lt(t,e.slice(0,-1));const[u,f]=Pt(a);return Se(t,{type:"APPLY",path:e.map(c=>c.toString()),argumentList:u},f).then(we)},construct(o,r){He(i);const[a,l]=Pt(r);return Se(t,{type:"CONSTRUCT",path:e.map(u=>u.toString()),argumentList:a},l).then(we)}});return pi(s,t),s}function vi(t){return Array.prototype.concat.apply([],t)}function Pt(t){const e=t.map(Ze);return[e.map(n=>n[0]),vi(e.map(n=>n[1]))]}const mn=new WeakMap;function gn(t,e){return mn.set(t,e),t}function wi(t){return Object.assign(t,{[ln]:!0})}function Ze(t){for(const[e,n]of fn)if(n.canHandle(t)){const[i,s]=n.serialize(t);return[{type:"HANDLER",name:e,value:i},s]}return[{type:"RAW",value:t},mn.get(t)||[]]}function we(t){switch(t.type){case"HANDLER":return fn.get(t.name).deserialize(t.value);case"RAW":return t.value}}function Se(t,e,n){return new Promise(i=>{const s=Ai();t.addEventListener("message",function o(r){!r.data||!r.data.id||r.data.id!==s||(t.removeEventListener("message",o),i(r.data))}),t.start&&t.start(),t.postMessage(Object.assign({id:s},e),n)})}function Ai(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}function Ei(){return new Worker(""+new URL("../workers/renderingWorker-d4e8d5a9.js",import.meta.url).href)}function yi(t,e){const n=t.transferControlToOffscreen(),i=new Ei,s=xe(i);let o=null,r=null,a=()=>{};s.errorDiffusionDithering(gn(n,[n]),e).then(u=>{r=u.update,a=u.destroy,r(o||e)});const l=(u,f)=>{for(const c in u){const d=c;if(u[d]!==f[d])return!0}return!1};return{update:u=>{l&&(r?r(u):o=u)},destroy:()=>{a(),i.terminate()}}}var ki="precision highp float;attribute vec2 position;varying vec2 fragCoord;void main(){fragCoord.x=position.x*0.5+0.5;fragCoord.y=position.y*0.5+0.5;gl_Position=vec4(position,0.0,1.0);}",Ii="precision highp float;varying vec2 fragCoord;uniform sampler2D uSampler;uniform sampler2D uNoiseSampler;uniform sampler2D uPaletteSampler;uniform vec2 uNoiseSamplerSize;uniform float uNoise;uniform vec2 uSize;vec3 samplePalette(vec3 glsl_color){vec3 scaledColor=floor(glsl_color*255.0);vec3 quantized_color=floor(scaledColor/16.0)*16.0;float mappingI=floor((floor(quantized_color.r)+floor(quantized_color.g*16.0)+floor(quantized_color.b*16.0*16.0))/16.0);float mappedX=floor(mappingI/64.0);float mappedY=floor(mod(mappingI,64.0));float halfPixel=0.5/64.0;vec2 uv=vec2((mappedX/64.0)+halfPixel,1.0-(mappedY/64.0)-halfPixel);return texture2D(uPaletteSampler,uv).rgb;}void main(void){vec2 imgPixel=vec2(fragCoord.x*uSize.x,fragCoord.y*uSize.y);vec2 noisePixel=vec2(mod(imgPixel.x,uNoiseSamplerSize.x),mod(imgPixel.y,uNoiseSamplerSize.y));vec2 noiseUV=vec2(noisePixel.x/uNoiseSamplerSize.x,noisePixel.y/uNoiseSamplerSize.y);float noise=(texture2D(uNoiseSampler,noiseUV).r-0.5)*2.0*uNoise;vec4 color=texture2D(uSampler,fragCoord);color.r=clamp(color.r+noise,0.0,1.0);color.g=clamp(color.g+noise,0.0,1.0);color.b=clamp(color.b+noise,0.0,1.0);color.rgb=samplePalette(color.rgb);gl_FragColor=color;}";function Nt(t){return(t&t-1)===0}function Si(t,e,n){const i=Ot(t,t.VERTEX_SHADER,e),s=Ot(t,t.FRAGMENT_SHADER,n),o=t.createProgram();if(!o)throw new Error("Failed to create shader program");if(t.attachShader(o,i),t.attachShader(o,s),t.linkProgram(o),!t.getProgramParameter(o,t.LINK_STATUS))throw Error(`Unable to initialize the shader program: ${t.getProgramInfoLog(o)}`);return o}function Ot(t,e,n){const i=t.createShader(e);if(!i)throw new Error("Failed to create shader");if(t.shaderSource(i,n),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS))throw Error(`An error occurred compiling the shaders: ${t.getShaderInfoLog(i)}`);return i}function Ti(t){const e=t.createBuffer(),n=t.createBuffer(),i=[-1,1,-1,-1,1,-1,1,1],s=[3,2,1,3,1,0];return t.bindBuffer(t.ARRAY_BUFFER,e),t.bufferData(t.ARRAY_BUFFER,new Float32Array(i),t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(s),t.STATIC_DRAW),{vertex_buffer:e,index_buffer:n}}function it(t,e,n){const i=t.createTexture();if(!i)throw new Error("Failed to create texture");return t.bindTexture(t.TEXTURE_2D,i),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),Nt(e.width)&&Nt(e.height)?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,n)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,n)),i}function Mi(t,e){let n=e;const i=t.getContext("webgl",{preserveDrawingBuffer:!0});if(!i){alert("WebGL not supported");return}i.clearColor(0,0,0,1),i.clear(i.COLOR_BUFFER_BIT);const s=Si(i,ki,Ii),{vertex_buffer:o,index_buffer:r}=Ti(i);i.useProgram(s);const a=i.getAttribLocation(s,"position");i.vertexAttribPointer(a,2,i.FLOAT,!1,0,0),i.enableVertexAttribArray(a);const l=i.getUniformLocation(s,"uSampler"),u=i.getUniformLocation(s,"uNoiseSampler"),f=i.getUniformLocation(s,"uNoise"),c=i.getUniformLocation(s,"uSize"),d=i.getUniformLocation(s,"uNoiseSamplerSize"),m=i.getUniformLocation(s,"uPaletteSampler");let g;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!0);const p=()=>{g&&i.deleteTexture(g),g=it(i,n.image,i.LINEAR)};p();let A,h,w=null;const I=()=>{A&&i.deleteTexture(A),A=it(i,n.thresholdMap,i.NEAREST),h={width:n.thresholdMap.width,height:n.thresholdMap.height}};I();let k;const D=()=>{k&&i.deleteTexture(k),k=it(i,n.palette,i.NEAREST)};D();const H=()=>{i.viewport(0,0,n.output_width,n.output_height),i.clearColor(0,0,0,1),i.clear(i.COLOR_BUFFER_BIT),i.bindBuffer(i.ARRAY_BUFFER,o),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,r),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,g),i.uniform1i(l,0),i.activeTexture(i.TEXTURE1),i.bindTexture(i.TEXTURE_2D,A),i.uniform1i(u,1),i.activeTexture(i.TEXTURE2),i.bindTexture(i.TEXTURE_2D,k),i.uniform1i(m,2),i.uniform2f(d,h.width,h.height),i.uniform1f(f,n.noiseIntensity),i.uniform2f(c,n.output_width,n.output_height),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT),i.drawElements(i.TRIANGLES,6,i.UNSIGNED_SHORT,0)};function U(){w=requestAnimationFrame(()=>{H(),w=null})}return U(),{update(B){const R=n.image!==B.image,$=n.thresholdMap!==B.thresholdMap,T=n.palette!==B.palette;n=B,R&&p(),$&&I(),T&&D(),U()},destroy(){w!==null&&cancelAnimationFrame(w)}}}function Ci(t){let e,n,i;function s(r){t[5](r)}let o={data:t[1],width:t[2].width,height:t[2].height,twClass:"w-full"};return t[0]!==void 0&&(o.canvas=t[0]),e=new fi({props:o}),Y.push(()=>G(e,"canvas",s)),{c(){F(e.$$.fragment)},l(r){z(e.$$.fragment,r)},m(r,a){W(e,r,a),i=!0},p(r,a){const l={};a&2&&(l.data=r[1]),a&4&&(l.width=r[2].width),a&4&&(l.height=r[2].height),!n&&a&1&&(n=!0,l.canvas=r[0],Q(()=>n=!1)),e.$set(l)},i(r){i||(M(e.$$.fragment,r),i=!0)},o(r){C(e.$$.fragment,r),i=!1},d(r){V(e,r)}}}function Di(t){let e,n=t[2].thresholdMap&&t[2].palette&&Ut(t);return{c(){n&&n.c(),e=je()},l(i){n&&n.l(i),e=je()},m(i,s){n&&n.m(i,s),O(i,e,s)},p(i,s){i[2].thresholdMap&&i[2].palette?n?n.p(i,s):(n=Ut(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:K,o:K,d(i){n&&n.d(i),i&&b(e)}}}function Ri(t){let e,n=t[2].palette&&Xt(t);return{c(){n&&n.c(),e=je()},l(i){n&&n.l(i),e=je()},m(i,s){n&&n.m(i,s),O(i,e,s)},p(i,s){i[2].palette?n?n.p(i,s):(n=Xt(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:K,o:K,d(i){n&&n.d(i),i&&b(e)}}}function Ut(t){let e,n,i,s,o,r;return{c(){e=E("canvas"),this.h()},l(a){e=y(a,"CANVAS",{class:!0,width:!0,height:!0,"aria-label":!0}),S(e).forEach(b),this.h()},h(){_(e,"class","pixelated w-full svelte-1gkt69q"),_(e,"width",n=t[2].width),_(e,"height",i=t[2].height),_(e,"aria-label","Dithered Image")},m(a,l){O(a,e,l),t[4](e),o||(r=Re(s=Mi.call(null,e,{image:t[1],noiseIntensity:t[2].noiseIntensity,palette:t[2].palette,output_width:t[2].width,output_height:t[2].height,thresholdMap:t[2].thresholdMap})),o=!0)},p(a,l){l&4&&n!==(n=a[2].width)&&_(e,"width",n),l&4&&i!==(i=a[2].height)&&_(e,"height",i),s&&$e(s.update)&&l&6&&s.update.call(null,{image:a[1],noiseIntensity:a[2].noiseIntensity,palette:a[2].palette,output_width:a[2].width,output_height:a[2].height,thresholdMap:a[2].thresholdMap})},d(a){a&&b(e),t[4](null),o=!1,r()}}}function Xt(t){let e,n,i,s,o,r;return{c(){e=E("canvas"),this.h()},l(a){e=y(a,"CANVAS",{class:!0,width:!0,height:!0}),S(e).forEach(b),this.h()},h(){_(e,"class","pixelated w-full svelte-1gkt69q"),_(e,"width",n=t[2].width),_(e,"height",i=t[2].height)},m(a,l){O(a,e,l),t[3](e),o||(r=Re(s=yi.call(null,e,{image:t[1],output_width:t[2].width,output_height:t[2].height,palette:t[2].palette,diffusionStrength:t[2].diffusionStrength,diffusionMatrix:t[2].diffusionMatrix,diffusionMatrixOriginX:t[2].diffusionMatrixOriginX})),o=!0)},p(a,l){l&4&&n!==(n=a[2].width)&&_(e,"width",n),l&4&&i!==(i=a[2].height)&&_(e,"height",i),s&&$e(s.update)&&l&6&&s.update.call(null,{image:a[1],output_width:a[2].width,output_height:a[2].height,palette:a[2].palette,diffusionStrength:a[2].diffusionStrength,diffusionMatrix:a[2].diffusionMatrix,diffusionMatrixOriginX:a[2].diffusionMatrixOriginX})},d(a){a&&b(e),t[3](null),o=!1,r()}}}function Li(t){let e,n,i,s;const o=[Ri,Di,Ci],r=[];function a(l,u){return l[2].mode==="error_diffusion"?0:l[2].mode==="ordered"?1:l[2].mode==="none"?2:-1}return~(n=a(t))&&(i=r[n]=o[n](t)),{c(){e=E("div"),i&&i.c(),this.h()},l(l){e=y(l,"DIV",{class:!0,style:!0});var u=S(e);i&&i.l(u),u.forEach(b),this.h()},h(){_(e,"class","shadow-lg bg-gray-200"),ce(e,"width","80vmin")},m(l,u){O(l,e,u),~n&&r[n].m(e,null),s=!0},p(l,[u]){let f=n;n=a(l),n===f?~n&&r[n].p(l,u):(i&&(Ae(),C(r[f],1,1,()=>{r[f]=null}),Ee()),~n?(i=r[n],i?i.p(l,u):(i=r[n]=o[n](l),i.c()),M(i,1),i.m(e,null)):i=null)},i(l){s||(M(i),s=!0)},o(l){C(i),s=!1},d(l){l&&b(e),~n&&r[n].d()}}}function Pi(t,e,n){let{canvas:i=null}=e,{image_data:s}=e,{config:o}=e;function r(u){Y[u?"unshift":"push"](()=>{i=u,n(0,i)})}function a(u){Y[u?"unshift":"push"](()=>{i=u,n(0,i)})}function l(u){i=u,n(0,i)}return t.$$set=u=>{"canvas"in u&&n(0,i=u.canvas),"image_data"in u&&n(1,s=u.image_data),"config"in u&&n(2,o=u.config)},[i,s,o,r,a,l]}class _n extends ie{constructor(e){super(),re(this,e,Pi,Li,se,{canvas:0,image_data:1,config:2})}}function Bt(t,e,n){const i=t.slice();return i[4]=e[n],i}function Ft(t){let e,n,i,s=!1,o,r,a=t[4].label+"",l,u,f,c,d,m;return c=Pn(t[3][0]),{c(){e=E("label"),n=E("input"),o=P(),r=E("div"),l=j(a),f=P(),this.h()},l(g){e=y(g,"LABEL",{class:!0});var p=S(e);n=y(p,"INPUT",{type:!0,name:!0,class:!0}),o=N(p),r=y(p,"DIV",{class:!0});var A=S(r);l=q(A,a),A.forEach(b),f=N(p),p.forEach(b),this.h()},h(){_(n,"type","radio"),_(n,"name","tabs"),n.__value=i=t[4].value,n.value=n.__value,_(n,"class","sr-only"),_(r,"class",u="flex items-center justify-center py-2 text-sm font-medium text-gray-700 border-b "+(t[4].value===t[0]?"border-indigo-500 border-b-2":"border-gray-300")+" cursor-pointer hover:bg-gray-900 hover:bg-opacity-5"),_(e,"class","flex-1"),c.p(n)},m(g,p){O(g,e,p),v(e,n),n.checked=n.__value===t[0],v(e,o),v(e,r),v(r,l),v(e,f),d||(m=Z(n,"change",t[2]),d=!0)},p(g,p){p&2&&i!==(i=g[4].value)&&(n.__value=i,n.value=n.__value,s=!0),(s||p&3)&&(n.checked=n.__value===g[0]),p&2&&a!==(a=g[4].label+"")&&ve(l,a),p&3&&u!==(u="flex items-center justify-center py-2 text-sm font-medium text-gray-700 border-b "+(g[4].value===g[0]?"border-indigo-500 border-b-2":"border-gray-300")+" cursor-pointer hover:bg-gray-900 hover:bg-opacity-5")&&_(r,"class",u)},d(g){g&&b(e),c.r(),d=!1,m()}}}function Ni(t){let e,n=t[1],i=[];for(let s=0;s<n.length;s+=1)i[s]=Ft(Bt(t,n,s));return{c(){e=E("nav");for(let s=0;s<i.length;s+=1)i[s].c();this.h()},l(s){e=y(s,"NAV",{class:!0});var o=S(e);for(let r=0;r<i.length;r+=1)i[r].l(o);o.forEach(b),this.h()},h(){_(e,"class","flex w-full")},m(s,o){O(s,e,o);for(let r=0;r<i.length;r+=1)i[r]&&i[r].m(e,null)},p(s,[o]){if(o&3){n=s[1];let r;for(r=0;r<n.length;r+=1){const a=Bt(s,n,r);i[r]?i[r].p(a,o):(i[r]=Ft(a),i[r].c(),i[r].m(e,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=n.length}},i:K,o:K,d(s){s&&b(e),Fe(i,s)}}}function Oi(t,e,n){let{tabs:i}=e,{selected:s}=e;const o=[[]];function r(){s=this.__value,n(0,s)}return t.$$set=a=>{"tabs"in a&&n(1,i=a.tabs),"selected"in a&&n(0,s=a.selected)},[s,i,r,o]}class Ui extends ie{constructor(e){super(),re(this,e,Oi,Ni,se,{tabs:1,selected:0})}}function Xi(t){let e,n,i,s,o,r,a;return{c(){e=E("div"),n=E("label"),i=j(t[1]),s=P(),o=E("input"),this.h()},l(l){e=y(l,"DIV",{});var u=S(e);n=y(u,"LABEL",{for:!0,class:!0});var f=S(n);i=q(f,t[1]),f.forEach(b),s=N(u),o=y(u,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0,name:!0,class:!0}),u.forEach(b),this.h()},h(){_(n,"for",t[6]),_(n,"class","block mb-2 text-sm font-medium text-gray-900 dark:text-white"),_(o,"id",t[6]),_(o,"type","range"),_(o,"min",t[3]),_(o,"max",t[4]),_(o,"step",t[5]),_(o,"name",t[2]),_(o,"class","w-full h-1.5 mb-6 bg-white ring-1 ring-gray-300 shadow-sm rounded-lg appearance-none cursor-pointer accent-indigo-600 dark:bg-gray-700")},m(l,u){O(l,e,u),v(e,n),v(n,i),v(e,s),v(e,o),qe(o,t[0]),r||(a=[Z(o,"change",t[7]),Z(o,"input",t[7])],r=!0)},p(l,[u]){u&2&&ve(i,l[1]),u&8&&_(o,"min",l[3]),u&16&&_(o,"max",l[4]),u&32&&_(o,"step",l[5]),u&4&&_(o,"name",l[2]),u&1&&qe(o,l[0])},i:K,o:K,d(l){l&&b(e),r=!1,ye(a)}}}function Bi(t,e,n){let{label:i}=e,{name:s=void 0}=e,{min:o=null}=e,{max:r=null}=e,{value:a=0}=e,{step:l=1}=e,u=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);function f(){a=dt(this.value),n(0,a)}return t.$$set=c=>{"label"in c&&n(1,i=c.label),"name"in c&&n(2,s=c.name),"min"in c&&n(3,o=c.min),"max"in c&&n(4,r=c.max),"value"in c&&n(0,a=c.value),"step"in c&&n(5,l=c.step)},[a,i,s,o,r,l,u,f]}class ht extends ie{constructor(e){super(),re(this,e,Bi,Xi,se,{label:1,name:2,min:3,max:4,value:0,step:5})}}function ut(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}function zt(t,e,n){const i=t.slice();return i[6]=e[n],i}function Wt(t){let e,n=t[6].name+"",i,s,o;return{c(){e=E("option"),i=j(n),this.h()},l(r){e=y(r,"OPTION",{});var a=S(e);i=q(a,n),a.forEach(b),this.h()},h(){e.__value=s=t[6].value,e.value=e.__value,e.selected=o=t[6].value===t[0]},m(r,a){O(r,e,a),v(e,i)},p(r,a){a&2&&n!==(n=r[6].name+"")&&ve(i,n),a&2&&s!==(s=r[6].value)&&(e.__value=s,e.value=e.__value),a&3&&o!==(o=r[6].value===r[0])&&(e.selected=o)},d(r){r&&b(e)}}}function Fi(t){let e,n,i,s,o,r,a,l=t[1],u=[];for(let f=0;f<l.length;f+=1)u[f]=Wt(zt(t,l,f));return{c(){e=E("div"),n=E("label"),i=j(t[2]),s=P(),o=E("select");for(let f=0;f<u.length;f+=1)u[f].c();this.h()},l(f){e=y(f,"DIV",{});var c=S(e);n=y(c,"LABEL",{for:!0,class:!0});var d=S(n);i=q(d,t[2]),d.forEach(b),s=N(c),o=y(c,"SELECT",{id:!0,name:!0,class:!0});var m=S(o);for(let g=0;g<u.length;g+=1)u[g].l(m);m.forEach(b),c.forEach(b),this.h()},h(){_(n,"for",t[4]),_(n,"class","block text-sm font-medium leading-6 text-gray-900"),_(o,"id",t[4]),_(o,"name",t[3]),_(o,"class","mt-2 block w-full rounded-md border-0 py-1.5 pl-3 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-indigo-600 sm:text-sm sm:leading-6"),t[0]===void 0&&Nn(()=>t[5].call(o))},m(f,c){O(f,e,c),v(e,n),v(n,i),v(e,s),v(e,o);for(let d=0;d<u.length;d+=1)u[d]&&u[d].m(o,null);wt(o,t[0],!0),r||(a=Z(o,"change",t[5]),r=!0)},p(f,[c]){if(c&4&&ve(i,f[2]),c&3){l=f[1];let d;for(d=0;d<l.length;d+=1){const m=zt(f,l,d);u[d]?u[d].p(m,c):(u[d]=Wt(m),u[d].c(),u[d].m(o,null))}for(;d<u.length;d+=1)u[d].d(1);u.length=l.length}c&8&&_(o,"name",f[3]),c&3&&wt(o,f[0])},i:K,o:K,d(f){f&&b(e),Fe(u,f),r=!1,a()}}}function zi(t,e,n){let{options:i}=e,{selected:s}=e,{label:o}=e,{name:r=void 0}=e;const a=ut();function l(){s=On(this),n(0,s),n(1,i)}return t.$$set=u=>{"options"in u&&n(1,i=u.options),"selected"in u&&n(0,s=u.selected),"label"in u&&n(2,o=u.label),"name"in u&&n(3,r=u.name)},[s,i,o,r,a,l]}class pn extends ie{constructor(e){super(),re(this,e,zi,Fi,se,{options:1,selected:0,label:2,name:3})}}function Wi(t){let e,n,i,s,o,r;function a(c){t[5](c)}let l={label:"Diffusion Mode",options:t[2]};t[1]!==void 0&&(l.selected=t[1]),e=new pn({props:l}),Y.push(()=>G(e,"selected",a));function u(c){t[6](c)}let f={label:"Diffusion Strength ("+t[0]+")",min:0,max:2,step:.01};return t[0]!==void 0&&(f.value=t[0]),s=new ht({props:f}),Y.push(()=>G(s,"value",u)),{c(){F(e.$$.fragment),i=P(),F(s.$$.fragment)},l(c){z(e.$$.fragment,c),i=N(c),z(s.$$.fragment,c)},m(c,d){W(e,c,d),O(c,i,d),W(s,c,d),r=!0},p(c,[d]){const m={};!n&&d&2&&(n=!0,m.selected=c[1],Q(()=>n=!1)),e.$set(m);const g={};d&1&&(g.label="Diffusion Strength ("+c[0]+")"),!o&&d&1&&(o=!0,g.value=c[0],Q(()=>o=!1)),s.$set(g)},i(c){r||(M(e.$$.fragment,c),M(s.$$.fragment,c),r=!0)},o(c){C(e.$$.fragment,c),C(s.$$.fragment,c),r=!1},d(c){V(e,c),c&&b(i),V(s,c)}}}function Vi(t,e,n){let{diffusionStrength:i}=e,{diffusionMatrix:s}=e,{diffusionOriginX:o}=e,r="floyd_steinberg";const a=[{name:"Basic",value:"basic"},{name:"Floyd-Steinberg",value:"floyd_steinberg"},{name:"Atkinson",value:"atkinson"},{name:"Jarvis-Judice-Ninke",value:"jarvis_judice_ninke"}],l={basic:{matrix:[[0,1/2],[1/2,0]],originX:0},floyd_steinberg:{matrix:[[0,0,7/16],[3/16,5/16,1/16]],originX:1},atkinson:{matrix:[[0,0,1/8,1/8],[1/8,1/8,1/8,0],[0,1/8,0,0]],originX:1},jarvis_judice_ninke:{matrix:[[0,0,0,7/48,5/48],[3/48,5/48,7/48,5/48,3/48],[1/48,3/48,5/48,3/48,1/48]],originX:2}};function u(c){r=c,n(1,r)}function f(c){i=c,n(0,i)}return t.$$set=c=>{"diffusionStrength"in c&&n(0,i=c.diffusionStrength),"diffusionMatrix"in c&&n(3,s=c.diffusionMatrix),"diffusionOriginX"in c&&n(4,o=c.diffusionOriginX)},t.$$.update=()=>{if(t.$$.dirty&2){const{matrix:c,originX:d}=l[r];n(3,s=c),n(4,o=d)}},[i,r,a,s,o,u,f]}class Hi extends ie{constructor(e){super(),re(this,e,Vi,Wi,se,{diffusionStrength:0,diffusionMatrix:3,diffusionOriginX:4})}}function Vt(t,e,n){const i=t.slice();i[6]=e[n],i[9]=n;const s=Wn(i[6]);return i[7]=s,i}function Ht(t){let e,n,i,s,o,r,a,l,u;function f(...d){return t[4](t[9],...d)}r=new _e({props:{src:rn,class:"w-4 h-4 text-white"}});function c(){return t[5](t[9])}return{c(){e=E("li"),n=E("input"),s=P(),o=E("button"),F(r.$$.fragment),this.h()},l(d){e=y(d,"LI",{style:!0,class:!0});var m=S(e);n=y(m,"INPUT",{type:!0,class:!0}),s=N(m),o=y(m,"BUTTON",{class:!0});var g=S(o);z(r.$$.fragment,g),g.forEach(b),m.forEach(b),this.h()},h(){_(n,"type","color"),n.value=i=t[7],_(n,"class","absolute inset-0 w-full h-full opacity-0"),_(o,"class","absolute top-1/2 -translate-y-1/2 right-2 p-1 bg-black bg-opacity-40 rounded-full"),ce(e,"background-color",t[7]),_(e,"class","relative rounded-md h-10")},m(d,m){O(d,e,m),v(e,n),v(e,s),v(e,o),W(r,o,null),a=!0,l||(u=[Z(n,"input",f),Z(o,"click",c)],l=!0)},p(d,m){t=d,(!a||m&1&&i!==(i=t[7]))&&(n.value=i),(!a||m&1)&&ce(e,"background-color",t[7])},i(d){a||(M(r.$$.fragment,d),a=!0)},o(d){C(r.$$.fragment,d),a=!1},d(d){d&&b(e),V(r),l=!1,ye(u)}}}function Yi(t){let e,n,i,s,o,r,a,l,u,f,c,d=t[0],m=[];for(let p=0;p<d.length;p+=1)m[p]=Ht(Vt(t,d,p));const g=p=>C(m[p],1,1,()=>{m[p]=null});return o=new _e({props:{src:nn,class:"w-4 h-4"}}),{c(){e=E("ul");for(let p=0;p<m.length;p+=1)m[p].c();n=P(),i=E("li"),s=E("button"),F(o.$$.fragment),r=P(),a=E("span"),l=j("Color"),this.h()},l(p){e=y(p,"UL",{class:!0});var A=S(e);for(let k=0;k<m.length;k+=1)m[k].l(A);n=N(A),i=y(A,"LI",{});var h=S(i);s=y(h,"BUTTON",{class:!0});var w=S(s);z(o.$$.fragment,w),r=N(w),a=y(w,"SPAN",{});var I=S(a);l=q(I,"Color"),I.forEach(b),w.forEach(b),h.forEach(b),A.forEach(b),this.h()},h(){_(s,"class","flex items-center justify-center gap-1 w-full h-10 bg-emerald-500 text-white rounded-md"),_(e,"class","grid gap-2 grid-cols-3")},m(p,A){O(p,e,A);for(let h=0;h<m.length;h+=1)m[h]&&m[h].m(e,null);v(e,n),v(e,i),v(i,s),W(o,s,null),v(s,r),v(s,a),v(a,l),u=!0,f||(c=Z(s,"click",t[1]),f=!0)},p(p,[A]){if(A&13){d=p[0];let h;for(h=0;h<d.length;h+=1){const w=Vt(p,d,h);m[h]?(m[h].p(w,A),M(m[h],1)):(m[h]=Ht(w),m[h].c(),M(m[h],1),m[h].m(e,n))}for(Ae(),h=d.length;h<m.length;h+=1)g(h);Ee()}},i(p){if(!u){for(let A=0;A<d.length;A+=1)M(m[A]);M(o.$$.fragment,p),u=!0}},o(p){m=m.filter(Boolean);for(let A=0;A<m.length;A+=1)C(m[A]);C(o.$$.fragment,p),u=!1},d(p){p&&b(e),Fe(m,p),V(o),f=!1,c()}}}function ji(){return[Math.random()*255,Math.random()*255,Math.random()*255].map(Math.round)}function qi(t,e,n){let{colors:i}=e;function s(){n(0,i=[...i,ji()])}function o(u){n(0,i=i.filter((f,c)=>c!==u))}function r(u,f){const d=u.target.value;n(0,i[f]=Pe(d),i)}const a=(u,f)=>r(f,u),l=u=>o(u);return t.$$set=u=>{"colors"in u&&n(0,i=u.colors)},[i,s,o,r,a,l]}class Gi extends ie{constructor(e){super(),re(this,e,qi,Yi,se,{colors:0})}}const Qi=8,bn=5,Yt=1e3,rt=bn,le=Qi-bn,Zi=.75;function ft(t,e){return t<e?-1:t>e?1:0}class ct{constructor(e){fe(this,"contents",[]);fe(this,"isSorted",!1);this.compareFn=e}sort(){this.isSorted||(this.contents.sort(this.compareFn),this.isSorted=!0)}push(e){this.contents.push(e),this.isSorted=!1}peek(e){return this.sort(),e===void 0&&(e=this.contents.length-1),this.contents[e]}pop(){return this.sort(),this.contents.pop()}size(){return this.contents.length}map(e){return this.contents.map(e)}[Symbol.iterator](){return this.sort(),this.contents[Symbol.iterator]()}}class mt{constructor(e,n,i,s,o,r,a){fe(this,"_count");fe(this,"_avg");this.r1=e,this.r2=n,this.g1=i,this.g2=s,this.b1=o,this.b2=r,this.histogram=a}volume(){return(this.r2-this.r1+1)*(this.g2-this.g1+1)*(this.b2-this.b1+1)}count(e=!1){if(this._count===void 0||e){let n=0;for(const[i,s,o]of this.colors())n+=this.histogram.sampleWithReducedColor(i,s,o);this._count=n}return this._count}copy(){return new mt(this.r1,this.r2,this.g1,this.g2,this.b1,this.b2,this.histogram)}avg(e=!1){if(!this._avg||e){let n=0;const i=1<<le;let s=0,o=0,r=0;for(const[a,l,u]of this.colors()){let f=this.histogram.sampleWithReducedColor(a,l,u);n+=f,s+=f*(a+.5)*i,o+=f*(l+.5)*i,r+=f*(u+.5)*i}n>0?this._avg=[Math.floor(s/n),Math.floor(o/n),Math.floor(r/n)]:this._avg=[Math.floor(i*(this.r1+this.r2+1)/2),Math.floor(i*(this.g1+this.g2+1)/2),Math.floor(i*(this.b1+this.b2+1)/2)]}return this._avg}contains(e){const n=e[0]>>le,i=e[1]>>le,s=e[2]>>le;return n>=this.r1&&n<=this.r2&&i>=this.g1&&i<=this.g2&&s>=this.b1&&s<=this.b2}*colors(){for(let e=this.r1;e<=this.r2;e++)for(let n=this.g1;n<=this.g2;n++)for(let i=this.b1;i<=this.b2;i++)yield[e,n,i]}}class Ji{constructor(){fe(this,"boxes");this.boxes=new ct((e,n)=>ft(e.vbox.count()*e.vbox.volume(),n.vbox.count()*n.vbox.volume()))}push(e){this.boxes.push({vbox:e,color:e.avg()})}palette(){return this.boxes.map(e=>e.color)}size(){return this.boxes.size()}map(e){for(const n of this.boxes)if(n.vbox.contains(e))return n.color;return this.nearest(e)}nearest(e){let n,i,s;for(const o of this.boxes)i=Math.sqrt(Math.pow(e[0]-o.color[0],2)+Math.pow(e[1]-o.color[1],2)+Math.pow(e[2]-o.color[2],2)),(n===void 0||i<n)&&(n=i,s=o.color);return s}}class Je{constructor(e){fe(this,"histogram",new Array(1<<3*rt));for(let n=0;n<e.length;n+=4){let i=e[n]>>le,s=e[n+1]>>le,o=e[n+2]>>le,r=Je.getColorIndex(i,s,o);this.histogram[r]=(this.histogram[r]??0)+1}}sample(e,n,i){const s=e>>le,o=n>>le,r=i>>le;return this.sampleWithReducedColor(s,o,r)}sampleWithReducedColor(e,n,i){const s=Je.getColorIndex(e,n,i);return this.histogram[s]??0}static getColorIndex(e,n,i){return(e<<2*rt)+(n<<rt)+i}}function Ki(t,e){let n=1e6,i=0,s=1e6,o=0,r=1e6,a=0;for(let l=0;l<t.length;l+=4){const u=t[l]>>le,f=t[l+1]>>le,c=t[l+2]>>le;u<n?n=u:u>i&&(i=u),f<s?s=f:f>o&&(o=f),c<r?r=c:c>a&&(a=c)}return new mt(n,i,s,o,r,a,e)}function $i(t,e,n,i,s){const o=s+"1",r=s+"2";for(let a=t[o];a<=t[r];a++)if(e[a]>i/2){let l=t.copy(),u=t.copy(),f=a-t[o],c=t[r]-a,d,m=0;for(f<=c?d=Math.min(t[r]-1,~~(a+c/2)):d=Math.max(t[o],~~(a-1-f/2));!e[d];)d++;for(m=n[d];!m&&e[d-1];)m=n[--d];return l[r]=d,u[o]=l[r]+1,[l,u]}throw new Error("VBox can't be cut")}function xi(t,e){if(!e.count())return[e.copy(),void 0];const n=e.r2-e.r1+1,i=e.g2-e.g1+1,s=e.b2-e.b1+1,o=Math.max(n,i,s);if(e.count()==1)return[e.copy(),void 0];let r=0;const a=[],l=[];if(o==n)for(let f=e.r1;f<=e.r2;f++){let c=0;for(let d=e.g1;d<=e.g2;d++)for(let m=e.b1;m<=e.b2;m++)c+=t.sampleWithReducedColor(f,d,m);r+=c,a[f]=r}else if(o==i)for(let f=e.g1;f<=e.g2;f++){let c=0;for(let d=e.r1;d<=e.r2;d++)for(let m=e.b1;m<=e.b2;m++)c+=t.sampleWithReducedColor(d,f,m);r+=c,a[f]=r}else if(o==s)for(let f=e.b1;f<=e.b2;f++){let c=0;for(let d=e.r1;d<=e.r2;d++)for(let m=e.g1;m<=e.g2;m++)c+=t.sampleWithReducedColor(d,m,f);r+=c,a[f]=r}else throw new Error("Not Reached");a.forEach(function(f,c){l[c]=r-f});const u=o==n?"r":o==i?"g":"b";return $i(e,a,l,r,u)}function er(t,e){if(t.length<4||e<2||e>256)throw new Error("Invalid Arguments. There must be at least one pixel, and the max color must be between 2 and 256");const n=new Je(t),i=Ki(t,n),s=new ct((l,u)=>ft(l.count(),u.count()));s.push(i);const o=(l,u)=>{let f=l.size(),c=0,d;for(;c<Yt;){if(f>=u||c++>Yt)return;if(d=l.pop(),!d||!d.count()){l.push(d),c++;continue}const[m,g]=xi(n,d);l.push(m),g&&(l.push(g),f++)}};o(s,Zi*e);const r=new ct(function(l,u){return ft(l.count()*l.volume(),u.count()*u.volume())});for(;s.size();)r.push(s.pop());o(r,e);const a=new Ji;for(;r.size();)a.push(r.pop());return a}function tr(t,e,n=10){const i=nr(t.data,n),s=er(i,e);return s?s.palette():null}function nr(t,e){const n=Math.floor(t.length/4),i=Math.max(1,Math.round(n/e)),s=new Uint8ClampedArray(i*4);for(let o=0;o<i;o++){const r=Math.round(o*n/i);s[o*4+0]=t[r*4+0],s[o*4+1]=t[r*4+1],s[o*4+2]=t[r*4+2],s[o*4+3]=t[r*4+3]}return s}function ir(){return new Worker(""+new URL("../workers/worker-b8c0f30a.js",import.meta.url).href)}let jt=xe(new ir);async function rr(t){if(!jt)throw new Error("Worker not initialized");return await jt.generatePalette(t)}function qt(t){let e,n,i,s,o;return{c(){e=E("span"),n=E("span"),i=j(t[2]),s=P(),o=j(t[3]),this.h()},l(r){e=y(r,"SPAN",{id:!0,class:!0});var a=S(e);n=y(a,"SPAN",{class:!0});var l=S(n);i=q(l,t[2]),s=N(l),l.forEach(b),o=q(a,t[3]),a.forEach(b),this.h()},h(){_(n,"class","sr-only"),_(e,"id",t[6]),_(e,"class","text-gray-500")},m(r,a){O(r,e,a),v(e,n),v(n,i),v(n,s),v(e,o)},p(r,a){a&4&&ve(i,r[2]),a&8&&ve(o,r[3])},d(r){r&&b(e)}}}function sr(t){let e,n,i,s,o,r,a,l,u,f,c,d=t[3]&&qt(t);return{c(){e=E("div"),n=E("div"),i=E("input"),o=P(),r=E("div"),a=E("label"),l=j(t[2]),u=P(),d&&d.c(),this.h()},l(m){e=y(m,"DIV",{class:!0});var g=S(e);n=y(g,"DIV",{class:!0});var p=S(n);i=y(p,"INPUT",{id:!0,"aria-describedby":!0,name:!0,type:!0,class:!0}),p.forEach(b),o=N(g),r=y(g,"DIV",{class:!0});var A=S(r);a=y(A,"LABEL",{for:!0,class:!0});var h=S(a);l=q(h,t[2]),h.forEach(b),u=N(A),d&&d.l(A),A.forEach(b),g.forEach(b),this.h()},h(){_(i,"id",t[5]),_(i,"aria-describedby",s=t[3]?t[6]:void 0),_(i,"name",t[4]),_(i,"type","checkbox"),_(i,"class","h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600"),_(n,"class","flex h-6 items-center"),_(a,"for",t[5]),_(a,"class","font-medium text-gray-900"),_(r,"class","ml-3 text-sm leading-6"),_(e,"class","relative flex items-start")},m(m,g){O(m,e,g),v(e,n),v(n,i),t[9](i),i.checked=t[0],v(e,o),v(e,r),v(r,a),v(a,l),v(r,u),d&&d.m(r,null),f||(c=[Z(i,"input",t[7]),Z(i,"change",t[8]),Z(i,"change",t[10])],f=!0)},p(m,[g]){g&8&&s!==(s=m[3]?m[6]:void 0)&&_(i,"aria-describedby",s),g&16&&_(i,"name",m[4]),g&1&&(i.checked=m[0]),g&4&&ve(l,m[2]),m[3]?d?d.p(m,g):(d=qt(m),d.c(),d.m(r,null)):d&&(d.d(1),d=null)},i:K,o:K,d(m){m&&b(e),t[9](null),d&&d.d(),f=!1,ye(c)}}}function or(t,e,n){let{checked:i=!1}=e,{label:s}=e,{description:o=void 0}=e,{name:r=void 0}=e,{input:a=null}=e;const l=ut(),u=ut();function f(g){ot.call(this,t,g)}function c(g){ot.call(this,t,g)}function d(g){Y[g?"unshift":"push"](()=>{a=g,n(1,a)})}function m(){i=this.checked,n(0,i)}return t.$$set=g=>{"checked"in g&&n(0,i=g.checked),"label"in g&&n(2,s=g.label),"description"in g&&n(3,o=g.description),"name"in g&&n(4,r=g.name),"input"in g&&n(1,a=g.input)},[i,a,s,o,r,l,u,f,c,d,m]}class vn extends ie{constructor(e){super(),re(this,e,or,sr,se,{checked:0,label:2,description:3,name:4,input:1})}}function Gt(t,e,n){const i=t.slice();return i[15]=e[n].name,i[16]=e[n].palette,i[18]=n,i}function ar(t){let e,n,i,s,o,r=t[4],a=[];for(let l=0;l<r.length;l+=1)a[l]=Qt(Gt(t,r,l));return{c(){e=E("select"),n=E("option"),i=j("Choose a Preset ");for(let l=0;l<a.length;l+=1)a[l].c();this.h()},l(l){e=y(l,"SELECT",{class:!0});var u=S(e);n=y(u,"OPTION",{});var f=S(n);i=q(f,"Choose a Preset "),f.forEach(b);for(let c=0;c<a.length;c+=1)a[c].l(u);u.forEach(b),this.h()},h(){n.__value=-1,n.value=n.__value,n.selected=!0,n.disabled=!0,_(e,"class","mt-2 block w-full rounded-md border-0 py-1.5 pl-3 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-indigo-600 sm:text-sm sm:leading-6")},m(l,u){O(l,e,u),v(e,n),v(n,i);for(let f=0;f<a.length;f+=1)a[f]&&a[f].m(e,null);s||(o=Z(e,"input",t[5]),s=!0)},p(l,u){if(u&16){r=l[4];let f;for(f=0;f<r.length;f+=1){const c=Gt(l,r,f);a[f]?a[f].p(c,u):(a[f]=Qt(c),a[f].c(),a[f].m(e,null))}for(;f<a.length;f+=1)a[f].d(1);a.length=r.length}},d(l){l&&b(e),Fe(a,l),s=!1,o()}}}function lr(t){let e,n,i,s=Be(t[2],Xe,Ue)+"",o,r,a,l,u,f;return{c(){e=E("label"),n=E("span"),i=j("Number of Colors ("),o=j(s),r=j(")"),a=P(),l=E("input"),this.h()},l(c){e=y(c,"LABEL",{class:!0});var d=S(e);n=y(d,"SPAN",{});var m=S(n);i=q(m,"Number of Colors ("),o=q(m,s),r=q(m,")"),m.forEach(b),a=N(d),l=y(d,"INPUT",{type:!0,min:!0,max:!0,class:!0}),d.forEach(b),this.h()},h(){_(l,"type","number"),_(l,"min",Xe),_(l,"max",Ue),_(l,"class","block rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"),_(e,"class","flex justify-between items-center")},m(c,d){O(c,e,d),v(e,n),v(n,i),v(n,o),v(n,r),v(e,a),v(e,l),qe(l,t[2]),u||(f=[Z(l,"input",t[11]),Z(l,"blur",t[12]),Z(l,"input",t[6])],u=!0)},p(c,d){d&4&&s!==(s=Be(c[2],Xe,Ue)+"")&&ve(o,s),d&4&&dt(l.value)!==c[2]&&qe(l,c[2])},d(c){c&&b(e),u=!1,ye(f)}}}function Qt(t){let e,n=t[15]+"",i,s;return{c(){e=E("option"),i=j(n),s=P(),this.h()},l(o){e=y(o,"OPTION",{});var r=S(e);i=q(r,n),s=N(r),r.forEach(b),this.h()},h(){e.__value=t[18],e.value=e.__value},m(o,r){O(o,e,r),v(e,i),v(e,s)},p:K,d(o){o&&b(e)}}}function ur(t){let e,n,i,s,o,r,a,l;function u(h){t[9](h)}function f(h){t[10](h)}let c={label:"Extract Colors from Image"};t[1]!==void 0&&(c.checked=t[1]),t[3]!==void 0&&(c.input=t[3]),e=new vn({props:c}),Y.push(()=>G(e,"checked",u)),Y.push(()=>G(e,"input",f)),e.$on("input",t[6]);function d(h,w){return h[1]?lr:ar}let m=d(t),g=m(t);function p(h){t[13](h)}let A={};return t[0]!==void 0&&(A.colors=t[0]),r=new Gi({props:A}),Y.push(()=>G(r,"colors",p)),{c(){F(e.$$.fragment),s=P(),g.c(),o=P(),F(r.$$.fragment)},l(h){z(e.$$.fragment,h),s=N(h),g.l(h),o=N(h),z(r.$$.fragment,h)},m(h,w){W(e,h,w),O(h,s,w),g.m(h,w),O(h,o,w),W(r,h,w),l=!0},p(h,[w]){const I={};!n&&w&2&&(n=!0,I.checked=h[1],Q(()=>n=!1)),!i&&w&8&&(i=!0,I.input=h[3],Q(()=>i=!1)),e.$set(I),m===(m=d(h))&&g?g.p(h,w):(g.d(1),g=m(h),g&&(g.c(),g.m(o.parentNode,o)));const k={};!a&&w&1&&(a=!0,k.colors=h[0],Q(()=>a=!1)),r.$set(k)},i(h){l||(M(e.$$.fragment,h),M(r.$$.fragment,h),l=!0)},o(h){C(e.$$.fragment,h),C(r.$$.fragment,h),l=!1},d(h){V(e,h),h&&b(s),g.d(h),h&&b(o),V(r,h)}}}const Ue=256,Xe=2;function fr(t,e,n){let{image:i=null}=e,{palette:s=null}=e,o=["#000000","#ffffff"].map(Pe);const r=[{name:"Black and White",palette:["#000000","#ffffff"].map(Pe)},{name:"3Bit",palette:["#000000","#ffffff","#ff0000","#00ff00","#0000ff","#ffff00","#00ffff","#ff00ff"].map(Pe)},{name:"Grayscale",palette:["#000000","#333333","#666666","#999999","#cccccc","#ffffff"].map(Pe)}];async function a(w,I){const k=tr(w,I,5);if(!k)throw new Error("Failed to generate palette");return k}let l=!0,u=16;function f(w){const I=w.target,k=I.value;n(0,o=r[Number(k)].palette),I.value="-1"}let c=null;function d(){n(1,l=(c==null?void 0:c.checked)??!0),i&&l&&a(i,Be(u,Xe,Ue)).then(w=>n(0,o=w))}i&&d();function m(w){l=w,n(1,l)}function g(w){c=w,n(3,c)}function p(){u=dt(this.value),n(2,u)}const A=w=>{n(2,u=Be(u,Xe,Ue)),console.log(u)};function h(w){o=w,n(0,o)}return t.$$set=w=>{"image"in w&&n(8,i=w.image),"palette"in w&&n(7,s=w.palette)},t.$$.update=()=>{t.$$.dirty&1&&rr(o).then(w=>n(7,s=w))},[o,l,u,c,r,f,d,s,i,m,g,p,A,h]}class cr extends ie{constructor(e){super(),re(this,e,fr,ur,se,{image:8,palette:7})}}function dr(t){let e,n,i,s,o,r,a,l,u,f,c,d,m,g,p,A,h,w,I,k,D,H,U,B,R,$;return m=new _e({props:{src:Xn,class:"w-4 h-4",solid:!0}}),{c(){e=E("fieldset"),n=E("div"),i=E("label"),s=j("Width"),o=P(),r=E("div"),a=E("input"),l=P(),u=E("div"),f=j("px"),c=P(),d=E("span"),F(m.$$.fragment),g=P(),p=E("div"),A=E("label"),h=j("Height"),w=P(),I=E("div"),k=E("input"),D=P(),H=E("div"),U=j("px"),this.h()},l(T){e=y(T,"FIELDSET",{class:!0});var X=S(e);n=y(X,"DIV",{class:!0});var x=S(n);i=y(x,"LABEL",{for:!0,class:!0});var ee=S(i);s=q(ee,"Width"),ee.forEach(b),o=N(x),r=y(x,"DIV",{class:!0});var te=S(r);a=y(te,"INPUT",{name:!0,id:!0,type:!0,min:!0,max:!0,step:!0,class:!0,placeholder:!0}),l=N(te),u=y(te,"DIV",{class:!0});var de=S(u);f=q(de,"px"),de.forEach(b),te.forEach(b),x.forEach(b),c=N(X),d=y(X,"SPAN",{class:!0});var he=S(d);z(m.$$.fragment,he),he.forEach(b),g=N(X),p=y(X,"DIV",{class:!0});var oe=S(p);A=y(oe,"LABEL",{for:!0,class:!0});var me=S(A);h=q(me,"Height"),me.forEach(b),w=N(oe),I=y(oe,"DIV",{class:!0});var ue=S(I);k=y(ue,"INPUT",{type:!0,id:!0,name:!0,min:!0,max:!0,step:!0,class:!0,placeholder:!0}),D=N(ue),H=y(ue,"DIV",{class:!0});var ze=S(H);U=q(ze,"px"),ze.forEach(b),ue.forEach(b),oe.forEach(b),X.forEach(b),this.h()},h(){_(i,"for","width-"+t[8]),_(i,"class","block text-sm font-medium leading-6 text-gray-900"),_(a,"name","width"),_(a,"id","width-"+t[8]),_(a,"type","number"),_(a,"min",t[3]),_(a,"max",t[1]),_(a,"step","1"),a.value=t[0],_(a,"class","block w-full rounded-md border-0 py-1.5 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"),_(a,"placeholder","600"),_(u,"class","pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400"),_(r,"class","relative mt-2 rounded-md shadow-sm"),_(n,"class","w-full"),_(d,"class","text-gray-500 pb-2 cursor-not-allowed"),_(A,"for","height-"+t[9]),_(A,"class","block text-sm font-medium leading-6 text-gray-900"),_(k,"type","number"),_(k,"id","height-"+t[9]),_(k,"name","height"),_(k,"min",t[4]),_(k,"max",t[2]),_(k,"step","1"),k.value=t[5],_(k,"class","block w-full rounded-md border-0 py-1.5 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"),_(k,"placeholder","340"),_(H,"class","pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400"),_(I,"class","relative mt-2 rounded-md shadow-sm"),_(p,"class","w-full"),_(e,"class","flex gap-3 items-end justify-between")},m(T,X){O(T,e,X),v(e,n),v(n,i),v(i,s),v(n,o),v(n,r),v(r,a),v(r,l),v(r,u),v(u,f),v(e,c),v(e,d),W(m,d,null),v(e,g),v(e,p),v(p,A),v(A,h),v(p,w),v(p,I),v(I,k),v(I,D),v(I,H),v(H,U),B=!0,R||($=[Z(a,"input",t[6]),Z(k,"input",t[7])],R=!0)},p(T,[X]){(!B||X&8)&&_(a,"min",T[3]),(!B||X&2)&&_(a,"max",T[1]),(!B||X&1&&a.value!==T[0])&&(a.value=T[0]),(!B||X&16)&&_(k,"min",T[4]),(!B||X&4)&&_(k,"max",T[2]),(!B||X&32&&k.value!==T[5])&&(k.value=T[5])},i(T){B||(M(m.$$.fragment,T),B=!0)},o(T){C(m.$$.fragment,T),B=!1},d(T){T&&b(e),V(m),R=!1,ye($)}}}function Zt(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}function hr(t,e,n){let i,{width:s}=e,{aspectRatio:o}=e,{maxWidth:r=null}=e,{maxHeight:a=null}=e,{minWidth:l=null}=e,{minHeight:u=null}=e;function f(g){const p=g.target.value;p&&(l!==null&&p<l||r!==null&&p>r||n(0,s=p))}function c(g){const p=g.target.value;p&&(u!==null&&p<u||a!==null&&p>a||n(0,s=Math.round(o*p)))}let d=Zt(),m=Zt();return t.$$set=g=>{"width"in g&&n(0,s=g.width),"aspectRatio"in g&&n(10,o=g.aspectRatio),"maxWidth"in g&&n(1,r=g.maxWidth),"maxHeight"in g&&n(2,a=g.maxHeight),"minWidth"in g&&n(3,l=g.minWidth),"minHeight"in g&&n(4,u=g.minHeight)},t.$$.update=()=>{t.$$.dirty&1025&&n(5,i=Math.round(s/o))},[s,r,a,l,u,i,f,c,d,m,o]}class wn extends ie{constructor(e){super(),re(this,e,hr,dr,se,{width:0,aspectRatio:10,maxWidth:1,maxHeight:2,minWidth:3,minHeight:4})}}const mr=t=>({}),Jt=t=>({});function gr(t){let e;const n=t[2].placeholder,i=Te(n,t,t[1],Jt),s=i||pr();return{c(){s&&s.c()},l(o){s&&s.l(o)},m(o,r){s&&s.m(o,r),e=!0},p(o,r){i&&i.p&&(!e||r&2)&&Me(i,n,o,o[1],e?De(n,o[1],r,mr):Ce(o[1]),Jt)},i(o){e||(M(s,o),e=!0)},o(o){C(s,o),e=!1},d(o){s&&s.d(o)}}}function _r(t){let e,n,i,s;return{c(){e=E("canvas"),this.h()},l(o){e=y(o,"CANVAS",{class:!0,style:!0}),S(e).forEach(b),this.h()},h(){_(e,"class","w-full max-h-96 object-contain shadow-lg"),ce(e,"image-rendering","pixelated")},m(o,r){O(o,e,r),i||(s=Re(n=vr.call(null,e,t[0])),i=!0)},p(o,r){n&&$e(n.update)&&r&1&&n.update.call(null,o[0])},i:K,o:K,d(o){o&&b(e),i=!1,s()}}}function pr(t){let e,n;return{c(){e=E("span"),n=j("No Image")},l(i){e=y(i,"SPAN",{});var s=S(e);n=q(s,"No Image"),s.forEach(b)},m(i,s){O(i,e,s),v(e,n)},p:K,d(i){i&&b(e)}}}function br(t){let e,n,i,s;const o=[_r,gr],r=[];function a(l,u){return l[0]?0:1}return n=a(t),i=r[n]=o[n](t),{c(){e=E("div"),i.c(),this.h()},l(l){e=y(l,"DIV",{class:!0});var u=S(e);i.l(u),u.forEach(b),this.h()},h(){_(e,"class","w-full aspect-square rounded-lg bg-gray-100 p-8 grid place-items-center")},m(l,u){O(l,e,u),r[n].m(e,null),s=!0},p(l,[u]){let f=n;n=a(l),n===f?r[n].p(l,u):(Ae(),C(r[f],1,1,()=>{r[f]=null}),Ee(),i=r[n],i?i.p(l,u):(i=r[n]=o[n](l),i.c()),M(i,1),i.m(e,null))},i(l){s||(M(i),s=!0)},o(l){C(i),s=!1},d(l){l&&b(e),r[n].d()}}}function vr(t,e){const n=t.getContext("2d");if(!n)return;const i=()=>{t.width=e.width,t.height=e.height,n.putImageData(e,0,0)};let s=null;const o=()=>{s||(s=requestAnimationFrame(()=>{s=null,i()}))};return o(),{destroy(){s&&cancelAnimationFrame(s)},update:r=>{e=r,o()}}}function wr(t,e,n){let{$$slots:i={},$$scope:s}=e,{imageData:o}=e;return t.$$set=r=>{"imageData"in r&&n(0,o=r.imageData),"$$scope"in r&&n(1,s=r.$$scope)},[o,s,i]}class Ar extends ie{constructor(e){super(),re(this,e,wr,br,se,{imageData:0})}}function Er(){return new Worker(""+new URL("../workers/worker-09b3192d.js",import.meta.url).href)}let st=null;async function yr(t){return st||(st=xe(new Er)),await st.generate(t)}function Kt(t){let e,n,i;function s(r){t[9](r)}let o={label:"Bayer Level ("+t[3]+")",min:0,max:5,step:1};return t[3]!==void 0&&(o.value=t[3]),e=new ht({props:o}),Y.push(()=>G(e,"value",s)),{c(){F(e.$$.fragment)},l(r){z(e.$$.fragment,r)},m(r,a){W(e,r,a),i=!0},p(r,a){const l={};a&8&&(l.label="Bayer Level ("+r[3]+")"),!n&&a&8&&(n=!0,l.value=r[3],Q(()=>n=!1)),e.$set(l)},i(r){i||(M(e.$$.fragment,r),i=!0)},o(r){C(e.$$.fragment,r),i=!1},d(r){V(e,r)}}}function $t(t){let e,n,i;function s(r){t[10](r)}let o={aspectRatio:1,minWidth:1,minHeight:1,maxHeight:3e3,maxWidth:3e3};return t[4]!==void 0&&(o.width=t[4]),e=new wn({props:o}),Y.push(()=>G(e,"width",s)),{c(){F(e.$$.fragment)},l(r){z(e.$$.fragment,r)},m(r,a){W(e,r,a),i=!0},p(r,a){const l={};!n&&a&16&&(n=!0,l.width=r[4],Q(()=>n=!1)),e.$set(l)},i(r){i||(M(e.$$.fragment,r),i=!0)},o(r){C(e.$$.fragment,r),i=!1},d(r){V(e,r)}}}function kr(t){let e,n;return{c(){e=E("span"),n=j("Loading Threshold Map"),this.h()},l(i){e=y(i,"SPAN",{slot:!0});var s=S(e);n=q(s,"Loading Threshold Map"),s.forEach(b),this.h()},h(){_(e,"slot","placeholder")},m(i,s){O(i,e,s),v(e,n)},p:K,d(i){i&&b(e)}}}function Ir(t){let e,n,i,s,o,r,a,l,u,f;function c(h){t[7](h)}let d={label:"Noise Intensity ("+t[1]+")",min:0,max:1.5,step:.01};t[1]!==void 0&&(d.value=t[1]),e=new ht({props:d}),Y.push(()=>G(e,"value",c));function m(h){t[8](h)}let g={label:"Threshold Map",options:t[5]};t[2]!==void 0&&(g.selected=t[2]),s=new pn({props:g}),Y.push(()=>G(s,"selected",m));let p=t[2]==="bayer"&&Kt(t),A=t[2]==="white_noise"&&$t(t);return u=new Ar({props:{imageData:t[0],$$slots:{placeholder:[kr]},$$scope:{ctx:t}}}),{c(){F(e.$$.fragment),i=P(),F(s.$$.fragment),r=P(),p&&p.c(),a=P(),A&&A.c(),l=P(),F(u.$$.fragment)},l(h){z(e.$$.fragment,h),i=N(h),z(s.$$.fragment,h),r=N(h),p&&p.l(h),a=N(h),A&&A.l(h),l=N(h),z(u.$$.fragment,h)},m(h,w){W(e,h,w),O(h,i,w),W(s,h,w),O(h,r,w),p&&p.m(h,w),O(h,a,w),A&&A.m(h,w),O(h,l,w),W(u,h,w),f=!0},p(h,[w]){const I={};w&2&&(I.label="Noise Intensity ("+h[1]+")"),!n&&w&2&&(n=!0,I.value=h[1],Q(()=>n=!1)),e.$set(I);const k={};!o&&w&4&&(o=!0,k.selected=h[2],Q(()=>o=!1)),s.$set(k),h[2]==="bayer"?p?(p.p(h,w),w&4&&M(p,1)):(p=Kt(h),p.c(),M(p,1),p.m(a.parentNode,a)):p&&(Ae(),C(p,1,1,()=>{p=null}),Ee()),h[2]==="white_noise"?A?(A.p(h,w),w&4&&M(A,1)):(A=$t(h),A.c(),M(A,1),A.m(l.parentNode,l)):A&&(Ae(),C(A,1,1,()=>{A=null}),Ee());const D={};w&1&&(D.imageData=h[0]),w&2048&&(D.$$scope={dirty:w,ctx:h}),u.$set(D)},i(h){f||(M(e.$$.fragment,h),M(s.$$.fragment,h),M(p),M(A),M(u.$$.fragment,h),f=!0)},o(h){C(e.$$.fragment,h),C(s.$$.fragment,h),C(p),C(A),C(u.$$.fragment,h),f=!1},d(h){V(e,h),h&&b(i),V(s,h),h&&b(r),p&&p.d(h),h&&b(a),A&&A.d(h),h&&b(l),V(u,h)}}}function Sr(t,e,n){let i,{thresholdMap:s}=e,{noiseIntensity:o}=e,r="bayer";const a=[{name:"Bayer",value:"bayer"},{name:"Blue Noise",value:"blue_noise"},{name:"White Noise",value:"white_noise"}];let l=3,u=256;function f(g){o=g,n(1,o)}function c(g){r=g,n(2,r)}function d(g){l=g,n(3,l)}function m(g){u=g,n(4,u)}return t.$$set=g=>{"thresholdMap"in g&&n(0,s=g.thresholdMap),"noiseIntensity"in g&&n(1,o=g.noiseIntensity)},t.$$.update=()=>{if(t.$$.dirty&16&&n(6,i=u),t.$$.dirty&92&&"ImageData"in globalThis){let g;switch(r){case"bayer":g={mode:"bayer",level:l};break;case"blue_noise":g={mode:"blue_noise"};break;case"white_noise":g={mode:"white_noise",width:u,height:i};break}yr(g).then(p=>n(0,s=p))}},[s,o,r,l,u,a,i,f,c,d,m]}class Tr extends ie{constructor(e){super(),re(this,e,Sr,Ir,se,{thresholdMap:0,noiseIntensity:1})}}function xt(t){let e,n,i;function s(r){t[6](r)}let o={aspectRatio:t[4],minWidth:12,minHeight:12,maxHeight:5e3,maxWidth:5e3};return t[3]!==void 0&&(o.width=t[3]),e=new wn({props:o}),Y.push(()=>G(e,"width",s)),{c(){F(e.$$.fragment)},l(r){z(e.$$.fragment,r)},m(r,a){W(e,r,a),i=!0},p(r,a){const l={};a&16&&(l.aspectRatio=r[4]),!n&&a&8&&(n=!0,l.width=r[3],Q(()=>n=!1)),e.$set(l)},i(r){i||(M(e.$$.fragment,r),i=!0)},o(r){C(e.$$.fragment,r),i=!1},d(r){V(e,r)}}}function Mr(t){let e,n,i,s,o,r,a,l,u,f,c,d,m,g,p,A,h,w,I,k,D,H,U,B,R,$,T,X,x,ee,te,de,he,oe,me,ue;function ze(L){t[5](L)}let gt={label:"Original Size"};t[2]!==void 0&&(gt.checked=t[2]),r=new vn({props:gt}),Y.push(()=>G(r,"checked",ze));let ne=!t[2]&&xt(t);function En(L){t[7](L)}let _t={tabs:[{label:"None",value:"none"},{label:"Ordered",value:"ordered"},{label:"Error Diffusion",value:"error_diffusion"}]};t[0].mode!==void 0&&(_t.selected=t[0].mode),g=new Ui({props:_t}),Y.push(()=>G(g,"selected",En));function yn(L){t[8](L)}function kn(L){t[9](L)}function In(L){t[10](L)}let We={};t[0].diffusionStrength!==void 0&&(We.diffusionStrength=t[0].diffusionStrength),t[0].diffusionMatrix!==void 0&&(We.diffusionMatrix=t[0].diffusionMatrix),t[0].diffusionMatrixOriginX!==void 0&&(We.diffusionOriginX=t[0].diffusionMatrixOriginX),w=new Hi({props:We}),Y.push(()=>G(w,"diffusionStrength",yn)),Y.push(()=>G(w,"diffusionMatrix",kn)),Y.push(()=>G(w,"diffusionOriginX",In));function Sn(L){t[11](L)}function Tn(L){t[12](L)}let et={};t[0].thresholdMap!==void 0&&(et.thresholdMap=t[0].thresholdMap),t[0].noiseIntensity!==void 0&&(et.noiseIntensity=t[0].noiseIntensity),R=new Tr({props:et}),Y.push(()=>G(R,"thresholdMap",Sn)),Y.push(()=>G(R,"noiseIntensity",Tn));function Mn(L){t[13](L)}let pt={image:t[1]};return t[0].palette!==void 0&&(pt.palette=t[0].palette),oe=new cr({props:pt}),Y.push(()=>G(oe,"palette",Mn)),{c(){e=E("section"),n=E("div"),i=E("h2"),s=j("Output Options"),o=P(),F(r.$$.fragment),l=P(),ne&&ne.c(),u=P(),f=E("div"),c=E("h2"),d=j("Dithering Options"),m=P(),F(g.$$.fragment),A=P(),h=E("div"),F(w.$$.fragment),U=P(),B=E("div"),F(R.$$.fragment),x=P(),ee=E("div"),te=E("h2"),de=j("Palette"),he=P(),F(oe.$$.fragment),this.h()},l(L){e=y(L,"SECTION",{class:!0});var J=S(e);n=y(J,"DIV",{class:!0});var ge=S(n);i=y(ge,"H2",{class:!0});var Le=S(i);s=q(Le,"Output Options"),Le.forEach(b),o=N(ge),z(r.$$.fragment,ge),l=N(ge),ne&&ne.l(ge),ge.forEach(b),u=N(J),f=y(J,"DIV",{class:!0});var ae=S(f);c=y(ae,"H2",{class:!0});var ke=S(c);d=q(ke,"Dithering Options"),ke.forEach(b),m=N(ae),z(g.$$.fragment,ae),A=N(ae),h=y(ae,"DIV",{class:!0});var Ie=S(h);z(w.$$.fragment,Ie),Ie.forEach(b),U=N(ae),B=y(ae,"DIV",{class:!0});var bt=S(B);z(R.$$.fragment,bt),bt.forEach(b),ae.forEach(b),x=N(J),ee=y(J,"DIV",{class:!0});var Ve=S(ee);te=y(Ve,"H2",{class:!0});var vt=S(te);de=q(vt,"Palette"),vt.forEach(b),he=N(Ve),z(oe.$$.fragment,Ve),Ve.forEach(b),J.forEach(b),this.h()},h(){_(i,"class","text-base font-semibold leading-7 text-black"),_(n,"class","grid gap-4"),_(c,"class","text-base font-semibold leading-7 text-black mb-2"),_(h,"class",H=t[0].mode==="error_diffusion"?"contents":"hidden"),_(B,"class",X=t[0].mode==="ordered"?"contents":"hidden"),_(f,"class","grid gap-4"),_(te,"class","text-base font-semibold leading-7 text-black mb-2"),_(ee,"class","grid gap-3"),be(ee,"hidden",t[0].mode==="none"),_(e,"class","grid gap-8 pt-8 px-4 safe-padding-bottom svelte-1hcc44")},m(L,J){O(L,e,J),v(e,n),v(n,i),v(i,s),v(n,o),W(r,n,null),v(n,l),ne&&ne.m(n,null),v(e,u),v(e,f),v(f,c),v(c,d),v(f,m),W(g,f,null),v(f,A),v(f,h),W(w,h,null),v(f,U),v(f,B),W(R,B,null),v(e,x),v(e,ee),v(ee,te),v(te,de),v(ee,he),W(oe,ee,null),ue=!0},p(L,[J]){const ge={};!a&&J&4&&(a=!0,ge.checked=L[2],Q(()=>a=!1)),r.$set(ge),L[2]?ne&&(Ae(),C(ne,1,1,()=>{ne=null}),Ee()):ne?(ne.p(L,J),J&4&&M(ne,1)):(ne=xt(L),ne.c(),M(ne,1),ne.m(n,null));const Le={};!p&&J&1&&(p=!0,Le.selected=L[0].mode,Q(()=>p=!1)),g.$set(Le);const ae={};!I&&J&1&&(I=!0,ae.diffusionStrength=L[0].diffusionStrength,Q(()=>I=!1)),!k&&J&1&&(k=!0,ae.diffusionMatrix=L[0].diffusionMatrix,Q(()=>k=!1)),!D&&J&1&&(D=!0,ae.diffusionOriginX=L[0].diffusionMatrixOriginX,Q(()=>D=!1)),w.$set(ae),(!ue||J&1&&H!==(H=L[0].mode==="error_diffusion"?"contents":"hidden"))&&_(h,"class",H);const ke={};!$&&J&1&&($=!0,ke.thresholdMap=L[0].thresholdMap,Q(()=>$=!1)),!T&&J&1&&(T=!0,ke.noiseIntensity=L[0].noiseIntensity,Q(()=>T=!1)),R.$set(ke),(!ue||J&1&&X!==(X=L[0].mode==="ordered"?"contents":"hidden"))&&_(B,"class",X);const Ie={};J&2&&(Ie.image=L[1]),!me&&J&1&&(me=!0,Ie.palette=L[0].palette,Q(()=>me=!1)),oe.$set(Ie),(!ue||J&1)&&be(ee,"hidden",L[0].mode==="none")},i(L){ue||(M(r.$$.fragment,L),M(ne),M(g.$$.fragment,L),M(w.$$.fragment,L),M(R.$$.fragment,L),M(oe.$$.fragment,L),ue=!0)},o(L){C(r.$$.fragment,L),C(ne),C(g.$$.fragment,L),C(w.$$.fragment,L),C(R.$$.fragment,L),C(oe.$$.fragment,L),ue=!1},d(L){L&&b(e),V(r),ne&&ne.d(),V(g),V(w),V(R),V(oe)}}}function Cr(t){return t?t.width/t.height:1}function Dr(t,e,n){let i,{image_data:s}=e,{config:o}=e,r=!0,a=s.width;function l(h){r=h,n(2,r)}function u(h){a=h,n(3,a)}function f(h){t.$$.not_equal(o.mode,h)&&(o.mode=h,n(0,o),n(4,i),n(2,r),n(1,s),n(3,a))}function c(h){t.$$.not_equal(o.diffusionStrength,h)&&(o.diffusionStrength=h,n(0,o),n(4,i),n(2,r),n(1,s),n(3,a))}function d(h){t.$$.not_equal(o.diffusionMatrix,h)&&(o.diffusionMatrix=h,n(0,o),n(4,i),n(2,r),n(1,s),n(3,a))}function m(h){t.$$.not_equal(o.diffusionMatrixOriginX,h)&&(o.diffusionMatrixOriginX=h,n(0,o),n(4,i),n(2,r),n(1,s),n(3,a))}function g(h){t.$$.not_equal(o.thresholdMap,h)&&(o.thresholdMap=h,n(0,o),n(4,i),n(2,r),n(1,s),n(3,a))}function p(h){t.$$.not_equal(o.noiseIntensity,h)&&(o.noiseIntensity=h,n(0,o),n(4,i),n(2,r),n(1,s),n(3,a))}function A(h){t.$$.not_equal(o.palette,h)&&(o.palette=h,n(0,o),n(4,i),n(2,r),n(1,s),n(3,a))}return t.$$set=h=>{"image_data"in h&&n(1,s=h.image_data),"config"in h&&n(0,o=h.config)},t.$$.update=()=>{t.$$.dirty&2&&n(4,i=Cr(s)),t.$$.dirty&17&&n(0,o.height=Math.round(o.width/i),o),t.$$.dirty&14&&n(0,o.width=r?s.width:a,o)},[o,s,r,a,i,l,u,f,c,d,m,g,p,A]}class An extends ie{constructor(e){super(),re(this,e,Dr,Mr,se,{image_data:1,config:0})}}function Rr(t){let e,n,i;function s(r){t[11](r)}let o={slot:"left",config:t[4],image_data:t[0]};return t[1]!==void 0&&(o.canvas=t[1]),e=new _n({props:o}),Y.push(()=>G(e,"canvas",s)),{c(){F(e.$$.fragment)},l(r){z(e.$$.fragment,r)},m(r,a){W(e,r,a),i=!0},p(r,a){const l={};a&16&&(l.config=r[4]),a&1&&(l.image_data=r[0]),!n&&a&2&&(n=!0,l.canvas=r[1],Q(()=>n=!1)),e.$set(l)},i(r){i||(M(e.$$.fragment,r),i=!0)},o(r){C(e.$$.fragment,r),i=!1},d(r){V(e,r)}}}function Lr(t){let e,n,i;function s(r){t[10](r)}let o={slot:"right",config:t[3],image_data:t[0]};return t[2]!==void 0&&(o.canvas=t[2]),e=new _n({props:o}),Y.push(()=>G(e,"canvas",s)),{c(){F(e.$$.fragment)},l(r){z(e.$$.fragment,r)},m(r,a){W(e,r,a),i=!0},p(r,a){const l={};a&8&&(l.config=r[3]),a&1&&(l.image_data=r[0]),!n&&a&4&&(n=!0,l.canvas=r[2],Q(()=>n=!1)),e.$set(l)},i(r){i||(M(e.$$.fragment,r),i=!0)},o(r){C(e.$$.fragment,r),i=!1},d(r){V(e,r)}}}function Pr(t){let e,n,i,s;function o(l){t[14](l)}function r(l){t[15](l)}let a={};return t[4]!==void 0&&(a.config=t[4]),t[0]!==void 0&&(a.image_data=t[0]),e=new An({props:a}),Y.push(()=>G(e,"config",o)),Y.push(()=>G(e,"image_data",r)),{c(){F(e.$$.fragment)},l(l){z(e.$$.fragment,l)},m(l,u){W(e,l,u),s=!0},p(l,u){const f={};!n&&u&16&&(n=!0,f.config=l[4],Q(()=>n=!1)),!i&&u&1&&(i=!0,f.image_data=l[0],Q(()=>i=!1)),e.$set(f)},i(l){s||(M(e.$$.fragment,l),s=!0)},o(l){C(e.$$.fragment,l),s=!1},d(l){V(e,l)}}}function Nr(t){let e,n,i;return e=new _e({props:{src:sn,class:"w-4 h-4"}}),{c(){F(e.$$.fragment),n=j(`
						Save`)},l(s){z(e.$$.fragment,s),n=q(s,`
						Save`)},m(s,o){W(e,s,o),O(s,n,o),i=!0},p:K,i(s){i||(M(e.$$.fragment,s),i=!0)},o(s){C(e.$$.fragment,s),i=!1},d(s){V(e,s),s&&b(n)}}}function Or(t){let e,n,i,s,o;return s=new an({props:{disabled:!t[0],$$slots:{default:[Nr]},$$scope:{ctx:t}}}),s.$on("click",t[13]),{c(){e=E("h1"),n=j("Options"),i=P(),F(s.$$.fragment),this.h()},l(r){e=y(r,"H1",{class:!0});var a=S(e);n=q(a,"Options"),a.forEach(b),i=N(r),z(s.$$.fragment,r),this.h()},h(){_(e,"class","font-bold")},m(r,a){O(r,e,a),v(e,n),O(r,i,a),W(s,r,a),o=!0},p(r,a){const l={};a&1&&(l.disabled=!r[0]),a&4194304&&(l.$$scope={dirty:a,ctx:r}),s.$set(l)},i(r){o||(M(s.$$.fragment,r),o=!0)},o(r){C(s.$$.fragment,r),o=!1},d(r){r&&b(e),r&&b(i),V(s,r)}}}function Ur(t){let e,n,i,s;function o(l){t[18](l)}function r(l){t[19](l)}let a={};return t[3]!==void 0&&(a.config=t[3]),t[0]!==void 0&&(a.image_data=t[0]),e=new An({props:a}),Y.push(()=>G(e,"config",o)),Y.push(()=>G(e,"image_data",r)),{c(){F(e.$$.fragment)},l(l){z(e.$$.fragment,l)},m(l,u){W(e,l,u),s=!0},p(l,u){const f={};!n&&u&8&&(n=!0,f.config=l[3],Q(()=>n=!1)),!i&&u&1&&(i=!0,f.image_data=l[0],Q(()=>i=!1)),e.$set(f)},i(l){s||(M(e.$$.fragment,l),s=!0)},o(l){C(e.$$.fragment,l),s=!1},d(l){V(e,l)}}}function Xr(t){let e,n,i;return e=new _e({props:{src:sn,class:"w-4 h-4"}}),{c(){F(e.$$.fragment),n=j(`
						Save`)},l(s){z(e.$$.fragment,s),n=q(s,`
						Save`)},m(s,o){W(e,s,o),O(s,n,o),i=!0},p:K,i(s){i||(M(e.$$.fragment,s),i=!0)},o(s){C(e.$$.fragment,s),i=!1},d(s){V(e,s),s&&b(n)}}}function Br(t){let e,n,i,s,o;return s=new an({props:{disabled:!t[0],$$slots:{default:[Xr]},$$scope:{ctx:t}}}),s.$on("click",t[17]),{c(){e=E("h1"),n=j("Options"),i=P(),F(s.$$.fragment),this.h()},l(r){e=y(r,"H1",{class:!0});var a=S(e);n=q(a,"Options"),a.forEach(b),i=N(r),z(s.$$.fragment,r),this.h()},h(){_(e,"class","font-bold")},m(r,a){O(r,e,a),v(e,n),O(r,i,a),W(s,r,a),o=!0},p(r,a){const l={};a&1&&(l.disabled=!r[0]),a&4194304&&(l.$$scope={dirty:a,ctx:r}),s.$set(l)},i(r){o||(M(s.$$.fragment,r),o=!0)},o(r){C(s.$$.fragment,r),o=!1},d(r){r&&b(e),r&&b(i),V(s,r)}}}function Fr(t){let e,n,i,s,o,r,a,l,u,f,c,d,m,g,p,A,h,w,I,k,D,H;i=new ri({props:{$$slots:{right:[Lr],left:[Rr]},$$scope:{ctx:t}}}),r=new _e({props:{src:rn,class:"w-5 h-5 text-white"}});function U(T){t[16](T)}let B={$$slots:{header:[Or],default:[Pr]},$$scope:{ctx:t}};t[5]!==void 0&&(B.open=t[5]),c=new Lt({props:B}),Y.push(()=>G(c,"open",U));function R(T){t[20](T)}let $={$$slots:{header:[Br],default:[Ur]},$$scope:{ctx:t}};return t[6]!==void 0&&($.open=t[6]),h=new Lt({props:$}),Y.push(()=>G(h,"open",R)),{c(){e=E("section"),n=E("div"),F(i.$$.fragment),s=P(),o=E("button"),F(r.$$.fragment),a=P(),l=E("section"),u=E("aside"),f=E("div"),F(c.$$.fragment),g=P(),p=E("aside"),A=E("div"),F(h.$$.fragment),this.h()},l(T){e=y(T,"SECTION",{class:!0});var X=S(e);n=y(X,"DIV",{class:!0});var x=S(n);z(i.$$.fragment,x),s=N(x),o=y(x,"BUTTON",{class:!0,title:!0});var ee=S(o);z(r.$$.fragment,ee),ee.forEach(b),x.forEach(b),X.forEach(b),a=N(T),l=y(T,"SECTION",{class:!0});var te=S(l);u=y(te,"ASIDE",{style:!0,class:!0});var de=S(u);f=y(de,"DIV",{class:!0,style:!0});var he=S(f);z(c.$$.fragment,he),he.forEach(b),de.forEach(b),g=N(te),p=y(te,"ASIDE",{style:!0,class:!0});var oe=S(p);A=y(oe,"DIV",{class:!0,style:!0});var me=S(A);z(h.$$.fragment,me),me.forEach(b),oe.forEach(b),te.forEach(b),this.h()},h(){_(o,"class","absolute top-0 left-0 m-4 p-2 bg-black bg-opacity-40 rounded-full"),_(o,"title","Close Image & Reset"),_(n,"class","w-full h-full relative"),_(e,"class","overflow-hidden select-none fixed inset-0"),_(f,"class","p-2"),_(f,"style",m=t[5]?"height: 100vh":""),ce(u,"grid-area","left"),ce(u,"align-self","end"),_(u,"class","md:w-96 max-w-full max-h-full overflow-hidden"),_(A,"class","p-2"),_(A,"style",I=t[6]?"height: 100vh":""),ce(p,"grid-area","right"),ce(p,"align-self","end"),_(p,"class","md:w-96 max-w-full max-h-full overflow-hidden"),_(l,"class","gui-container touch-none pointer-events-none svelte-7tg48m")},m(T,X){O(T,e,X),v(e,n),W(i,n,null),v(n,s),v(n,o),W(r,o,null),O(T,a,X),O(T,l,X),v(l,u),v(u,f),W(c,f,null),v(l,g),v(l,p),v(p,A),W(h,A,null),k=!0,D||(H=Z(o,"click",t[12]),D=!0)},p(T,[X]){const x={};X&4194335&&(x.$$scope={dirty:X,ctx:T}),i.$set(x);const ee={};X&4194323&&(ee.$$scope={dirty:X,ctx:T}),!d&&X&32&&(d=!0,ee.open=T[5],Q(()=>d=!1)),c.$set(ee),(!k||X&32&&m!==(m=T[5]?"height: 100vh":""))&&_(f,"style",m);const te={};X&4194317&&(te.$$scope={dirty:X,ctx:T}),!w&&X&64&&(w=!0,te.open=T[6],Q(()=>w=!1)),h.$set(te),(!k||X&64&&I!==(I=T[6]?"height: 100vh":""))&&_(A,"style",I)},i(T){k||(M(i.$$.fragment,T),M(r.$$.fragment,T),M(c.$$.fragment,T),M(h.$$.fragment,T),k=!0)},o(T){C(i.$$.fragment,T),C(r.$$.fragment,T),C(c.$$.fragment,T),C(h.$$.fragment,T),k=!1},d(T){T&&b(e),V(i),V(r),T&&b(a),T&&b(l),V(c),V(h),D=!1,H()}}}let en=300;function zr(t){return t?t.width/t.height:1}function Wr(t,e,n){let i,s;const o=tn();let r=null,a=null,{image_data:l}=e;async function u(R){R&&await zn(R,"dithered","png")}let f={mode:"ordered",width:en,height:i,thresholdMap:null,noiseIntensity:.08,palette:null,diffusionStrength:1,diffusionMatrix:[[1]],diffusionMatrixOriginX:0},c={mode:"none",width:l.width,height:l.height,thresholdMap:null,noiseIntensity:.08,palette:null,diffusionStrength:1,diffusionMatrix:[[1]],diffusionMatrixOriginX:0},d=!1,m=!0;function g(R){a=R,n(2,a)}function p(R){r=R,n(1,r)}const A=()=>o("cancel"),h=()=>{r&&u(r)};function w(R){c=R,n(4,c)}function I(R){l=R,n(0,l)}function k(R){d=R,n(5,d)}const D=()=>{a&&u(a)};function H(R){f=R,n(3,f)}function U(R){l=R,n(0,l)}function B(R){m=R,n(6,m)}return t.$$set=R=>{"image_data"in R&&n(0,l=R.image_data)},t.$$.update=()=>{t.$$.dirty&1&&n(9,s=zr(l)),t.$$.dirty&512&&(i=Math.round(en/s))},[l,r,a,f,c,d,m,o,u,s,g,p,A,h,w,I,k,D,H,U,B]}class Vr extends ie{constructor(e){super(),re(this,e,Wr,Fr,se,{image_data:0})}}function Hr(t){let e,n;return e=new Qn({}),e.$on("image",t[3]),{c(){F(e.$$.fragment)},l(i){z(e.$$.fragment,i)},m(i,s){W(e,i,s),n=!0},p:K,i(i){n||(M(e.$$.fragment,i),n=!0)},o(i){C(e.$$.fragment,i),n=!1},d(i){V(e,i)}}}function Yr(t){let e,n;return e=new Vr({props:{image_data:t[0]}}),e.$on("cancel",t[2]),{c(){F(e.$$.fragment)},l(i){z(e.$$.fragment,i)},m(i,s){W(e,i,s),n=!0},p(i,s){const o={};s&1&&(o.image_data=i[0]),e.$set(o)},i(i){n||(M(e.$$.fragment,i),n=!0)},o(i){C(e.$$.fragment,i),n=!1},d(i){V(e,i)}}}function jr(t){let e,n,i,s,o,r,a,l,u;e=new Bn({props:{icon:Vn,og_image:qr}});const f=[Yr,Hr],c=[];function d(m,g){return m[0]?0:1}return o=d(t),r=c[o]=f[o](t),{c(){F(e.$$.fragment),n=P(),i=P(),s=E("main"),r.c(),this.h()},l(m){z(e.$$.fragment,m),n=N(m),i=N(m),s=y(m,"MAIN",{class:!0});var g=S(s);r.l(g),g.forEach(b),this.h()},h(){_(s,"class","w-screen max-w-screen h-screen max-h-screen relative bg-gray-300")},m(m,g){W(e,m,g),O(m,n,g),O(m,i,g),O(m,s,g),c[o].m(s,null),a=!0,l||(u=[Z(document.body,"drop",at(t[1])),Z(document.body,"dragover",at(Gr))],l=!0)},p(m,[g]){let p=o;o=d(m),o===p?c[o].p(m,g):(Ae(),C(c[p],1,1,()=>{c[p]=null}),Ee(),r=c[o],r?r.p(m,g):(r=c[o]=f[o](m),r.c()),M(r,1),r.m(s,null))},i(m){a||(M(e.$$.fragment,m),M(r),a=!0)},o(m){C(e.$$.fragment,m),C(r),a=!1},d(m){V(e,m),m&&b(n),m&&b(i),m&&b(s),c[o].d(),l=!1,ye(u)}}}const qr="/og/dither-studio.webp",Gr=()=>{};function Qr(t,e,n){let i=null;async function s(a){var u;const l=(u=a.dataTransfer)==null?void 0:u.files[0];if(l){if(!l.type.startsWith("image/")){alert("Please drop an image file");return}try{const f=await on(l);n(0,i=yt(f))}catch(f){alert("Failed to load image"),console.error(f)}}}return[i,s,()=>n(0,i=null),a=>n(0,i=yt(a.detail))]}class xr extends ie{constructor(e){super(),re(this,e,Qr,jr,se,{})}}export{xr as component,$r as universal};
