import{S as le,i as re,s as ue,k as n,q as r,a as f,l as i,m as l,r as u,h as t,c as y,n as m,b as a,G as o,H as Q}from"../chunks/index.9f3d506e.js";function he(oe){let h,w,M,H,k,S,G,_,C,P,b,T,J,q,g,N,j,p,W,E,L,R,x,v,ne=`<code class="language-yml"><span class="token key atrule">name</span><span class="token punctuation">:</span> Build and Deploy
<span class="token key atrule">on</span><span class="token punctuation">:</span> 
  <span class="token comment"># The Schedule on which to redeploy the site (every day at midnight)</span>
  <span class="token key atrule">schedule</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">cron</span><span class="token punctuation">:</span>  <span class="token string">'0 0 * * *'</span>

  <span class="token comment"># Other events to trigger the build and deploy</span>
  <span class="token key atrule">push</span><span class="token punctuation">:</span>
    <span class="token key atrule">branches</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> main

<span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token key atrule">build-and-deploy</span><span class="token punctuation">:</span>
    <span class="token punctuation">...</span> <span class="token comment"># Your build and deploy steps</span></code>`,A,d,Y,c,z,F,D,I,K;return{c(){h=n("h1"),w=n("a"),M=r("The poor man’s scheduled post"),H=f(),k=n("p"),S=r("While working on this site, I quickly developed the desire to schedule posts. Often I would write a post, and then immediately have another idea for another post. Not wanting to publish them all at once, I would often just save the post as a draft and come back to it later. Having a way to schedule posts would be much more convenient."),G=f(),_=n("p"),C=r("But, this site is currently (July 2023) hosted on GitHub Pages, which only hosts static sites. This makes it difficult to schedule posts, as there is no server to decide when a post should become available."),P=f(),b=n("h2"),T=n("a"),J=r("The solution"),q=f(),g=n("p"),N=r("The solution I came up with is quite a brute force one, but it works very well. During the site-build, filter out any posts that have a publish date in the future. Then have a Github Actions cron-job that rebuilds and redeploys the site every day. This will cause the posts to become available on the day they are scheduled to be published."),j=f(),p=n("p"),W=r("Doing this is quite straight forward. Go into your GitHub Actions workflow file, and add a "),E=n("code"),L=r("schedule"),R=r(" trigger. Make it run every day at midnight."),x=f(),v=n("pre"),A=f(),d=n("p"),Y=r("This is very wasteful, but with GitHub’s generous free tier you can easily get away with it. It’s also very reliable. I’ve tested this by building an "),c=n("a"),z=r("experiment"),F=r(` that just prerenders the current date every day. It’s been running for a few months now, and it’s never failed.
Thanks to it’s very fast build times, it has used so little of my free minutes that it doesn’t even show up on my usage graph.`),D=f(),I=n("p"),K=r("The build-time for this site is a lot longer, at almost two minutes, but that’s still only 60 out of the 2000 free minutes per month. I’m willing to pay that price for the convenience of scheduled posts."),this.h()},l(e){h=i(e,"H1",{id:!0});var s=l(h);w=i(s,"A",{href:!0});var U=l(w);M=u(U,"The poor man’s scheduled post"),U.forEach(t),s.forEach(t),H=y(e),k=i(e,"P",{});var V=l(k);S=u(V,"While working on this site, I quickly developed the desire to schedule posts. Often I would write a post, and then immediately have another idea for another post. Not wanting to publish them all at once, I would often just save the post as a draft and come back to it later. Having a way to schedule posts would be much more convenient."),V.forEach(t),G=y(e),_=i(e,"P",{});var X=l(_);C=u(X,"But, this site is currently (July 2023) hosted on GitHub Pages, which only hosts static sites. This makes it difficult to schedule posts, as there is no server to decide when a post should become available."),X.forEach(t),P=y(e),b=i(e,"H2",{id:!0});var Z=l(b);T=i(Z,"A",{href:!0});var $=l(T);J=u($,"The solution"),$.forEach(t),Z.forEach(t),q=y(e),g=i(e,"P",{});var ee=l(g);N=u(ee,"The solution I came up with is quite a brute force one, but it works very well. During the site-build, filter out any posts that have a publish date in the future. Then have a Github Actions cron-job that rebuilds and redeploys the site every day. This will cause the posts to become available on the day they are scheduled to be published."),ee.forEach(t),j=y(e),p=i(e,"P",{});var O=l(p);W=u(O,"Doing this is quite straight forward. Go into your GitHub Actions workflow file, and add a "),E=i(O,"CODE",{});var te=l(E);L=u(te,"schedule"),te.forEach(t),R=u(O," trigger. Make it run every day at midnight."),O.forEach(t),x=y(e),v=i(e,"PRE",{class:!0});var ie=l(v);ie.forEach(t),A=y(e),d=i(e,"P",{});var B=l(d);Y=u(B,"This is very wasteful, but with GitHub’s generous free tier you can easily get away with it. It’s also very reliable. I’ve tested this by building an "),c=i(B,"A",{href:!0,rel:!0,target:!0});var se=l(c);z=u(se,"experiment"),se.forEach(t),F=u(B,` that just prerenders the current date every day. It’s been running for a few months now, and it’s never failed.
Thanks to it’s very fast build times, it has used so little of my free minutes that it doesn’t even show up on my usage graph.`),B.forEach(t),D=y(e),I=i(e,"P",{});var ae=l(I);K=u(ae,"The build-time for this site is a lot longer, at almost two minutes, but that’s still only 60 out of the 2000 free minutes per month. I’m willing to pay that price for the convenience of scheduled posts."),ae.forEach(t),this.h()},h(){m(w,"href","#the-poor-mans-scheduled-post"),m(h,"id","the-poor-mans-scheduled-post"),m(T,"href","#the-solution"),m(b,"id","the-solution"),m(v,"class","language-yml"),m(c,"href","https://today.sigrist.dev"),m(c,"rel","noopener noreferrer"),m(c,"target","_blank")},m(e,s){a(e,h,s),o(h,w),o(w,M),a(e,H,s),a(e,k,s),o(k,S),a(e,G,s),a(e,_,s),o(_,C),a(e,P,s),a(e,b,s),o(b,T),o(T,J),a(e,q,s),a(e,g,s),o(g,N),a(e,j,s),a(e,p,s),o(p,W),o(p,E),o(E,L),o(p,R),a(e,x,s),a(e,v,s),v.innerHTML=ne,a(e,A,s),a(e,d,s),o(d,Y),o(d,c),o(c,z),o(d,F),a(e,D,s),a(e,I,s),o(I,K)},p:Q,i:Q,o:Q,d(e){e&&t(h),e&&t(H),e&&t(k),e&&t(G),e&&t(_),e&&t(P),e&&t(b),e&&t(q),e&&t(g),e&&t(j),e&&t(p),e&&t(x),e&&t(v),e&&t(A),e&&t(d),e&&t(D),e&&t(I)}}}class de extends le{constructor(h){super(),re(this,h,null,he,ue,{})}}export{de as component};
