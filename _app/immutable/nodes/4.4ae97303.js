var fn=Object.defineProperty;var hn=(e,t,n)=>t in e?fn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ke=(e,t,n)=>(hn(e,typeof t!="symbol"?t+"":t,n),n);import{S as Ie,i as Le,s as Se,k as _,q as j,a as P,y as ee,l as v,m as A,r as q,h as p,c as U,z as te,n as c,b as G,G as h,A as ne,N as Q,g as B,d as F,B as re,O as Ne,P as mn,Q as Dt,u as pt,H as Te,R as jt,T as gn,U as Me,V as pn,C as at,D as lt,E as ut,F as ct,W as _n,p as dt,X as Ge,Y as ft,w as me,Z as qt,_ as Ae,J as vn,f as Oe,$ as we,v as xe,M as ht}from"../chunks/index.70018727.js";import{I as Xe,L as En,A as bn,a as An,P as wn,X as yn}from"../chunks/Icon.f04b63ac.js";function Qt(e,t,n){return Math.min(Math.max(e,t),n)}function Tn(e){let t,n,r,s,i,o,a,l,u,d,f,m,T,y,w,I,S,C,b,g,L,N,R,M,V,O;return T=new Xe({props:{src:En,class:"w-4 h-4",solid:!0}}),{c(){t=_("fieldset"),n=_("div"),r=_("label"),s=j("Width"),i=P(),o=_("div"),a=_("input"),l=P(),u=_("div"),d=j("px"),f=P(),m=_("span"),ee(T.$$.fragment),y=P(),w=_("div"),I=_("label"),S=j("Height"),C=P(),b=_("div"),g=_("input"),L=P(),N=_("div"),R=j("px"),this.h()},l(D){t=v(D,"FIELDSET",{class:!0});var W=A(t);n=v(W,"DIV",{class:!0});var J=A(n);r=v(J,"LABEL",{for:!0,class:!0});var ie=A(r);s=q(ie,"Width"),ie.forEach(p),i=U(J),o=v(J,"DIV",{class:!0});var se=A(o);a=v(se,"INPUT",{name:!0,id:!0,type:!0,min:!0,max:!0,step:!0,class:!0,placeholder:!0}),l=U(se),u=v(se,"DIV",{class:!0});var K=A(u);d=q(K,"px"),K.forEach(p),se.forEach(p),J.forEach(p),f=U(W),m=v(W,"SPAN",{class:!0});var ge=A(m);te(T.$$.fragment,ge),ge.forEach(p),y=U(W),w=v(W,"DIV",{class:!0});var oe=A(w);I=v(oe,"LABEL",{for:!0,class:!0});var le=A(I);S=q(le,"Height"),le.forEach(p),C=U(oe),b=v(oe,"DIV",{class:!0});var ue=A(b);g=v(ue,"INPUT",{type:!0,id:!0,name:!0,min:!0,max:!0,step:!0,class:!0,placeholder:!0}),L=U(ue),N=v(ue,"DIV",{class:!0});var k=A(N);R=q(k,"px"),k.forEach(p),ue.forEach(p),oe.forEach(p),W.forEach(p),this.h()},h(){c(r,"for","width-"+e[8]),c(r,"class","block text-sm font-medium leading-6 text-gray-900"),c(a,"name","width"),c(a,"id","width-"+e[8]),c(a,"type","number"),c(a,"min",e[3]),c(a,"max",e[1]),c(a,"step","1"),a.value=e[0],c(a,"class","block w-full rounded-md border-0 py-1.5 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"),c(a,"placeholder","600"),c(u,"class","pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400"),c(o,"class","relative mt-2 rounded-md shadow-sm"),c(n,"class","w-full"),c(m,"class","text-gray-500 pb-2 cursor-not-allowed"),c(I,"for","height-"+e[9]),c(I,"class","block text-sm font-medium leading-6 text-gray-900"),c(g,"type","number"),c(g,"id","height-"+e[9]),c(g,"name","height"),c(g,"min",e[4]),c(g,"max",e[2]),c(g,"step","1"),g.value=e[5],c(g,"class","block w-full rounded-md border-0 py-1.5 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"),c(g,"placeholder","340"),c(N,"class","pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400"),c(b,"class","relative mt-2 rounded-md shadow-sm"),c(w,"class","w-full"),c(t,"class","flex gap-3 items-end justify-between")},m(D,W){G(D,t,W),h(t,n),h(n,r),h(r,s),h(n,i),h(n,o),h(o,a),h(o,l),h(o,u),h(u,d),h(t,f),h(t,m),ne(T,m,null),h(t,y),h(t,w),h(w,I),h(I,S),h(w,C),h(w,b),h(b,g),h(b,L),h(b,N),h(N,R),M=!0,V||(O=[Q(a,"input",e[6]),Q(g,"input",e[7])],V=!0)},p(D,[W]){(!M||W&8)&&c(a,"min",D[3]),(!M||W&2)&&c(a,"max",D[1]),(!M||W&1&&a.value!==D[0])&&(a.value=D[0]),(!M||W&16)&&c(g,"min",D[4]),(!M||W&4)&&c(g,"max",D[2]),(!M||W&32&&g.value!==D[5])&&(g.value=D[5])},i(D){M||(B(T.$$.fragment,D),M=!0)},o(D){F(T.$$.fragment,D),M=!1},d(D){D&&p(t),re(T),V=!1,Ne(O)}}}function kt(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}function In(e,t,n){let r,{width:s}=t,{aspectRatio:i}=t,{maxWidth:o=null}=t,{maxHeight:a=null}=t,{minWidth:l=null}=t,{minHeight:u=null}=t;function d(y){const w=y.target.value;w&&(l!==null&&w<l||o!==null&&w>o||n(0,s=w))}function f(y){const w=y.target.value;w&&(u!==null&&w<u||a!==null&&w>a||n(0,s=Math.round(i*w)))}let m=kt(),T=kt();return e.$$set=y=>{"width"in y&&n(0,s=y.width),"aspectRatio"in y&&n(10,i=y.aspectRatio),"maxWidth"in y&&n(1,o=y.maxWidth),"maxHeight"in y&&n(2,a=y.maxHeight),"minWidth"in y&&n(3,l=y.minWidth),"minHeight"in y&&n(4,u=y.minHeight)},e.$$.update=()=>{e.$$.dirty&1025&&n(5,r=Math.round(s/i))},[s,o,a,l,u,r,d,f,m,T,i]}class Jt extends Ie{constructor(t){super(),Le(this,t,In,Tn,Se,{width:0,aspectRatio:10,maxWidth:1,maxHeight:2,minWidth:3,minHeight:4})}}function Ct(e,t,n){const r=e.slice();return r[6]=t[n],r}function Mt(e){let t,n=e[6].name+"",r,s,i;return{c(){t=_("option"),r=j(n),this.h()},l(o){t=v(o,"OPTION",{});var a=A(t);r=q(a,n),a.forEach(p),this.h()},h(){t.__value=s=e[6].value,t.value=t.__value,t.selected=i=e[6].value===e[0]},m(o,a){G(o,t,a),h(t,r)},p(o,a){a&2&&n!==(n=o[6].name+"")&&pt(r,n),a&2&&s!==(s=o[6].value)&&(t.__value=s,t.value=t.__value),a&3&&i!==(i=o[6].value===o[0])&&(t.selected=i)},d(o){o&&p(t)}}}function Ln(e){let t,n,r,s,i,o,a,l=e[1],u=[];for(let d=0;d<l.length;d+=1)u[d]=Mt(Ct(e,l,d));return{c(){t=_("div"),n=_("label"),r=j(e[2]),s=P(),i=_("select");for(let d=0;d<u.length;d+=1)u[d].c();this.h()},l(d){t=v(d,"DIV",{});var f=A(t);n=v(f,"LABEL",{for:!0,class:!0});var m=A(n);r=q(m,e[2]),m.forEach(p),s=U(f),i=v(f,"SELECT",{id:!0,name:!0,class:!0});var T=A(i);for(let y=0;y<u.length;y+=1)u[y].l(T);T.forEach(p),f.forEach(p),this.h()},h(){c(n,"for",e[4]),c(n,"class","block text-sm font-medium leading-6 text-gray-900"),c(i,"id",e[4]),c(i,"name",e[3]),c(i,"class","mt-2 block w-full rounded-md border-0 py-1.5 pl-3 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-indigo-600 sm:text-sm sm:leading-6"),e[0]===void 0&&mn(()=>e[5].call(i))},m(d,f){G(d,t,f),h(t,n),h(n,r),h(t,s),h(t,i);for(let m=0;m<u.length;m+=1)u[m]&&u[m].m(i,null);Dt(i,e[0],!0),o||(a=Q(i,"change",e[5]),o=!0)},p(d,[f]){if(f&4&&pt(r,d[2]),f&3){l=d[1];let m;for(m=0;m<l.length;m+=1){const T=Ct(d,l,m);u[m]?u[m].p(T,f):(u[m]=Mt(T),u[m].c(),u[m].m(i,null))}for(;m<u.length;m+=1)u[m].d(1);u.length=l.length}f&8&&c(i,"name",d[3]),f&3&&Dt(i,d[0])},i:Te,o:Te,d(d){d&&p(t),jt(u,d),o=!1,a()}}}function Sn(e,t,n){let{options:r}=t,{selected:s}=t,{label:i}=t,{name:o=void 0}=t,a=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);function l(){s=gn(this),n(0,s),n(1,r)}return e.$$set=u=>{"options"in u&&n(1,r=u.options),"selected"in u&&n(0,s=u.selected),"label"in u&&n(2,i=u.label),"name"in u&&n(3,o=u.name)},[s,r,i,o,a,l]}class Rn extends Ie{constructor(t){super(),Le(this,t,Sn,Ln,Se,{options:1,selected:0,label:2,name:3})}}function Dn(e){let t,n,r,s,i,o,a;return{c(){t=_("div"),n=_("label"),r=j(e[1]),s=P(),i=_("input"),this.h()},l(l){t=v(l,"DIV",{});var u=A(t);n=v(u,"LABEL",{for:!0,class:!0});var d=A(n);r=q(d,e[1]),d.forEach(p),s=U(u),i=v(u,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0,name:!0,class:!0}),u.forEach(p),this.h()},h(){c(n,"for",e[6]),c(n,"class","block mb-2 text-sm font-medium text-gray-900 dark:text-white"),c(i,"id",e[6]),c(i,"type","range"),c(i,"min",e[3]),c(i,"max",e[4]),c(i,"step",e[5]),c(i,"name",e[2]),c(i,"class","w-full h-1.5 mb-6 bg-white ring-1 ring-gray-300 shadow-sm rounded-lg appearance-none cursor-pointer accent-indigo-600 dark:bg-gray-700")},m(l,u){G(l,t,u),h(t,n),h(n,r),h(t,s),h(t,i),Me(i,e[0]),o||(a=[Q(i,"change",e[7]),Q(i,"input",e[7])],o=!0)},p(l,[u]){u&2&&pt(r,l[1]),u&8&&c(i,"min",l[3]),u&16&&c(i,"max",l[4]),u&32&&c(i,"step",l[5]),u&4&&c(i,"name",l[2]),u&1&&Me(i,l[0])},i:Te,o:Te,d(l){l&&p(t),o=!1,Ne(a)}}}function kn(e,t,n){let{label:r}=t,{name:s=void 0}=t,{min:i=null}=t,{max:o=null}=t,{value:a=0}=t,{step:l=1}=t,u=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);function d(){a=pn(this.value),n(0,a)}return e.$$set=f=>{"label"in f&&n(1,r=f.label),"name"in f&&n(2,s=f.name),"min"in f&&n(3,i=f.min),"max"in f&&n(4,o=f.max),"value"in f&&n(0,a=f.value),"step"in f&&n(5,l=f.step)},[a,r,s,i,o,l,u,d]}class mt extends Ie{constructor(t){super(),Le(this,t,kn,Dn,Se,{label:1,name:2,min:3,max:4,value:0,step:5})}}var Cn="precision highp float;attribute vec2 position;varying vec2 fragCoord;void main(){fragCoord.x=position.x*0.5+0.5;fragCoord.y=position.y*0.5+0.5;gl_Position=vec4(position,0.0,1.0);}",Mn="precision highp float;varying vec2 fragCoord;uniform sampler2D uSampler;uniform float uThreshold;uniform sampler2D uNoiseSampler;uniform vec2 uNoiseSamplerSize;uniform float uNoise;uniform float uMonochrome;uniform vec2 uSize;uniform vec3 uDarkColor;uniform vec3 uLightColor;void main(void){vec2 imgPixel=vec2(fragCoord.x*uSize.x,fragCoord.y*uSize.y);vec2 noisePixel=vec2(mod(imgPixel.x,uNoiseSamplerSize.x),mod(imgPixel.y,uNoiseSamplerSize.y));vec2 noiseUV=vec2(noisePixel.x/uNoiseSamplerSize.x,noisePixel.y/uNoiseSamplerSize.y);float noise=(texture2D(uNoiseSampler,noiseUV).r-0.5)*2.0*uNoise;vec4 color=texture2D(uSampler,fragCoord);float gray=dot(color.rgb,vec3(0.299,0.587,0.114));color.r=color.r*(1.0-uMonochrome)+gray*uMonochrome;color.g=color.g*(1.0-uMonochrome)+gray*uMonochrome;color.b=color.b*(1.0-uMonochrome)+gray*uMonochrome;vec3 thresholds=vec3(step(uThreshold,color.r+noise),step(uThreshold,color.g+noise),step(uThreshold,color.b+noise));if(uMonochrome>0.0){color.rgb=vec3(mix(uDarkColor.r,uLightColor.r,thresholds.r),mix(uDarkColor.g,uLightColor.g,thresholds.g),mix(uDarkColor.b,uLightColor.b,thresholds.b));}else{color.rgb=thresholds;}gl_FragColor=color;}";function He(e){return(e&e-1)===0}function Pn(e,t,n){const r=Pt(e,e.VERTEX_SHADER,t),s=Pt(e,e.FRAGMENT_SHADER,n),i=e.createProgram();if(!i)throw new Error("Failed to create shader program");if(e.attachShader(i,r),e.attachShader(i,s),e.linkProgram(i),!e.getProgramParameter(i,e.LINK_STATUS))throw Error(`Unable to initialize the shader program: ${e.getProgramInfoLog(i)}`);return i}function Pt(e,t,n){const r=e.createShader(t);if(!r)throw new Error("Failed to create shader");if(e.shaderSource(r,n),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))throw Error(`An error occurred compiling the shaders: ${e.getShaderInfoLog(r)}`);return r}function Un(e){const t=e.createTexture();if(!t)throw new Error("Failed to create texture");e.bindTexture(e.TEXTURE_2D,t);const n=0,r=e.RGBA,s=1,i=1,o=0,a=e.RGBA,l=e.UNSIGNED_BYTE,u=new Uint8Array([0,0,255,255]);return e.texImage2D(e.TEXTURE_2D,n,r,s,i,o,a,l,u),t}function Bn(e,t,n){const s=e.RGBA,i=e.RGBA,o=e.UNSIGNED_BYTE;e.bindTexture(e.TEXTURE_2D,t),e.texImage2D(e.TEXTURE_2D,0,s,i,o,n),He(n.width)&&He(n.height)?e.generateMipmap(e.TEXTURE_2D):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR))}function Nn(e){const t=e.createBuffer(),n=e.createBuffer(),r=[-1,1,-1,-1,1,-1,1,1],s=[3,2,1,3,1,0];return e.bindBuffer(e.ARRAY_BUFFER,t),e.bufferData(e.ARRAY_BUFFER,new Float32Array(r),e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(s),e.STATIC_DRAW),{vertex_buffer:t,index_buffer:n}}function Xn(e,t){const n=e.createTexture();if(!n)throw new Error("Failed to create texture");return e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),He(t.width)&&He(t.height)?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR)),n}function Fn(e,t){let n=t;const r=e.getContext("webgl",{preserveDrawingBuffer:!0});if(!r){alert("WebGL not supported");return}const s=()=>{Bn(r,C,n.image)};r.clearColor(0,0,0,1),r.clear(r.COLOR_BUFFER_BIT);const i=Pn(r,Cn,Mn),{vertex_buffer:o,index_buffer:a}=Nn(r),l=r.getAttribLocation(i,"position");r.vertexAttribPointer(l,2,r.FLOAT,!1,0,0),r.enableVertexAttribArray(l);const u=r.getUniformLocation(i,"uSampler"),d=r.getUniformLocation(i,"uThreshold"),f=r.getUniformLocation(i,"uNoiseSampler"),m=r.getUniformLocation(i,"uNoise"),T=r.getUniformLocation(i,"uSize"),y=r.getUniformLocation(i,"uNoiseSamplerSize"),w=r.getUniformLocation(i,"uMonochrome"),I=r.getUniformLocation(i,"uDarkColor"),S=r.getUniformLocation(i,"uLightColor"),C=Un(r);r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!0),s();let b,g;r.useProgram(i);let L=null;const N=()=>{b&&r.deleteTexture(b),b=Xn(r,n.thresholdMap),g={width:n.thresholdMap.width,height:n.thresholdMap.height}};N();const R=()=>{r.viewport(0,0,n.output_width,n.output_height),r.clearColor(0,0,0,1),r.clear(r.COLOR_BUFFER_BIT),r.bindBuffer(r.ARRAY_BUFFER,o),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,a),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,C),r.uniform1i(u,0),r.activeTexture(r.TEXTURE1),r.bindTexture(r.TEXTURE_2D,b),r.uniform1i(f,1),r.uniform2f(y,g.width,g.height),r.uniform1f(d,n.threshold),r.uniform1f(m,n.noiseIntensity),r.uniform2f(T,n.output_width,n.output_height),r.uniform1f(w,n.monochrome?1:0),r.uniform3f(I,...Ut(n.colorDark)),r.uniform3f(S,...Ut(n.colorLight)),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT),r.drawElements(r.TRIANGLES,6,r.UNSIGNED_SHORT,0)};function M(){L=requestAnimationFrame(()=>{R(),L=null})}return M(),{update(V){const O=n.image!==V.image,D=n.thresholdMap!==V.thresholdMap;n=V,O&&s(),D&&N(),M()},destroy(){L!==null&&cancelAnimationFrame(L)}}}function Ut(e){const t=parseInt(e.slice(1,3),16)/255,n=parseInt(e.slice(3,5),16)/255,r=parseInt(e.slice(5,7),16)/255;return[t,n,r]}function Wn(e){let t,n,r,s,i;const o=e[3].default,a=at(o,e,e[2],null);return{c(){t=_("button"),a&&a.c(),this.h()},l(l){t=v(l,"BUTTON",{type:!0,class:!0});var u=A(t);a&&a.l(u),u.forEach(p),this.h()},h(){t.disabled=e[0],c(t,"type","button"),c(t,"class",n=e[1][e[0]?"disabled":"normal"]+" rounded-md w-full px-2.5 py-1.5 text-sm font-semibold focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 flex items-center justify-center gap-2")},m(l,u){G(l,t,u),a&&a.m(t,null),r=!0,s||(i=Q(t,"click",e[4]),s=!0)},p(l,[u]){a&&a.p&&(!r||u&4)&&lt(a,o,l,l[2],r?ct(o,l[2],u,null):ut(l[2]),null),(!r||u&1)&&(t.disabled=l[0]),(!r||u&1&&n!==(n=l[1][l[0]?"disabled":"normal"]+" rounded-md w-full px-2.5 py-1.5 text-sm font-semibold focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 flex items-center justify-center gap-2"))&&c(t,"class",n)},i(l){r||(B(a,l),r=!0)},o(l){F(a,l),r=!1},d(l){l&&p(t),a&&a.d(l),s=!1,i()}}}function Vn(e,t,n){let{$$slots:r={},$$scope:s}=t,{disabled:i=!1}=t;const o={normal:"bg-indigo-600 text-white shadow-sm hover:bg-indigo-500",disabled:"bg-gray-200 text-gray-400 shadow-none cursor-not-allowed"};function a(l){_n.call(this,e,l)}return e.$$set=l=>{"disabled"in l&&n(0,i=l.disabled),"$$scope"in l&&n(2,s=l.$$scope)},[i,o,s,r,a]}class On extends Ie{constructor(t){super(),Le(this,t,Vn,Wn,Se,{disabled:0})}}async function xn(e,t,n="png"){const r=new OffscreenCanvas(e.width,e.height),s=r.getContext("2d");if(!s)return;s.drawImage(e,0,0,e.width,e.height);const i=await r.convertToBlob({type:"image/"+n,quality:1}),o=URL.createObjectURL(i),a=document.createElement("a");a.download=`${t}.${n}`,a.href=o,a.click(),a.remove(),URL.revokeObjectURL(o)}function Bt(e){return new Promise((t,n)=>{e.type.startsWith("image/")||n(new Error("Not an image file"));const r=new FileReader;r.onload=s=>{if(typeof r.result!="string")return;const i=new Image;i.onload=()=>{t(i)},i.onerror=o=>{n(o)},i.src=r.result},r.onerror=s=>{n(s)},r.readAsDataURL(e)})}var zn=class extends EventTarget{dispatchTypedEvent(e,t){return super.dispatchEvent(t)}};class be{constructor(t){this.id=-1,this.nativePointer=t,this.pageX=t.pageX,this.pageY=t.pageY,this.clientX=t.clientX,this.clientY=t.clientY,self.Touch&&t instanceof Touch?this.id=t.identifier:Ue(t)&&(this.id=t.pointerId)}getCoalesced(){if("getCoalescedEvents"in this.nativePointer){const t=this.nativePointer.getCoalescedEvents().map(n=>new be(n));if(t.length>0)return t}return[this]}}const Ue=e=>"pointerId"in e,it=e=>"changedTouches"in e,Nt=()=>{};class Yn{constructor(t,{start:n=()=>!0,move:r=Nt,end:s=Nt,rawUpdates:i=!1,avoidPointerEvents:o=!1}={}){this._element=t,this.startPointers=[],this.currentPointers=[],this._excludeFromButtonsCheck=new Set,this._pointerStart=a=>{if(Ue(a)&&a.buttons===0)this._excludeFromButtonsCheck.add(a.pointerId);else if(!(a.buttons&1))return;const l=new be(a);this.currentPointers.some(u=>u.id===l.id)||this._triggerPointerStart(l,a)&&(Ue(a)?((a.target&&"setPointerCapture"in a.target?a.target:this._element).setPointerCapture(a.pointerId),this._element.addEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move),this._element.addEventListener("pointerup",this._pointerEnd),this._element.addEventListener("pointercancel",this._pointerEnd)):(window.addEventListener("mousemove",this._move),window.addEventListener("mouseup",this._pointerEnd)))},this._touchStart=a=>{for(const l of Array.from(a.changedTouches))this._triggerPointerStart(new be(l),a)},this._move=a=>{if(!it(a)&&(!Ue(a)||!this._excludeFromButtonsCheck.has(a.pointerId))&&a.buttons===0){this._pointerEnd(a);return}const l=this.currentPointers.slice(),u=it(a)?Array.from(a.changedTouches).map(f=>new be(f)):[new be(a)],d=[];for(const f of u){const m=this.currentPointers.findIndex(T=>T.id===f.id);m!==-1&&(d.push(f),this.currentPointers[m]=f)}d.length!==0&&this._moveCallback(l,d,a)},this._triggerPointerEnd=(a,l)=>{if(!it(l)&&l.buttons&1)return!1;const u=this.currentPointers.findIndex(f=>f.id===a.id);if(u===-1)return!1;this.currentPointers.splice(u,1),this.startPointers.splice(u,1),this._excludeFromButtonsCheck.delete(a.id);const d=!(l.type==="mouseup"||l.type==="touchend"||l.type==="pointerup");return this._endCallback(a,l,d),!0},this._pointerEnd=a=>{if(this._triggerPointerEnd(new be(a),a))if(Ue(a)){if(this.currentPointers.length)return;this._element.removeEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move),this._element.removeEventListener("pointerup",this._pointerEnd),this._element.removeEventListener("pointercancel",this._pointerEnd)}else window.removeEventListener("mousemove",this._move),window.removeEventListener("mouseup",this._pointerEnd)},this._touchEnd=a=>{for(const l of Array.from(a.changedTouches))this._triggerPointerEnd(new be(l),a)},this._startCallback=n,this._moveCallback=r,this._endCallback=s,this._rawUpdates=i&&"onpointerrawupdate"in window,self.PointerEvent&&!o?this._element.addEventListener("pointerdown",this._pointerStart):(this._element.addEventListener("mousedown",this._pointerStart),this._element.addEventListener("touchstart",this._touchStart),this._element.addEventListener("touchmove",this._move),this._element.addEventListener("touchend",this._touchEnd),this._element.addEventListener("touchcancel",this._touchEnd))}stop(){this._element.removeEventListener("pointerdown",this._pointerStart),this._element.removeEventListener("mousedown",this._pointerStart),this._element.removeEventListener("touchstart",this._touchStart),this._element.removeEventListener("touchmove",this._move),this._element.removeEventListener("touchend",this._touchEnd),this._element.removeEventListener("touchcancel",this._touchEnd),this._element.removeEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move),this._element.removeEventListener("pointerup",this._pointerEnd),this._element.removeEventListener("pointercancel",this._pointerEnd),window.removeEventListener("mousemove",this._move),window.removeEventListener("mouseup",this._pointerEnd)}_triggerPointerStart(t,n){return this._startCallback(t,n)?(this.currentPointers.push(t),this.startPointers.push(t),!0):!1}}function Xt(e,t){return t?Math.sqrt((t.clientX-e.clientX)**2+(t.clientY-e.clientY)**2):0}function Ft(e,t){return t?{clientX:(e.clientX+t.clientX)/2,clientY:(e.clientY+t.clientY)/2}:e}const Qe=class extends zn{constructor(n){super();ke(this,"element");ke(this,"transform",new DOMMatrix);ke(this,"pointerTracker");this.element=n,this.element.addEventListener("wheel",this.onWheel.bind(this)),this.pointerTracker=new Yn(this.element,{start:(r,s)=>this.pointerTracker.currentPointers.length===2?!1:(s.preventDefault(),!0),move:r=>{this.onPointerMove(r,this.pointerTracker.currentPointers)},avoidPointerEvents:this.isSafari()}),this.element.addEventListener("wheel",this.onWheel.bind(this))}get x(){return this.transform.e}get y(){return this.transform.f}get scale(){return this.transform.a}set x(n){this.transform.e=n}set y(n){this.transform.f=n}set scale(n){this.transform.a=n,this.transform.d=n}onWheel(n){n.preventDefault();const r=this.element.getBoundingClientRect();let{deltaY:s}=n;const{ctrlKey:i,deltaMode:o}=n;o===1&&(s*=15);const a=s>0,l=i?100:300,u=1-(a?-s:s)/l,d=a?1/u:u,f=n.clientX-r.left,m=n.clientY-r.top;this.applyTransformation({scaleDiff:d,originX:f,originY:m})}applyTransformation(n={}){const{panX:r=0,panY:s=0,originX:i=0,originY:o=0,scaleDiff:a=1}=n,l=new DOMMatrix().translate(i,o).scale(a).translate(-i,-o),u=new DOMMatrix().translate(r,s);l.multiplySelf(u),l.multiplySelf(this.transform);const d=l.a,f=l.e,m=l.f;this.updateTransform(d,f,m)}onPointerMove(n,r){const s=this.element.getBoundingClientRect(),i=Ft(n[0],n[1]),o=Ft(r[0],r[1]),a=i.clientX-s.left,l=i.clientY-s.top,u=Xt(n[0],n[1]),d=Xt(r[0],r[1]),f=u?d/u:1;this.applyTransformation({originX:a,originY:l,scaleDiff:f,panX:o.clientX-i.clientX,panY:o.clientY-i.clientY})}updateTransform(n,r,s){if(n=Qt(n,Qe.MIN_SCALE,Qe.MAX_SCALE),n===this.scale&&r===this.x&&s===this.y)return;this.x=r,this.y=s,this.scale=n;const i=new CustomEvent("panzoom:change",{bubbles:!0,detail:{x:this.x,y:this.y,scale:this.scale,matrix:this.transform}});this.dispatchTypedEvent("panzoom:change",i)}isSafari(){return/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)}destroy(){this.pointerTracker.stop()}};let Be=Qe;ke(Be,"MIN_SCALE",.01),ke(Be,"MAX_SCALE",1e5);const Gn=e=>({}),Wt=e=>({}),Hn=e=>({}),Vt=e=>({});function Zn(e){let t,n,r,s,i,o,a,l,u,d,f,m,T,y;const w=e[6].left,I=at(w,e,e[5],Vt),S=e[6].right,C=at(S,e,e[5],Wt);return f=new Xe({props:{src:bn,class:"w-6 h-6 text-white"}}),{c(){t=_("div"),n=_("div"),r=_("div"),s=_("div"),I&&I.c(),i=P(),o=_("div"),a=_("div"),C&&C.c(),l=P(),u=_("div"),d=_("div"),ee(f.$$.fragment),this.h()},l(b){t=v(b,"DIV",{class:!0});var g=A(t);n=v(g,"DIV",{class:!0});var L=A(n);r=v(L,"DIV",{class:!0});var N=A(r);s=v(N,"DIV",{style:!0,class:!0});var R=A(s);I&&I.l(R),R.forEach(p),N.forEach(p),i=U(L),o=v(L,"DIV",{class:!0});var M=A(o);a=v(M,"DIV",{style:!0,class:!0});var V=A(a);C&&C.l(V),V.forEach(p),M.forEach(p),L.forEach(p),l=U(g),u=v(g,"DIV",{class:!0});var O=A(u);d=v(O,"DIV",{class:!0});var D=A(d);te(f.$$.fragment,D),D.forEach(p),O.forEach(p),g.forEach(p),this.h()},h(){c(s,"style",e[2]),c(s,"class","w-full h-full origin-top-left grid place-items-center"),c(r,"class","mask-left svelte-90j1r"),c(a,"style",e[2]),c(a,"class","w-full h-full origin-top-left grid place-items-center"),c(o,"class","mask-right svelte-90j1r"),c(n,"class","w-full h-full grid place-items-center"),c(d,"class","w-12 h-12 rounded-full bg-black absolute top-1/2 -translate-x-1/2 left-1/2 grid place-items-center"),c(u,"class","handle relative shadow-lg svelte-90j1r"),c(t,"class","pz-container svelte-90j1r"),dt(t,"--split-point",e[1]+"%")},m(b,g){G(b,t,g),h(t,n),h(n,r),h(r,s),I&&I.m(s,null),h(n,i),h(n,o),h(o,a),C&&C.m(a,null),h(t,l),h(t,u),h(u,d),ne(f,d,null),e[7](t),m=!0,T||(y=[Ge(e[4].call(null,n)),Ge(e[3].call(null,u)),Q(u,"pointercancel",ft(jn))],T=!0)},p(b,[g]){I&&I.p&&(!m||g&32)&&lt(I,w,b,b[5],m?ct(w,b[5],g,Hn):ut(b[5]),Vt),(!m||g&4)&&c(s,"style",b[2]),C&&C.p&&(!m||g&32)&&lt(C,S,b,b[5],m?ct(S,b[5],g,Gn):ut(b[5]),Wt),(!m||g&4)&&c(a,"style",b[2]),g&2&&dt(t,"--split-point",b[1]+"%")},i(b){m||(B(I,b),B(C,b),B(f.$$.fragment,b),m=!0)},o(b){F(I,b),F(C,b),F(f.$$.fragment,b),m=!1},d(b){b&&p(t),I&&I.d(b),C&&C.d(b),re(f),e[7](null),T=!1,Ne(y)}}}const jn=()=>{};function qn(e,t,n){let{$$slots:r={},$$scope:s}=t,i=null,o=50;function a(f){f.addEventListener("pointerdown",m=>{const T=m.clientX,y=o,w=document.body.style.cursor;document.body.style.cursor="col-resize";const I=C=>{const b=i?i.clientWidth:window.innerWidth,g=C.clientX-T,L=y+g/b*100;n(1,o=Qt(L,0,100))},S=()=>{document.body.style.cursor=w,window.removeEventListener("pointermove",I),window.removeEventListener("pointerup",S),window.removeEventListener("pointercancel",S)};window.addEventListener("pointermove",I),window.addEventListener("pointerup",S),window.addEventListener("pointercancel",S)})}let l="transform: none;";function u(f){const m=new Be(f);function T(y){const{matrix:w}=y.detail;n(2,l=`transform: ${w.toString()};`)}return m.addEventListener("panzoom:change",T),{destroy(){m.removeEventListener("panzoom:change",T),m.destroy()}}}function d(f){me[f?"unshift":"push"](()=>{i=f,n(0,i)})}return e.$$set=f=>{"$$scope"in f&&n(5,s=f.$$scope)},[i,o,l,a,u,s,r,d]}class Qn extends Ie{constructor(t){super(),Le(this,t,qn,Zn,Se,{})}}const Jn=""+new URL("../assets/cat.58b560b7.jpg",import.meta.url).href,Kn="data:image/avif;base64,AAAAHGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZgAAAOptZXRhAAAAAAAAACFoZGxyAAAAAAAAAABwaWN0AAAAAAAAAAAAAAAAAAAAAA5waXRtAAAAAAABAAAAImlsb2MAAAAAREAAAQABAAAAAAEOAAEAAAAAAAAApwAAACNpaW5mAAAAAAABAAAAFWluZmUCAAAAAAEAAGF2MDEAAAAAamlwcnAAAABLaXBjbwAAABNjb2xybmNseAACAAIABoAAAAAMYXYxQ4EEDAAAAAAUaXNwZQAAAAAAAAJyAAACcgAAABBwaXhpAAAAAAMICAgAAAAXaXBtYQAAAAAAAAABAAEEgYIDhAAAAK9tZGF0EgAKChkmZxnHggQEDQgylgERQAEEEEEA9NBi7JFlrqXV1mwMry34uIYK7WRdWYJ/ZZ0EIyWW8aLm92oz5LY0W+l2FiKsHpp4BB3Vrk+iwHuzboac7wmSHHHRWklZdZ2hpEAi4E31lf1tjXnXie8fh4lzApbqjH5Pj7ZN6761WygYVdc2zvJOsflFZstng6rQU/oulDZSO6fQWKvzpO9pseyXBLfms64=",$n=""+new URL("../assets/david.0e7e3b46.png",import.meta.url).href;/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Kt=Symbol("Comlink.proxy"),er=Symbol("Comlink.endpoint"),tr=Symbol("Comlink.releaseProxy"),st=Symbol("Comlink.finalizer"),Ye=Symbol("Comlink.thrown"),$t=e=>typeof e=="object"&&e!==null||typeof e=="function",nr={canHandle:e=>$t(e)&&e[Kt],serialize(e){const{port1:t,port2:n}=new MessageChannel;return tn(e,t),[n,[n]]},deserialize(e){return e.start(),rn(e)}},rr={canHandle:e=>$t(e)&&Ye in e,serialize({value:e}){let t;return e instanceof Error?t={isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:t={isError:!1,value:e},[t,[]]},deserialize(e){throw e.isError?Object.assign(new Error(e.value.message),e.value):e.value}},en=new Map([["proxy",nr],["throw",rr]]);function ir(e,t){for(const n of e)if(t===n||n==="*"||n instanceof RegExp&&n.test(t))return!0;return!1}function tn(e,t=globalThis,n=["*"]){t.addEventListener("message",function r(s){if(!s||!s.data)return;if(!ir(n,s.origin)){console.warn(`Invalid origin '${s.origin}' for comlink proxy`);return}const{id:i,type:o,path:a}=Object.assign({path:[]},s.data),l=(s.data.argumentList||[]).map(ye);let u;try{const d=a.slice(0,-1).reduce((m,T)=>m[T],e),f=a.reduce((m,T)=>m[T],e);switch(o){case"GET":u=f;break;case"SET":d[a.slice(-1)[0]]=ye(s.data.value),u=!0;break;case"APPLY":u=f.apply(d,l);break;case"CONSTRUCT":{const m=new f(...l);u=cr(m)}break;case"ENDPOINT":{const{port1:m,port2:T}=new MessageChannel;tn(e,T),u=ur(m,[m])}break;case"RELEASE":u=void 0;break;default:return}}catch(d){u={value:d,[Ye]:0}}Promise.resolve(u).catch(d=>({value:d,[Ye]:0})).then(d=>{const[f,m]=qe(d);t.postMessage(Object.assign(Object.assign({},f),{id:i}),m),o==="RELEASE"&&(t.removeEventListener("message",r),nn(t),st in e&&typeof e[st]=="function"&&e[st]())}).catch(d=>{const[f,m]=qe({value:new TypeError("Unserializable return value"),[Ye]:0});t.postMessage(Object.assign(Object.assign({},f),{id:i}),m)})}),t.start&&t.start()}function sr(e){return e.constructor.name==="MessagePort"}function nn(e){sr(e)&&e.close()}function rn(e,t){return gt(e,[],t)}function ze(e){if(e)throw new Error("Proxy has been released and is not useable")}function sn(e){return Ce(e,{type:"RELEASE"}).then(()=>{nn(e)})}const Ze=new WeakMap,je="FinalizationRegistry"in globalThis&&new FinalizationRegistry(e=>{const t=(Ze.get(e)||0)-1;Ze.set(e,t),t===0&&sn(e)});function or(e,t){const n=(Ze.get(t)||0)+1;Ze.set(t,n),je&&je.register(e,t,e)}function ar(e){je&&je.unregister(e)}function gt(e,t=[],n=function(){}){let r=!1;const s=new Proxy(n,{get(i,o){if(ze(r),o===tr)return()=>{ar(s),sn(e),r=!0};if(o==="then"){if(t.length===0)return{then:()=>s};const a=Ce(e,{type:"GET",path:t.map(l=>l.toString())}).then(ye);return a.then.bind(a)}return gt(e,[...t,o])},set(i,o,a){ze(r);const[l,u]=qe(a);return Ce(e,{type:"SET",path:[...t,o].map(d=>d.toString()),value:l},u).then(ye)},apply(i,o,a){ze(r);const l=t[t.length-1];if(l===er)return Ce(e,{type:"ENDPOINT"}).then(ye);if(l==="bind")return gt(e,t.slice(0,-1));const[u,d]=Ot(a);return Ce(e,{type:"APPLY",path:t.map(f=>f.toString()),argumentList:u},d).then(ye)},construct(i,o){ze(r);const[a,l]=Ot(o);return Ce(e,{type:"CONSTRUCT",path:t.map(u=>u.toString()),argumentList:a},l).then(ye)}});return or(s,e),s}function lr(e){return Array.prototype.concat.apply([],e)}function Ot(e){const t=e.map(qe);return[t.map(n=>n[0]),lr(t.map(n=>n[1]))]}const on=new WeakMap;function ur(e,t){return on.set(e,t),e}function cr(e){return Object.assign(e,{[Kt]:!0})}function qe(e){for(const[t,n]of en)if(n.canHandle(e)){const[r,s]=n.serialize(e);return[{type:"HANDLER",name:t,value:r},s]}return[{type:"RAW",value:e},on.get(e)||[]]}function ye(e){switch(e.type){case"HANDLER":return en.get(e.name).deserialize(e.value);case"RAW":return e.value}}function Ce(e,t,n){return new Promise(r=>{const s=dr();e.addEventListener("message",function i(o){!o.data||!o.data.id||o.data.id!==s||(e.removeEventListener("message",i),r(o.data))}),e.start&&e.start(),e.postMessage(Object.assign({id:s},t),n)})}function dr(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}const fr="data:video/mp2t;base64,aW1wb3J0ICogYXMgQ29tbGluayBmcm9tICJjb21saW5rIgppbXBvcnQgeyB0eXBlIFRocmVzaG9sZE1hcE9wdGlvbnMsIGdlbmVyYXRlVGhyZXNob2xkTWFwSW1hZ2VEYXRhIH0gZnJvbSAiLi9nZW5lcmF0aW9uIjsKCmV4cG9ydCBjb25zdCBUaHJlc2hvbGRNYXBHZW5lcmF0aW9uV29ya2VyID0gewogICAgZ2VuZXJhdGUob3B0aW9uczogVGhyZXNob2xkTWFwT3B0aW9ucyk6IFByb21pc2U8SW1hZ2VEYXRhPiB7CiAgICAgICAgcmV0dXJuIGdlbmVyYXRlVGhyZXNob2xkTWFwSW1hZ2VEYXRhKG9wdGlvbnMpOwogICAgfQp9CgpDb21saW5rLmV4cG9zZShUaHJlc2hvbGRNYXBHZW5lcmF0aW9uV29ya2VyKTs=";let ot=null;async function hr(e){return ot||(ot=rn(new Worker(fr,{type:"module"}))),await ot.generate(e)}function mr(e){let t,n,r,s;return{c(){t=_("canvas"),this.h()},l(i){t=v(i,"CANVAS",{class:!0,style:!0}),A(t).forEach(p),this.h()},h(){c(t,"class","w-full max-h-96 object-contain shadow-lg"),dt(t,"image-rendering","pixelated")},m(i,o){G(i,t,o),r||(s=Ge(n=gr.call(null,t,e[0])),r=!0)},p(i,[o]){n&&qt(n.update)&&o&1&&n.update.call(null,i[0])},i:Te,o:Te,d(i){i&&p(t),r=!1,s()}}}function gr(e,t){const n=e.getContext("2d");if(!n)return;const r=()=>{e.width=t.width,e.height=t.height,n.putImageData(t,0,0)};let s=null;const i=()=>{s||(s=requestAnimationFrame(()=>{s=null,r()}))};return i(),{destroy(){s&&cancelAnimationFrame(s)},update:o=>{t=o,i()}}}function pr(e,t,n){let{imageData:r}=t;return e.$$set=s=>{"imageData"in s&&n(0,r=s.imageData)},[r]}class _r extends Ie{constructor(t){super(),Le(this,t,pr,mr,Se,{imageData:0})}}function xt(e,t,n){const r=e.slice();return r[34]=t[n],r}function vr(e){let t,n,r,s,i,o,a,l,u,d,f,m,T,y,w,I,S,C,b=e[14],g=[];for(let L=0;L<b.length;L+=1)g[L]=zt(xt(e,b,L));return d=new Xe({props:{src:wn,class:"w-12 h-12 text-gray-400"}}),{c(){t=_("div"),n=_("div"),r=_("p"),s=j("Select or Drop an Image to Start"),i=P(),o=_("div");for(let L=0;L<g.length;L+=1)g[L].c();a=P(),l=_("label"),u=_("div"),ee(d.$$.fragment),f=P(),m=_("span"),T=j("Choose an Image"),y=P(),w=_("input"),this.h()},l(L){t=v(L,"DIV",{class:!0});var N=A(t);n=v(N,"DIV",{class:!0});var R=A(n);r=v(R,"P",{class:!0});var M=A(r);s=q(M,"Select or Drop an Image to Start"),M.forEach(p),i=U(R),o=v(R,"DIV",{class:!0});var V=A(o);for(let J=0;J<g.length;J+=1)g[J].l(V);a=U(V),l=v(V,"LABEL",{for:!0,class:!0});var O=A(l);u=v(O,"DIV",{class:!0});var D=A(u);te(d.$$.fragment,D),D.forEach(p),f=U(O),m=v(O,"SPAN",{class:!0});var W=A(m);T=q(W,"Choose an Image"),W.forEach(p),y=U(O),w=v(O,"INPUT",{type:!0,class:!0,id:!0,accept:!0}),O.forEach(p),V.forEach(p),R.forEach(p),N.forEach(p),this.h()},h(){c(r,"class","text-2xl text-gray-500"),c(u,"class","grid place-items-center h-full w-full"),c(m,"class","sr-only"),c(w,"type","file"),c(w,"class","sr-only"),c(w,"id","image-input"),c(w,"accept","image/*"),c(l,"for","image-input"),c(l,"class","block spect-square h-24 w-24 object-cover rounded-md shadow-md border-2 border-white bg-white hover:bg-gray-100"),c(o,"class","flex gap-3 justify-center"),c(n,"class","grid gap-4"),c(t,"class","w-full h-full grid place-items-center")},m(L,N){G(L,t,N),h(t,n),h(n,r),h(r,s),h(n,i),h(n,o);for(let R=0;R<g.length;R+=1)g[R]&&g[R].m(o,null);h(o,a),h(o,l),h(l,u),ne(d,u,null),h(l,f),h(l,m),h(m,T),h(l,y),h(l,w),I=!0,S||(C=Q(w,"input",e[18]),S=!0)},p(L,N){if(N[0]&540672){b=L[14];let R;for(R=0;R<b.length;R+=1){const M=xt(L,b,R);g[R]?g[R].p(M,N):(g[R]=zt(M),g[R].c(),g[R].m(o,a))}for(;R<g.length;R+=1)g[R].d(1);g.length=b.length}},i(L){I||(B(d.$$.fragment,L),I=!0)},o(L){F(d.$$.fragment,L),I=!1},d(L){L&&p(t),jt(g,L),re(d),S=!1,C()}}}function Er(e){let t,n,r,s,i,o,a,l;return n=new Qn({props:{$$slots:{right:[Ar],left:[br]},$$scope:{ctx:e}}}),i=new Xe({props:{src:yn,class:"w-5 h-5 text-white"}}),{c(){t=_("div"),ee(n.$$.fragment),r=P(),s=_("button"),ee(i.$$.fragment),this.h()},l(u){t=v(u,"DIV",{class:!0});var d=A(t);te(n.$$.fragment,d),r=U(d),s=v(d,"BUTTON",{class:!0,title:!0});var f=A(s);te(i.$$.fragment,f),f.forEach(p),d.forEach(p),this.h()},h(){c(s,"class","absolute top-0 right-0 m-4 p-2 bg-black bg-opacity-40 rounded-full"),c(s,"title","Close Image & Reset"),c(t,"class","w-full h-full relative")},m(u,d){G(u,t,d),ne(n,t,null),h(t,r),h(t,s),ne(i,s,null),o=!0,a||(l=Q(s,"click",e[22]),a=!0)},p(u,d){const f={};d[0]&16344|d[1]&64&&(f.$$scope={dirty:d,ctx:u}),n.$set(f)},i(u){o||(B(n.$$.fragment,u),B(i.$$.fragment,u),o=!0)},o(u){F(n.$$.fragment,u),F(i.$$.fragment,u),o=!1},d(u){u&&p(t),re(n),re(i),a=!1,l()}}}function zt(e){let t,n,r,s,i;function o(){return e[23](e[34])}return{c(){t=_("button"),n=_("img"),this.h()},l(a){t=v(a,"BUTTON",{class:!0});var l=A(t);n=v(l,"IMG",{class:!0,src:!0,alt:!0}),l.forEach(p),this.h()},h(){c(n,"class","aspect-square h-24 w-24 object-cover rounded-md shadow-md border-2 border-white"),ht(n.src,r=e[34])||c(n,"src",r),c(n,"alt",""),c(t,"class","hover:opacity-75 transition-opacity")},m(a,l){G(a,t,l),h(t,n),s||(i=Q(t,"click",o),s=!0)},p(a,l){e=a},d(a){a&&p(t),s=!1,i()}}}function br(e){let t,n,r;return{c(){t=_("img"),this.h()},l(s){t=v(s,"IMG",{slot:!0,src:!0,alt:!0,style:!0,class:!0}),this.h()},h(){c(t,"slot","left"),ht(t.src,n=e[4].src)||c(t,"src",n),c(t,"alt",""),c(t,"style",r=`width: ${e[3]}px; height: ${e[13]}px`),c(t,"class","pixelated max-w-none svelte-1gkt69q")},m(s,i){G(s,t,i)},p(s,i){i[0]&16&&!ht(t.src,n=s[4].src)&&c(t,"src",n),i[0]&8200&&r!==(r=`width: ${s[3]}px; height: ${s[13]}px`)&&c(t,"style",r)},d(s){s&&p(t)}}}function Ar(e){let t,n,r,s,i;return{c(){t=_("canvas"),this.h()},l(o){t=v(o,"CANVAS",{class:!0,slot:!0,style:!0,width:!0,height:!0,"aria-label":!0}),A(t).forEach(p),this.h()},h(){c(t,"class","pixelated svelte-1gkt69q"),c(t,"slot","right"),c(t,"style",n=`width: ${e[3]}px; height: ${e[13]}px`),c(t,"width",e[3]),c(t,"height",e[13]),c(t,"aria-label","Dithered Image")},m(o,a){G(o,t,a),e[21](t),s||(i=Ge(r=Fn.call(null,t,{image:e[4],threshold:e[6],noiseIntensity:e[7],monochrome:e[8],colorLight:e[9],colorDark:e[10],output_width:e[3],output_height:e[13],thresholdMap:e[12]})),s=!0)},p(o,a){a[0]&8200&&n!==(n=`width: ${o[3]}px; height: ${o[13]}px`)&&c(t,"style",n),a[0]&8&&c(t,"width",o[3]),a[0]&8192&&c(t,"height",o[13]),r&&qt(r.update)&&a[0]&14296&&r.update.call(null,{image:o[4],threshold:o[6],noiseIntensity:o[7],monochrome:o[8],colorLight:o[9],colorDark:o[10],output_width:o[3],output_height:o[13],thresholdMap:o[12]})},d(o){o&&p(t),e[21](null),s=!1,i()}}}function Yt(e){let t,n,r;function s(o){e[25](o)}let i={label:"Bayer Level ("+e[1]+")",min:0,max:5,step:1};return e[1]!==void 0&&(i.value=e[1]),t=new mt({props:i}),me.push(()=>Ae(t,"value",s)),{c(){ee(t.$$.fragment)},l(o){te(t.$$.fragment,o)},m(o,a){ne(t,o,a),r=!0},p(o,a){const l={};a[0]&2&&(l.label="Bayer Level ("+o[1]+")"),!n&&a[0]&2&&(n=!0,l.value=o[1],we(()=>n=!1)),t.$set(l)},i(o){r||(B(t.$$.fragment,o),r=!0)},o(o){F(t.$$.fragment,o),r=!1},d(o){re(t,o)}}}function Gt(e){let t,n,r;function s(o){e[26](o)}let i={aspectRatio:1,minWidth:1,minHeight:1,maxHeight:1e3,maxWidth:1e3};return e[2]!==void 0&&(i.width=e[2]),t=new Jt({props:i}),me.push(()=>Ae(t,"width",s)),{c(){ee(t.$$.fragment)},l(o){te(t.$$.fragment,o)},m(o,a){ne(t,o,a),r=!0},p(o,a){const l={};!n&&a[0]&4&&(n=!0,l.width=o[2],we(()=>n=!1)),t.$set(l)},i(o){r||(B(t.$$.fragment,o),r=!0)},o(o){F(t.$$.fragment,o),r=!1},d(o){re(t,o)}}}function Ht(e){let t,n,r;return n=new _r({props:{imageData:e[12]}}),{c(){t=_("div"),ee(n.$$.fragment),this.h()},l(s){t=v(s,"DIV",{class:!0});var i=A(t);te(n.$$.fragment,i),i.forEach(p),this.h()},h(){c(t,"class","w-full aspect-square rounded-lg bg-gray-100 p-8 grid place-items-center")},m(s,i){G(s,t,i),ne(n,t,null),r=!0},p(s,i){const o={};i[0]&4096&&(o.imageData=s[12]),n.$set(o)},i(s){r||(B(n.$$.fragment,s),r=!0)},o(s){F(n.$$.fragment,s),r=!1},d(s){s&&p(t),re(n)}}}function Zt(e){let t,n,r,s,i,o,a,l,u,d,f,m,T,y;return{c(){t=_("fieldset"),n=_("div"),r=_("input"),s=P(),i=_("label"),o=j("Light"),a=P(),l=_("div"),u=_("input"),d=P(),f=_("label"),m=j("Dark"),this.h()},l(w){t=v(w,"FIELDSET",{});var I=A(t);n=v(I,"DIV",{class:!0});var S=A(n);r=v(S,"INPUT",{type:!0,name:!0,id:!0}),s=U(S),i=v(S,"LABEL",{for:!0,class:!0});var C=A(i);o=q(C,"Light"),C.forEach(p),S.forEach(p),a=U(I),l=v(I,"DIV",{class:!0});var b=A(l);u=v(b,"INPUT",{type:!0,name:!0,id:!0}),d=U(b),f=v(b,"LABEL",{for:!0,class:!0});var g=A(f);m=q(g,"Dark"),g.forEach(p),b.forEach(p),I.forEach(p),this.h()},h(){c(r,"type","color"),c(r,"name","color-light"),c(r,"id","color-light"),c(i,"for","color-light"),c(i,"class","font-medium text-gray-900"),c(n,"class","flex gap-3"),c(u,"type","color"),c(u,"name","color-dark"),c(u,"id","color-dark"),c(f,"for","color-dark"),c(f,"class","font-medium text-gray-900"),c(l,"class","flex gap-3")},m(w,I){G(w,t,I),h(t,n),h(n,r),Me(r,e[9]),h(n,s),h(n,i),h(i,o),h(t,a),h(t,l),h(l,u),Me(u,e[10]),h(l,d),h(l,f),h(f,m),T||(y=[Q(r,"input",e[30]),Q(u,"input",e[31])],T=!0)},p(w,I){I[0]&512&&Me(r,w[9]),I[0]&1024&&Me(u,w[10])},d(w){w&&p(t),T=!1,Ne(y)}}}function wr(e){let t,n,r;return t=new Xe({props:{src:An,class:"w-4 h-4"}}),{c(){ee(t.$$.fragment),n=j(`
				Save`)},l(s){te(t.$$.fragment,s),n=q(s,`
				Save`)},m(s,i){ne(t,s,i),G(s,n,i),r=!0},p:Te,i(s){r||(B(t.$$.fragment,s),r=!0)},o(s){F(t.$$.fragment,s),r=!1},d(s){re(t,s),s&&p(n)}}}function yr(e){let t,n,r,s,i,o,a,l,u,d,f,m,T,y,w,I,S,C,b,g,L,N,R,M,V,O,D,W,J,ie,se,K,ge,oe,le,ue,k,H,ae,pe,Je,Ke,ce,$e,et,tt,Re,he,Fe,nt,_t;const vt=[Er,vr],_e=[];function Et(E,X){return E[4]&&E[12]?0:1}i=Et(e),o=_e[i]=vt[i](e);function an(E){e[24](E)}let bt={label:"Dither Mode",options:e[16]};e[0]!==void 0&&(bt.selected=e[0]),y=new Rn({props:bt}),me.push(()=>Ae(y,"selected",an));let x=e[0]==="bayer"&&Yt(e),z=e[0]==="white_noise"&&Gt(e),Y=e[12]&&Ht(e);function ln(E){e[27](E)}let At={label:"Threshold ("+e[6]+")",min:0,max:1,step:.01};e[6]!==void 0&&(At.value=e[6]),M=new mt({props:At}),me.push(()=>Ae(M,"value",ln));function un(E){e[28](E)}let wt={label:"Noise Intensity ("+e[7]+")",min:0,max:1.5,step:.01};e[7]!==void 0&&(wt.value=e[7]),D=new mt({props:wt}),me.push(()=>Ae(D,"value",un));let Z=e[8]&&Zt(e);function cn(E){e[32](E)}function dn(E){e[33](E)}let rt={minWidth:12,minHeight:12,maxHeight:5e3,maxWidth:5e3};return e[3]!==void 0&&(rt.width=e[3]),e[5]!==void 0&&(rt.aspectRatio=e[5]),ce=new Jt({props:rt}),me.push(()=>Ae(ce,"width",cn)),me.push(()=>Ae(ce,"aspectRatio",dn)),he=new On({props:{disabled:!(e[4]&&e[12]),$$slots:{default:[wr]},$$scope:{ctx:e}}}),he.$on("click",e[15]),{c(){t=P(),n=P(),r=_("main"),s=_("section"),o.c(),a=P(),l=_("aside"),u=_("section"),d=_("div"),f=_("h2"),m=j("Threshold Map"),T=P(),ee(y.$$.fragment),I=P(),x&&x.c(),S=P(),z&&z.c(),C=P(),Y&&Y.c(),b=P(),g=_("div"),L=_("h2"),N=j("Dithering Options"),R=P(),ee(M.$$.fragment),O=P(),ee(D.$$.fragment),J=P(),ie=_("div"),se=_("div"),K=_("input"),ge=P(),oe=_("div"),le=_("label"),ue=j("Monochrome"),k=P(),Z&&Z.c(),H=P(),ae=_("div"),pe=_("h2"),Je=j("Output Options"),Ke=P(),ee(ce.$$.fragment),tt=P(),Re=_("footer"),ee(he.$$.fragment),this.h()},l(E){vn("svelte-1hm2pfs",document.head).forEach(p),t=U(E),n=U(E),r=v(E,"MAIN",{class:!0});var ve=A(r);s=v(ve,"SECTION",{class:!0});var Pe=A(s);o.l(Pe),Pe.forEach(p),a=U(ve),l=v(ve,"ASIDE",{class:!0});var Ee=A(l);u=v(Ee,"SECTION",{class:!0});var de=A(u);d=v(de,"DIV",{class:!0});var $=A(d);f=v($,"H2",{class:!0});var De=A(f);m=q(De,"Threshold Map"),De.forEach(p),T=U($),te(y.$$.fragment,$),I=U($),x&&x.l($),S=U($),z&&z.l($),C=U($),Y&&Y.l($),$.forEach(p),b=U(de),g=v(de,"DIV",{class:!0});var fe=A(g);L=v(fe,"H2",{class:!0});var yt=A(L);N=q(yt,"Dithering Options"),yt.forEach(p),R=U(fe),te(M.$$.fragment,fe),O=U(fe),te(D.$$.fragment,fe),J=U(fe),ie=v(fe,"DIV",{class:!0});var We=A(ie);se=v(We,"DIV",{class:!0});var Tt=A(se);K=v(Tt,"INPUT",{type:!0,id:!0,class:!0}),Tt.forEach(p),ge=U(We),oe=v(We,"DIV",{class:!0});var It=A(oe);le=v(It,"LABEL",{for:!0,class:!0});var Lt=A(le);ue=q(Lt,"Monochrome"),Lt.forEach(p),It.forEach(p),We.forEach(p),k=U(fe),Z&&Z.l(fe),fe.forEach(p),H=U(de),ae=v(de,"DIV",{class:!0});var Ve=A(ae);pe=v(Ve,"H2",{class:!0});var St=A(pe);Je=q(St,"Output Options"),St.forEach(p),Ke=U(Ve),te(ce.$$.fragment,Ve),Ve.forEach(p),de.forEach(p),tt=U(Ee),Re=v(Ee,"FOOTER",{class:!0});var Rt=A(Re);te(he.$$.fragment,Rt),Rt.forEach(p),Ee.forEach(p),ve.forEach(p),this.h()},h(){document.title="Dithering",c(s,"class","flex-1 overflow-hidden select-none"),c(f,"class","text-base font-semibold leading-7 text-black mb-2"),c(d,"class","grid gap-3"),c(L,"class","text-base font-semibold leading-7 text-black mb-2"),c(K,"type","checkbox"),c(K,"id","monochrome"),c(K,"class","h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600"),c(se,"class","flex h-6 items-center"),c(le,"for","monochrome"),c(le,"class","font-medium text-gray-900"),c(oe,"class","ml-3 text-sm leading-6"),c(ie,"class","relative flex items-start"),c(g,"class","grid gap-3"),c(pe,"class","text-base font-semibold leading-7 text-black mb-4"),c(ae,"class","border-t border-gray-100 py-4"),c(u,"class","grid gap-5 overflow-y-auto overflow-x-visible py-8 px-4"),c(Re,"class","py-4 px-4 flex-shrink-0"),c(l,"class","bg-white w-full md:max-w-md border-t md:border-t-0 md:border-l border-l-0 border-gray-100 z-50 overflow-y-hidden md:h-full flex-1 shadow-lg flex flex-col divide-y divide-gray-200 justify-between"),c(r,"class","w-screen max-w-screen h-screen max-h-screen flex md:flex-row flex-col bg-gray-300")},m(E,X){G(E,t,X),G(E,n,X),G(E,r,X),h(r,s),_e[i].m(s,null),h(r,a),h(r,l),h(l,u),h(u,d),h(d,f),h(f,m),h(d,T),ne(y,d,null),h(d,I),x&&x.m(d,null),h(d,S),z&&z.m(d,null),h(d,C),Y&&Y.m(d,null),h(u,b),h(u,g),h(g,L),h(L,N),h(g,R),ne(M,g,null),h(g,O),ne(D,g,null),h(g,J),h(g,ie),h(ie,se),h(se,K),K.checked=e[8],h(ie,ge),h(ie,oe),h(oe,le),h(le,ue),h(g,k),Z&&Z.m(g,null),h(u,H),h(u,ae),h(ae,pe),h(pe,Je),h(ae,Ke),ne(ce,ae,null),h(l,tt),h(l,Re),ne(he,Re,null),Fe=!0,nt||(_t=[Q(document.body,"drop",ft(e[17])),Q(document.body,"dragover",ft(Tr)),Q(K,"change",e[29])],nt=!0)},p(E,X){let ve=i;i=Et(E),i===ve?_e[i].p(E,X):(xe(),F(_e[ve],1,1,()=>{_e[ve]=null}),Oe(),o=_e[i],o?o.p(E,X):(o=_e[i]=vt[i](E),o.c()),B(o,1),o.m(s,null));const Pe={};!w&&X[0]&1&&(w=!0,Pe.selected=E[0],we(()=>w=!1)),y.$set(Pe),E[0]==="bayer"?x?(x.p(E,X),X[0]&1&&B(x,1)):(x=Yt(E),x.c(),B(x,1),x.m(d,S)):x&&(xe(),F(x,1,1,()=>{x=null}),Oe()),E[0]==="white_noise"?z?(z.p(E,X),X[0]&1&&B(z,1)):(z=Gt(E),z.c(),B(z,1),z.m(d,C)):z&&(xe(),F(z,1,1,()=>{z=null}),Oe()),E[12]?Y?(Y.p(E,X),X[0]&4096&&B(Y,1)):(Y=Ht(E),Y.c(),B(Y,1),Y.m(d,null)):Y&&(xe(),F(Y,1,1,()=>{Y=null}),Oe());const Ee={};X[0]&64&&(Ee.label="Threshold ("+E[6]+")"),!V&&X[0]&64&&(V=!0,Ee.value=E[6],we(()=>V=!1)),M.$set(Ee);const de={};X[0]&128&&(de.label="Noise Intensity ("+E[7]+")"),!W&&X[0]&128&&(W=!0,de.value=E[7],we(()=>W=!1)),D.$set(de),X[0]&256&&(K.checked=E[8]),E[8]?Z?Z.p(E,X):(Z=Zt(E),Z.c(),Z.m(g,null)):Z&&(Z.d(1),Z=null);const $={};!$e&&X[0]&8&&($e=!0,$.width=E[3],we(()=>$e=!1)),!et&&X[0]&32&&(et=!0,$.aspectRatio=E[5],we(()=>et=!1)),ce.$set($);const De={};X[0]&4112&&(De.disabled=!(E[4]&&E[12])),X[1]&64&&(De.$$scope={dirty:X,ctx:E}),he.$set(De)},i(E){Fe||(B(o),B(y.$$.fragment,E),B(x),B(z),B(Y),B(M.$$.fragment,E),B(D.$$.fragment,E),B(ce.$$.fragment,E),B(he.$$.fragment,E),Fe=!0)},o(E){F(o),F(y.$$.fragment,E),F(x),F(z),F(Y),F(M.$$.fragment,E),F(D.$$.fragment,E),F(ce.$$.fragment,E),F(he.$$.fragment,E),Fe=!1},d(E){E&&p(t),E&&p(n),E&&p(r),_e[i].d(),re(y),x&&x.d(),z&&z.d(),Y&&Y.d(),re(M),re(D),Z&&Z.d(),re(ce),re(he),nt=!1,Ne(_t)}}}const Tr=()=>{};function Ir(e,t,n){let r,s,i;const o=[Jn,Kn,$n];let a=.5,l=.3,u=!1,d="#ede6cc",f="#21263f",m=null,T="blue_noise",y=3,w=256,I=300,S=null;async function C(){m&&await xn(m,"dithered","png")}const b=[{name:"Bayer",value:"bayer"},{name:"Blue Noise",value:"blue_noise"},{name:"White Noise",value:"white_noise"}];async function g(k){var ae;const H=(ae=k.dataTransfer)==null?void 0:ae.files[0];if(H){if(!H.type.startsWith("image/")){alert("Please drop an image file");return}try{n(4,S=await Bt(H))}catch(pe){alert("Failed to load image"),console.error(pe)}}}async function L(k){const H=k.target.files[0];if(H)try{n(4,S=await Bt(H))}catch(ae){alert("Failed to load image"),console.error(ae)}}async function N(k){const H=new Image;H.onload=()=>{n(4,S=H)},H.src=k}let R=null;function M(k){me[k?"unshift":"push"](()=>{m=k,n(11,m)})}const V=()=>n(4,S=null),O=k=>N(k);function D(k){T=k,n(0,T)}function W(k){y=k,n(1,y)}function J(k){w=k,n(2,w)}function ie(k){a=k,n(6,a)}function se(k){l=k,n(7,l)}function K(){u=this.checked,n(8,u)}function ge(){d=this.value,n(9,d)}function oe(){f=this.value,n(10,f)}function le(k){I=k,n(3,I)}function ue(k){i=k,n(5,i),n(4,S)}return e.$$.update=()=>{if(e.$$.dirty[0]&4&&n(20,r=w),e.$$.dirty[0]&16&&n(5,i=S!=null&&S.width&&(S!=null&&S.height)?S.width/S.height:1),e.$$.dirty[0]&40&&n(13,s=I/i),e.$$.dirty[0]&1048583&&"ImageData"in globalThis){let k;switch(T){case"bayer":k={mode:"bayer",level:y};break;case"blue_noise":k={mode:"blue_noise"};break;case"white_noise":k={mode:"white_noise",width:w,height:r};break}hr(k).then(H=>n(12,R=H))}},[T,y,w,I,S,i,a,l,u,d,f,m,R,s,o,C,b,g,L,N,r,M,V,O,D,W,J,ie,se,K,ge,oe,le,ue]}class Dr extends Ie{constructor(t){super(),Le(this,t,Ir,yr,Se,{},null,[-1,-1])}}export{Dr as component};
