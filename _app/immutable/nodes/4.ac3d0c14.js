var dn=Object.defineProperty;var hn=(t,e,n)=>e in t?dn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ye=(t,e,n)=>(hn(t,typeof e!="symbol"?e+"":e,n),n);import{S as fe,i as ce,s as de,k as E,q as $,a as R,y as H,l as A,m as S,r as Z,h as _,c as C,z as Y,n as c,b as O,G as g,A as j,N as J,g as U,d as F,B as G,O as Fe,C as Le,D as Ie,E as De,F as Me,P as mn,Q as Te,p as rt,R as Oe,T as st,w as q,U as Se,u as xe,H as ue,V as gn,W as _n,X as vt,Y as lt,Z as pn,_ as ee,$ as te,a0 as vn,v as je,f as Ge,a1 as at,J as bn,o as wn,M as Be,e as $e}from"../chunks/index.ebd1f5b7.js";import{I as Re,L as En,A as An,C as bt,a as wt,P as yn,X as kn,b as Tn}from"../chunks/Icon.7c871feb.js";function Sn(t){let e,n,i,s,o,r,l,a,u,d,f,m,L,b,y,h,v,T,w,k,D,p,I,P,B,W;return L=new Re({props:{src:En,class:"w-4 h-4",solid:!0}}),{c(){e=E("fieldset"),n=E("div"),i=E("label"),s=$("Width"),o=R(),r=E("div"),l=E("input"),a=R(),u=E("div"),d=$("px"),f=R(),m=E("span"),H(L.$$.fragment),b=R(),y=E("div"),h=E("label"),v=$("Height"),T=R(),w=E("div"),k=E("input"),D=R(),p=E("div"),I=$("px"),this.h()},l(X){e=A(X,"FIELDSET",{class:!0});var V=S(e);n=A(V,"DIV",{class:!0});var ne=S(n);i=A(ne,"LABEL",{for:!0,class:!0});var ge=S(i);s=Z(ge,"Width"),ge.forEach(_),o=C(ne),r=A(ne,"DIV",{class:!0});var Q=S(r);l=A(Q,"INPUT",{name:!0,id:!0,type:!0,min:!0,max:!0,step:!0,class:!0,placeholder:!0}),a=C(Q),u=A(Q,"DIV",{class:!0});var ae=S(u);d=Z(ae,"px"),ae.forEach(_),Q.forEach(_),ne.forEach(_),f=C(V),m=A(V,"SPAN",{class:!0});var _e=S(m);Y(L.$$.fragment,_e),_e.forEach(_),b=C(V),y=A(V,"DIV",{class:!0});var he=S(y);h=A(he,"LABEL",{for:!0,class:!0});var re=S(h);v=Z(re,"Height"),re.forEach(_),T=C(he),w=A(he,"DIV",{class:!0});var se=S(w);k=A(se,"INPUT",{type:!0,id:!0,name:!0,min:!0,max:!0,step:!0,class:!0,placeholder:!0}),D=C(se),p=A(se,"DIV",{class:!0});var ie=S(p);I=Z(ie,"px"),ie.forEach(_),se.forEach(_),he.forEach(_),V.forEach(_),this.h()},h(){c(i,"for","width-"+t[8]),c(i,"class","block text-sm font-medium leading-6 text-gray-900"),c(l,"name","width"),c(l,"id","width-"+t[8]),c(l,"type","number"),c(l,"min",t[3]),c(l,"max",t[1]),c(l,"step","1"),l.value=t[0],c(l,"class","block w-full rounded-md border-0 py-1.5 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"),c(l,"placeholder","600"),c(u,"class","pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400"),c(r,"class","relative mt-2 rounded-md shadow-sm"),c(n,"class","w-full"),c(m,"class","text-gray-500 pb-2 cursor-not-allowed"),c(h,"for","height-"+t[9]),c(h,"class","block text-sm font-medium leading-6 text-gray-900"),c(k,"type","number"),c(k,"id","height-"+t[9]),c(k,"name","height"),c(k,"min",t[4]),c(k,"max",t[2]),c(k,"step","1"),k.value=t[5],c(k,"class","block w-full rounded-md border-0 py-1.5 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"),c(k,"placeholder","340"),c(p,"class","pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400"),c(w,"class","relative mt-2 rounded-md shadow-sm"),c(y,"class","w-full"),c(e,"class","flex gap-3 items-end justify-between")},m(X,V){O(X,e,V),g(e,n),g(n,i),g(i,s),g(n,o),g(n,r),g(r,l),g(r,a),g(r,u),g(u,d),g(e,f),g(e,m),j(L,m,null),g(e,b),g(e,y),g(y,h),g(h,v),g(y,T),g(y,w),g(w,k),g(w,D),g(w,p),g(p,I),P=!0,B||(W=[J(l,"input",t[6]),J(k,"input",t[7])],B=!0)},p(X,[V]){(!P||V&8)&&c(l,"min",X[3]),(!P||V&2)&&c(l,"max",X[1]),(!P||V&1&&l.value!==X[0])&&(l.value=X[0]),(!P||V&16)&&c(k,"min",X[4]),(!P||V&4)&&c(k,"max",X[2]),(!P||V&32&&k.value!==X[5])&&(k.value=X[5])},i(X){P||(U(L.$$.fragment,X),P=!0)},o(X){F(L.$$.fragment,X),P=!1},d(X){X&&_(e),G(L),B=!1,Fe(W)}}}function Et(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}function Ln(t,e,n){let i,{width:s}=e,{aspectRatio:o}=e,{maxWidth:r=null}=e,{maxHeight:l=null}=e,{minWidth:a=null}=e,{minHeight:u=null}=e;function d(b){const y=b.target.value;y&&(a!==null&&y<a||r!==null&&y>r||n(0,s=y))}function f(b){const y=b.target.value;y&&(u!==null&&y<u||l!==null&&y>l||n(0,s=Math.round(o*y)))}let m=Et(),L=Et();return t.$$set=b=>{"width"in b&&n(0,s=b.width),"aspectRatio"in b&&n(10,o=b.aspectRatio),"maxWidth"in b&&n(1,r=b.maxWidth),"maxHeight"in b&&n(2,l=b.maxHeight),"minWidth"in b&&n(3,a=b.minWidth),"minHeight"in b&&n(4,u=b.minHeight)},t.$$.update=()=>{t.$$.dirty&1025&&n(5,i=Math.round(s/o))},[s,r,l,a,u,i,d,f,m,L,o]}class jt extends fe{constructor(e){super(),ce(this,e,Ln,Sn,de,{width:0,aspectRatio:10,maxWidth:1,maxHeight:2,minWidth:3,minHeight:4})}}var In="precision highp float;attribute vec2 position;varying vec2 fragCoord;void main(){fragCoord.x=position.x*0.5+0.5;fragCoord.y=position.y*0.5+0.5;gl_Position=vec4(position,0.0,1.0);}",Dn="precision highp float;varying vec2 fragCoord;uniform sampler2D uSampler;uniform float uThreshold;uniform sampler2D uNoiseSampler;uniform vec2 uNoiseSamplerSize;uniform float uNoise;uniform float uMonochrome;uniform vec2 uSize;uniform vec3 uDarkColor;uniform vec3 uLightColor;void main(void){vec2 imgPixel=vec2(fragCoord.x*uSize.x,fragCoord.y*uSize.y);vec2 noisePixel=vec2(mod(imgPixel.x,uNoiseSamplerSize.x),mod(imgPixel.y,uNoiseSamplerSize.y));vec2 noiseUV=vec2(noisePixel.x/uNoiseSamplerSize.x,noisePixel.y/uNoiseSamplerSize.y);float noise=(texture2D(uNoiseSampler,noiseUV).r-0.5)*2.0*uNoise;vec4 color=texture2D(uSampler,fragCoord);float gray=dot(color.rgb,vec3(0.299,0.587,0.114));color.r=color.r*(1.0-uMonochrome)+gray*uMonochrome;color.g=color.g*(1.0-uMonochrome)+gray*uMonochrome;color.b=color.b*(1.0-uMonochrome)+gray*uMonochrome;vec3 thresholds=vec3(step(uThreshold,color.r+noise),step(uThreshold,color.g+noise),step(uThreshold,color.b+noise));if(uMonochrome>0.0){color.rgb=vec3(mix(uDarkColor.r,uLightColor.r,thresholds.r),mix(uDarkColor.g,uLightColor.g,thresholds.g),mix(uDarkColor.b,uLightColor.b,thresholds.b));}else{color.rgb=thresholds;}gl_FragColor=color;}";function At(t){return(t&t-1)===0}function Mn(t,e,n){const i=yt(t,t.VERTEX_SHADER,e),s=yt(t,t.FRAGMENT_SHADER,n),o=t.createProgram();if(!o)throw new Error("Failed to create shader program");if(t.attachShader(o,i),t.attachShader(o,s),t.linkProgram(o),!t.getProgramParameter(o,t.LINK_STATUS))throw Error(`Unable to initialize the shader program: ${t.getProgramInfoLog(o)}`);return o}function yt(t,e,n){const i=t.createShader(e);if(!i)throw new Error("Failed to create shader");if(t.shaderSource(i,n),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS))throw Error(`An error occurred compiling the shaders: ${t.getShaderInfoLog(i)}`);return i}function Rn(t){const e=t.createBuffer(),n=t.createBuffer(),i=[-1,1,-1,-1,1,-1,1,1],s=[3,2,1,3,1,0];return t.bindBuffer(t.ARRAY_BUFFER,e),t.bufferData(t.ARRAY_BUFFER,new Float32Array(i),t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(s),t.STATIC_DRAW),{vertex_buffer:e,index_buffer:n}}function kt(t,e,n){const i=t.createTexture();if(!i)throw new Error("Failed to create texture");return t.bindTexture(t.TEXTURE_2D,i),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),At(e.width)&&At(e.height)?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,n)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,n)),i}function Cn(t,e){let n=e;const i=t.getContext("webgl",{preserveDrawingBuffer:!0});if(!i){alert("WebGL not supported");return}i.clearColor(0,0,0,1),i.clear(i.COLOR_BUFFER_BIT);const s=Mn(i,In,Dn),{vertex_buffer:o,index_buffer:r}=Rn(i),l=i.getAttribLocation(s,"position");i.vertexAttribPointer(l,2,i.FLOAT,!1,0,0),i.enableVertexAttribArray(l);const a=i.getUniformLocation(s,"uSampler"),u=i.getUniformLocation(s,"uThreshold"),d=i.getUniformLocation(s,"uNoiseSampler"),f=i.getUniformLocation(s,"uNoise"),m=i.getUniformLocation(s,"uSize"),L=i.getUniformLocation(s,"uNoiseSamplerSize"),b=i.getUniformLocation(s,"uMonochrome"),y=i.getUniformLocation(s,"uDarkColor"),h=i.getUniformLocation(s,"uLightColor");let v;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!0);const T=()=>{v&&i.deleteTexture(v),v=kt(i,n.image,i.LINEAR)};T();let w,k;i.useProgram(s);let D=null;const p=()=>{w&&i.deleteTexture(w),w=kt(i,n.thresholdMap,i.NEAREST),k={width:n.thresholdMap.width,height:n.thresholdMap.height}};p();const I=()=>{i.viewport(0,0,n.output_width,n.output_height),i.clearColor(0,0,0,1),i.clear(i.COLOR_BUFFER_BIT),i.bindBuffer(i.ARRAY_BUFFER,o),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,r),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,v),i.uniform1i(a,0),i.activeTexture(i.TEXTURE1),i.bindTexture(i.TEXTURE_2D,w),i.uniform1i(d,1),i.uniform2f(L,k.width,k.height),i.uniform1f(u,n.threshold),i.uniform1f(f,n.noiseIntensity),i.uniform2f(m,n.output_width,n.output_height),i.uniform1f(b,n.monochrome?1:0),i.uniform3f(y,...Tt(n.colorDark)),i.uniform3f(h,...Tt(n.colorLight)),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT),i.drawElements(i.TRIANGLES,6,i.UNSIGNED_SHORT,0)};function P(){D=requestAnimationFrame(()=>{I(),D=null})}return P(),{update(B){const W=n.image!==B.image,X=n.thresholdMap!==B.thresholdMap;n=B,W&&T(),X&&p(),P()},destroy(){D!==null&&cancelAnimationFrame(D)}}}function Tt(t){const e=parseInt(t.slice(1,3),16)/255,n=parseInt(t.slice(3,5),16)/255,i=parseInt(t.slice(5,7),16)/255;return[e,n,i]}function Pn(t){let e,n,i,s,o;const r=t[3].default,l=Le(r,t,t[2],null);return{c(){e=E("button"),l&&l.c(),this.h()},l(a){e=A(a,"BUTTON",{type:!0,class:!0});var u=S(e);l&&l.l(u),u.forEach(_),this.h()},h(){e.disabled=t[0],c(e,"type","button"),c(e,"class",n=t[1][t[0]?"disabled":"normal"]+" rounded-md px-2.5 py-1.5 text-sm font-semibold focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 flex items-center justify-center gap-2")},m(a,u){O(a,e,u),l&&l.m(e,null),i=!0,s||(o=J(e,"click",t[4]),s=!0)},p(a,[u]){l&&l.p&&(!i||u&4)&&Ie(l,r,a,a[2],i?Me(r,a[2],u,null):De(a[2]),null),(!i||u&1)&&(e.disabled=a[0]),(!i||u&1&&n!==(n=a[1][a[0]?"disabled":"normal"]+" rounded-md px-2.5 py-1.5 text-sm font-semibold focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 flex items-center justify-center gap-2"))&&c(e,"class",n)},i(a){i||(U(l,a),i=!0)},o(a){F(l,a),i=!1},d(a){a&&_(e),l&&l.d(a),s=!1,o()}}}function Nn(t,e,n){let{$$slots:i={},$$scope:s}=e,{disabled:o=!1}=e;const r={normal:"bg-indigo-600 text-white shadow-sm hover:bg-indigo-500",disabled:"bg-gray-200 text-gray-400 shadow-none cursor-not-allowed"};function l(a){mn.call(this,t,a)}return t.$$set=a=>{"disabled"in a&&n(0,o=a.disabled),"$$scope"in a&&n(2,s=a.$$scope)},[o,r,s,i,l]}class Un extends fe{constructor(e){super(),ce(this,e,Nn,Pn,de,{disabled:0})}}async function Xn(t,e,n="png"){const i=new OffscreenCanvas(t.width,t.height),s=i.getContext("2d");if(!s)return;s.drawImage(t,0,0,t.width,t.height);const o=await i.convertToBlob({type:"image/"+n,quality:1}),r=URL.createObjectURL(o),l=document.createElement("a");l.download=`${e}.${n}`,l.href=r,l.click(),l.remove(),URL.revokeObjectURL(r)}function St(t){return new Promise((e,n)=>{t.type.startsWith("image/")||n(new Error("Not an image file"));const i=new FileReader;i.onload=s=>{if(typeof i.result!="string")return;const o=new Image;o.onload=()=>{e(o)},o.onerror=r=>{n(r)},o.src=i.result},i.onerror=s=>{n(s)},i.readAsDataURL(t)})}function On(t){const n=new OffscreenCanvas(t.width,t.height).getContext("2d");if(!n)throw new Error("Could not get canvas context");return n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height)}var Bn=class extends EventTarget{dispatchTypedEvent(t,e){return super.dispatchEvent(e)}};class be{constructor(e){this.id=-1,this.nativePointer=e,this.pageX=e.pageX,this.pageY=e.pageY,this.clientX=e.clientX,this.clientY=e.clientY,self.Touch&&e instanceof Touch?this.id=e.identifier:Ue(e)&&(this.id=e.pointerId)}getCoalesced(){if("getCoalescedEvents"in this.nativePointer){const e=this.nativePointer.getCoalescedEvents().map(n=>new be(n));if(e.length>0)return e}return[this]}}const Ue=t=>"pointerId"in t,tt=t=>"changedTouches"in t,Lt=()=>{};class Fn{constructor(e,{start:n=()=>!0,move:i=Lt,end:s=Lt,rawUpdates:o=!1,avoidPointerEvents:r=!1}={}){this._element=e,this.startPointers=[],this.currentPointers=[],this._excludeFromButtonsCheck=new Set,this._pointerStart=l=>{if(Ue(l)&&l.buttons===0)this._excludeFromButtonsCheck.add(l.pointerId);else if(!(l.buttons&1))return;const a=new be(l);this.currentPointers.some(u=>u.id===a.id)||this._triggerPointerStart(a,l)&&(Ue(l)?((l.target&&"setPointerCapture"in l.target?l.target:this._element).setPointerCapture(l.pointerId),this._element.addEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move),this._element.addEventListener("pointerup",this._pointerEnd),this._element.addEventListener("pointercancel",this._pointerEnd)):(window.addEventListener("mousemove",this._move),window.addEventListener("mouseup",this._pointerEnd)))},this._touchStart=l=>{for(const a of Array.from(l.changedTouches))this._triggerPointerStart(new be(a),l)},this._move=l=>{if(!tt(l)&&(!Ue(l)||!this._excludeFromButtonsCheck.has(l.pointerId))&&l.buttons===0){this._pointerEnd(l);return}const a=this.currentPointers.slice(),u=tt(l)?Array.from(l.changedTouches).map(f=>new be(f)):[new be(l)],d=[];for(const f of u){const m=this.currentPointers.findIndex(L=>L.id===f.id);m!==-1&&(d.push(f),this.currentPointers[m]=f)}d.length!==0&&this._moveCallback(a,d,l)},this._triggerPointerEnd=(l,a)=>{if(!tt(a)&&a.buttons&1)return!1;const u=this.currentPointers.findIndex(f=>f.id===l.id);if(u===-1)return!1;this.currentPointers.splice(u,1),this.startPointers.splice(u,1),this._excludeFromButtonsCheck.delete(l.id);const d=!(a.type==="mouseup"||a.type==="touchend"||a.type==="pointerup");return this._endCallback(l,a,d),!0},this._pointerEnd=l=>{if(this._triggerPointerEnd(new be(l),l))if(Ue(l)){if(this.currentPointers.length)return;this._element.removeEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move),this._element.removeEventListener("pointerup",this._pointerEnd),this._element.removeEventListener("pointercancel",this._pointerEnd)}else window.removeEventListener("mousemove",this._move),window.removeEventListener("mouseup",this._pointerEnd)},this._touchEnd=l=>{for(const a of Array.from(l.changedTouches))this._triggerPointerEnd(new be(a),l)},this._startCallback=n,this._moveCallback=i,this._endCallback=s,this._rawUpdates=o&&"onpointerrawupdate"in window,self.PointerEvent&&!r?this._element.addEventListener("pointerdown",this._pointerStart):(this._element.addEventListener("mousedown",this._pointerStart),this._element.addEventListener("touchstart",this._touchStart),this._element.addEventListener("touchmove",this._move),this._element.addEventListener("touchend",this._touchEnd),this._element.addEventListener("touchcancel",this._touchEnd))}stop(){this._element.removeEventListener("pointerdown",this._pointerStart),this._element.removeEventListener("mousedown",this._pointerStart),this._element.removeEventListener("touchstart",this._touchStart),this._element.removeEventListener("touchmove",this._move),this._element.removeEventListener("touchend",this._touchEnd),this._element.removeEventListener("touchcancel",this._touchEnd),this._element.removeEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move),this._element.removeEventListener("pointerup",this._pointerEnd),this._element.removeEventListener("pointercancel",this._pointerEnd),window.removeEventListener("mousemove",this._move),window.removeEventListener("mouseup",this._pointerEnd)}_triggerPointerStart(e,n){return this._startCallback(e,n)?(this.currentPointers.push(e),this.startPointers.push(e),!0):!1}}function Gt(t,e,n){return Math.min(Math.max(t,e),n)}function It(t,e){return e?Math.sqrt((e.clientX-t.clientX)**2+(e.clientY-t.clientY)**2):0}function Dt(t,e){return e?{clientX:(t.clientX+e.clientX)/2,clientY:(t.clientY+e.clientY)/2}:t}const Je=class extends Bn{constructor(n){super();ye(this,"element");ye(this,"transform",new DOMMatrix);ye(this,"pointerTracker");this.element=n,this.element.addEventListener("wheel",this.onWheel.bind(this)),this.pointerTracker=new Fn(this.element,{start:(i,s)=>this.pointerTracker.currentPointers.length===2?!1:(s.preventDefault(),!0),move:i=>{this.onPointerMove(i,this.pointerTracker.currentPointers)},avoidPointerEvents:this.isSafari()}),this.element.addEventListener("wheel",this.onWheel.bind(this))}get x(){return this.transform.e}get y(){return this.transform.f}get scale(){return this.transform.a}set x(n){this.transform.e=n}set y(n){this.transform.f=n}set scale(n){this.transform.a=n,this.transform.d=n}onWheel(n){n.preventDefault();const i=this.element.getBoundingClientRect();let{deltaY:s}=n;const{ctrlKey:o,deltaMode:r}=n;r===1&&(s*=15);const l=s>0,a=o?100:300,u=1-(l?-s:s)/a,d=l?1/u:u,f=n.clientX-i.left,m=n.clientY-i.top;this.applyTransformation({scaleDiff:d,originX:f,originY:m})}applyTransformation(n={}){const{panX:i=0,panY:s=0,originX:o=0,originY:r=0,scaleDiff:l=1}=n,a=new DOMMatrix().translate(o,r).scale(l).translate(-o,-r),u=new DOMMatrix().translate(i,s);a.multiplySelf(u),a.multiplySelf(this.transform);const d=a.a,f=a.e,m=a.f;this.updateTransform(d,f,m)}onPointerMove(n,i){const s=this.element.getBoundingClientRect(),o=Dt(n[0],n[1]),r=Dt(i[0],i[1]),l=o.clientX-s.left,a=o.clientY-s.top,u=It(n[0],n[1]),d=It(i[0],i[1]),f=u?d/u:1;this.applyTransformation({originX:l,originY:a,scaleDiff:f,panX:r.clientX-o.clientX,panY:r.clientY-o.clientY})}updateTransform(n,i,s){if(n=Gt(n,Je.MIN_SCALE,Je.MAX_SCALE),n===this.scale&&i===this.x&&s===this.y)return;this.x=i,this.y=s,this.scale=n;const o=new CustomEvent("panzoom:change",{bubbles:!0,detail:{x:this.x,y:this.y,scale:this.scale,matrix:this.transform}});this.dispatchTypedEvent("panzoom:change",o)}isSafari(){return/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)}reset(){this.updateTransform(1,0,0)}destroy(){this.pointerTracker.stop()}};let Xe=Je;ye(Xe,"MIN_SCALE",.01),ye(Xe,"MAX_SCALE",1e5);const Wn=t=>({}),Mt=t=>({}),Vn=t=>({}),Rt=t=>({});function zn(t){let e,n,i,s,o,r,l,a,u,d,f,m,L,b;const y=t[7].left,h=Le(y,t,t[6],Rt),v=t[7].right,T=Le(v,t,t[6],Mt);return f=new Re({props:{src:An,class:"w-6 h-6 text-white"}}),{c(){e=E("div"),n=E("div"),i=E("div"),s=E("div"),h&&h.c(),o=R(),r=E("div"),l=E("div"),T&&T.c(),a=R(),u=E("div"),d=E("div"),H(f.$$.fragment),this.h()},l(w){e=A(w,"DIV",{class:!0});var k=S(e);n=A(k,"DIV",{class:!0});var D=S(n);i=A(D,"DIV",{class:!0});var p=S(i);s=A(p,"DIV",{style:!0,class:!0});var I=S(s);h&&h.l(I),I.forEach(_),p.forEach(_),o=C(D),r=A(D,"DIV",{class:!0});var P=S(r);l=A(P,"DIV",{style:!0,class:!0});var B=S(l);T&&T.l(B),B.forEach(_),P.forEach(_),D.forEach(_),a=C(k),u=A(k,"DIV",{class:!0});var W=S(u);d=A(W,"DIV",{class:!0});var X=S(d);Y(f.$$.fragment,X),X.forEach(_),W.forEach(_),k.forEach(_),this.h()},h(){c(s,"style",t[3]),c(s,"class","w-full h-full origin-top-left grid place-items-center"),c(i,"class","mask-left svelte-u41rvx"),c(l,"style",t[3]),c(l,"class","w-full h-full origin-top-left grid place-items-center"),c(r,"class","mask-right svelte-u41rvx"),c(n,"class","w-full h-full grid place-items-center"),c(d,"class","w-12 h-12 rounded-full bg-black grid place-items-center absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"),Te(d,"rotate-90",t[0]==="vertical"),c(u,"class","handle relative shadow-lg svelte-u41rvx"),c(e,"class","pz-container svelte-u41rvx"),Te(e,"vertical",t[0]==="vertical"),rt(e,"--split-point",t[2]+"%")},m(w,k){O(w,e,k),g(e,n),g(n,i),g(i,s),h&&h.m(s,null),g(n,o),g(n,r),g(r,l),T&&T.m(l,null),g(e,a),g(e,u),g(u,d),j(f,d,null),t[8](e),m=!0,L||(b=[Oe(t[5].call(null,n)),Oe(t[4].call(null,u)),J(u,"pointercancel",st(Hn))],L=!0)},p(w,[k]){h&&h.p&&(!m||k&64)&&Ie(h,y,w,w[6],m?Me(y,w[6],k,Vn):De(w[6]),Rt),(!m||k&8)&&c(s,"style",w[3]),T&&T.p&&(!m||k&64)&&Ie(T,v,w,w[6],m?Me(v,w[6],k,Wn):De(w[6]),Mt),(!m||k&8)&&c(l,"style",w[3]),(!m||k&1)&&Te(d,"rotate-90",w[0]==="vertical"),(!m||k&1)&&Te(e,"vertical",w[0]==="vertical"),k&4&&rt(e,"--split-point",w[2]+"%")},i(w){m||(U(h,w),U(T,w),U(f.$$.fragment,w),m=!0)},o(w){F(h,w),F(T,w),F(f.$$.fragment,w),m=!1},d(w){w&&_(e),h&&h.d(w),T&&T.d(w),G(f),t[8](null),L=!1,Fe(b)}}}const Hn=()=>{};function Yn(t,e,n){let{$$slots:i={},$$scope:s}=e,{direction:o="horizontal"}=e,r=null,l=50;function a(m){return m.addEventListener("pointerdown",L=>{const b=o==="vertical"?L.clientY:L.clientX,y=l,h=document.body.style.cursor;document.body.style.cursor=o==="vertical"?"row-resize":"col-resize";const v=w=>{const k=r?r.clientWidth:window.innerWidth,D=r?r.clientHeight:window.innerHeight,p=o==="vertical"?D:k,P=(o==="vertical"?w.clientY:w.clientX)-b,B=y+P/p*100;n(2,l=Gt(B,0,100))},T=()=>{document.body.style.cursor=h,window.removeEventListener("pointermove",v),window.removeEventListener("pointerup",T),window.removeEventListener("pointercancel",T)};window.addEventListener("pointermove",v),window.addEventListener("pointerup",T),window.addEventListener("pointercancel",T)}),{destroy(){m.removeEventListener("pointerdown",()=>{})}}}let u="transform: none;";function d(m){const L=new Xe(m);function b(y){const{matrix:h}=y.detail;n(3,u=`transform: ${h.toString()};`)}return L.addEventListener("panzoom:change",b),{destroy(){L.removeEventListener("panzoom:change",b),L.destroy()}}}function f(m){q[m?"unshift":"push"](()=>{r=m,n(1,r)})}return t.$$set=m=>{"direction"in m&&n(0,o=m.direction),"$$scope"in m&&n(6,s=m.$$scope)},[o,r,l,u,a,d,s,i,f]}class jn extends fe{constructor(e){super(),ce(this,e,Yn,zn,de,{direction:0})}}const Gn=""+new URL("../assets/cat.58b560b7.jpg",import.meta.url).href,$n="data:image/avif;base64,AAAAHGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZgAAAOptZXRhAAAAAAAAACFoZGxyAAAAAAAAAABwaWN0AAAAAAAAAAAAAAAAAAAAAA5waXRtAAAAAAABAAAAImlsb2MAAAAAREAAAQABAAAAAAEOAAEAAAAAAAAApwAAACNpaW5mAAAAAAABAAAAFWluZmUCAAAAAAEAAGF2MDEAAAAAamlwcnAAAABLaXBjbwAAABNjb2xybmNseAACAAIABoAAAAAMYXYxQ4EEDAAAAAAUaXNwZQAAAAAAAAJyAAACcgAAABBwaXhpAAAAAAMICAgAAAAXaXBtYQAAAAAAAAABAAEEgYIDhAAAAK9tZGF0EgAKChkmZxnHggQEDQgylgERQAEEEEEA9NBi7JFlrqXV1mwMry34uIYK7WRdWYJ/ZZ0EIyWW8aLm92oz5LY0W+l2FiKsHpp4BB3Vrk+iwHuzboac7wmSHHHRWklZdZ2hpEAi4E31lf1tjXnXie8fh4lzApbqjH5Pj7ZN6761WygYVdc2zvJOsflFZstng6rQU/oulDZSO6fQWKvzpO9pseyXBLfms64=",Zn=""+new URL("../assets/david.0e7e3b46.png",import.meta.url).href;/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $t=Symbol("Comlink.proxy"),qn=Symbol("Comlink.endpoint"),Qn=Symbol("Comlink.releaseProxy"),nt=Symbol("Comlink.finalizer"),Ye=Symbol("Comlink.thrown"),Zt=t=>typeof t=="object"&&t!==null||typeof t=="function",Kn={canHandle:t=>Zt(t)&&t[$t],serialize(t){const{port1:e,port2:n}=new MessageChannel;return Qt(t,e),[n,[n]]},deserialize(t){return t.start(),ut(t)}},Jn={canHandle:t=>Zt(t)&&Ye in t,serialize({value:t}){let e;return t instanceof Error?e={isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:e={isError:!1,value:t},[e,[]]},deserialize(t){throw t.isError?Object.assign(new Error(t.value.message),t.value):t.value}},qt=new Map([["proxy",Kn],["throw",Jn]]);function xn(t,e){for(const n of t)if(e===n||n==="*"||n instanceof RegExp&&n.test(e))return!0;return!1}function Qt(t,e=globalThis,n=["*"]){e.addEventListener("message",function i(s){if(!s||!s.data)return;if(!xn(n,s.origin)){console.warn(`Invalid origin '${s.origin}' for comlink proxy`);return}const{id:o,type:r,path:l}=Object.assign({path:[]},s.data),a=(s.data.argumentList||[]).map(Ee);let u;try{const d=l.slice(0,-1).reduce((m,L)=>m[L],t),f=l.reduce((m,L)=>m[L],t);switch(r){case"GET":u=f;break;case"SET":d[l.slice(-1)[0]]=Ee(s.data.value),u=!0;break;case"APPLY":u=f.apply(d,a);break;case"CONSTRUCT":{const m=new f(...a);u=ri(m)}break;case"ENDPOINT":{const{port1:m,port2:L}=new MessageChannel;Qt(t,L),u=en(m,[m])}break;case"RELEASE":u=void 0;break;default:return}}catch(d){u={value:d,[Ye]:0}}Promise.resolve(u).catch(d=>({value:d,[Ye]:0})).then(d=>{const[f,m]=Qe(d);e.postMessage(Object.assign(Object.assign({},f),{id:o}),m),r==="RELEASE"&&(e.removeEventListener("message",i),Kt(e),nt in t&&typeof t[nt]=="function"&&t[nt]())}).catch(d=>{const[f,m]=Qe({value:new TypeError("Unserializable return value"),[Ye]:0});e.postMessage(Object.assign(Object.assign({},f),{id:o}),m)})}),e.start&&e.start()}function ei(t){return t.constructor.name==="MessagePort"}function Kt(t){ei(t)&&t.close()}function ut(t,e){return ot(t,[],e)}function He(t){if(t)throw new Error("Proxy has been released and is not useable")}function Jt(t){return ke(t,{type:"RELEASE"}).then(()=>{Kt(t)})}const Ze=new WeakMap,qe="FinalizationRegistry"in globalThis&&new FinalizationRegistry(t=>{const e=(Ze.get(t)||0)-1;Ze.set(t,e),e===0&&Jt(t)});function ti(t,e){const n=(Ze.get(e)||0)+1;Ze.set(e,n),qe&&qe.register(t,e,t)}function ni(t){qe&&qe.unregister(t)}function ot(t,e=[],n=function(){}){let i=!1;const s=new Proxy(n,{get(o,r){if(He(i),r===Qn)return()=>{ni(s),Jt(t),i=!0};if(r==="then"){if(e.length===0)return{then:()=>s};const l=ke(t,{type:"GET",path:e.map(a=>a.toString())}).then(Ee);return l.then.bind(l)}return ot(t,[...e,r])},set(o,r,l){He(i);const[a,u]=Qe(l);return ke(t,{type:"SET",path:[...e,r].map(d=>d.toString()),value:a},u).then(Ee)},apply(o,r,l){He(i);const a=e[e.length-1];if(a===qn)return ke(t,{type:"ENDPOINT"}).then(Ee);if(a==="bind")return ot(t,e.slice(0,-1));const[u,d]=Ct(l);return ke(t,{type:"APPLY",path:e.map(f=>f.toString()),argumentList:u},d).then(Ee)},construct(o,r){He(i);const[l,a]=Ct(r);return ke(t,{type:"CONSTRUCT",path:e.map(u=>u.toString()),argumentList:l},a).then(Ee)}});return ti(s,t),s}function ii(t){return Array.prototype.concat.apply([],t)}function Ct(t){const e=t.map(Qe);return[e.map(n=>n[0]),ii(e.map(n=>n[1]))]}const xt=new WeakMap;function en(t,e){return xt.set(t,e),t}function ri(t){return Object.assign(t,{[$t]:!0})}function Qe(t){for(const[e,n]of qt)if(n.canHandle(t)){const[i,s]=n.serialize(t);return[{type:"HANDLER",name:e,value:i},s]}return[{type:"RAW",value:t},xt.get(t)||[]]}function Ee(t){switch(t.type){case"HANDLER":return qt.get(t.name).deserialize(t.value);case"RAW":return t.value}}function ke(t,e,n){return new Promise(i=>{const s=si();t.addEventListener("message",function o(r){!r.data||!r.data.id||r.data.id!==s||(t.removeEventListener("message",o),i(r.data))}),t.start&&t.start(),t.postMessage(Object.assign({id:s},e),n)})}function si(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}function oi(){return new Worker(""+new URL("../workers/renderingWorker-507c4fff.js",import.meta.url).href)}function li(t,e){const n=t.transferControlToOffscreen(),i=new oi,s=ut(i);let o=null,r=null,l=()=>{};return s.errorDiffusionDithering(en(n,[n]),e).then(a=>{r=a.update,l=a.destroy,r(o||e)}),{update:a=>{r?r(a):o=a},destroy:()=>{l(),i.terminate()}}}function ai(t){let e,n,i,s,o,r,l;return{c(){e=E("div"),n=E("label"),i=$(t[1]),s=R(),o=E("input"),this.h()},l(a){e=A(a,"DIV",{});var u=S(e);n=A(u,"LABEL",{for:!0,class:!0});var d=S(n);i=Z(d,t[1]),d.forEach(_),s=C(u),o=A(u,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0,name:!0,class:!0}),u.forEach(_),this.h()},h(){c(n,"for",t[6]),c(n,"class","block mb-2 text-sm font-medium text-gray-900 dark:text-white"),c(o,"id",t[6]),c(o,"type","range"),c(o,"min",t[3]),c(o,"max",t[4]),c(o,"step",t[5]),c(o,"name",t[2]),c(o,"class","w-full h-1.5 mb-6 bg-white ring-1 ring-gray-300 shadow-sm rounded-lg appearance-none cursor-pointer accent-indigo-600 dark:bg-gray-700")},m(a,u){O(a,e,u),g(e,n),g(n,i),g(e,s),g(e,o),Se(o,t[0]),r||(l=[J(o,"change",t[7]),J(o,"input",t[7])],r=!0)},p(a,[u]){u&2&&xe(i,a[1]),u&8&&c(o,"min",a[3]),u&16&&c(o,"max",a[4]),u&32&&c(o,"step",a[5]),u&4&&c(o,"name",a[2]),u&1&&Se(o,a[0])},i:ue,o:ue,d(a){a&&_(e),r=!1,Fe(l)}}}function ui(t,e,n){let{label:i}=e,{name:s=void 0}=e,{min:o=null}=e,{max:r=null}=e,{value:l=0}=e,{step:a=1}=e,u=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);function d(){l=gn(this.value),n(0,l)}return t.$$set=f=>{"label"in f&&n(1,i=f.label),"name"in f&&n(2,s=f.name),"min"in f&&n(3,o=f.min),"max"in f&&n(4,r=f.max),"value"in f&&n(0,l=f.value),"step"in f&&n(5,a=f.step)},[l,i,s,o,r,a,u,d]}class Ke extends fe{constructor(e){super(),ce(this,e,ui,ai,de,{label:1,name:2,min:3,max:4,value:0,step:5})}}function Pt(t,e,n){const i=t.slice();return i[6]=e[n],i}function Nt(t){let e,n=t[6].name+"",i,s,o;return{c(){e=E("option"),i=$(n),this.h()},l(r){e=A(r,"OPTION",{});var l=S(e);i=Z(l,n),l.forEach(_),this.h()},h(){e.__value=s=t[6].value,e.value=e.__value,e.selected=o=t[6].value===t[0]},m(r,l){O(r,e,l),g(e,i)},p(r,l){l&2&&n!==(n=r[6].name+"")&&xe(i,n),l&2&&s!==(s=r[6].value)&&(e.__value=s,e.value=e.__value),l&3&&o!==(o=r[6].value===r[0])&&(e.selected=o)},d(r){r&&_(e)}}}function fi(t){let e,n,i,s,o,r,l,a=t[1],u=[];for(let d=0;d<a.length;d+=1)u[d]=Nt(Pt(t,a,d));return{c(){e=E("div"),n=E("label"),i=$(t[2]),s=R(),o=E("select");for(let d=0;d<u.length;d+=1)u[d].c();this.h()},l(d){e=A(d,"DIV",{});var f=S(e);n=A(f,"LABEL",{for:!0,class:!0});var m=S(n);i=Z(m,t[2]),m.forEach(_),s=C(f),o=A(f,"SELECT",{id:!0,name:!0,class:!0});var L=S(o);for(let b=0;b<u.length;b+=1)u[b].l(L);L.forEach(_),f.forEach(_),this.h()},h(){c(n,"for",t[4]),c(n,"class","block text-sm font-medium leading-6 text-gray-900"),c(o,"id",t[4]),c(o,"name",t[3]),c(o,"class","mt-2 block w-full rounded-md border-0 py-1.5 pl-3 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-indigo-600 sm:text-sm sm:leading-6"),t[0]===void 0&&_n(()=>t[5].call(o))},m(d,f){O(d,e,f),g(e,n),g(n,i),g(e,s),g(e,o);for(let m=0;m<u.length;m+=1)u[m]&&u[m].m(o,null);vt(o,t[0],!0),r||(l=J(o,"change",t[5]),r=!0)},p(d,[f]){if(f&4&&xe(i,d[2]),f&3){a=d[1];let m;for(m=0;m<a.length;m+=1){const L=Pt(d,a,m);u[m]?u[m].p(L,f):(u[m]=Nt(L),u[m].c(),u[m].m(o,null))}for(;m<u.length;m+=1)u[m].d(1);u.length=a.length}f&8&&c(o,"name",d[3]),f&3&&vt(o,d[0])},i:ue,o:ue,d(d){d&&_(e),lt(u,d),r=!1,l()}}}function ci(t,e,n){let{options:i}=e,{selected:s}=e,{label:o}=e,{name:r=void 0}=e,l=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);function a(){s=pn(this),n(0,s),n(1,i)}return t.$$set=u=>{"options"in u&&n(1,i=u.options),"selected"in u&&n(0,s=u.selected),"label"in u&&n(2,o=u.label),"name"in u&&n(3,r=u.name)},[s,i,o,r,l,a]}class tn extends fe{constructor(e){super(),ce(this,e,ci,fi,de,{options:1,selected:0,label:2,name:3})}}function di(t){let e,n,i,s,o,r;function l(f){t[5](f)}let a={label:"Diffusion Mode",options:t[2]};t[1]!==void 0&&(a.selected=t[1]),e=new tn({props:a}),q.push(()=>ee(e,"selected",l));function u(f){t[6](f)}let d={label:"Diffusion Strength ("+t[0]+")",min:0,max:2,step:.01};return t[0]!==void 0&&(d.value=t[0]),s=new Ke({props:d}),q.push(()=>ee(s,"value",u)),{c(){H(e.$$.fragment),i=R(),H(s.$$.fragment)},l(f){Y(e.$$.fragment,f),i=C(f),Y(s.$$.fragment,f)},m(f,m){j(e,f,m),O(f,i,m),j(s,f,m),r=!0},p(f,[m]){const L={};!n&&m&2&&(n=!0,L.selected=f[1],te(()=>n=!1)),e.$set(L);const b={};m&1&&(b.label="Diffusion Strength ("+f[0]+")"),!o&&m&1&&(o=!0,b.value=f[0],te(()=>o=!1)),s.$set(b)},i(f){r||(U(e.$$.fragment,f),U(s.$$.fragment,f),r=!0)},o(f){F(e.$$.fragment,f),F(s.$$.fragment,f),r=!1},d(f){G(e,f),f&&_(i),G(s,f)}}}function hi(t,e,n){let{diffusionStrength:i}=e,{diffusionMatrix:s}=e,{diffusionOriginX:o}=e,r="floyd_steinberg";const l=[{name:"Basic",value:"basic"},{name:"Floyd-Steinberg",value:"floyd_steinberg"},{name:"Atkinson",value:"atkinson"},{name:"Jarvis-Judice-Ninke",value:"jarvis_judice_ninke"}],a={basic:{matrix:[[0,1/2],[1/2,0]],originX:0},floyd_steinberg:{matrix:[[0,0,7/16],[3/16,5/16,1/16]],originX:1},atkinson:{matrix:[[0,0,1/8,1/8],[1/8,1/8,1/8,0],[0,1/8,0,0]],originX:1},jarvis_judice_ninke:{matrix:[[0,0,0,7/48,5/48],[3/48,5/48,7/48,5/48,3/48],[1/48,3/48,5/48,3/48,1/48]],originX:2}};function u(f){r=f,n(1,r)}function d(f){i=f,n(0,i)}return t.$$set=f=>{"diffusionStrength"in f&&n(0,i=f.diffusionStrength),"diffusionMatrix"in f&&n(3,s=f.diffusionMatrix),"diffusionOriginX"in f&&n(4,o=f.diffusionOriginX)},t.$$.update=()=>{if(t.$$.dirty&2){const{matrix:f,originX:m}=a[r];n(3,s=f),n(4,o=m)}},[i,r,l,s,o,u,d]}class mi extends fe{constructor(e){super(),ce(this,e,hi,di,de,{diffusionStrength:0,diffusionMatrix:3,diffusionOriginX:4})}}function Ut(t,e,n){const i=t.slice();return i[4]=e[n],i}function Xt(t){let e,n,i,s=!1,o,r,l=t[4].label+"",a,u,d,f,m,L;return f=vn(t[3][0]),{c(){e=E("label"),n=E("input"),o=R(),r=E("div"),a=$(l),d=R(),this.h()},l(b){e=A(b,"LABEL",{class:!0});var y=S(e);n=A(y,"INPUT",{type:!0,name:!0,class:!0}),o=C(y),r=A(y,"DIV",{class:!0});var h=S(r);a=Z(h,l),h.forEach(_),d=C(y),y.forEach(_),this.h()},h(){c(n,"type","radio"),c(n,"name","tabs"),n.__value=i=t[4].value,n.value=n.__value,c(n,"class","sr-only"),c(r,"class",u="flex items-center justify-center py-2 text-sm font-medium text-gray-700 bg-white border-b "+(t[4].value===t[0]?"border-indigo-500 border-b-2":"border-gray-300")+" cursor-pointer hover:bg-gray-50"),c(e,"class","flex-1"),f.p(n)},m(b,y){O(b,e,y),g(e,n),n.checked=n.__value===t[0],g(e,o),g(e,r),g(r,a),g(e,d),m||(L=J(n,"change",t[2]),m=!0)},p(b,y){y&2&&i!==(i=b[4].value)&&(n.__value=i,n.value=n.__value,s=!0),(s||y&3)&&(n.checked=n.__value===b[0]),y&2&&l!==(l=b[4].label+"")&&xe(a,l),y&3&&u!==(u="flex items-center justify-center py-2 text-sm font-medium text-gray-700 bg-white border-b "+(b[4].value===b[0]?"border-indigo-500 border-b-2":"border-gray-300")+" cursor-pointer hover:bg-gray-50")&&c(r,"class",u)},d(b){b&&_(e),f.r(),m=!1,L()}}}function gi(t){let e,n=t[1],i=[];for(let s=0;s<n.length;s+=1)i[s]=Xt(Ut(t,n,s));return{c(){e=E("nav");for(let s=0;s<i.length;s+=1)i[s].c();this.h()},l(s){e=A(s,"NAV",{class:!0});var o=S(e);for(let r=0;r<i.length;r+=1)i[r].l(o);o.forEach(_),this.h()},h(){c(e,"class","flex w-full")},m(s,o){O(s,e,o);for(let r=0;r<i.length;r+=1)i[r]&&i[r].m(e,null)},p(s,[o]){if(o&3){n=s[1];let r;for(r=0;r<n.length;r+=1){const l=Ut(s,n,r);i[r]?i[r].p(l,o):(i[r]=Xt(l),i[r].c(),i[r].m(e,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=n.length}},i:ue,o:ue,d(s){s&&_(e),lt(i,s)}}}function _i(t,e,n){let{tabs:i}=e,{selected:s}=e;const o=[[]];function r(){s=this.__value,n(0,s)}return t.$$set=l=>{"tabs"in l&&n(1,i=l.tabs),"selected"in l&&n(0,s=l.selected)},[s,i,r,o]}class pi extends fe{constructor(e){super(),ce(this,e,_i,gi,de,{tabs:1,selected:0})}}const vi=t=>({}),Ot=t=>({});function bi(t){let e;const n=t[2].placeholder,i=Le(n,t,t[1],Ot),s=i||Ei();return{c(){s&&s.c()},l(o){s&&s.l(o)},m(o,r){s&&s.m(o,r),e=!0},p(o,r){i&&i.p&&(!e||r&2)&&Ie(i,n,o,o[1],e?Me(n,o[1],r,vi):De(o[1]),Ot)},i(o){e||(U(s,o),e=!0)},o(o){F(s,o),e=!1},d(o){s&&s.d(o)}}}function wi(t){let e,n,i,s;return{c(){e=E("canvas"),this.h()},l(o){e=A(o,"CANVAS",{class:!0,style:!0}),S(e).forEach(_),this.h()},h(){c(e,"class","w-full max-h-96 object-contain shadow-lg"),rt(e,"image-rendering","pixelated")},m(o,r){O(o,e,r),i||(s=Oe(n=yi.call(null,e,t[0])),i=!0)},p(o,r){n&&at(n.update)&&r&1&&n.update.call(null,o[0])},i:ue,o:ue,d(o){o&&_(e),i=!1,s()}}}function Ei(t){let e,n;return{c(){e=E("span"),n=$("No Image")},l(i){e=A(i,"SPAN",{});var s=S(e);n=Z(s,"No Image"),s.forEach(_)},m(i,s){O(i,e,s),g(e,n)},p:ue,d(i){i&&_(e)}}}function Ai(t){let e,n,i,s;const o=[wi,bi],r=[];function l(a,u){return a[0]?0:1}return n=l(t),i=r[n]=o[n](t),{c(){e=E("div"),i.c(),this.h()},l(a){e=A(a,"DIV",{class:!0});var u=S(e);i.l(u),u.forEach(_),this.h()},h(){c(e,"class","w-full aspect-square rounded-lg bg-gray-100 p-8 grid place-items-center")},m(a,u){O(a,e,u),r[n].m(e,null),s=!0},p(a,[u]){let d=n;n=l(a),n===d?r[n].p(a,u):(je(),F(r[d],1,1,()=>{r[d]=null}),Ge(),i=r[n],i?i.p(a,u):(i=r[n]=o[n](a),i.c()),U(i,1),i.m(e,null))},i(a){s||(U(i),s=!0)},o(a){F(i),s=!1},d(a){a&&_(e),r[n].d()}}}function yi(t,e){const n=t.getContext("2d");if(!n)return;const i=()=>{t.width=e.width,t.height=e.height,n.putImageData(e,0,0)};let s=null;const o=()=>{s||(s=requestAnimationFrame(()=>{s=null,i()}))};return o(),{destroy(){s&&cancelAnimationFrame(s)},update:r=>{e=r,o()}}}function ki(t,e,n){let{$$slots:i={},$$scope:s}=e,{imageData:o}=e;return t.$$set=r=>{"imageData"in r&&n(0,o=r.imageData),"$$scope"in r&&n(1,s=r.$$scope)},[o,s,i]}class Ti extends fe{constructor(e){super(),ce(this,e,ki,Ai,de,{imageData:0})}}function Si(){return new Worker(""+new URL("../workers/worker-09b3192d.js",import.meta.url).href)}let it=null;async function Li(t){return it||(it=ut(new Si)),await it.generate(t)}function Bt(t){let e,n,i;function s(r){t[9](r)}let o={label:"Bayer Level ("+t[4]+")",min:0,max:5,step:1};return t[4]!==void 0&&(o.value=t[4]),e=new Ke({props:o}),q.push(()=>ee(e,"value",s)),{c(){H(e.$$.fragment)},l(r){Y(e.$$.fragment,r)},m(r,l){j(e,r,l),i=!0},p(r,l){const a={};l&16&&(a.label="Bayer Level ("+r[4]+")"),!n&&l&16&&(n=!0,a.value=r[4],te(()=>n=!1)),e.$set(a)},i(r){i||(U(e.$$.fragment,r),i=!0)},o(r){F(e.$$.fragment,r),i=!1},d(r){G(e,r)}}}function Ft(t){let e,n,i;function s(r){t[10](r)}let o={aspectRatio:1,minWidth:1,minHeight:1,maxHeight:3e3,maxWidth:3e3};return t[5]!==void 0&&(o.width=t[5]),e=new jt({props:o}),q.push(()=>ee(e,"width",s)),{c(){H(e.$$.fragment)},l(r){Y(e.$$.fragment,r)},m(r,l){j(e,r,l),i=!0},p(r,l){const a={};!n&&l&32&&(n=!0,a.width=r[5],te(()=>n=!1)),e.$set(a)},i(r){i||(U(e.$$.fragment,r),i=!0)},o(r){F(e.$$.fragment,r),i=!1},d(r){G(e,r)}}}function Ii(t){let e,n;return{c(){e=E("span"),n=$("Loading Threshold Map"),this.h()},l(i){e=A(i,"SPAN",{slot:!0});var s=S(e);n=Z(s,"Loading Threshold Map"),s.forEach(_),this.h()},h(){c(e,"slot","placeholder")},m(i,s){O(i,e,s),g(e,n)},p:ue,d(i){i&&_(e)}}}function Di(t){let e,n,i,s,o,r,l,a,u,d,f,m,L;function b(p){t[8](p)}let y={label:"Threshold Map",options:t[6]};t[3]!==void 0&&(y.selected=t[3]),e=new tn({props:y}),q.push(()=>ee(e,"selected",b));let h=t[3]==="bayer"&&Bt(t),v=t[3]==="white_noise"&&Ft(t);r=new Ti({props:{imageData:t[0],$$slots:{placeholder:[Ii]},$$scope:{ctx:t}}});function T(p){t[11](p)}let w={label:"Threshold ("+t[1]+")",min:0,max:1,step:.01};t[1]!==void 0&&(w.value=t[1]),a=new Ke({props:w}),q.push(()=>ee(a,"value",T));function k(p){t[12](p)}let D={label:"Noise Intensity ("+t[2]+")",min:0,max:1.5,step:.01};return t[2]!==void 0&&(D.value=t[2]),f=new Ke({props:D}),q.push(()=>ee(f,"value",k)),{c(){H(e.$$.fragment),i=R(),h&&h.c(),s=R(),v&&v.c(),o=R(),H(r.$$.fragment),l=R(),H(a.$$.fragment),d=R(),H(f.$$.fragment)},l(p){Y(e.$$.fragment,p),i=C(p),h&&h.l(p),s=C(p),v&&v.l(p),o=C(p),Y(r.$$.fragment,p),l=C(p),Y(a.$$.fragment,p),d=C(p),Y(f.$$.fragment,p)},m(p,I){j(e,p,I),O(p,i,I),h&&h.m(p,I),O(p,s,I),v&&v.m(p,I),O(p,o,I),j(r,p,I),O(p,l,I),j(a,p,I),O(p,d,I),j(f,p,I),L=!0},p(p,[I]){const P={};!n&&I&8&&(n=!0,P.selected=p[3],te(()=>n=!1)),e.$set(P),p[3]==="bayer"?h?(h.p(p,I),I&8&&U(h,1)):(h=Bt(p),h.c(),U(h,1),h.m(s.parentNode,s)):h&&(je(),F(h,1,1,()=>{h=null}),Ge()),p[3]==="white_noise"?v?(v.p(p,I),I&8&&U(v,1)):(v=Ft(p),v.c(),U(v,1),v.m(o.parentNode,o)):v&&(je(),F(v,1,1,()=>{v=null}),Ge());const B={};I&1&&(B.imageData=p[0]),I&8192&&(B.$$scope={dirty:I,ctx:p}),r.$set(B);const W={};I&2&&(W.label="Threshold ("+p[1]+")"),!u&&I&2&&(u=!0,W.value=p[1],te(()=>u=!1)),a.$set(W);const X={};I&4&&(X.label="Noise Intensity ("+p[2]+")"),!m&&I&4&&(m=!0,X.value=p[2],te(()=>m=!1)),f.$set(X)},i(p){L||(U(e.$$.fragment,p),U(h),U(v),U(r.$$.fragment,p),U(a.$$.fragment,p),U(f.$$.fragment,p),L=!0)},o(p){F(e.$$.fragment,p),F(h),F(v),F(r.$$.fragment,p),F(a.$$.fragment,p),F(f.$$.fragment,p),L=!1},d(p){G(e,p),p&&_(i),h&&h.d(p),p&&_(s),v&&v.d(p),p&&_(o),G(r,p),p&&_(l),G(a,p),p&&_(d),G(f,p)}}}function Mi(t,e,n){let i,{thresholdMap:s}=e,{threshold:o}=e,{noiseIntensity:r}=e,l="bayer";const a=[{name:"Bayer",value:"bayer"},{name:"Blue Noise",value:"blue_noise"},{name:"White Noise",value:"white_noise"}];let u=3,d=256;function f(h){l=h,n(3,l)}function m(h){u=h,n(4,u)}function L(h){d=h,n(5,d)}function b(h){o=h,n(1,o)}function y(h){r=h,n(2,r)}return t.$$set=h=>{"thresholdMap"in h&&n(0,s=h.thresholdMap),"threshold"in h&&n(1,o=h.threshold),"noiseIntensity"in h&&n(2,r=h.noiseIntensity)},t.$$.update=()=>{if(t.$$.dirty&32&&n(7,i=d),t.$$.dirty&184&&"ImageData"in globalThis){let h;switch(l){case"bayer":h={mode:"bayer",level:u};break;case"blue_noise":h={mode:"blue_noise"};break;case"white_noise":h={mode:"white_noise",width:d,height:i};break}Li(h).then(v=>n(0,s=v))}},[s,o,r,l,u,d,a,i,f,m,L,b,y]}class Ri extends fe{constructor(e){super(),ce(this,e,Mi,Di,de,{thresholdMap:0,threshold:1,noiseIntensity:2})}}const Ci=t=>({}),Wt=t=>({});function Pi(t){let e,n,i,s,o,r,l,a,u,d,f,m;s=new Re({props:{src:t[0]?bt:wt,class:"w-6 h-6 text-gray-500"}});const L=t[2].header,b=Le(L,t,t[1],Wt),y=t[2].default,h=Le(y,t,t[1],null);return{c(){e=E("div"),n=E("header"),i=E("button"),H(s.$$.fragment),o=R(),r=E("div"),b&&b.c(),l=R(),a=E("section"),h&&h.c(),this.h()},l(v){e=A(v,"DIV",{class:!0});var T=S(e);n=A(T,"HEADER",{class:!0});var w=S(n);i=A(w,"BUTTON",{class:!0});var k=S(i);Y(s.$$.fragment,k),k.forEach(_),o=C(w),r=A(w,"DIV",{class:!0});var D=S(r);b&&b.l(D),D.forEach(_),w.forEach(_),l=C(T),a=A(T,"SECTION",{class:!0});var p=S(a);h&&h.l(p),p.forEach(_),T.forEach(_),this.h()},h(){c(i,"class","contents"),c(r,"class","flex flex-1 items-center justify-between"),c(n,"class","py-4 px-4 flex-shrink-0 shadow-sm z-10 flex gap-2 items-center justify-between"),c(a,"class","overflow-y-auto overflow-x-visible"),Te(a,"hidden",!t[0]),c(e,"class",u="w-full max-h-full "+(t[0]?"h-full divide-y divide-gray-200 mt-auto":"")+" bg-white border border-gray-100 overflow-y-hidden flex-1 shadow-lg rounded-md flex flex-col justify-start pointer-events-auto touch-auto")},m(v,T){O(v,e,T),g(e,n),g(n,i),j(s,i,null),g(n,o),g(n,r),b&&b.m(r,null),g(e,l),g(e,a),h&&h.m(a,null),d=!0,f||(m=J(i,"click",t[3]),f=!0)},p(v,[T]){const w={};T&1&&(w.src=v[0]?bt:wt),s.$set(w),b&&b.p&&(!d||T&2)&&Ie(b,L,v,v[1],d?Me(L,v[1],T,Ci):De(v[1]),Wt),h&&h.p&&(!d||T&2)&&Ie(h,y,v,v[1],d?Me(y,v[1],T,null):De(v[1]),null),(!d||T&1)&&Te(a,"hidden",!v[0]),(!d||T&1&&u!==(u="w-full max-h-full "+(v[0]?"h-full divide-y divide-gray-200 mt-auto":"")+" bg-white border border-gray-100 overflow-y-hidden flex-1 shadow-lg rounded-md flex flex-col justify-start pointer-events-auto touch-auto"))&&c(e,"class",u)},i(v){d||(U(s.$$.fragment,v),U(b,v),U(h,v),d=!0)},o(v){F(s.$$.fragment,v),F(b,v),F(h,v),d=!1},d(v){v&&_(e),G(s),b&&b.d(v),h&&h.d(v),f=!1,m()}}}function Ni(t,e,n){let{$$slots:i={},$$scope:s}=e,{open:o=!1}=e;const r=()=>n(0,o=!o);return t.$$set=l=>{"open"in l&&n(0,o=l.open),"$$scope"in l&&n(1,s=l.$$scope)},[o,s,i,r]}class Ui extends fe{constructor(e){super(),ce(this,e,Ni,Pi,de,{open:0})}}function Vt(t,e,n){const i=t.slice();return i[38]=e[n],i}function Xi(t){let e,n,i,s,o,r,l,a,u,d,f,m,L,b,y,h,v,T,w=t[17],k=[];for(let D=0;D<w.length;D+=1)k[D]=zt(Vt(t,w,D));return d=new Re({props:{src:yn,class:"w-12 h-12 text-gray-400"}}),{c(){e=E("div"),n=E("div"),i=E("p"),s=$("Select or Drop an Image to Start"),o=R(),r=E("div");for(let D=0;D<k.length;D+=1)k[D].c();l=R(),a=E("label"),u=E("div"),H(d.$$.fragment),f=R(),m=E("span"),L=$("Choose an Image"),b=R(),y=E("input"),this.h()},l(D){e=A(D,"DIV",{class:!0});var p=S(e);n=A(p,"DIV",{class:!0});var I=S(n);i=A(I,"P",{class:!0});var P=S(i);s=Z(P,"Select or Drop an Image to Start"),P.forEach(_),o=C(I),r=A(I,"DIV",{class:!0});var B=S(r);for(let ne=0;ne<k.length;ne+=1)k[ne].l(B);l=C(B),a=A(B,"LABEL",{for:!0,class:!0});var W=S(a);u=A(W,"DIV",{class:!0});var X=S(u);Y(d.$$.fragment,X),X.forEach(_),f=C(W),m=A(W,"SPAN",{class:!0});var V=S(m);L=Z(V,"Choose an Image"),V.forEach(_),b=C(W),y=A(W,"INPUT",{type:!0,class:!0,id:!0,accept:!0}),W.forEach(_),B.forEach(_),I.forEach(_),p.forEach(_),this.h()},h(){c(i,"class","text-2xl text-gray-500 text-center"),c(u,"class","grid place-items-center h-full w-full"),c(m,"class","sr-only"),c(y,"type","file"),c(y,"class","sr-only"),c(y,"id","image-input"),c(y,"accept","image/*"),c(a,"for","image-input"),c(a,"class","block spect-square h-24 w-24 object-cover rounded-md shadow-md border-2 border-white bg-white hover:bg-gray-100"),c(r,"class","flex gap-3 justify-center flex-wrap"),c(n,"class","grid gap-4"),c(e,"class","w-full h-full grid place-items-center px-8")},m(D,p){O(D,e,p),g(e,n),g(n,i),g(i,s),g(n,o),g(n,r);for(let I=0;I<k.length;I+=1)k[I]&&k[I].m(r,null);g(r,l),g(r,a),g(a,u),j(d,u,null),g(a,f),g(a,m),g(m,L),g(a,b),g(a,y),h=!0,v||(T=J(y,"input",t[20]),v=!0)},p(D,p){if(p[0]&2228224){w=D[17];let I;for(I=0;I<w.length;I+=1){const P=Vt(D,w,I);k[I]?k[I].p(P,p):(k[I]=zt(P),k[I].c(),k[I].m(r,l))}for(;I<k.length;I+=1)k[I].d(1);k.length=w.length}},i(D){h||(U(d.$$.fragment,D),h=!0)},o(D){F(d.$$.fragment,D),h=!1},d(D){D&&_(e),lt(k,D),G(d),v=!1,T()}}}function Oi(t){let e,n,i,s,o,r,l,a;return n=new jn({props:{direction:t[15],$$slots:{right:[zi],left:[Bi]},$$scope:{ctx:t}}}),o=new Re({props:{src:kn,class:"w-5 h-5 text-white"}}),{c(){e=E("div"),H(n.$$.fragment),i=R(),s=E("button"),H(o.$$.fragment),this.h()},l(u){e=A(u,"DIV",{class:!0});var d=S(e);Y(n.$$.fragment,d),i=C(d),s=A(d,"BUTTON",{class:!0,title:!0});var f=S(s);Y(o.$$.fragment,f),f.forEach(_),d.forEach(_),this.h()},h(){c(s,"class","absolute top-0 left-0 m-4 p-2 bg-black bg-opacity-40 rounded-full"),c(s,"title","Close Image & Reset"),c(e,"class","w-full h-full relative")},m(u,d){O(u,e,d),j(n,e,null),g(e,i),g(e,s),j(o,s,null),r=!0,l||(a=J(s,"click",t[24]),l=!0)},p(u,d){const f={};d[0]&32768&&(f.direction=u[15]),d[0]&98299|d[1]&1024&&(f.$$scope={dirty:d,ctx:u}),n.$set(f)},i(u){r||(U(n.$$.fragment,u),U(o.$$.fragment,u),r=!0)},o(u){F(n.$$.fragment,u),F(o.$$.fragment,u),r=!1},d(u){u&&_(e),G(n),G(o),l=!1,a()}}}function zt(t){let e,n,i,s,o;function r(){return t[25](t[38])}return{c(){e=E("button"),n=E("img"),this.h()},l(l){e=A(l,"BUTTON",{class:!0});var a=S(e);n=A(a,"IMG",{class:!0,src:!0,alt:!0}),a.forEach(_),this.h()},h(){c(n,"class","aspect-square h-24 w-24 object-cover rounded-md shadow-md border-2 border-white"),Be(n.src,i=t[38])||c(n,"src",i),c(n,"alt",""),c(e,"class","hover:opacity-75 transition-opacity")},m(l,a){O(l,e,a),g(e,n),s||(o=J(e,"click",r),s=!0)},p(l,a){t=l},d(l){l&&_(e),s=!1,o()}}}function Bi(t){let e,n,i;return{c(){e=E("img"),this.h()},l(s){e=A(s,"IMG",{slot:!0,src:!0,alt:!0,style:!0,class:!0}),this.h()},h(){c(e,"slot","left"),Be(e.src,n=t[1].src)||c(e,"src",n),c(e,"alt",""),c(e,"style",i=`width: ${t[0]}px; height: ${t[16]}px`),c(e,"class","pixelated max-w-none shadow-lg svelte-1b7r98h")},m(s,o){O(s,e,o)},p(s,o){o[0]&2&&!Be(e.src,n=s[1].src)&&c(e,"src",n),o[0]&65537&&i!==(i=`width: ${s[0]}px; height: ${s[16]}px`)&&c(e,"style",i)},d(s){s&&_(e)}}}function Fi(t){let e,n,i;return{c(){e=E("img"),this.h()},l(s){e=A(s,"IMG",{src:!0,alt:!0,style:!0,class:!0}),this.h()},h(){Be(e.src,n=t[1].src)||c(e,"src",n),c(e,"alt",""),c(e,"style",i=`width: ${t[0]}px; height: ${t[16]}px`),c(e,"class","pixelated max-w-none shadow-lg svelte-1b7r98h")},m(s,o){O(s,e,o)},p(s,o){o[0]&2&&!Be(e.src,n=s[1].src)&&c(e,"src",n),o[0]&65537&&i!==(i=`width: ${s[0]}px; height: ${s[16]}px`)&&c(e,"style",i)},d(s){s&&_(e)}}}function Wi(t){let e,n=t[9]&&Ht(t);return{c(){n&&n.c(),e=$e()},l(i){n&&n.l(i),e=$e()},m(i,s){n&&n.m(i,s),O(i,e,s)},p(i,s){i[9]?n?n.p(i,s):(n=Ht(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(i){n&&n.d(i),i&&_(e)}}}function Vi(t){let e,n,i,s,o;return{c(){e=E("canvas"),this.h()},l(r){e=A(r,"CANVAS",{class:!0,style:!0,width:!0,height:!0}),S(e).forEach(_),this.h()},h(){c(e,"class","pixelated shadow-lg bg-gray-200 svelte-1b7r98h"),c(e,"style",n=`width: ${t[0]}px; height: ${t[16]}px`),c(e,"width",t[0]),c(e,"height",t[16])},m(r,l){O(r,e,l),t[22](e),s||(o=Oe(i=li.call(null,e,{image:t[7],output_width:t[0],output_height:t[16],monochrome:t[3],colorLight:t[4],colorDark:t[5],diffusionStrength:t[12],diffusionMatrix:t[13],diffusionMatrixOriginX:t[14]})),s=!0)},p(r,l){l[0]&65537&&n!==(n=`width: ${r[0]}px; height: ${r[16]}px`)&&c(e,"style",n),l[0]&1&&c(e,"width",r[0]),l[0]&65536&&c(e,"height",r[16]),i&&at(i.update)&&l[0]&94393&&i.update.call(null,{image:r[7],output_width:r[0],output_height:r[16],monochrome:r[3],colorLight:r[4],colorDark:r[5],diffusionStrength:r[12],diffusionMatrix:r[13],diffusionMatrixOriginX:r[14]})},d(r){r&&_(e),t[22](null),s=!1,o()}}}function Ht(t){let e,n,i,s,o;return{c(){e=E("canvas"),this.h()},l(r){e=A(r,"CANVAS",{class:!0,style:!0,width:!0,height:!0,"aria-label":!0}),S(e).forEach(_),this.h()},h(){c(e,"class","pixelated shadow-lg svelte-1b7r98h"),c(e,"style",n=`width: ${t[0]}px; height: ${t[16]}px`),c(e,"width",t[0]),c(e,"height",t[16]),c(e,"aria-label","Dithered Image")},m(r,l){O(r,e,l),t[23](e),s||(o=Oe(i=Cn.call(null,e,{image:t[7],threshold:t[10],noiseIntensity:t[11],monochrome:t[3],colorLight:t[4],colorDark:t[5],output_width:t[0],output_height:t[16],thresholdMap:t[9]})),s=!0)},p(r,l){l[0]&65537&&n!==(n=`width: ${r[0]}px; height: ${r[16]}px`)&&c(e,"style",n),l[0]&1&&c(e,"width",r[0]),l[0]&65536&&c(e,"height",r[16]),i&&at(i.update)&&l[0]&69305&&i.update.call(null,{image:r[7],threshold:r[10],noiseIntensity:r[11],monochrome:r[3],colorLight:r[4],colorDark:r[5],output_width:r[0],output_height:r[16],thresholdMap:r[9]})},d(r){r&&_(e),t[23](null),s=!1,o()}}}function zi(t){let e;function n(o,r){if(o[8]==="error_diffusion")return Vi;if(o[8]==="ordered")return Wi;if(o[8]==="none")return Fi}let i=n(t),s=i&&i(t);return{c(){s&&s.c(),e=$e()},l(o){s&&s.l(o),e=$e()},m(o,r){s&&s.m(o,r),O(o,e,r)},p(o,r){i===(i=n(o))&&s?s.p(o,r):(s&&s.d(1),s=i&&i(o),s&&(s.c(),s.m(e.parentNode,e)))},d(o){s&&s.d(o),o&&_(e)}}}function Yt(t){let e,n,i,s,o,r,l,a,u,d,f,m,L,b;return{c(){e=E("fieldset"),n=E("div"),i=E("input"),s=R(),o=E("label"),r=$("Light"),l=R(),a=E("div"),u=E("input"),d=R(),f=E("label"),m=$("Dark"),this.h()},l(y){e=A(y,"FIELDSET",{});var h=S(e);n=A(h,"DIV",{class:!0});var v=S(n);i=A(v,"INPUT",{type:!0,name:!0,id:!0}),s=C(v),o=A(v,"LABEL",{for:!0,class:!0});var T=S(o);r=Z(T,"Light"),T.forEach(_),v.forEach(_),l=C(h),a=A(h,"DIV",{class:!0});var w=S(a);u=A(w,"INPUT",{type:!0,name:!0,id:!0}),d=C(w),f=A(w,"LABEL",{for:!0,class:!0});var k=S(f);m=Z(k,"Dark"),k.forEach(_),w.forEach(_),h.forEach(_),this.h()},h(){c(i,"type","color"),c(i,"name","color-light"),c(i,"id","color-light"),c(o,"for","color-light"),c(o,"class","font-medium text-gray-900"),c(n,"class","flex gap-3"),c(u,"type","color"),c(u,"name","color-dark"),c(u,"id","color-dark"),c(f,"for","color-dark"),c(f,"class","font-medium text-gray-900"),c(a,"class","flex gap-3")},m(y,h){O(y,e,h),g(e,n),g(n,i),Se(i,t[4]),g(n,s),g(n,o),g(o,r),g(e,l),g(e,a),g(a,u),Se(u,t[5]),g(a,d),g(a,f),g(f,m),L||(b=[J(i,"input",t[36]),J(u,"input",t[37])],L=!0)},p(y,h){h[0]&16&&Se(i,y[4]),h[0]&32&&Se(u,y[5])},d(y){y&&_(e),L=!1,Fe(b)}}}function Hi(t){let e,n,i,s,o,r,l,a,u,d,f,m,L,b,y,h,v,T,w,k,D,p,I,P,B,W,X,V,ne,ge,Q,ae,_e,he,re,se,ie,Ce,pe,me,N,K,oe,Pe,ft;function nn(M){t[26](M)}function rn(M){t[27](M)}let et={minWidth:12,minHeight:12,maxHeight:5e3,maxWidth:5e3};t[0]!==void 0&&(et.width=t[0]),t[2]!==void 0&&(et.aspectRatio=t[2]),r=new jt({props:et}),q.push(()=>ee(r,"width",nn)),q.push(()=>ee(r,"aspectRatio",rn));function sn(M){t[28](M)}let ct={tabs:[{label:"None",value:"none"},{label:"Ordered",value:"ordered"},{label:"Error Diffusion",value:"error_diffusion"}]};t[8]!==void 0&&(ct.selected=t[8]),b=new pi({props:ct}),q.push(()=>ee(b,"selected",sn));function on(M){t[29](M)}function ln(M){t[30](M)}function an(M){t[31](M)}let We={};t[12]!==void 0&&(We.diffusionStrength=t[12]),t[13]!==void 0&&(We.diffusionMatrix=t[13]),t[14]!==void 0&&(We.diffusionOriginX=t[14]),T=new mi({props:We}),q.push(()=>ee(T,"diffusionStrength",on)),q.push(()=>ee(T,"diffusionMatrix",ln)),q.push(()=>ee(T,"diffusionOriginX",an));function un(M){t[32](M)}function fn(M){t[33](M)}function cn(M){t[34](M)}let Ve={};t[9]!==void 0&&(Ve.thresholdMap=t[9]),t[11]!==void 0&&(Ve.noiseIntensity=t[11]),t[10]!==void 0&&(Ve.threshold=t[10]),B=new Ri({props:Ve}),q.push(()=>ee(B,"thresholdMap",un)),q.push(()=>ee(B,"noiseIntensity",fn)),q.push(()=>ee(B,"threshold",cn));let x=t[3]&&Yt(t);return{c(){e=E("section"),n=E("div"),i=E("h2"),s=$("Output Options"),o=R(),H(r.$$.fragment),u=R(),d=E("div"),f=E("h2"),m=$("Dithering Options"),L=R(),H(b.$$.fragment),h=R(),v=E("div"),H(T.$$.fragment),I=R(),P=E("div"),H(B.$$.fragment),ge=R(),Q=E("div"),ae=E("h2"),_e=$("Palette"),he=R(),re=E("div"),se=E("div"),ie=E("input"),Ce=R(),pe=E("div"),me=E("label"),N=$("Monochrome"),K=R(),x&&x.c(),this.h()},l(M){e=A(M,"SECTION",{class:!0});var z=S(e);n=A(z,"DIV",{});var ve=S(n);i=A(ve,"H2",{class:!0});var Ne=S(i);s=Z(Ne,"Output Options"),Ne.forEach(_),o=C(ve),Y(r.$$.fragment,ve),ve.forEach(_),u=C(z),d=A(z,"DIV",{class:!0});var le=S(d);f=A(le,"H2",{class:!0});var we=S(f);m=Z(we,"Dithering Options"),we.forEach(_),L=C(le),Y(b.$$.fragment,le),h=C(le),v=A(le,"DIV",{class:!0});var dt=S(v);Y(T.$$.fragment,dt),dt.forEach(_),I=C(le),P=A(le,"DIV",{class:!0});var ht=S(P);Y(B.$$.fragment,ht),ht.forEach(_),le.forEach(_),ge=C(z),Q=A(z,"DIV",{class:!0});var Ae=S(Q);ae=A(Ae,"H2",{class:!0});var mt=S(ae);_e=Z(mt,"Palette"),mt.forEach(_),he=C(Ae),re=A(Ae,"DIV",{class:!0});var ze=S(re);se=A(ze,"DIV",{class:!0});var gt=S(se);ie=A(gt,"INPUT",{type:!0,id:!0,class:!0}),gt.forEach(_),Ce=C(ze),pe=A(ze,"DIV",{class:!0});var _t=S(pe);me=A(_t,"LABEL",{for:!0,class:!0});var pt=S(me);N=Z(pt,"Monochrome"),pt.forEach(_),_t.forEach(_),ze.forEach(_),K=C(Ae),x&&x.l(Ae),Ae.forEach(_),z.forEach(_),this.h()},h(){c(i,"class","text-base font-semibold leading-7 text-black mb-4"),c(f,"class","text-base font-semibold leading-7 text-black mb-2"),c(v,"class",p=t[8]==="error_diffusion"?"contents":"hidden"),c(P,"class",ne=t[8]==="ordered"?"contents":"hidden"),c(d,"class","grid gap-4"),c(ae,"class","text-base font-semibold leading-7 text-black mb-2"),c(ie,"type","checkbox"),c(ie,"id","monochrome"),c(ie,"class","h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600"),c(se,"class","flex h-6 items-center"),c(me,"for","monochrome"),c(me,"class","font-medium text-gray-900"),c(pe,"class","ml-3 text-sm leading-6"),c(re,"class","relative flex items-start"),c(Q,"class","grid gap-3"),c(e,"class","grid gap-8 pt-8 px-4 safe-padding-bottom svelte-1b7r98h")},m(M,z){O(M,e,z),g(e,n),g(n,i),g(i,s),g(n,o),j(r,n,null),g(e,u),g(e,d),g(d,f),g(f,m),g(d,L),j(b,d,null),g(d,h),g(d,v),j(T,v,null),g(d,I),g(d,P),j(B,P,null),g(e,ge),g(e,Q),g(Q,ae),g(ae,_e),g(Q,he),g(Q,re),g(re,se),g(se,ie),ie.checked=t[3],g(re,Ce),g(re,pe),g(pe,me),g(me,N),g(Q,K),x&&x.m(Q,null),oe=!0,Pe||(ft=J(ie,"change",t[35]),Pe=!0)},p(M,z){const ve={};!l&&z[0]&1&&(l=!0,ve.width=M[0],te(()=>l=!1)),!a&&z[0]&4&&(a=!0,ve.aspectRatio=M[2],te(()=>a=!1)),r.$set(ve);const Ne={};!y&&z[0]&256&&(y=!0,Ne.selected=M[8],te(()=>y=!1)),b.$set(Ne);const le={};!w&&z[0]&4096&&(w=!0,le.diffusionStrength=M[12],te(()=>w=!1)),!k&&z[0]&8192&&(k=!0,le.diffusionMatrix=M[13],te(()=>k=!1)),!D&&z[0]&16384&&(D=!0,le.diffusionOriginX=M[14],te(()=>D=!1)),T.$set(le),(!oe||z[0]&256&&p!==(p=M[8]==="error_diffusion"?"contents":"hidden"))&&c(v,"class",p);const we={};!W&&z[0]&512&&(W=!0,we.thresholdMap=M[9],te(()=>W=!1)),!X&&z[0]&2048&&(X=!0,we.noiseIntensity=M[11],te(()=>X=!1)),!V&&z[0]&1024&&(V=!0,we.threshold=M[10],te(()=>V=!1)),B.$set(we),(!oe||z[0]&256&&ne!==(ne=M[8]==="ordered"?"contents":"hidden"))&&c(P,"class",ne),z[0]&8&&(ie.checked=M[3]),M[3]?x?x.p(M,z):(x=Yt(M),x.c(),x.m(Q,null)):x&&(x.d(1),x=null)},i(M){oe||(U(r.$$.fragment,M),U(b.$$.fragment,M),U(T.$$.fragment,M),U(B.$$.fragment,M),oe=!0)},o(M){F(r.$$.fragment,M),F(b.$$.fragment,M),F(T.$$.fragment,M),F(B.$$.fragment,M),oe=!1},d(M){M&&_(e),G(r),G(b),G(T),G(B),x&&x.d(),Pe=!1,ft()}}}function Yi(t){let e,n,i;return e=new Re({props:{src:Tn,class:"w-4 h-4"}}),{c(){H(e.$$.fragment),n=$(`
				Save`)},l(s){Y(e.$$.fragment,s),n=Z(s,`
				Save`)},m(s,o){j(e,s,o),O(s,n,o),i=!0},p:ue,i(s){i||(U(e.$$.fragment,s),i=!0)},o(s){F(e.$$.fragment,s),i=!1},d(s){G(e,s),s&&_(n)}}}function ji(t){let e,n,i,s,o;return s=new Un({props:{disabled:!t[1],$$slots:{default:[Yi]},$$scope:{ctx:t}}}),s.$on("click",t[18]),{c(){e=E("h1"),n=$("Dithering"),i=R(),H(s.$$.fragment),this.h()},l(r){e=A(r,"H1",{class:!0});var l=S(e);n=Z(l,"Dithering"),l.forEach(_),i=C(r),Y(s.$$.fragment,r),this.h()},h(){c(e,"class","font-bold")},m(r,l){O(r,e,l),g(e,n),O(r,i,l),j(s,r,l),o=!0},p(r,l){const a={};l[0]&2&&(a.disabled=!r[1]),l[1]&1024&&(a.$$scope={dirty:l,ctx:r}),s.$set(a)},i(r){o||(U(s.$$.fragment,r),o=!0)},o(r){F(s.$$.fragment,r),o=!1},d(r){r&&_(e),r&&_(i),G(s,r)}}}function Gi(t){let e,n,i,s,o,r,l,a,u,d,f,m;const L=[Oi,Xi],b=[];function y(h,v){return h[7]&&h[1]?0:1}return o=y(t),r=b[o]=L[o](t),u=new Ui({props:{$$slots:{header:[ji],default:[Hi]},$$scope:{ctx:t}}}),{c(){e=R(),n=R(),i=E("main"),s=E("section"),r.c(),l=R(),a=E("aside"),H(u.$$.fragment),this.h()},l(h){bn("svelte-1hm2pfs",document.head).forEach(_),e=C(h),n=C(h),i=A(h,"MAIN",{class:!0});var T=S(i);s=A(T,"SECTION",{class:!0});var w=S(s);r.l(w),w.forEach(_),l=C(T),a=A(T,"ASIDE",{class:!0});var k=S(a);Y(u.$$.fragment,k),k.forEach(_),T.forEach(_),this.h()},h(){document.title="Dithering",c(s,"class","overflow-hidden select-none fixed inset-0"),c(a,"class","md:w-96 w-full max-h-full absolute bottom-0 left-0 right-0 top-0 md:left-auto z-50 p-2 grid place-items-end touch-none pointer-events-none"),c(i,"class","w-screen max-w-screen h-screen max-h-screen relative bg-gray-300")},m(h,v){O(h,e,v),O(h,n,v),O(h,i,v),g(i,s),b[o].m(s,null),g(i,l),g(i,a),j(u,a,null),d=!0,f||(m=[J(document.body,"drop",st(t[19])),J(document.body,"dragover",st($i))],f=!0)},p(h,v){let T=o;o=y(h),o===T?b[o].p(h,v):(je(),F(b[T],1,1,()=>{b[T]=null}),Ge(),r=b[o],r?r.p(h,v):(r=b[o]=L[o](h),r.c()),U(r,1),r.m(s,null));const w={};v[0]&32575|v[1]&1024&&(w.$$scope={dirty:v,ctx:h}),u.$set(w)},i(h){d||(U(r),U(u.$$.fragment,h),d=!0)},o(h){F(r),F(u.$$.fragment,h),d=!1},d(h){h&&_(e),h&&_(n),h&&_(i),b[o].d(),G(u),f=!1,Fe(m)}}}const $i=()=>{};function Zi(t,e,n){let i,s;const o=[Gn,$n,Zn];let r=!1,l="#ede6cc",a="#21263f",u=null,d=300,f=null,m=null;async function L(){u&&await Xn(u,"dithered","png")}async function b(N){var oe;const K=(oe=N.dataTransfer)==null?void 0:oe.files[0];if(K){if(!K.type.startsWith("image/")){alert("Please drop an image file");return}try{n(1,f=await St(K))}catch(Pe){alert("Failed to load image"),console.error(Pe)}}}async function y(N){const K=N.target.files[0];if(K)try{n(1,f=await St(K))}catch(oe){alert("Failed to load image"),console.error(oe)}}async function h(N){const K=new Image;K.onload=()=>{n(1,f=K)},K.src=N}let v="ordered",T=null,w=.5,k=.3,D=1,p=[[1]],I=0,P="horizontal";wn(()=>{const N=window.matchMedia("(min-width: 768px)");function K(oe){oe.matches?n(15,P="horizontal"):n(15,P="vertical")}return N.addEventListener("change",K),K(N),()=>N.removeEventListener("change",K)});function B(N){q[N?"unshift":"push"](()=>{u=N,n(6,u)})}function W(N){q[N?"unshift":"push"](()=>{u=N,n(6,u)})}const X=()=>n(1,f=null),V=N=>h(N);function ne(N){d=N,n(0,d)}function ge(N){s=N,n(2,s),n(1,f)}function Q(N){v=N,n(8,v)}function ae(N){D=N,n(12,D)}function _e(N){p=N,n(13,p)}function he(N){I=N,n(14,I)}function re(N){T=N,n(9,T)}function se(N){k=N,n(11,k)}function ie(N){w=N,n(10,w)}function Ce(){r=this.checked,n(3,r)}function pe(){l=this.value,n(4,l)}function me(){a=this.value,n(5,a)}return t.$$.update=()=>{t.$$.dirty[0]&2&&n(2,s=f!=null&&f.width&&(f!=null&&f.height)?f.width/f.height:1),t.$$.dirty[0]&5&&n(16,i=Math.round(d/s)),t.$$.dirty[0]&2&&(f?n(7,m=On(f)):n(7,m=null))},[d,f,s,r,l,a,u,m,v,T,w,k,D,p,I,P,i,o,L,b,y,h,B,W,X,V,ne,ge,Q,ae,_e,he,re,se,ie,Ce,pe,me]}class Ji extends fe{constructor(e){super(),ce(this,e,Zi,Gi,de,{},null,[-1,-1])}}export{Ji as component};
