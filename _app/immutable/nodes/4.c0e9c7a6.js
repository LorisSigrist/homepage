import{S as Q,i as Y,s as J,y as X,a as M,k as w,q as B,e as L,z as tt,c as v,l as y,r as U,n as b,A as et,b as d,O as x,M as st,u as V,g as nt,d as rt,B as it,h as _,m as A,L as ot,G as k,P as lt,Q as at}from"../chunks/index.fae6157f.js";import{M as ut}from"../chunks/Metadata.288554f9.js";function ct(){return{title:"Blurhash",author:"Loris Sigrist",description:"Description TBD, I don't know what it is yet."}}const Nt=Object.freeze(Object.defineProperty({__proto__:null,load:ct},Symbol.toStringTag,{value:"Module"}));var ft=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"],C=e=>{let t=0;for(let s=0;s<e.length;s++){let r=e[s],a=ft.indexOf(r);t=t*83+a}return t},E=e=>{let t=e/255;return t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)},N=e=>{let t=Math.max(0,Math.min(1,e));return t<=.0031308?Math.trunc(t*12.92*255+.5):Math.trunc((1.055*Math.pow(t,.4166666666666667)-.055)*255+.5)},ht=e=>e<0?-1:1,T=(e,t)=>ht(e)*Math.pow(Math.abs(e),t),O=class extends Error{constructor(e){super(e),this.name="ValidationError",this.message=e}},q=e=>{if(!e||e.length<6)throw new O("The blurhash string must be at least 6 characters");let t=C(e[0]),s=Math.floor(t/9)+1,r=t%9+1;if(e.length!==4+2*r*s)throw new O(`blurhash length mismatch: length is ${e.length} but it should be ${4+2*r*s}`)},pt=e=>{try{q(e)}catch(t){return{result:!1,errorReason:t.message}}return{result:!0}},mt=e=>{let t=e>>16,s=e>>8&255,r=e&255;return[E(t),E(s),E(r)]},gt=(e,t)=>{let s=Math.floor(e/361),r=Math.floor(e/19)%19,a=e%19;return[T((s-9)/9,2)*t,T((r-9)/9,2)*t,T((a-9)/9,2)*t]},_t=(e,t,s,r)=>{q(e),r=r|1;let a=C(e[0]),l=Math.floor(a/9)+1,h=a%9+1,m=(C(e[1])+1)/166,u=new Array(h*l);for(let o=0;o<u.length;o++)if(o===0){let i=C(e.substring(2,6));u[o]=mt(i)}else{let i=C(e.substring(4+o*2,6+o*2));u[o]=gt(i,m*r)}let f=t*4,g=new Uint8ClampedArray(f*s);for(let o=0;o<s;o++)for(let i=0;i<t;i++){let c=0,n=0,p=0;for(let S=0;S<l;S++)for(let $=0;$<h;$++){let P=Math.cos(Math.PI*i*$/t)*Math.cos(Math.PI*o*S/s),I=u[$+S*h];c+=I[0]*P,n+=I[1]*P,p+=I[2]*P}let K=N(c),W=N(n),Z=N(p);g[4*i+0+o*f]=K,g[4*i+1+o*f]=W,g[4*i+2+o*f]=Z,g[4*i+3+o*f]=255}return g},G=_t;const dt=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"],bt=e=>{let t=0;for(let s=0;s<e.length;s++){const r=e[s],a=dt.indexOf(r);t=t*83+a}return t},Mt={width:8,height:8,blur:20};function wt(e,t={}){const{width:s,height:r,blur:a}={...Mt,...t},l=G(e,s,r,1),h=j(1/s)+" 100%",m="no-repeat",u=[],f=[];for(let o=0;o<s;o++){const i=[];for(let n=0;n<r;n++){const p=vt(l,o,n,s);i.push(p)}f.push(`linear-gradient(${i.join(",")})`);const c=o==0?"0 0":`${j(o/(s-1))} 0`;u.push(c)}const g=`0 0 0 10000px ${yt(e)}`;return{backgroundImage:f.join(","),backgroundPosition:u.join(","),backgroundSize:h,backgroundRepeat:m,boxShadow:g,filter:`blur(${a}px)`,clipPath:"inset(0)"}}function vt(e,t,s,r){const l=r*4,h=s*l+t*4,m=e[h],u=e[h+1],f=e[h+2];return F(m,u,f)}function j(e){const t=e*100;return t===Math.round(t)?t+"%":t.toFixed(1)+"%"}function F(e,t,s){e=Math.floor(e/16),t=Math.floor(t/16),s=Math.floor(s/16);const r=e.toString(16)[0],a=t.toString(16)[0],l=s.toString(16)[0];return"#"+r+a+l}function yt(e){const t=e.substring(2,6),s=bt(t),r=s>>16,a=s>>8&255,l=s&255;return F(r,a,l)}function Ct(e){let t="";for(const s in e){const r=St(s),a=e[s];t+=`${r}:${a};`}return t}function St(e){return e.replace(/([a-z0-9]|(?=[A-Z]))([A-Z])/g,"$1-$2").toLowerCase()}const $t=""+new URL("../assets/big.95f5c8ff.jpeg",import.meta.url).href,z={width:5616,height:3744},kt="L36@sCAb0g|;%MRkWCoe01,.~A69";function D(e){const t=e.slice(),s=Ct(t[2]);return t[5]=s,t}function H(e){let t,s,r,a,l,h,m,u,f=e[5]+"",g;return{c(){t=w("div"),s=w("div"),a=M(),l=w("img"),m=M(),u=w("p"),g=B(f),this.h()},l(o){t=y(o,"DIV",{class:!0});var i=A(t);s=y(i,"DIV",{style:!0,class:!0}),A(s).forEach(_),a=v(i),l=y(i,"IMG",{src:!0,width:!0,height:!0,alt:!0}),i.forEach(_),m=v(o),u=y(o,"P",{});var c=A(u);g=U(c,f),c.forEach(_),this.h()},h(){b(s,"style",r=e[5]),b(s,"class","absolute inset-0 -z-10"),ot(l.src,h=$t)||b(l,"src",h),b(l,"width",z.width),b(l,"height",z.height),b(l,"alt","big"),b(t,"class","relative")},m(o,i){d(o,t,i),k(t,s),k(t,a),k(t,l),d(o,m,i),d(o,u,i),k(u,g)},p(o,i){i&4&&r!==(r=o[5])&&b(s,"style",r),i&4&&f!==(f=o[5]+"")&&V(g,f)},d(o){o&&_(t),o&&_(m),o&&_(u)}}}function R(e){let t,s,r,a;return{c(){t=w("canvas"),this.h()},l(l){t=y(l,"CANVAS",{class:!0}),A(t).forEach(_),this.h()},h(){b(t,"class","w-96")},m(l,h){d(l,t,h),r||(a=lt(s=e[3].call(null,t,e[1])),r=!0)},p(l,h){s&&at(s.update)&&h&2&&s.update.call(null,l[1])},d(l){l&&_(t),r=!1,a()}}}function At(e){let t,s,r,a,l,h,m,u,f,g,o;t=new ut({});let i=e[2]&&H(D(e)),c=e[1]&&R(e);return{c(){X(t.$$.fragment),s=M(),r=w("input"),a=M(),l=B(e[0]),h=M(),i&&i.c(),m=M(),c&&c.c(),u=L(),this.h()},l(n){tt(t.$$.fragment,n),s=v(n),r=y(n,"INPUT",{type:!0}),a=v(n),l=U(n,e[0]),h=v(n),i&&i.l(n),m=v(n),c&&c.l(n),u=L(),this.h()},h(){b(r,"type","text")},m(n,p){et(t,n,p),d(n,s,p),d(n,r,p),x(r,e[0]),d(n,a,p),d(n,l,p),d(n,h,p),i&&i.m(n,p),d(n,m,p),c&&c.m(n,p),d(n,u,p),f=!0,g||(o=st(r,"input",e[4]),g=!0)},p(n,[p]){p&1&&r.value!==n[0]&&x(r,n[0]),(!f||p&1)&&V(l,n[0]),n[2]?i?i.p(D(n),p):(i=H(D(n)),i.c(),i.m(m.parentNode,m)):i&&(i.d(1),i=null),n[1]?c?c.p(n,p):(c=R(n),c.c(),c.m(u.parentNode,u)):c&&(c.d(1),c=null)},i(n){f||(nt(t.$$.fragment,n),f=!0)},o(n){rt(t.$$.fragment,n),f=!1},d(n){it(t,n),n&&_(s),n&&_(r),n&&_(a),n&&_(l),n&&_(h),i&&i.d(n),n&&_(m),c&&c.d(n),n&&_(u),g=!1,o()}}}function Pt(e,t,s){let r,a,l=kt;function h(u,f){const g=u.getContext("2d"),o=32,i=32;u.width=o,u.height=i;const c=()=>{const n=G(f,o,i),p=g.createImageData(o,i);p.data.set(n),g.putImageData(p,0,0)};return c(),{update(n){f=n,c()}}}function m(){l=this.value,s(0,l)}return e.$$.update=()=>{e.$$.dirty&1&&s(1,r=pt(l).result?l:null),e.$$.dirty&2&&s(2,a=r?wt(r,{blur:60,width:8,height:8}):null)},[l,r,a,h,m]}class Tt extends Q{constructor(t){super(),Y(this,t,Pt,At,J,{})}}export{Tt as component,Nt as universal};
