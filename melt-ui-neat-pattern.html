<!DOCTYPE html> <html lang=en> <head> <meta charset=utf-8> <meta content="width=device-width" name=viewport> <link href=./_app/immutable/assets/Metadata.DyfCrczt.css rel=stylesheet> <link href=./_app/immutable/assets/3.CqjOwtjT.css rel=stylesheet> <link href=./_app/immutable/entry/start.CvdZ12GV.js rel=modulepreload> <link href=./_app/immutable/chunks/entry.BFzQSLJW.js rel=modulepreload> <link href=./_app/immutable/chunks/scheduler.C1H_TXk1.js rel=modulepreload> <link href=./_app/immutable/chunks/index.CUyn1HNB.js rel=modulepreload> <link href=./_app/immutable/entry/app.D5sQfGwr.js rel=modulepreload> <link href=./_app/immutable/chunks/preload-helper.CP-VSAQc.js rel=modulepreload> <link href=./_app/immutable/chunks/index.DwiInUfm.js rel=modulepreload> <link href=./_app/immutable/nodes/0.CU57k8Bw.js rel=modulepreload> <link href=./_app/immutable/nodes/2.fla2BcTh.js rel=modulepreload> <link href=./_app/immutable/chunks/Metadata.BU01dWE3.js rel=modulepreload> <link href=./_app/immutable/chunks/stores.DHdtOOWR.js rel=modulepreload> <link href=./_app/immutable/chunks/each.CuygwpM4.js rel=modulepreload> <link href=./_app/immutable/chunks/theme.DJC6SJL4.js rel=modulepreload> <link href=./_app/immutable/nodes/3.Doc3i_3l.js rel=modulepreload> <link href=./_app/immutable/nodes/12.B7gIJRXb.js rel=modulepreload><title>A neat Pattern for Melt UI</title><!-- HEAD_svelte-1quh51c_START --><script data-svelte-h=svelte-ctkbxh>if("localStorage"in window){let e="dark"===localStorage.getItem("theme"),t="light"===localStorage.getItem("theme"),a=!e&&!t;if(e)document.documentElement.classList.add("dark");else if(t)document.documentElement.classList.remove("dark");else if(a){let e=window.matchMedia("(prefers-color-scheme: dark)");e.matches?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))}}</script><!-- HEAD_svelte-1quh51c_END --><!-- HEAD_svelte-170d11p_START --><meta content="A neat Pattern for Melt UI" name=og:title><meta content="A neat Pattern for Melt UI" name=twitter:title><meta content=website name=og:type> <meta content=/og/A%20neat%20Pattern%20for%20Melt%20UI.png name=og:image><link href=/_app/immutable/assets/favicon.BtYv9CGA.png rel=icon><meta content=" Sometimes I want to share behavior of my Melt UI based components with their children. I've found a neat pattern to do so." name=description><meta content="Loris Sigrist" name=author><meta content=2023-09-18T00:00:00.000Z name=date><!-- HEAD_svelte-170d11p_END --> </head> <body data-sveltekit-preload-data=hover> <header class="flex flex-row container justify-between mx-auto print:hidden px-4 py-4"><div class="flex items-center flex-row gap-4" id=header-start data-svelte-h=svelte-1la7e6x><a href=/ class="flex items-center flex-row gap-3"><picture><source srcset="/_app/immutable/assets/avatar.Bf4TRO7F.avif, /_app/immutable/assets/avatar.BkqM9Qx8.avif 2x" type=image/avif><source srcset="/_app/immutable/assets/avatar.B39wt1fA.webp, /_app/immutable/assets/avatar.D9hkS3v8.webp 2x" type=image/webp><source srcset="/_app/immutable/assets/avatar.nNTP_Lha.png, /_app/immutable/assets/avatar.B3igIkfZ.png 2x" type=image/png><img alt="Loris Sigrist looking very handsome" class="aspect-square rounded-full w-9" height=412 src=/_app/immutable/assets/avatar.B3igIkfZ.png width=412></picture> <span class="font-bold text-md">Loris Sigrist</span></a></div> <div class="flex items-center gap-2 flex-row sm:gap-4" id=header-end><a href=https://dithering.sigrist.dev class="flex items-center gap-2 rounded-md dark:text-gray-200 hover:bg-gray-100 hover:dark:bg-gray-800 p-1 sm:px-3 text-gray-800" target=_blank data-svelte-h=svelte-1ilvshw><span class="hidden sm:block">Dither Studio</span></a> <a href=https://zocker.sigrist.dev/ class="flex items-center gap-2 rounded-md dark:text-gray-200 hover:bg-gray-100 hover:dark:bg-gray-800 p-1 sm:px-3 text-gray-800" target=_blank data-svelte-h=svelte-1tefg7x><span class="hidden sm:block">Zocker</span></a> <a href=https://t18s.sigrist.dev/ class="flex items-center gap-2 rounded-md dark:text-gray-200 hover:bg-gray-100 hover:dark:bg-gray-800 p-1 sm:px-3 text-gray-800" target=_blank data-svelte-h=svelte-1spq4jh><span class="hidden sm:block">t18s</span></a> <a href=https://www.github.com/LorisSigrist class="flex items-center gap-2 rounded-md dark:text-gray-200 hover:bg-gray-100 hover:dark:bg-gray-800 p-1 sm:px-3 text-gray-800" target=_blank><span><svg class="h-4 w-4" fill=none height=1024 viewBox="0 0 1024 1024" width=1024 xmlns=http://www.w3.org/2000/svg><path d="M8 0C3.58 0 0 3.58 0 8C0 11.54 2.29 14.53 5.47 15.59C5.87 15.66 6.02 15.42 6.02 15.21C6.02 15.02 6.01 14.39 6.01 13.72C4 14.09 3.48 13.23 3.32 12.78C3.23 12.55 2.84 11.84 2.5 11.65C2.22 11.5 1.82 11.13 2.49 11.12C3.12 11.11 3.57 11.7 3.72 11.94C4.44 13.15 5.59 12.81 6.05 12.6C6.12 12.08 6.33 11.73 6.56 11.53C4.78 11.33 2.92 10.64 2.92 7.58C2.92 6.71 3.23 5.99 3.74 5.43C3.66 5.23 3.38 4.41 3.82 3.31C3.82 3.31 4.49 3.1 6.02 4.13C6.66 3.95 7.34 3.86 8.02 3.86C8.7 3.86 9.38 3.95 10.02 4.13C11.55 3.09 12.22 3.31 12.22 3.31C12.66 4.41 12.38 5.23 12.3 5.43C12.81 5.99 13.12 6.7 13.12 7.58C13.12 10.65 11.25 11.33 9.47 11.53C9.76 11.78 10.01 12.26 10.01 13.01C10.01 14.08 10 14.94 10 15.21C10 15.42 10.15 15.67 10.55 15.59C13.71 14.53 16 11.53 16 8C16 3.58 12.42 0 8 0Z" clip-rule=evenodd fill=currentColor fill-rule=evenodd transform=scale(64)></path></svg></span> <span class="hidden sm:block" data-svelte-h=svelte-1ob2gl>Github</span></a> <a href=mailto:loris@sigrist.dev class="flex items-center gap-2 rounded-md bg-black dark:bg-white dark:text-black md:px-3 px-1 py-1 text-white"><svg class="h-4 w-4" fill=none height=100% viewBox="0 0 24 24" width=100% xmlns=http://www.w3.org/2000/svg aria-hidden=true stroke=currentColor stroke-width=1.5><path d="M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75" stroke-linecap=round stroke-linejoin=round></path></svg> <span class="hidden md:block" data-svelte-h=svelte-lz17j7>Contact</span></a> <button class="rounded-md hover:bg-gray-100 hover:dark:bg-gray-800 aspect-square p-2" title="Toggle Theme"> <div class="contents dark:hidden"><svg class="h-4 w-4" fill=none height=100% viewBox="0 0 24 24" width=100% xmlns=http://www.w3.org/2000/svg aria-hidden=true stroke=currentColor stroke-width=1.5 slot=light><path d="M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z" stroke-linecap=round stroke-linejoin=round></path></svg></div> <div class="hidden dark:contents"><svg class="h-4 w-4" fill=none height=100% viewBox="0 0 24 24" width=100% xmlns=http://www.w3.org/2000/svg aria-hidden=true stroke=currentColor stroke-width=1.5 slot=dark><path d="M21.752 15.002A9.72 9.72 0 0 1 18 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 0 0 3 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 0 0 9.002-5.998Z" stroke-linecap=round stroke-linejoin=round></path></svg></div></button></div></header> <article class="container mx-auto px-4 dark:prose-invert max-w-[70ch] my-8 print:m-0 print:p-0 print:w-100 prose prose-slate"><h1 data-svelte-h=svelte-15fqgkm id=a-neat-pattern-for-melt-ui><a href=#a-neat-pattern-for-melt-ui>A neat pattern for Melt UI</a></h1> <p data-svelte-h=svelte-we6q8g>While working with Melt UI, I’ve stumbled upon a pattern that has been quite handy several times. Sharing stuff from the same builder between components using the <code>let:</code> directive. Here is an example:</p> <p data-svelte-h=svelte-sm233c>I often find myself in the need for a generic Tooltip component, one where the Trigger is some outside object. Since I use Melt UI for my projects anyway, I really want to use it’s Tooltip builder. However, it’s not immediately obvious how you can do that. Melt UI’s docs always have one component that fully encapsulates all the behavior.</p> <p data-svelte-h=svelte-fb05oo>But it’s actually quite doable thanks to the <code>let:</code> directive. You can use it to pass the Tooltip’s <code>trigger</code> prop to the outside world. Ideally this would be as simple as:</p> <!-- HTML_TAG_START --><pre class="shiki vitesse-dark" style=background-color:#121212;color:#dbd7caee tabindex=0><code><span class=line><span style=color:#758575DD>&lt;!--Tooltip.svelte--></span></span>
<span class=line><span style=color:#666>&lt;</span><span style=color:#4d9375>script</span><span style=color:#666>></span></span>
<span class=line><span style=color:#4d9375>    import</span><span style=color:#666> {</span><span style=color:#bd976a> createTooltip</span><span style=color:#666> }</span><span style=color:#4d9375> from</span><span style=color:#c98A7D99> '</span><span style=color:#c98a7d>@melt-ui/svelte</span><span style=color:#c98A7D99>'</span><span style=color:#666>;</span></span>
<span class=line></span>
<span class=line><span style=color:#cb7676>    const</span><span style=color:#666> {</span></span>
<span class=line><span style=color:#bd976a>    elements</span><span style=color:#666>:</span><span style=color:#666> {</span><span style=color:#bd976a> trigger</span><span style=color:#666>,</span><span style=color:#bd976a> content</span><span style=color:#666>,</span><span style=color:#bd976a> arrow</span><span style=color:#666> },</span></span>
<span class=line><span style=color:#bd976a>    states</span><span style=color:#666>:</span><span style=color:#666> {</span><span style=color:#bd976a> open</span><span style=color:#666> },</span></span>
<span class=line><span style=color:#666>  }</span><span style=color:#666> =</span><span style=color:#80a665> createTooltip</span><span style=color:#666>();</span></span>
<span class=line><span style=color:#666>&lt;/</span><span style=color:#4d9375>script</span><span style=color:#666>></span></span>
<span class=line></span>
<span class=line><span style=color:#666>&lt;</span><span style=color:#4d9375>slot</span><span style=color:#bd976a> {trigger}</span><span style=color:#666> /></span></span>
<span class=line></span>
<span class=line><span style=color:#666>{#</span><span style=color:#4d9375>if</span><span style=color:#bd976a> open</span><span style=color:#666>}</span></span>
<span class=line><span style=color:#dbd7CAEE>  ...</span></span>
<span class=line><span style=color:#666>{/</span><span style=color:#4d9375>if</span><span style=color:#666>}</span></span>
<span class=line></span>
<span class=line><span style=color:#758575DD>&lt;!--App.svelte--></span></span>
<span class=line><span style=color:#666>&lt;</span><span style=color:#4d9375>script</span><span style=color:#666>></span></span>
<span class=line><span style=color:#4d9375>    import</span><span style=color:#bd976a> Tooltip</span><span style=color:#4d9375> from</span><span style=color:#c98A7D99> '</span><span style=color:#c98a7d>./Tooltip.svelte</span><span style=color:#c98A7D99>'</span><span style=color:#666>;</span></span>
<span class=line><span style=color:#666>&lt;/</span><span style=color:#4d9375>script</span><span style=color:#666>></span></span>
<span class=line></span>
<span class=line><span style=color:#666>&lt;</span><span style=color:#b8a965>Tooltip</span><span style=color:#cb7676> let</span><span style=color:#666>:</span><span style=color:#bd976a>trigger</span><span style=color:#666>></span></span>
<span class=line><span style=color:#666>  &lt;</span><span style=color:#4d9375>button</span><span style=color:#4d9375> use</span><span style=color:#666>:</span><span style=color:#bd976a>trigger</span><span style=color:#bd976a> {</span><span style=color:#666>...</span><span style=color:#bd976a>$trigger}</span><span style=color:#666>></span><span style=color:#dbd7CAEE>Do Something</span><span style=color:#666>&lt;/</span><span style=color:#4d9375>button</span><span style=color:#666>></span></span>
<span class=line><span style=color:#666>&lt;/</span><span style=color:#b8a965>Tooltip</span><span style=color:#666>></span></span></code></pre><!-- HTML_TAG_END --> <p data-svelte-h=svelte-qcbyx>Unfortunately, this doesn’t work as of now. The problem is the <code>{...$trigger}</code> part. It’s not possible to bind to a store unless it comes from the component’s script tag. The workaround here is to bind the store inside the <code>Tooltip</code> component and pass it to the <code>trigger</code> slot.</p> <!-- HTML_TAG_START --><pre class="shiki vitesse-dark" style=background-color:#121212;color:#dbd7caee tabindex=0><code><span class=line><span style=color:#758575DD>&lt;!--Tooltip.svelte--></span></span>
<span class=line><span style=color:#666>&lt;</span><span style=color:#4d9375>script</span><span style=color:#666>></span></span>
<span class=line><span style=color:#4d9375>    import</span><span style=color:#666> {</span><span style=color:#bd976a> createTooltip</span><span style=color:#666> }</span><span style=color:#4d9375> from</span><span style=color:#c98A7D99> '</span><span style=color:#c98a7d>@melt-ui/svelte</span><span style=color:#c98A7D99>'</span><span style=color:#666>;</span></span>
<span class=line></span>
<span class=line><span style=color:#cb7676>    const</span><span style=color:#666> {</span></span>
<span class=line><span style=color:#bd976a>    elements</span><span style=color:#666>:</span><span style=color:#666> {</span><span style=color:#bd976a> trigger</span><span style=color:#666>,</span><span style=color:#bd976a> content</span><span style=color:#666>,</span><span style=color:#bd976a> arrow</span><span style=color:#666> },</span></span>
<span class=line><span style=color:#bd976a>    states</span><span style=color:#666>:</span><span style=color:#666> {</span><span style=color:#bd976a> open</span><span style=color:#666> },</span></span>
<span class=line><span style=color:#666>  }</span><span style=color:#666> =</span><span style=color:#80a665> createTooltip</span><span style=color:#666>();</span></span>
<span class=line><span style=color:#666>&lt;/</span><span style=color:#4d9375>script</span><span style=color:#666>></span></span>
<span class=line></span>
<span class=line><span style=color:#666>&lt;</span><span style=color:#4d9375>slot</span><span style=color:#bd976a> triggerAction</span><span style=color:#666>={</span><span style=color:#bd976a>trigger</span><span style=color:#666>}</span><span style=color:#bd976a> triggerProps</span><span style=color:#666>={$</span><span style=color:#bd976a>trigger</span><span style=color:#666>}</span><span style=color:#666> /></span></span>
<span class=line></span>
<span class=line><span style=color:#666>{#</span><span style=color:#4d9375>if</span><span style=color:#bd976a> open</span><span style=color:#666>}</span></span>
<span class=line><span style=color:#dbd7CAEE>  ...</span></span>
<span class=line><span style=color:#666>{/</span><span style=color:#4d9375>if</span><span style=color:#666>}</span></span>
<span class=line></span>
<span class=line><span style=color:#758575DD>&lt;!--App.svelte--></span></span>
<span class=line><span style=color:#666>&lt;</span><span style=color:#4d9375>script</span><span style=color:#666>></span></span>
<span class=line><span style=color:#4d9375>    import</span><span style=color:#bd976a> Tooltip</span><span style=color:#4d9375> from</span><span style=color:#c98A7D99> '</span><span style=color:#c98a7d>./Tooltip.svelte</span><span style=color:#c98A7D99>'</span><span style=color:#666>;</span></span>
<span class=line><span style=color:#666>&lt;/</span><span style=color:#4d9375>script</span><span style=color:#666>></span></span>
<span class=line></span>
<span class=line><span style=color:#666>&lt;</span><span style=color:#b8a965>Tooltip</span><span style=color:#cb7676> let</span><span style=color:#666>:</span><span style=color:#bd976a>triggerAction</span><span style=color:#cb7676> let</span><span style=color:#666>:</span><span style=color:#bd976a>triggerProps</span><span style=color:#666>></span></span>
<span class=line><span style=color:#666>  &lt;</span><span style=color:#4d9375>button</span><span style=color:#4d9375> use</span><span style=color:#666>:</span><span style=color:#bd976a>triggerAction</span><span style=color:#bd976a> {</span><span style=color:#666>...</span><span style=color:#bd976a>triggerProps}</span><span style=color:#666>></span><span style=color:#dbd7CAEE>Do Something</span><span style=color:#666>&lt;/</span><span style=color:#4d9375>button</span><span style=color:#666>></span></span>
<span class=line><span style=color:#666>&lt;/</span><span style=color:#b8a965>Tooltip</span><span style=color:#666>></span></span></code></pre><!-- HTML_TAG_END --> <p data-svelte-h=svelte-jwgito>That’s it.</p> <p data-svelte-h=svelte-1hcs8n2>This pattern is has been useful to me a couple times so I wanted to share.</article> <div class="bg-blue-700 h-3 progress-bar svelte-co5fg3"></div> <script>{__sveltekit_5jojkn={base:new URL(".",location).pathname.slice(0,-1)};let r=document.currentScript.parentElement,a=[null,null,null,{type:"data",data:{title:"A neat Pattern for Melt UI",description:" Sometimes I want to share behavior of my Melt UI based components with their children. I've found a neat pattern to do so.",published:new Date(16949952e5),author:"Loris Sigrist"},uses:{}}];Promise.all([import("./_app/immutable/entry/start.CvdZ12GV.js"),import("./_app/immutable/entry/app.D5sQfGwr.js")]).then(([e,t])=>{e.start(t,r,{node_ids:[0,2,3,12],data:a,form:null,error:null})}),"serviceWorker"in navigator&&addEventListener("load",function(){navigator.serviceWorker.register("./service-worker.js")})}</script> 