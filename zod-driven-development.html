<!DOCTYPE html> <html lang=en> <head> <meta charset=utf-8> <meta content="width=device-width" name=viewport> <link href=./_app/immutable/assets/Metadata.XOU45X0j.css rel=stylesheet> <link href=./_app/immutable/assets/3._r8Po9UL.css rel=stylesheet> <link href=./_app/immutable/entry/start.hM4-meDs.js rel=modulepreload> <link href=./_app/immutable/chunks/entry.QDsC_m_a.js rel=modulepreload> <link href=./_app/immutable/chunks/scheduler.BdRfwDxj.js rel=modulepreload> <link href=./_app/immutable/chunks/index.dHxtCu-E.js rel=modulepreload> <link href=./_app/immutable/entry/app.yOhkK9uY.js rel=modulepreload> <link href=./_app/immutable/chunks/preload-helper.0HuHagjb.js rel=modulepreload> <link href=./_app/immutable/chunks/index.DLvNlD75.js rel=modulepreload> <link href=./_app/immutable/nodes/0.DVVM6xgE.js rel=modulepreload> <link href=./_app/immutable/nodes/2.m9nV-UZD.js rel=modulepreload> <link href=./_app/immutable/chunks/Metadata.jOjh1OCo.js rel=modulepreload> <link href=./_app/immutable/chunks/stores.i8OlVWCF.js rel=modulepreload> <link href=./_app/immutable/chunks/each.6w4Ej4nR.js rel=modulepreload> <link href=./_app/immutable/chunks/theme.M7Te9enT.js rel=modulepreload> <link href=./_app/immutable/nodes/3.JmTqm4pe.js rel=modulepreload> <link href=./_app/immutable/nodes/18.4J_0J_gJ.js rel=modulepreload><title>Zod Driven Development</title><!-- HEAD_svelte-1quh51c_START --><script data-svelte-h=svelte-ctkbxh>if("localStorage"in window){const a="dark"===localStorage.getItem("theme"),b="light"===localStorage.getItem("theme"),c=!a&&!b;if(a)document.documentElement.classList.add("dark");else if(b)document.documentElement.classList.remove("dark");else if(c){const d=window.matchMedia("(prefers-color-scheme: dark)");d.matches?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))}}</script><!-- HEAD_svelte-1quh51c_END --><!-- HEAD_svelte-170d11p_START --><meta content="Zod Driven Development" name=og:title><meta content="Zod Driven Development" name=twitter:title><meta content=website name=og:type> <meta content=/og/Zod%20Driven%20Development.png name=og:image><link href=/_app/immutable/assets/favicon.bWL_QhgN.png rel=icon><meta content="Zod is a schmea library that has become the lingua franca of a lot of libraries. This promises unprecedented interoperability, flexibility and typesafety. In this article we'll push this to the limit by generating an entire app from zod schemas. Frontend, DB and all." name=description><meta content="Loris Sigrist" name=author><meta content=2023-07-17T00:00:00.000Z name=date><!-- HEAD_svelte-170d11p_END --> </head> <body data-sveltekit-preload-data=hover> <header class="flex flex-row container justify-between mx-auto print:hidden px-4 py-4"><div class="flex items-center flex-row gap-4" id=header-start data-svelte-h=svelte-1uvk4ap><a href=/ class="flex items-center flex-row gap-3"><picture><source srcset="/_app/immutable/assets/avatar.jvJgWt0b.avif, /_app/immutable/assets/avatar.lEMYeu1q.avif 2x" type=image/avif><source srcset="/_app/immutable/assets/avatar.d_cLdXwL.webp, /_app/immutable/assets/avatar._YZEt7_I.webp 2x" type=image/webp><source srcset="/_app/immutable/assets/avatar.SQsIqaYL.png, /_app/immutable/assets/avatar.UCFojQXP.png 2x" type=image/png><img alt="Loris Sigrist looking very handsome" class="aspect-square rounded-full w-9" height=412 src=/_app/immutable/assets/avatar.UCFojQXP.png width=412></picture> <span class="font-bold text-md">Loris Sigrist</span></a></div> <div class="flex items-center gap-2 flex-row sm:gap-4" id=header-end><a href=https://dithering.sigrist.dev target=_blank class="flex items-center gap-2 rounded-md dark:text-gray-200 hover:bg-gray-100 hover:dark:bg-gray-800 p-1 sm:px-3 text-gray-800" data-svelte-h=svelte-525hz2><span class="hidden sm:block">Dither Studio</span></a> <a href=https://zocker.sigrist.dev/ target=_blank class="flex items-center gap-2 rounded-md dark:text-gray-200 hover:bg-gray-100 hover:dark:bg-gray-800 p-1 sm:px-3 text-gray-800" data-svelte-h=svelte-1tefg7x><span class="hidden sm:block">Zocker</span></a> <a href=https://t18s.sigrist.dev/ target=_blank class="flex items-center gap-2 rounded-md dark:text-gray-200 hover:bg-gray-100 hover:dark:bg-gray-800 p-1 sm:px-3 text-gray-800" data-svelte-h=svelte-1q1lv9r><span class="hidden sm:block">t18s</span></a> <a href=https://www.github.com/LorisSigrist target=_blank class="flex items-center gap-2 rounded-md dark:text-gray-200 hover:bg-gray-100 hover:dark:bg-gray-800 p-1 sm:px-3 text-gray-800"><span><svg class="h-4 w-4" fill=none height=1024 viewBox="0 0 1024 1024" width=1024 xmlns=http://www.w3.org/2000/svg><path d="M8 0C3.58 0 0 3.58 0 8C0 11.54 2.29 14.53 5.47 15.59C5.87 15.66 6.02 15.42 6.02 15.21C6.02 15.02 6.01 14.39 6.01 13.72C4 14.09 3.48 13.23 3.32 12.78C3.23 12.55 2.84 11.84 2.5 11.65C2.22 11.5 1.82 11.13 2.49 11.12C3.12 11.11 3.57 11.7 3.72 11.94C4.44 13.15 5.59 12.81 6.05 12.6C6.12 12.08 6.33 11.73 6.56 11.53C4.78 11.33 2.92 10.64 2.92 7.58C2.92 6.71 3.23 5.99 3.74 5.43C3.66 5.23 3.38 4.41 3.82 3.31C3.82 3.31 4.49 3.1 6.02 4.13C6.66 3.95 7.34 3.86 8.02 3.86C8.7 3.86 9.38 3.95 10.02 4.13C11.55 3.09 12.22 3.31 12.22 3.31C12.66 4.41 12.38 5.23 12.3 5.43C12.81 5.99 13.12 6.7 13.12 7.58C13.12 10.65 11.25 11.33 9.47 11.53C9.76 11.78 10.01 12.26 10.01 13.01C10.01 14.08 10 14.94 10 15.21C10 15.42 10.15 15.67 10.55 15.59C13.71 14.53 16 11.53 16 8C16 3.58 12.42 0 8 0Z" clip-rule=evenodd fill=currentColor fill-rule=evenodd transform=scale(64)></path></svg></span> <span class="hidden sm:block" data-svelte-h=svelte-1ob2gl>Github</span></a> <a href=mailto:loris@sigrist.dev class="flex items-center gap-2 rounded-md bg-black dark:bg-white dark:text-black md:px-3 px-1 py-1 text-white"><svg class="h-4 w-4" fill=none height=100% viewBox="0 0 24 24" width=100% xmlns=http://www.w3.org/2000/svg aria-hidden=true stroke=currentColor stroke-width=1.5><path d="M21.75 6.75v10.5a2.25 2.25 0 01-2.25 2.25h-15a2.25 2.25 0 01-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25m19.5 0v.243a2.25 2.25 0 01-1.07 1.916l-7.5 4.615a2.25 2.25 0 01-2.36 0L3.32 8.91a2.25 2.25 0 01-1.07-1.916V6.75" stroke-linecap=round stroke-linejoin=round></path></svg> <span class="hidden md:block" data-svelte-h=svelte-lz17j7>Contact</span></a> <button class="rounded-md hover:bg-gray-100 hover:dark:bg-gray-800 aspect-square p-2" title="Toggle Theme"> <div class="contents dark:hidden"><svg class="h-4 w-4" fill=none height=100% viewBox="0 0 24 24" width=100% xmlns=http://www.w3.org/2000/svg aria-hidden=true stroke=currentColor stroke-width=1.5 slot=light><path d="M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z" stroke-linecap=round stroke-linejoin=round></path></svg></div> <div class="hidden dark:contents"><svg class="h-4 w-4" fill=none height=100% viewBox="0 0 24 24" width=100% xmlns=http://www.w3.org/2000/svg aria-hidden=true stroke=currentColor stroke-width=1.5 slot=dark><path d="M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z" stroke-linecap=round stroke-linejoin=round></path></svg></div></button></div></header> <article class="container mx-auto px-4 dark:prose-invert max-w-[70ch] my-8 print:m-0 print:p-0 print:w-100 prose prose-slate"><h1 data-svelte-h=svelte-ufx8du id=zod-driven-development><a href=#zod-driven-development>Zod Driven Development</a></h1> <p data-svelte-h=svelte-1d6oa7n>Over the last year we’ve been seing <a href=https://zod.dev target=_blank rel="noopener noreferrer">zod</a>, a schema validation library, grow into the lingua franca of many tools. From <a href=https://trpc.io/ target=_blank rel="noopener noreferrer">trpc</a>, to <a href=https://superforms.rocks/ target=_blank rel="noopener noreferrer">SvelteKit Superforms</a>, even <abbr title="Object Relational Mappers">ORMs</abbr> like <a href=https://orm.drizzle.team/ target=_blank rel="noopener noreferrer">drizzle</a>. I myself have contributed to this trend with <a href=https://zocker.sigrist.dev target=_blank rel="noopener noreferrer">zocker</a>, a mock-data generator that uses zod schemas to generate mock data.</p> <p data-svelte-h=svelte-1c3opg>This got me thinking. How far can I push this? Could I generate an entire app from a zod schema? This article documents my experiment.</p> <h2 data-svelte-h=svelte-1dbq4ie id=the-goalpost-and-how-to-get-there><a href=#the-goalpost-and-how-to-get-there>The Goalpost and how to get there</a></h2> <p data-svelte-h=svelte-1lmsl0h>Since this is a toy project, I’m going to keep the scope limited to a <abbr title="Create Read Update Delete">CRUD</abbr> app with multiple entities. Let’s build a library app. We’ll have <code>Books</code>, <code>Authors</code> and <code>Publishers</code>. Each book has one author and one publisher. Each author can have multiple books. Each publisher can have multiple books.</p> <p data-svelte-h=svelte-1ylsc2g>We will be using the following tools:</p> <ul data-svelte-h=svelte-1ozutpm><li><a href=https://orm.drizzle.team/ target=_blank rel="noopener noreferrer">drizzle</a> as the <abbr title="Object Relational Mapper">ORM</abbr></li> <li><a href=https://orm.drizzle.team/docs/zod target=_blank rel="noopener noreferrer">drizzle-zod</a>, a first party way to generate the zod schemas from drizzle models</li> <li><a href=https://superforms.rocks/ target=_blank rel="noopener noreferrer">sveltekit superforms</a> to generate and validate forms from the zod schemas</li> <li><a href=https://kit.svelte.dev/ target=_blank rel="noopener noreferrer">sveltekit</a> as the application framework</ul> <h2 data-svelte-h=svelte-kmpttn id=conclusion><a href=#conclusion>Conclusion</a></h2> <p data-svelte-h=svelte-1wyw34r>Zod Driven Development has some very obvious strengths. Development speed and maintainability. But, once more complexity get’s added, such as authorization, complex business logic, and more complex relationships, it starts to struggle.</p> <p data-svelte-h=svelte-cgzeq0>Earlier iterations of similar ideas, such as model-driven development, have caused many development failures when the complexity of the projects grew beyond the capabilities of the tool. <a href=https://healthcare.gov target=_blank rel="noopener noreferrer">healthcare.gov</a> is a prime example of this.</p> <p data-svelte-h=svelte-1irwun8>Fortunately, <abbr title="Zod Driven Development">ZDD</abbr> is not an all or nothing approach. You can use this for the trivial parts of your app, and write the more complex parts the way you usually would. It only gets dangerous if your tooling grows more complex than the app itself.</p> <p data-svelte-h=svelte-14seq6k>While I likely won’t be generating entire apps like this, I will certainly add some of these tools to my toolkit. The form-generation & validation, the automagic UI, and the mock-data generation have all been fantastic to work with. <a href=https://orm.drizzle.team/ target=_blank rel="noopener noreferrer">Drizzle</a> is not quite there yet, but it’s evolving fast and I’m excited to see where it goes.</article> <div class="bg-blue-700 h-3 progress-bar svelte-6gbik3"></div> <script>{__sveltekit_4nom0h={base:new URL(".",location).pathname.slice(0,-1)};const a=document.currentScript.parentElement,b=[null,null,null,{type:"data",data:{title:"Zod Driven Development",description:"Zod is a schmea library that has become the lingua franca of a lot of libraries. This promises unprecedented interoperability, flexibility and typesafety. In this article we'll push this to the limit by generating an entire app from zod schemas. Frontend, DB and all.",published:new Date(1689552e6),author:"Loris Sigrist",draft:!0},uses:{}}];Promise.all([import("./_app/immutable/entry/start.hM4-meDs.js"),import("./_app/immutable/entry/app.yOhkK9uY.js")]).then(([e,t])=>{e.start(t,a,{node_ids:[0,2,3,18],data:b,form:null,error:null})}),"serviceWorker"in navigator&&addEventListener("load",function(){navigator.serviceWorker.register("./service-worker.js")})}</script> <!--
			                                                   ,,                  
'7MMF'                         db               .M"""bgd  db                      db            mm    
  MM                                           ,MI    "Y                                        MM    
  MM         ,pW"Wq.'7Mb,od8 '7MM  ,pP"Ybd     'MMb.    '7MM  .P"Ybmmm '7Mb,od8 '7MM  ,pP"Ybd mmMMmm  
  MM        6W'   'Wb MM' "'   MM  8I   '"       'YMMNq.  MM :MI  I8     MM' "'   MM  8I   '"   MM    
  MM      , 8M     M8 MM       MM  'YMMMa.     .     'MM  MM  WmmmP"     MM       MM  'YMMMa.   MM    
  MM     ,M YA.   ,A9 MM       MM  L.   I8     Mb     dM  MM 8M          MM       MM  L.   I8   MM    
.JMMmmmmMMM  'Ybmd9'.JMML.   .JMML.M9mmmP'     P"Ybmmd" .JMML.YMMMMMb  .JMML.   .JMML.M9mmmP'   'Mbmo 
															 6'     dP                                
															 ^bmmmd'                                  
-->