<!DOCTYPE html> <html lang=en> <head> <meta charset=utf-8> <link href=./favicon.png rel=icon> <meta content="width=device-width" name=viewport> <meta content="" http-equiv=content-security-policy> <link href=./_app/immutable/assets/Icon.6da1a24e.css rel=stylesheet> <link href=./_app/immutable/assets/3.affff02e.css rel=stylesheet> <link href=./_app/immutable/entry/start.580a8245.js rel=modulepreload> <link href=./_app/immutable/chunks/index.4f636332.js rel=modulepreload> <link href=./_app/immutable/chunks/singletons.44a311c6.js rel=modulepreload> <link href=./_app/immutable/chunks/index.49c0ab96.js rel=modulepreload> <link href=./_app/immutable/entry/app.c5e4f259.js rel=modulepreload> <link href=./_app/immutable/chunks/preload-helper.41c905a7.js rel=modulepreload> <link href=./_app/immutable/nodes/0.dfabd0d5.js rel=modulepreload> <link href=./_app/immutable/nodes/2.b34511f6.js rel=modulepreload> <link href=./_app/immutable/chunks/Icon.85c9c75e.js rel=modulepreload> <link href=./_app/immutable/chunks/stores.f8a800d2.js rel=modulepreload> <link href=./_app/immutable/chunks/theme.2b84723d.js rel=modulepreload> <link href=./_app/immutable/nodes/3.dba91379.js rel=modulepreload> <link href=./_app/immutable/nodes/12.99d6fd53.js rel=modulepreload><title>The poor man's scheduled post</title><!-- HEAD_svelte-1quh51c_START --><script>if("localStorage"in window){const a="dark"===localStorage.getItem("theme"),b="light"===localStorage.getItem("theme"),c=!a&&!b;if(a)document.documentElement.classList.add("dark");else if(b)document.documentElement.classList.remove("dark");else if(c){const d=window.matchMedia("(prefers-color-scheme: dark)");d.matches?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))}}</script><!-- HEAD_svelte-1quh51c_END --><!-- HEAD_svelte-13v8b90_START --><meta content="The poor man's scheduled post" name=og:title><meta content="The poor man's scheduled post" name=twitter:title><meta content=website name=og:type><meta content="/og/The%20poor%20man's%20scheduled%20post.png" name=og:image><meta content="If you build your site on github pages or netlify, you don't have a server to schedule posts. This article gets around that by using a github action to periodically redeploy your site." name=description><meta content="Loris Sigrist" name=author><meta content=2023-07-24T00:00:00.000Z name=date><!-- HEAD_svelte-13v8b90_END --> </head> <body data-sveltekit-preload-data=hover> <header class="flex flex-row container justify-between mx-auto print:hidden px-4 py-4"><div class="flex flex-row items-center gap-4" id=header-start><a href=/ class="flex flex-row items-center gap-3"><img alt="Loris Sigrist looking very handsome" class="aspect-square rounded-full w-9" height=412 src=/_app/immutable/assets/avatar.4558b389.png style=background-color:#ababab width=412> <span class="font-bold text-md">Loris Sigrist</span></a></div> <div class="flex flex-row items-center gap-2 sm:gap-4" id=header-end><a href=https://www.github.com/LorisSigrist class="flex items-center gap-2 dark:text-gray-200 hover:bg-gray-100 hover:dark:bg-gray-800 p-1 rounded-md sm:px-3 text-gray-800" target=_blank><span><svg class="h-4 w-4" fill=none height=1024 viewBox="0 0 1024 1024" width=1024 xmlns=http://www.w3.org/2000/svg><path d="M8 0C3.58 0 0 3.58 0 8C0 11.54 2.29 14.53 5.47 15.59C5.87 15.66 6.02 15.42 6.02 15.21C6.02 15.02 6.01 14.39 6.01 13.72C4 14.09 3.48 13.23 3.32 12.78C3.23 12.55 2.84 11.84 2.5 11.65C2.22 11.5 1.82 11.13 2.49 11.12C3.12 11.11 3.57 11.7 3.72 11.94C4.44 13.15 5.59 12.81 6.05 12.6C6.12 12.08 6.33 11.73 6.56 11.53C4.78 11.33 2.92 10.64 2.92 7.58C2.92 6.71 3.23 5.99 3.74 5.43C3.66 5.23 3.38 4.41 3.82 3.31C3.82 3.31 4.49 3.1 6.02 4.13C6.66 3.95 7.34 3.86 8.02 3.86C8.7 3.86 9.38 3.95 10.02 4.13C11.55 3.09 12.22 3.31 12.22 3.31C12.66 4.41 12.38 5.23 12.3 5.43C12.81 5.99 13.12 6.7 13.12 7.58C13.12 10.65 11.25 11.33 9.47 11.53C9.76 11.78 10.01 12.26 10.01 13.01C10.01 14.08 10 14.94 10 15.21C10 15.42 10.15 15.67 10.55 15.59C13.71 14.53 16 11.53 16 8C16 3.58 12.42 0 8 0Z" clip-rule=evenodd fill=currentColor fill-rule=evenodd transform=scale(64)></path></svg></span> <span class="hidden sm:block">Github</span></a> <button class="aspect-square hover:bg-gray-100 hover:dark:bg-gray-800 p-2 rounded-md" title="Toggle Theme"> <div class="contents dark:hidden"><svg class="h-4 w-4" fill=none height=100% viewBox="0 0 24 24" width=100% xmlns=http://www.w3.org/2000/svg aria-hidden=true slot=light stroke=currentColor stroke-width=1.5><path d="M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z" stroke-linecap=round stroke-linejoin=round></path></svg></div> <div class="hidden dark:contents"><svg class="h-4 w-4" fill=none height=100% viewBox="0 0 24 24" width=100% xmlns=http://www.w3.org/2000/svg aria-hidden=true slot=dark stroke=currentColor stroke-width=1.5><path d="M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z" stroke-linecap=round stroke-linejoin=round></path></svg></div></button></div></header> <article class="container mx-auto px-4 dark:prose-invert max-w-[70ch] my-8 print:m-0 print:p-0 print:w-100 prose prose-slate"><h1 id=the-poor-mans-scheduled-post><a href=#the-poor-mans-scheduled-post>The poor man’s scheduled post</a></h1> <p>While working on this site, I quickly developed the desire to schedule posts. Often I would write a post, and then immediately have another idea for another post. Not wanting to publish them all at once, I would often just save the post as a draft and come back to it later. Having a way to schedule posts would be much more convenient.</p> <p>But, this site is currently (July 2023) hosted on GitHub Pages, which only hosts static sites. This makes it difficult to schedule posts, as there is no server to decide when a post should become available. </p> <h2 id=the-solution><a href=#the-solution>The solution</a></h2> <p>The solution I came up with is quite a brute force one, but it works very well. During the site-build, filter out any posts that have a publish date in the future. Then have a Github Actions cron-job that rebuilds and redeploys the site every day. This will cause the posts to become available on the day they are scheduled to be published.</p> <p>Doing this is quite straight forward. Go into your GitHub Actions workflow file, and add a <code>schedule</code> trigger. Make it run every day at midnight.</p> <pre class=language-yml><!-- HTML_TAG_START --><code class=language-yml><span class="token atrule key">name</span><span class="token punctuation">:</span> Build and Deploy
<span class="token atrule key">on</span><span class="token punctuation">:</span> 
  <span class="token comment"># The Schedule on which to redeploy the site (every day at midnight)</span>
  <span class="token atrule key">schedule</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token atrule key">cron</span><span class="token punctuation">:</span>  <span class="token string">'0 0 * * *'</span>

  <span class="token comment"># Other events to trigger the build and deploy</span>
  <span class="token atrule key">push</span><span class="token punctuation">:</span>
    <span class="token atrule key">branches</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> main

<span class="token atrule key">jobs</span><span class="token punctuation">:</span>
  <span class="token atrule key">build-and-deploy</span><span class="token punctuation">:</span>
    <span class="token punctuation">...</span> <span class="token comment"># Your build and deploy steps</span></code><!-- HTML_TAG_END --></pre> <p>This is very wasteful, but with GitHub’s generous free tier you can easily get away with it. It’s also very reliable. I’ve tested this by building an <a href=https://today.sigrist.dev target=_blank rel="noopener noreferrer">experiment</a> that just prerenders the current date every day. It’s been running for a few months now, and it’s never failed. Thanks to it’s very fast build times, it has used so little of my free minutes that it doesn’t even show up on my usage graph.</p> <p>The build-time for this site is a lot longer, at almost two minutes, but that’s still only 60 out of the 2000 free minutes per month. I’m willing to pay that price for the convenience of scheduled posts.</article> <div class="bg-blue-700 h-3 progress-bar svelte-6gbik3"></div> <script>{__sveltekit_1a0hdzx={base:new URL(".",location).pathname.slice(0,-1),env:{}};const a=document.currentScript.parentElement,b=[null,null,null,{type:"data",data:{title:"The poor man's scheduled post",description:"If you build your site on github pages or netlify, you don't have a server to schedule posts. This article gets around that by using a github action to periodically redeploy your site.",published:new Date(16901568e5),author:"Loris Sigrist"},uses:{}}];Promise.all([import("./_app/immutable/entry/start.580a8245.js"),import("./_app/immutable/entry/app.c5e4f259.js")]).then(([e,t])=>{e.start(t,a,{node_ids:[0,2,3,12],data:b,form:null,error:null})}),"serviceWorker"in navigator&&addEventListener("load",function(){navigator.serviceWorker.register("./service-worker.js")})}</script> 